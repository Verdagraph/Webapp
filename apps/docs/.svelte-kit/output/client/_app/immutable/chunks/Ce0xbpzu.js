var rr=Object.defineProperty;var rn=t=>{throw TypeError(t)};var sr=(t,e,n)=>e in t?rr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var St=(t,e,n)=>sr(t,typeof e!="symbol"?e+"":e,n),sn=(t,e,n)=>e.has(t)||rn("Cannot "+n);var x=(t,e,n)=>(sn(t,e,"read from private field"),n?n.call(t):e.get(t)),B=(t,e,n)=>e.has(t)?rn("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),at=(t,e,n,r)=>(sn(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n);import"./CWj6FrbW.js";import{i as Mn}from"./D4tMsWHK.js";import{ap as dt,M as _,a8 as q,N as U,p as rt,a as st,f as E,ac as Ht,c as G,K as yt,r as V,t as mt,s as Z,n as zt,U as ir,ay as or}from"./C33ZBluP.js";import{s as Sn}from"./C-nYA6EH.js";import{S as zn,E as jn,P as On,F as lr,d as hr,D as ar,T as ur,f as on,u as cr,g as fr,M as ln,h as dr,j as pr,I as Ae,l as Ye,c as Dt,m as Cn,n as gr,o as mr,C as vr,p as yr,q as wr,r as _r,s as xr,t as br,z as Te,B as He,v as kr,w as Pr,e as Qe,b as In,x as Mr,i as En}from"./b-jnAxWt.js";import{c as W,a as P,t as T,b as Yt}from"./VptmxkcR.js";import{p as R,i as ut,r as ft,s as ht,c as K,l as Sr}from"./QJ-cPXuW.js";import{c as zr,a as jr,u as Ne,b as Or,d as Kt,e as et,m as vt,f as gt,n as Ft,L as hn,I as Cr,h as an,r as Ir,M as un,s as An,K as Er,j as cn}from"./D-1toLFz.js";import{s as it}from"./BQUvzZYV.js";import{p as Ar}from"./VBhAFdqd.js";import{o as Nr}from"./BKUxGAWh.js";import{_ as Dr}from"./jKjWACjA.js";const fn={repository:"https://github.com/Verdagraph",donation:"https://en.liberapay.com/Verdagraph/"};function Rr(t){return{content:`data-${t}-content`,trigger:`data-${t}-trigger`,overlay:`data-${t}-overlay`,title:`data-${t}-title`,description:`data-${t}-description`,close:`data-${t}-close`,cancel:`data-${t}-cancel`,action:`data-${t}-action`}}var re,se,ie,oe,le,he,ae,ue,ce,fe,de;class Lr{constructor(e){St(this,"open");St(this,"variant");B(this,re,dt(null));B(this,se,dt(null));B(this,ie,dt(null));B(this,oe,dt(null));B(this,le,dt(void 0));B(this,he,dt(void 0));B(this,ae,dt(void 0));B(this,ue,dt(void 0));B(this,ce,dt(null));B(this,fe,U(()=>Rr(this.variant.current)));B(this,de,U(()=>({"data-state":jr(this.open.current)})));this.open=e.open,this.variant=e.variant,this.handleOpen=this.handleOpen.bind(this),this.handleClose=this.handleClose.bind(this)}get triggerNode(){return _(x(this,re))}set triggerNode(e){q(x(this,re),e,!0)}get titleNode(){return _(x(this,se))}set titleNode(e){q(x(this,se),e,!0)}get contentNode(){return _(x(this,ie))}set contentNode(e){q(x(this,ie),e,!0)}get descriptionNode(){return _(x(this,oe))}set descriptionNode(e){q(x(this,oe),e,!0)}get contentId(){return _(x(this,le))}set contentId(e){q(x(this,le),e,!0)}get titleId(){return _(x(this,he))}set titleId(e){q(x(this,he),e,!0)}get triggerId(){return _(x(this,ae))}set triggerId(e){q(x(this,ae),e,!0)}get descriptionId(){return _(x(this,ue))}set descriptionId(e){q(x(this,ue),e,!0)}get cancelNode(){return _(x(this,ce))}set cancelNode(e){q(x(this,ce),e,!0)}get attrs(){return _(x(this,fe))}set attrs(e){q(x(this,fe),e)}handleOpen(){this.open.current||(this.open.current=!0)}handleClose(){this.open.current&&(this.open.current=!1)}get sharedProps(){return _(x(this,de))}set sharedProps(e){q(x(this,de),e)}}re=new WeakMap,se=new WeakMap,ie=new WeakMap,oe=new WeakMap,le=new WeakMap,he=new WeakMap,ae=new WeakMap,ue=new WeakMap,ce=new WeakMap,fe=new WeakMap,de=new WeakMap;var Ut,pe,pt,It,ge;class Tr{constructor(e,n){B(this,Ut);B(this,pe);B(this,pt);B(this,It);St(this,"onclick",e=>{x(this,It).current||e.button>0||x(this,pt).handleOpen()});St(this,"onpointerdown",e=>{x(this,It).current||e.button>0||e.preventDefault()});St(this,"onkeydown",e=>{x(this,It).current||(e.key===zn||e.key===jn)&&(e.preventDefault(),x(this,pt).handleOpen())});B(this,ge,U(()=>({id:x(this,Ut).current,"aria-haspopup":"dialog","aria-expanded":Or(x(this,pt).open.current),"aria-controls":x(this,pt).contentId,[x(this,pt).attrs.trigger]:"",onpointerdown:this.onpointerdown,onkeydown:this.onkeydown,onclick:this.onclick,...x(this,pt).sharedProps})));at(this,Ut,e.id),at(this,pt,n),at(this,pe,e.ref),at(this,It,e.disabled),this.onclick=this.onclick.bind(this),this.onpointerdown=this.onpointerdown.bind(this),this.onkeydown=this.onkeydown.bind(this),Ne({id:x(this,Ut),ref:x(this,pe),onRefChange:r=>{x(this,pt).triggerNode=r,x(this,pt).triggerId=r==null?void 0:r.id}})}get props(){return _(x(this,ge))}set props(e){q(x(this,ge),e)}}Ut=new WeakMap,pe=new WeakMap,pt=new WeakMap,It=new WeakMap,ge=new WeakMap;var Jt,me,bt,ve,Et,Ee,ye;class Br{constructor(e,n){B(this,Jt);B(this,me);B(this,bt);B(this,ve);B(this,Et);B(this,Ee,U(()=>x(this,bt).attrs[x(this,ve).current]));B(this,ye,U(()=>({id:x(this,Jt).current,[_(x(this,Ee))]:"",onpointerdown:this.onpointerdown,onclick:this.onclick,onkeydown:this.onkeydown,...x(this,bt).sharedProps})));at(this,bt,n),at(this,me,e.ref),at(this,Jt,e.id),at(this,ve,e.variant),at(this,Et,e.disabled),this.onclick=this.onclick.bind(this),this.onpointerdown=this.onpointerdown.bind(this),this.onkeydown=this.onkeydown.bind(this),Ne({id:x(this,Jt),ref:x(this,me),deps:()=>x(this,bt).open.current})}onclick(e){x(this,Et).current||e.button>0||x(this,bt).handleClose()}onpointerdown(e){x(this,Et).current||e.button>0||(e.preventDefault(),x(this,bt).handleClose())}onkeydown(e){x(this,Et).current||(e.key===zn||e.key===jn)&&(e.preventDefault(),x(this,bt).handleClose())}get props(){return _(x(this,ye))}set props(e){q(x(this,ye),e)}}Jt=new WeakMap,me=new WeakMap,bt=new WeakMap,ve=new WeakMap,Et=new WeakMap,Ee=new WeakMap,ye=new WeakMap;var Gt,we,_e,xe;class Fr{constructor(e,n){B(this,Gt);B(this,we);St(this,"root");B(this,_e,U(()=>({open:this.root.open.current})));B(this,xe,U(()=>({id:x(this,Gt).current,role:this.root.variant.current==="alert-dialog"?"alertdialog":"dialog","aria-describedby":this.root.descriptionId,"aria-labelledby":this.root.titleId,[this.root.attrs.content]:"",style:{pointerEvents:"auto"},...this.root.sharedProps})));at(this,Gt,e.id),this.root=n,at(this,we,e.ref),Ne({id:x(this,Gt),ref:x(this,we),deps:()=>this.root.open.current,onRefChange:r=>{this.root.contentNode=r,this.root.contentId=r==null?void 0:r.id}})}get snippetProps(){return _(x(this,_e))}set snippetProps(e){q(x(this,_e),e)}get props(){return _(x(this,xe))}set props(e){q(x(this,xe),e)}}Gt=new WeakMap,we=new WeakMap,_e=new WeakMap,xe=new WeakMap;var Vt,be,ke,Pe;class Ur{constructor(e,n){B(this,Vt);B(this,be);St(this,"root");B(this,ke,U(()=>({open:this.root.open.current})));B(this,Pe,U(()=>({id:x(this,Vt).current,[this.root.attrs.overlay]:"",style:{pointerEvents:"auto"},...this.root.sharedProps})));at(this,Vt,e.id),at(this,be,e.ref),this.root=n,Ne({id:x(this,Vt),ref:x(this,be),deps:()=>this.root.open.current})}get snippetProps(){return _(x(this,ke))}set snippetProps(e){q(x(this,ke),e)}get props(){return _(x(this,Pe))}set props(e){q(x(this,Pe),e)}}Vt=new WeakMap,be=new WeakMap,ke=new WeakMap,Pe=new WeakMap;const[Jr,De]=zr("Dialog.Root");function Gr(t){return Jr(new Lr(t))}function Vr(t){const e=De();return new Tr(t,e)}function Wr(t){return new Fr(t,De())}function Kr(t){return new Ur(t,De())}function $r(t){return new Br(t,De())}function Xr({forceMount:t,present:e,trapFocus:n,open:r}){return t?r&&n:e&&n&&r}var Zr=T("<div><!></div>");function Nn(t,e){rt(e,!0);let n=R(e,"id",19,Kt),r=R(e,"forceMount",3,!1),s=R(e,"ref",15,null),i=ft(e,["$$slots","$$events","$$legacy","id","forceMount","child","children","ref"]);const o=Kr({id:et.with(()=>n()),ref:et.with(()=>s(),a=>s(a))}),l=U(()=>vt(i,o.props)),h=U(()=>o.root.open.current||r());On(t,{get id(){return n()},get present(){return _(h)},presence:u=>{var m=W(),f=E(m);{var c=d=>{var g=W(),y=E(g),v=Ht(()=>({props:vt(_(l)),...o.snippetProps}));it(y,()=>e.child,()=>_(v)),P(d,g)},p=d=>{var g=Zr();let y;var v=G(g);it(v,()=>e.children??yt,()=>o.snippetProps),V(g),mt(b=>y=gt(g,y,{...b}),[()=>vt(_(l))]),P(d,g)};ut(f,d=>{e.child?d(c):d(p,!1)})}P(u,m)},$$slots:{presence:!0}}),st()}var Yr=T("<button><!></button>");function Dn(t,e){rt(e,!0);let n=R(e,"id",19,Kt),r=R(e,"ref",15,null),s=R(e,"disabled",3,!1),i=ft(e,["$$slots","$$events","$$legacy","id","ref","children","child","disabled"]);const o=Vr({id:et.with(()=>n()),ref:et.with(()=>r(),f=>r(f)),disabled:et.with(()=>!!s())}),l=U(()=>vt(i,o.props));var h=W(),a=E(h);{var u=f=>{var c=W(),p=E(c);it(p,()=>e.child,()=>({props:_(l)})),P(f,c)},m=f=>{var c=Yr();let p;var d=G(c);it(d,()=>e.children??yt),V(c),mt(()=>p=gt(c,p,{..._(l)})),P(f,c)};ut(a,f=>{e.child?f(u):f(m,!1)})}P(t,h),st()}function Rn(t,e){rt(e,!0);let n=R(e,"open",15,!1),r=R(e,"onOpenChange",3,Ft),s=R(e,"controlledOpen",3,!1);Gr({variant:et.with(()=>"dialog"),open:et.with(()=>n(),l=>{s()||n(l),r()(l)})});var i=W(),o=E(i);it(o,()=>e.children??yt),P(t,i),st()}var Hr=T("<button><!></button>");function Ln(t,e){rt(e,!0);let n=R(e,"id",19,Kt),r=R(e,"ref",15,null),s=R(e,"disabled",3,!1),i=ft(e,["$$slots","$$events","$$legacy","children","child","id","ref","disabled"]);const o=$r({variant:et.with(()=>"close"),id:et.with(()=>n()),ref:et.with(()=>r(),f=>r(f)),disabled:et.with(()=>!!s())}),l=U(()=>vt(i,o.props));var h=W(),a=E(h);{var u=f=>{var c=W(),p=E(c);it(p,()=>e.child,()=>({props:_(l)})),P(f,c)},m=f=>{var c=Hr();let p;var d=G(c);it(d,()=>e.children??yt),V(c),mt(()=>p=gt(c,p,{..._(l)})),P(f,c)};ut(a,f=>{e.child?f(u):f(m,!1)})}P(t,h),st()}var Qr=T("<!> <!>",1),qr=T("<!> <div><!></div>",1);function Tn(t,e){rt(e,!0);let n=R(e,"id",19,Kt),r=R(e,"ref",15,null),s=R(e,"forceMount",3,!1),i=R(e,"onCloseAutoFocus",3,Ft),o=R(e,"onEscapeKeydown",3,Ft),l=R(e,"onInteractOutside",3,Ft),h=R(e,"trapFocus",3,!0),a=R(e,"preventScroll",3,!0),u=R(e,"restoreScrollDelay",3,null),m=ft(e,["$$slots","$$events","$$legacy","id","children","child","ref","forceMount","onCloseAutoFocus","onEscapeKeydown","onInteractOutside","trapFocus","preventScroll","restoreScrollDelay"]);const f=Wr({id:et.with(()=>n()),ref:et.with(()=>r(),d=>r(d))}),c=U(()=>vt(m,f.props)),p=U(()=>f.root.open.current||s());On(t,ht(()=>_(c),{get forceMount(){return s()},get present(){return _(p)},presence:(g,y)=>{let v=()=>y==null?void 0:y().present;const b=U(()=>Xr({forceMount:s(),present:v().current,trapFocus:h(),open:f.root.open.current}));lr(g,ht({loop:!0,get trapFocus(){return _(b)}},()=>_(c),{onCloseAutoFocus:k=>{var w;i()(k),!k.defaultPrevented&&((w=f.root.triggerNode)==null||w.focus())},focusScope:(k,w)=>{let M=()=>w==null?void 0:w().props;hr(k,ht(()=>_(c),{get enabled(){return v().current},onEscapeKeydown:O=>{o()(O),!O.defaultPrevented&&f.root.handleClose()},children:(O,j)=>{ar(O,ht(()=>_(c),{get enabled(){return v().current},onInteractOutside:A=>{l()(A),!A.defaultPrevented&&f.root.handleClose()},children:(A,I)=>{ur(A,ht(()=>_(c),{get enabled(){return v().current},children:(F,L)=>{var D=W(),N=E(D);{var Y=J=>{var tt=Qr(),nt=E(tt);{var ot=S=>{on(S,{get preventScroll(){return a()},get restoreScrollDelay(){return u()}})};ut(nt,S=>{f.root.open.current&&S(ot)})}var ct=Z(nt,2),Mt=Ht(()=>({props:vt(_(c),M()),...f.snippetProps}));it(ct,()=>e.child,()=>_(Mt)),P(J,tt)},$=J=>{var tt=qr(),nt=E(tt);on(nt,{get preventScroll(){return a()}});var ot=Z(nt,2);let ct;var Mt=G(ot);it(Mt,()=>e.children??yt),V(ot),mt(S=>ct=gt(ot,ct,{...S}),[()=>vt(_(c),M())]),P(J,tt)};ut(N,J=>{e.child?J(Y):J($,!1)})}P(F,D)},$$slots:{default:!0}}))},$$slots:{default:!0}}))},$$slots:{default:!0}}))},$$slots:{focusScope:!0}}))},$$slots:{presence:!0}})),st()}var ts=T("<div><div><!></div></div>"),es=T("<!> <!>",1),ns=T("<div><div><!></div></div>"),rs=T("<!> <!>",1);function ss(t,e){rt(e,!0);let n=R(e,"id",19,Kt),r=R(e,"ref",15,null),s=R(e,"loop",3,!0),i=R(e,"onInteractOutside",3,Ft),o=R(e,"onEscapeKeydown",3,Ft),l=R(e,"forceMount",3,!1),h=ft(e,["$$slots","$$events","$$legacy","id","child","children","ref","loop","onInteractOutside","onEscapeKeydown","forceMount"]),a=dt(!1);const u=cr({id:et.with(()=>n()),loop:et.with(()=>s()),ref:et.with(()=>r(),v=>r(v)),isMounted:et.with(()=>_(a))}),m=U(()=>vt(h,u.props));function f(v){u.handleInteractOutside(v),!v.defaultPrevented&&(i()(v),!v.defaultPrevented&&u.parentMenu.onClose())}function c(v){o()(v),!v.defaultPrevented&&u.parentMenu.onClose()}var p=W(),d=E(p);{var g=v=>{fr(v,ht(()=>_(m),{get enabled(){return u.parentMenu.open.current},onInteractOutside:f,onEscapeKeydown:c,trapFocus:!0,get loop(){return s()},forceMount:!0,get id(){return n()},popper:(C,k)=>{let w=()=>k==null?void 0:k().props,M=()=>k==null?void 0:k().wrapperProps;var O=es();const j=U(()=>vt(w(),{style:hn("dropdown-menu")}));var A=E(O);{var I=D=>{var N=W(),Y=E(N),$=Ht(()=>({props:_(j),wrapperProps:M(),...u.snippetProps}));it(Y,()=>e.child,()=>_($)),P(D,N)},F=D=>{var N=ts();let Y;var $=G(N);let J;var tt=G($);it(tt,()=>e.children??yt),V($),V(N),mt(()=>{Y=gt(N,Y,{...M()}),J=gt($,J,{..._(j)})}),P(D,N)};ut(A,D=>{e.child?D(I):D(F,!1)})}var L=Z(A,2);ln(L,{get isMounted(){return _(a)},set isMounted(D){q(a,D,!0)}}),P(C,O)},$$slots:{popper:!0}}))},y=(v,b)=>{{var C=k=>{dr(k,ht(()=>_(m),{get present(){return u.parentMenu.open.current},onInteractOutside:f,onEscapeKeydown:c,trapFocus:!0,get loop(){return s()},forceMount:!1,get id(){return n()},popper:(M,O)=>{let j=()=>O==null?void 0:O().props,A=()=>O==null?void 0:O().wrapperProps;var I=rs();const F=U(()=>vt(j(),{style:hn("dropdown-menu")}));var L=E(I);{var D=$=>{var J=W(),tt=E(J),nt=Ht(()=>({props:_(F),wrapperProps:A(),...u.snippetProps}));it(tt,()=>e.child,()=>_(nt)),P($,J)},N=$=>{var J=ns();let tt;var nt=G(J);let ot;var ct=G(nt);it(ct,()=>e.children??yt),V(nt),V(J),mt(()=>{tt=gt(J,tt,{...A()}),ot=gt(nt,ot,{..._(F)})}),P($,J)};ut(L,$=>{e.child?$(D):$(N,!1)})}var Y=Z(L,2);ln(Y,{get isMounted(){return _(a)},set isMounted($){q(a,$,!0)}}),P(M,I)},$$slots:{popper:!0}}))};ut(v,k=>{l()||k(C)},b)}};ut(d,v=>{l()?v(g):v(y,!1)})}P(t,p),st()}var is=T("<button><!></button>");function os(t,e){rt(e,!0);let n=R(e,"id",19,Kt),r=R(e,"ref",15,null),s=R(e,"disabled",3,!1),i=R(e,"type",3,"button"),o=ft(e,["$$slots","$$events","$$legacy","id","ref","child","children","disabled","type"]);const l=pr({id:et.with(()=>n()),disabled:et.with(()=>s()??!1),ref:et.with(()=>r(),a=>r(a))}),h=U(()=>vt(o,l.props,{type:i()}));Cr(t,{get id(){return n()},children:(a,u)=>{var m=W(),f=E(m);{var c=d=>{var g=W(),y=E(g);it(y,()=>e.child,()=>({props:_(h)})),P(d,g)},p=d=>{var g=is();let y;var v=G(g);it(v,()=>e.children??yt),V(g),mt(()=>y=gt(g,y,{..._(h)})),P(d,g)};ut(f,d=>{e.child?d(c):d(p,!1)})}P(a,m)},$$slots:{default:!0}}),st()}var ls=T('<!> <span class="sr-only">Close</span>',1),hs=T("<!> <!>",1),as=T("<!> <!>",1);function us(t,e){rt(e,!0);let n=R(e,"ref",15,null),r=ft(e,["$$slots","$$events","$$legacy","ref","class","children"]);var s=W(),i=E(s);K(i,()=>ps,(o,l)=>{l(o,{children:(h,a)=>{var u=as(),m=E(u);K(m,()=>cs,(p,d)=>{d(p,{})});var f=Z(m,2);const c=U(()=>Dt("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] bg-neutral-1 fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border p-6 shadow-lg duration-200 sm:rounded-lg",e.class));K(f,()=>Tn,(p,d)=>{d(p,ht({get class(){return _(c)}},()=>r,{get ref(){return n()},set ref(g){n(g)},children:(g,y)=>{var v=hs(),b=E(v);it(b,()=>e.children??yt);var C=Z(b,2);K(C,()=>Ln,(k,w)=>{w(k,{class:"ring-offset-neutral-1 focus:ring-neutral-7 absolute right-4 top-4 rounded-sm opacity-70 transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:pointer-events-none",children:(M,O)=>{var j=ls(),A=E(j);Ae(A,{get icon(){return Ye.defaultClose},class:"size-4"}),zt(2),P(M,j)},$$slots:{default:!0}})}),P(g,v)},$$slots:{default:!0}}))}),P(h,u)},$$slots:{default:!0}})}),P(t,s),st()}function cs(t,e){rt(e,!0);let n=R(e,"ref",15,null),r=ft(e,["$$slots","$$events","$$legacy","ref","class"]);var s=W(),i=E(s);const o=U(()=>Dt("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0  fixed inset-0 z-50 bg-black/80",e.class));K(i,()=>Nn,(l,h)=>{h(l,ht({get class(){return _(o)}},()=>r,{get ref(){return n()},set ref(a){n(a)}}))}),P(t,s),st()}const fs=Rn,ds=Dn,ps=Cn;function gs(t,e){rt(e,!0);let n=R(e,"ref",15,null),r=R(e,"sideOffset",3,4),s=ft(e,["$$slots","$$events","$$legacy","ref","sideOffset","class"]);var i=W(),o=E(i);const l=U(()=>Dt("bg-neutral-3 text-neutral-12 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[8rem] overflow-hidden rounded-md border p-1 shadow-md outline-none",e.class));K(o,()=>ss,(h,a)=>{a(h,ht({get sideOffset(){return r()},get class(){return _(l)}},()=>s,{get ref(){return n()},set ref(u){n(u)}}))}),P(t,i),st()}function ms(t,e){rt(e,!0);let n=R(e,"ref",15,null),r=ft(e,["$$slots","$$events","$$legacy","ref","class","inset"]);var s=W(),i=E(s);const o=U(()=>Dt("px-2 py-1.5 text-sm font-semibold",e.inset&&"pl-8",e.class));K(i,()=>gr,(l,h)=>{h(l,ht({get class(){return _(o)}},()=>r,{get ref(){return n()},set ref(a){n(a)}}))}),P(t,s),st()}var vs=T('<span class="absolute left-2 flex size-3.5 items-center justify-center"><!></span> <!>',1);function Be(t,e){rt(e,!0);let n=R(e,"ref",15,null),r=ft(e,["$$slots","$$events","$$legacy","ref","class","children"]);var s=W(),i=E(s);const o=U(()=>Dt("data-[highlighted]:bg-accent-6 data-[highlighted]:text-accent-12 relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e.class));K(i,()=>mr,(l,h)=>{h(l,ht({get class(){return _(o)}},()=>r,{get ref(){return n()},set ref(u){n(u)},children:(u,m)=>{let f=()=>m==null?void 0:m().checked;var c=vs(),p=E(c),d=G(p);{var g=v=>{vr(v,{class:"size-2 fill-current"})};ut(d,v=>{f()&&v(g)})}V(p);var y=Z(p,2);it(y,()=>e.children??yt,()=>({checked:f()})),P(u,c)},$$slots:{default:!0}}))}),P(t,s),st()}const ys=wr,ws=os,_s=yr;function xs(t,e){const n=Sr(e,["children","$$slots","$$events","$$legacy"]);_r(t,ht({name:"x"},()=>n,{iconNode:[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]],children:(s,i)=>{var o=W(),l=E(o);xr(l,e,"default",{}),P(s,o)},$$slots:{default:!0}}))}function bs(t,e){rt(e,!0);let n=R(e,"ref",15,null),r=R(e,"class",7),s=ft(e,["$$slots","$$events","$$legacy","ref","class"]);var i=W(),o=E(i);const l=U(()=>Dt("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0  fixed inset-0 z-50 bg-black/80",r()));return K(o,()=>Nn,(h,a)=>{a(h,ht({get class(){return _(l)}},()=>s,{get ref(){return n()},set ref(u){n(u)}}))}),P(t,i),st({get class(){return r()},set class(h){r(h)}})}const ks=br({base:"bg-neutral-1 data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 gap-4 p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500",variants:{side:{top:"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 border-b",bottom:"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 border-t",left:"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm",right:"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm"}},defaultVariants:{side:"right"}});var Ps=T('<!> <span class="sr-only">Close</span>',1),Ms=T("<!> <!>",1),Ss=T("<!> <!>",1);function zs(t,e){rt(e,!0);let n=R(e,"ref",15,null),r=R(e,"side",3,"right"),s=ft(e,["$$slots","$$events","$$legacy","ref","class","side","children"]);var i=W(),o=E(i);K(o,()=>Cn,(l,h)=>{h(l,{children:(a,u)=>{var m=Ss(),f=E(m);bs(f,{});var c=Z(f,2);const p=U(()=>Dt(ks({side:r()}),e.class));K(c,()=>Tn,(d,g)=>{g(d,ht({get class(){return _(p)}},()=>s,{get ref(){return n()},set ref(y){n(y)},children:(y,v)=>{var b=Ms(),C=E(b);it(C,()=>e.children??yt);var k=Z(C,2);K(k,()=>Ln,(w,M)=>{M(w,{class:"ring-offset-neutral-1 focus:ring-neutral-7 data-[state=open]:bg-secondary-5 absolute right-4 top-4 rounded-sm opacity-70 transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:pointer-events-none",children:(O,j)=>{var A=Ps(),I=E(A);xs(I,{class:"size-4"}),zt(2),P(O,A)},$$slots:{default:!0}})}),P(y,b)},$$slots:{default:!0}}))}),P(a,m)},$$slots:{default:!0}})}),P(t,i),st()}const js=Rn,Os=Dn,Cs=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),Is=Te.object({APP_URL:Te.string({description:"The base URL of the application."}).url().default("http://localhost:5173"),NEWSLETTER_URL:Te.string({description:"The URL to the newsletter signup."}).url().default("https://newsletter.verdagraph.org/subscription/form")}),Ge=Is.parse(Cs);var Es=T('<span class="text-neutral-11">Theme</span>'),As=T("<!> <!>",1),Ns=T("<!> <!> <!> <!>",1),Ds=T("<!> <!>",1);function Bn(t,e){rt(e,!0);let n=U(()=>Ir.current==="light"?"material-symbols:light-mode":"material-symbols:dark-mode");var r=W(),s=E(r);K(s,()=>ys,(i,o)=>{o(i,{children:(l,h)=>{var a=Ds(),u=E(a);K(u,()=>ws,(f,c)=>{c(f,{child:(d,g)=>{let y=()=>g==null?void 0:g().props;var v=W(),b=E(v);const C=U(()=>e.showLabel?"justify-start":"justify-center");K(b,()=>He,(k,w)=>{w(k,ht(y,{variant:"ghost",get class(){return`flex w-full items-center ${_(C)??""}`},children:(M,O)=>{var j=As(),A=E(j);Ae(A,{get icon(){return _(n)},class:"text-neutral-11"});var I=Z(A,2);{var F=L=>{var D=Es();P(L,D)};ut(I,L=>{e.showLabel&&L(F)})}P(M,j)},$$slots:{default:!0}}))}),P(d,v)},$$slots:{child:!0}})});var m=Z(u,2);K(m,()=>gs,(f,c)=>{c(f,{children:(p,d)=>{var g=W(),y=E(g);K(y,()=>_s,(v,b)=>{b(v,{get value(){return an.current},set value(C){an.current=C},children:(C,k)=>{var w=Ns(),M=E(w);K(M,()=>ms,(I,F)=>{F(I,{children:(L,D)=>{zt();var N=Yt("Theme");P(L,N)},$$slots:{default:!0}})});var O=Z(M,2);K(O,()=>Be,(I,F)=>{F(I,{value:"dark",children:(L,D)=>{zt();var N=Yt("Dark");P(L,N)},$$slots:{default:!0}})});var j=Z(O,2);K(j,()=>Be,(I,F)=>{F(I,{value:"light",children:(L,D)=>{zt();var N=Yt("Light");P(L,N)},$$slots:{default:!0}})});var A=Z(j,2);K(A,()=>Be,(I,F)=>{F(I,{value:"system",children:(L,D)=>{zt();var N=Yt("System");P(L,N)},$$slots:{default:!0}})}),P(C,w)},$$slots:{default:!0}})}),P(p,g)},$$slots:{default:!0}})}),P(l,a)},$$slots:{default:!0}})}),P(t,r),st()}const Rs=[{id:"app",label:"Application",children:[{id:"appStart",label:"Start the Application",url:Ge.APP_URL},{id:"appDemo",label:"View the Demonstration",url:"/demos"}]},{id:"project",label:"Project",children:[{id:"about",label:"About",url:"/about"},{id:"support",label:"Support the Project",url:"/support"},{id:"donate",label:"Donation",url:fn.donation},{id:"source",label:"Source Code",url:fn.repository}]},{id:"community",label:"Community",children:[{id:"newsletter",label:"Newsletter",url:Ge.NEWSLETTER_URL},{id:"blog",label:"Blog",url:"/blog"},{id:"email",label:"Email",url:"mailto:contact@verdagraph.org"}]},{id:"docs",label:"Documentation",children:[{id:"introduction",label:"Introduction",url:"/docs/introduction"},{id:"faq",label:"Frequently Asked Questions",url:"/docs/faq"},{id:"concepts",label:"Concepts",url:"/docs/concepts"},{id:"hosting",label:"Self Hosting Instructions",url:"/docs/self-hosting"},{id:"usage",label:"General Usage",children:[{id:"garden-management",label:"Garden Management",url:"/docs/garden-management"},{id:"workspace-environment-config",label:"Workspace & Environment Configuration",url:"/docs/workspace-environment-config"},{id:"cultivar-config",label:"Cutivar Configuration",url:"/docs/cultivar-config"}]},{id:"tutorials",label:"Tutorials",children:[{id:"garden-setup",label:"Setup a New Garden",url:"/docs/garden-setup"},{id:"first-plan",label:"Creating your First Plan",url:"/docs/first-plan"}]}]}];var Ls=T('<ul><div class="absolute bottom-2 top-2 w-px bg-gray-200 dark:bg-gray-700"></div> <!></ul>'),Ts=T('<li><div class="group py-1"><a><span class="select-none"> </span></a></div> <!></li>'),Bs=T("<ul><!></ul>");function Fs(t,e){rt(e,!0);const n=(f,c=yt,p)=>{let d=Ht(()=>or(p==null?void 0:p(),0));var g=W(),y=E(g);Qe(y,17,c,v=>v.id,(v,b)=>{var C=Ts(),k=L=>{L.stopPropagation(),_(b).tree.expandOnClick&&_(b).canExpand&&(!_(b).tree.multiple||!o(L)&&!L.shiftKey)&&_(b).toggleExpand(),_(b).focus()};let w;var M=G(C),O=G(M),j=G(O),A=G(j,!0);V(j),V(O),V(M);var I=Z(M,2);{var F=L=>{var D=Ls();let N;var Y=G(D),$=Z(Y,2);n($,()=>_(b).children,()=>_(d)+1),V(D),mt(()=>{N=gt(D,N,{...s.group,class:`relative list-none p-0 ${_(b).expanded?"h-auto opacity-100":"pointer-events-none h-0 opacity-0"} origin-left`}),un(Y,`left: ${.5+_(d)*1}rem`)}),P(L,D)};ut(I,L=>{var D;(D=_(b).children)!=null&&D.length&&L(F)})}V(C),mt(()=>{w=gt(C,w,{..._(b).attrs,onclick:k,class:"cursor-pointer rounded-sm !outline-none first:mt-0 [&:focus-visible>:first-child>div]:ring-4"}),un(M,`padding-left: ${_(d)*1}rem`),An(O,"href",_(b).item.url),Er(O,1,`${_(b).selected?"!bg-accent-5 !text-accent-12":""}
					ring-accent-6 ring-offset-neutral-12 group-hover:bg-neutral-3 flex h-full w-full items-center
					gap-2 rounded-xl px-3 py-1 transition`),Sn(A,_(b).item.label)}),P(v,C)}),P(f,g)},r=kr("navigationExpanded",["app","project","docs","usage","tutorials"]),s=new Pr({items:Rs,expanded:r.value});ir(()=>{r.value=[...s.expanded]});function i(){return/mac/i.test(navigator.platform)}function o(f){return i()?f.metaKey:f.ctrlKey}const h=new URL(Ar.url).pathname.split("/").pop();s.clearSelection(),h&&s.select(h);var a=Bs();let u;var m=G(a);return n(m,()=>s.children,()=>0),V(a),mt(()=>u=gt(a,u,{class:"mb-12 w-[200px] list-none",...s.root})),P(t,a),st({isMac:i,isControlOrMeta:o})}var Us=T("<!> <!>",1),Js=T("<!> <!>",1);function Gs(t,e){rt(e,!1),Mn(),js(t,{children:(n,r)=>{var s=Js(),i=E(s);Os(i,{children:(l,h)=>{Ae(l,{get icon(){return Ye.gardenDrawerIcon},width:"2rem"})},$$slots:{default:!0}});var o=Z(i,2);zs(o,{children:(l,h)=>{var a=Us(),u=E(a);Bn(u,{showLabel:!0});var m=Z(u,2);In(m,{class:"h-full",children:(f,c)=>{Fs(f,{})},$$slots:{default:!0}}),P(l,a)},$$slots:{default:!0}}),P(n,s)},$$slots:{default:!0}}),st()}var z;function lt(t,e,n){const r=typeof n,s=typeof t;if(r!=="undefined"){if(s!=="undefined"){if(n){if(s==="function"&&r===s)return function(l){return t(n(l))};if(e=t.constructor,e===n.constructor){if(e===Array)return n.concat(t);if(e===Map){var i=new Map(n);for(var o of t)i.set(o[0],o[1]);return i}if(e===Set){o=new Set(n);for(i of t.values())o.add(i);return o}}}return t}return n}return s==="undefined"?e:t}function $t(t,e){return typeof t>"u"?e:t}function H(){return Object.create(null)}function wt(t){return typeof t=="string"}function Qt(t){return typeof t=="object"}function Vs(t){const e=[];for(const n of t.keys())e.push(n);return e}function qt(t,e){if(wt(e))t=t[e];else for(let n=0;t&&n<e.length;n++)t=t[e[n]];return t}function Ws(t){let e=0;for(let n=0,r;n<t.length;n++)(r=t[n])&&e<r.length&&(e=r.length);return e}const Ks=/[^\p{L}\p{N}]+/u,$s=/(\d{3})/g,Xs=/(\D)(\d{3})/g,Zs=/(\d{3})(\D)/g,dn=/[\u0300-\u036f]/g;function te(t={}){if(!this||this.constructor!==te)return new te(...arguments);if(arguments.length)for(t=0;t<arguments.length;t++)this.assign(arguments[t]);else this.assign(t)}z=te.prototype;z.assign=function(t){this.normalize=lt(t.normalize,!0,this.normalize);let e=t.include,n=e||t.exclude||t.split,r;if(n||n===""){if(typeof n=="object"&&n.constructor!==RegExp){let s="";r=!e,e||(s+="\\p{Z}"),n.letter&&(s+="\\p{L}"),n.number&&(s+="\\p{N}",r=!!e),n.symbol&&(s+="\\p{S}"),n.punctuation&&(s+="\\p{P}"),n.control&&(s+="\\p{C}"),(n=n.char)&&(s+=typeof n=="object"?n.join(""):n);try{this.split=new RegExp("["+(e?"^":"")+s+"]+","u")}catch{this.split=/\s+/}}else this.split=n,r=n===!1||2>"a1a".split(n).length;this.numeric=lt(t.numeric,r)}else{try{this.split=lt(this.split,Ks)}catch{this.split=/\s+/}this.numeric=lt(t.numeric,lt(this.numeric,!0))}if(this.prepare=lt(t.prepare,null,this.prepare),this.finalize=lt(t.finalize,null,this.finalize),n=t.filter,this.filter=typeof n=="function"?n:lt(n&&new Set(n),null,this.filter),this.dedupe=lt(t.dedupe,!0,this.dedupe),this.matcher=lt((n=t.matcher)&&new Map(n),null,this.matcher),this.mapper=lt((n=t.mapper)&&new Map(n),null,this.mapper),this.stemmer=lt((n=t.stemmer)&&new Map(n),null,this.stemmer),this.replacer=lt(t.replacer,null,this.replacer),this.minlength=lt(t.minlength,1,this.minlength),this.maxlength=lt(t.maxlength,1024,this.maxlength),this.rtl=lt(t.rtl,!1,this.rtl),(this.cache=n=lt(t.cache,!0,this.cache))&&(this.H=null,this.S=typeof n=="number"?n:2e5,this.B=new Map,this.G=new Map,this.L=this.K=128),this.h="",this.M=null,this.A="",this.N=null,this.matcher)for(const s of this.matcher.keys())this.h+=(this.h?"|":"")+s;if(this.stemmer)for(const s of this.stemmer.keys())this.A+=(this.A?"|":"")+s;return this};z.addStemmer=function(t,e){return this.stemmer||(this.stemmer=new Map),this.stemmer.set(t,e),this.A+=(this.A?"|":"")+t,this.N=null,this.cache&&At(this),this};z.addFilter=function(t){return typeof t=="function"?this.filter=t:(this.filter||(this.filter=new Set),this.filter.add(t)),this.cache&&At(this),this};z.addMapper=function(t,e){return typeof t=="object"?this.addReplacer(t,e):1<t.length?this.addMatcher(t,e):(this.mapper||(this.mapper=new Map),this.mapper.set(t,e),this.cache&&At(this),this)};z.addMatcher=function(t,e){return typeof t=="object"?this.addReplacer(t,e):2>t.length&&(this.dedupe||this.mapper)?this.addMapper(t,e):(this.matcher||(this.matcher=new Map),this.matcher.set(t,e),this.h+=(this.h?"|":"")+t,this.M=null,this.cache&&At(this),this)};z.addReplacer=function(t,e){return typeof t=="string"?this.addMatcher(t,e):(this.replacer||(this.replacer=[]),this.replacer.push(t,e),this.cache&&At(this),this)};z.encode=function(t,e){if(this.cache&&t.length<=this.K)if(this.H){if(this.B.has(t))return this.B.get(t)}else this.H=setTimeout(At,50,this);this.normalize&&(typeof this.normalize=="function"?t=this.normalize(t):t=dn?t.normalize("NFKD").replace(dn,"").toLowerCase():t.toLowerCase()),this.prepare&&(t=this.prepare(t)),this.numeric&&3<t.length&&(t=t.replace(Xs,"$1 $2").replace(Zs,"$1 $2").replace($s,"$1 "));const n=!(this.dedupe||this.mapper||this.filter||this.matcher||this.stemmer||this.replacer);let r=[],s=H(),i,o,l=this.split||this.split===""?t.split(this.split):[t];for(let a=0,u,m;a<l.length;a++)if((u=m=l[a])&&!(u.length<this.minlength||u.length>this.maxlength)){if(e){if(s[u])continue;s[u]=1}else{if(i===u)continue;i=u}if(n)r.push(u);else if(!this.filter||(typeof this.filter=="function"?this.filter(u):!this.filter.has(u))){if(this.cache&&u.length<=this.L)if(this.H){var h=this.G.get(u);if(h||h===""){h&&r.push(h);continue}}else this.H=setTimeout(At,50,this);if(this.stemmer){this.N||(this.N=new RegExp("(?!^)("+this.A+")$"));let f;for(;f!==u&&2<u.length;)f=u,u=u.replace(this.N,c=>this.stemmer.get(c))}if(u&&(this.mapper||this.dedupe&&1<u.length)){h="";for(let f=0,c="",p,d;f<u.length;f++)p=u.charAt(f),p===c&&this.dedupe||((d=this.mapper&&this.mapper.get(p))||d===""?d===c&&this.dedupe||!(c=d)||(h+=d):h+=c=p);u=h}if(this.matcher&&1<u.length&&(this.M||(this.M=new RegExp("("+this.h+")","g")),u=u.replace(this.M,f=>this.matcher.get(f))),u&&this.replacer)for(h=0;u&&h<this.replacer.length;h+=2)u=u.replace(this.replacer[h],this.replacer[h+1]);if(this.cache&&m.length<=this.L&&(this.G.set(m,u),this.G.size>this.S&&(this.G.clear(),this.L=this.L/1.1|0)),u){if(u!==m)if(e){if(s[u])continue;s[u]=1}else{if(o===u)continue;o=u}r.push(u)}}}return this.finalize&&(r=this.finalize(r)||r),this.cache&&t.length<=this.K&&(this.B.set(t,r),this.B.size>this.S&&(this.B.clear(),this.K=this.K/1.1|0)),r};function At(t){t.H=null,t.B.clear(),t.G.clear()}let Lt,Xt;async function Ys(t){t=t.data;var e=t.task;const n=t.id;let r=t.args;switch(e){case"init":Xt=t.options||{},(e=t.factory)?(Function("return "+e)()(self),Lt=new self.FlexSearch.Index(Xt),delete self.FlexSearch):Lt=new xt(Xt),postMessage({id:n});break;default:let s;e==="export"&&(r[1]?(r[0]=Xt.export,r[2]=0,r[3]=1):r=null),e==="import"?r[0]&&(t=await Xt.import.call(Lt,r[0]),Lt.import(r[0],t)):(s=r&&Lt[e].apply(Lt,r))&&s.then&&(s=await s),postMessage(e==="search"?{id:n,msg:s}:{id:n})}}function qe(t){Tt.call(t,"add"),Tt.call(t,"append"),Tt.call(t,"search"),Tt.call(t,"update"),Tt.call(t,"remove"),Tt.call(t,"searchCache")}let Ve,pn,ze;function Hs(){Ve=ze=0}function Tt(t){this[t+"Async"]=function(){const e=arguments;var n=e[e.length-1];let r;if(typeof n=="function"&&(r=n,delete e[e.length-1]),Ve?ze||(ze=Date.now()-pn>=this.priority*this.priority*3):(Ve=setTimeout(Hs,0),pn=Date.now()),ze){const i=this;return new Promise(o=>{setTimeout(function(){o(i[t+"Async"].apply(i,e))},0)})}const s=this[t].apply(this,e);return n=s.then?s:new Promise(i=>i(s)),r&&n.then(r),n}}let Bt=0;function ee(t={},e){function n(l){function h(a){a=a.data||a;const u=a.id,m=u&&i.h[u];m&&(m(a.msg),delete i.h[u])}if(this.worker=l,this.h=H(),this.worker)return s?this.worker.on("message",h):this.worker.onmessage=h,t.config?new Promise(function(a){i.h[++Bt]=function(){a(i),1e9<Bt&&(Bt=0)},i.worker.postMessage({id:Bt,task:"init",factory:r,options:t})}):(this.priority=t.priority||4,this.encoder=e||null,this.worker.postMessage({task:"init",factory:r,options:t}),this)}if(!this||this.constructor!==ee)return new ee(t);let r=typeof self<"u"?self._factory:typeof window<"u"?window._factory:null;r&&(r=r.toString());const s=typeof window>"u",i=this,o=Qs(r,s,t.worker);return o.then?o.then(function(l){return n.call(i,l)}):n.call(this,o)}Pt("add");Pt("append");Pt("search");Pt("searchCache");Pt("update");Pt("remove");Pt("clear");Pt("export");Pt("import");qe(ee.prototype);function Pt(t){ee.prototype[t]=function(){const e=this,n=[].slice.call(arguments);var r=n[n.length-1];let s;return typeof r=="function"&&(s=r,n.pop()),r=new Promise(function(i){t==="export"&&typeof n[0]=="function"&&(n[0]=null),e.h[++Bt]=i,e.worker.postMessage({task:t,id:Bt,args:n})}),s?(r.then(s),this):r}}function Qs(t,e,n){return e?typeof module<"u"?new(require("worker_threads")).Worker(__dirname+"/worker/node.js"):Dr(()=>import("./BIHI7g3E.js"),[],import.meta.url).then(function(r){return new r.Worker(import.meta.dirname+"/node/node.mjs")}):t?new window.Worker(URL.createObjectURL(new Blob(["onmessage="+Ys.toString()],{type:"text/javascript"}))):new window.Worker(typeof n=="string"?n:import.meta.url.replace("/worker.js","/worker/worker.js").replace("flexsearch.bundle.module.min.js","module/worker/worker.js"),{type:"module"})}function tn(t,e=0){let n=[],r=[];e&&(e=25e4/e*5e3|0);for(const s of t.entries())r.push(s),r.length===e&&(n.push(r),r=[]);return r.length&&n.push(r),n}function en(t,e){e||(e=new Map);for(let n=0,r;n<t.length;n++)r=t[n],e.set(r[0],r[1]);return e}function Fn(t,e=0){let n=[],r=[];e&&(e=25e4/e*1e3|0);for(const s of t.entries())r.push([s[0],tn(s[1])[0]]),r.length===e&&(n.push(r),r=[]);return r.length&&n.push(r),n}function Un(t,e){e||(e=new Map);for(let n=0,r,s;n<t.length;n++)r=t[n],s=e.get(r[0]),e.set(r[0],en(r[1],s));return e}function Jn(t){let e=[],n=[];for(const r of t.keys())n.push(r),n.length===25e4&&(e.push(n),n=[]);return n.length&&e.push(n),e}function Gn(t,e){e||(e=new Set);for(let n=0;n<t.length;n++)e.add(t[n]);return e}function je(t,e,n,r,s,i,o=0){const l=r&&r.constructor===Array;var h=l?r.shift():r;if(!h)return this.export(t,e,s,i+1);if((h=t((e?e+".":"")+(o+1)+"."+n,JSON.stringify(h)))&&h.then){const a=this;return h.then(function(){return je.call(a,t,e,n,l?r:null,s,i,o+1)})}return je.call(this,t,e,n,l?r:null,s,i,o+1)}function gn(t,e){let n="";for(const r of t.entries()){t=r[0];const s=r[1];let i="";for(let o=0,l;o<s.length;o++){l=s[o]||[""];let h="";for(let a=0;a<l.length;a++)h+=(h?",":"")+(e==="string"?'"'+l[a]+'"':l[a]);h="["+h+"]",i+=(i?",":"")+h}i='["'+t+'",['+i+"]]",n+=(n?",":"")+i}return n}function mn(t,e,n,r){let s=[];for(let i=0,o;i<t.index.length;i++)if(o=t.index[i],e>=o.length)e-=o.length;else{e=o[r?"splice":"slice"](e,n);const l=e.length;if(l&&(s=s.length?s.concat(e):e,n-=l,r&&(t.length-=l),!n))break;e=0}return s}function Nt(t){if(!this||this.constructor!==Nt)return new Nt(t);this.index=t?[t]:[],this.length=t?t.length:0;const e=this;return new Proxy([],{get(n,r){if(r==="length")return e.length;if(r==="push")return function(s){e.index[e.index.length-1].push(s),e.length++};if(r==="pop")return function(){if(e.length)return e.length--,e.index[e.index.length-1].pop()};if(r==="indexOf")return function(s){let i=0;for(let o=0,l,h;o<e.index.length;o++){if(l=e.index[o],h=l.indexOf(s),0<=h)return i+h;i+=l.length}return-1};if(r==="includes")return function(s){for(let i=0;i<e.index.length;i++)if(e.index[i].includes(s))return!0;return!1};if(r==="slice")return function(s,i){return mn(e,s||0,i||e.length,!1)};if(r==="splice")return function(s,i){return mn(e,s||0,i||e.length,!0)};if(r==="constructor")return Array;if(typeof r!="symbol")return(n=e.index[r/2**31|0])&&n[r]},set(n,r,s){return n=r/2**31|0,(e.index[n]||(e.index[n]=[]))[r]=s,e.length++,!0}})}Nt.prototype.clear=function(){this.index.length=0};Nt.prototype.destroy=function(){this.proxy=this.index=null};Nt.prototype.push=function(){};function kt(t=8){if(!this||this.constructor!==kt)return new kt(t);this.index=H(),this.h=[],this.size=0,32<t?(this.B=Wn,this.A=BigInt(t)):(this.B=Vn,this.A=t)}kt.prototype.get=function(t){const e=this.index[this.B(t)];return e&&e.get(t)};kt.prototype.set=function(t,e){var n=this.B(t);let r=this.index[n];r?(n=r.size,r.set(t,e),(n-=r.size)&&this.size++):(this.index[n]=r=new Map([[t,e]]),this.h.push(r),this.size++)};function _t(t=8){if(!this||this.constructor!==_t)return new _t(t);this.index=H(),this.h=[],this.size=0,32<t?(this.B=Wn,this.A=BigInt(t)):(this.B=Vn,this.A=t)}_t.prototype.add=function(t){var e=this.B(t);let n=this.index[e];n?(e=n.size,n.add(t),(e-=n.size)&&this.size++):(this.index[e]=n=new Set([t]),this.h.push(n),this.size++)};z=kt.prototype;z.has=_t.prototype.has=function(t){const e=this.index[this.B(t)];return e&&e.has(t)};z.delete=_t.prototype.delete=function(t){const e=this.index[this.B(t)];e&&e.delete(t)&&this.size--};z.clear=_t.prototype.clear=function(){this.index=H(),this.h=[],this.size=0};z.values=_t.prototype.values=function*(){for(let t=0;t<this.h.length;t++)for(let e of this.h[t].values())yield e};z.keys=_t.prototype.keys=function*(){for(let t=0;t<this.h.length;t++)for(let e of this.h[t].keys())yield e};z.entries=_t.prototype.entries=function*(){for(let t=0;t<this.h.length;t++)for(let e of this.h[t].entries())yield e};function Vn(t){let e=2**this.A-1;if(typeof t=="number")return t&e;let n=0,r=this.A+1;for(let s=0;s<t.length;s++)n=(n*r^t.charCodeAt(s))&e;return this.A===32?n+2**31:n}function Wn(t){let e=BigInt(2)**this.A-BigInt(1);var n=typeof t;if(n==="bigint")return t&e;if(n==="number")return BigInt(t)&e;n=BigInt(0);let r=this.A+BigInt(1);for(let s=0;s<t.length;s++)n=(n*r^BigInt(t.charCodeAt(s)))&e;return n}Wt.prototype.add=function(t,e,n){if(Qt(t)&&(e=t,t=qt(e,this.key)),e&&(t||t===0)){if(!n&&this.reg.has(t))return this.update(t,e);for(let l=0,h;l<this.field.length;l++){h=this.F[l];var r=this.index.get(this.field[l]);if(typeof h=="function"){var s=h(e);s&&r.add(t,s,!1,!0)}else s=h.I,(!s||s(e))&&(h.constructor===String?h=[""+h]:wt(h)&&(h=[h]),Ke(e,h,this.J,0,r,t,h[0],n))}if(this.tag)for(r=0;r<this.D.length;r++){var i=this.D[r];s=this.tag.get(this.R[r]);let l=H();if(typeof i=="function"){if(i=i(e),!i)continue}else{var o=i.I;if(o&&!o(e))continue;i.constructor===String&&(i=""+i),i=qt(e,i)}if(s&&i){wt(i)&&(i=[i]);for(let h=0,a,u;h<i.length;h++)if(a=i[h],!l[a]&&(l[a]=1,(o=s.get(a))?u=o:s.set(a,u=[]),!n||!u.includes(t))){if(u.length===2**31-1){if(o=new Nt(u),this.fastupdate)for(let m of this.reg.values())m.includes(u)&&(m[m.indexOf(u)]=o);s.set(a,u=o)}u.push(t),this.fastupdate&&((o=this.reg.get(t))?o.push(u):this.reg.set(t,[u]))}}}if(this.store&&(!n||!this.store.has(t))){let l;if(this.C){l=H();for(let h=0,a;h<this.C.length;h++){if(a=this.C[h],(n=a.I)&&!n(e))continue;let u;if(typeof a=="function"){if(u=a(e),!u)continue;a=[a.V]}else if(wt(a)||a.constructor===String){l[a]=e[a];continue}We(e,l,a,0,a[0],u)}}this.store.set(t,l||e)}this.worker&&(this.fastupdate||this.reg.add(t))}return this};function We(t,e,n,r,s,i){if(t=t[s],r===n.length-1)e[s]=i||t;else if(t)if(t.constructor===Array)for(e=e[s]=Array(t.length),s=0;s<t.length;s++)We(t,e,n,r,s);else e=e[s]||(e[s]=H()),s=n[++r],We(t,e,n,r,s)}function Ke(t,e,n,r,s,i,o,l){if(t=t[o])if(r===e.length-1){if(t.constructor===Array){if(n[r]){for(e=0;e<t.length;e++)s.add(i,t[e],!0,!0);return}t=t.join(" ")}s.add(i,t,l,!0)}else if(t.constructor===Array)for(o=0;o<t.length;o++)Ke(t,e,n,r,s,i,o,l);else o=e[++r],Ke(t,e,n,r,s,i,o,l);else s.db&&s.remove(i)}function nn(t,e,n,r){if(!t.length)return t;if(t.length===1)return t=t[0],t=n||t.length>e?e?t.slice(n,n+e):t.slice(n):t,r?jt.call(this,t):t;let s=[];for(let i=0,o,l;i<t.length;i++)if((o=t[i])&&(l=o.length)){if(n){if(n>=l){n-=l;continue}n<l&&(o=e?o.slice(n,n+e):o.slice(n),l=o.length,n=0)}if(l>e&&(o=o.slice(0,e),l=e),!s.length&&l>=e)return r?jt.call(this,o):o;if(s.push(o),e-=l,!e)break}return s=1<s.length?[].concat.apply([],s):s[0],r?jt.call(this,s):s}function Re(t,e,n){var r=n[0];if(r.then)return Promise.all(n).then(function(c){return t[e].apply(t,c)});if(r[0]&&r[0].index)return t[e].apply(t,r);r=[];let s=[],i=0,o=0,l,h,a,u,m;for(let c=0,p;c<n.length;c++)if(p=n[c]){var f=void 0;if(p.constructor===X)f=p.result;else if(p.constructor===Array)f=p;else{i=p.limit||0,o=p.offset||0,a=p.suggest,h=p.resolve,l=(u=p.highlight&&h)||p.enrich&&h;let d;if(p.index?t.index=d=p.index:d=t.index,p.query||p.tag)(f=p.field||p.pluck)&&(d=t.index.index.get(f)),p.resolve=!1,f=d.search(p).result,p.resolve=h,u&&(m=p.query);else if(p.and)f=t.and(p.and);else if(p.or)f=t.or(p.or);else if(p.xor)f=t.xor(p.xor);else if(p.not)f=t.not(p.not);else continue}if(f.then)s.push(f);else if(f.length)r[c]=f;else if(!a&&(e==="and"||e==="xor")){r=[];break}}return{O:r,P:s,limit:i,offset:o,enrich:l,resolve:h,suggest:a,highlight:u,W:m}}X.prototype.or=function(){const{O:t,P:e,limit:n,offset:r,enrich:s,resolve:i}=Re(this,"or",arguments);return Kn.call(this,t,e,n,r,s,i)};function Kn(t,e,n,r,s,i){if(e.length){const o=this;return Promise.all(e).then(function(l){t=[];for(let h=0,a;h<l.length;h++)(a=l[h]).length&&(t[h]=a);return Kn.call(o,t,[],n,r,s,i)})}return t.length&&(this.result.length&&t.push(this.result),2>t.length?this.result=t[0]:(this.result=Yn(t,n,r,!1,this.h),r=0)),i?this.resolve(n,r,s):this}X.prototype.and=function(){let t=this.result.length,e,n,r,s;if(!t){const i=arguments[0];i&&(t=!!i.suggest,s=i.resolve,e=i.limit,n=i.offset,r=i.enrich&&s)}if(t){const{O:i,P:o,limit:l,offset:h,enrich:a,resolve:u,suggest:m}=Re(this,"and",arguments);return $n.call(this,i,o,l,h,a,u,m)}return s?this.resolve(e,n,r):this};function $n(t,e,n,r,s,i,o){if(e.length){const l=this;return Promise.all(e).then(function(h){t=[];for(let a=0,u;a<h.length;a++)(u=h[a]).length&&(t[a]=u);return $n.call(l,t,[],n,r,s,i,o)})}if(t.length)if(this.result.length&&t.unshift(this.result),2>t.length)this.result=t[0];else{if(e=Ws(t))return this.result=Oe(t,e,n,r,o,this.h,i),i?s?jt.call(this.index,this.result):this.result:this;this.result=[]}else o||(this.result=t);return i?this.resolve(n,r,s):this}X.prototype.xor=function(){const{O:t,P:e,limit:n,offset:r,enrich:s,resolve:i,suggest:o}=Re(this,"xor",arguments);return Xn.call(this,t,e,n,r,s,i,o)};function Xn(t,e,n,r,s,i,o){if(e.length){const l=this;return Promise.all(e).then(function(h){t=[];for(let a=0,u;a<h.length;a++)(u=h[a]).length&&(t[a]=u);return Xn.call(l,t,[],n,r,s,i,o)})}if(t.length)if(this.result.length&&t.unshift(this.result),2>t.length)this.result=t[0];else return this.result=qs.call(this,t,n,r,i,this.h),i?s?jt.call(this.index,this.result):this.result:this;else o||(this.result=t);return i?this.resolve(n,r,s):this}function qs(t,e,n,r,s){const i=[],o=H();let l=0;for(let h=0,a;h<t.length;h++)if(a=t[h]){l<a.length&&(l=a.length);for(let u=0,m;u<a.length;u++)if(m=a[u])for(let f=0,c;f<m.length;f++)c=m[f],o[c]=o[c]?2:1}for(let h=0,a,u=0;h<l;h++)for(let m=0,f;m<t.length;m++)if((f=t[m])&&(a=f[h])){for(let c=0,p;c<a.length;c++)if(p=a[c],o[p]===1)if(n)n--;else if(r){if(i.push(p),i.length===e)return i}else{const d=h+(m?s:0);if(i[d]||(i[d]=[]),i[d].push(p),++u===e)return i}}return i}X.prototype.not=function(){const{O:t,P:e,limit:n,offset:r,enrich:s,resolve:i,suggest:o}=Re(this,"not",arguments);return Zn.call(this,t,e,n,r,s,i,o)};function Zn(t,e,n,r,s,i,o){if(e.length){const l=this;return Promise.all(e).then(function(h){t=[];for(let a=0,u;a<h.length;a++)(u=h[a]).length&&(t[a]=u);return Zn.call(l,t,[],n,r,s,i,o)})}if(t.length&&this.result.length)this.result=ti.call(this,t,n,r,i);else if(i)return this.resolve(n,r,s);return i?s?jt.call(this.index,this.result):this.result:this}function ti(t,e,n,r){const s=[];t=new Set(t.flat().flat());for(let i=0,o,l=0;i<this.result.length;i++)if(o=this.result[i]){for(let h=0,a;h<o.length;h++)if(a=o[h],!t.has(a)){if(n)n--;else if(r){if(s.push(a),s.length===e)return s}else if(s[i]||(s[i]=[]),s[i].push(a),++l===e)return s}}return s}function Fe(t,e,n,r,s){let i,o,l;typeof s=="string"?(i=s,s=""):i=s.template,o=i.indexOf("$1"),l=i.substring(o+2),o=i.substring(0,o);let h=s&&s.boundary,a=!s||s.clip!==!1,u=s&&s.merge&&l&&o&&new RegExp(l+" "+o,"g");s=s&&s.ellipsis;var m=0;if(typeof s=="object"){var f=s.template;m=f.length-2,s=s.pattern}typeof s!="string"&&(s=s===!1?"":"..."),m&&(s=f.replace("$1",s)),f=s.length-m;let c,p;typeof h=="object"&&(c=h.before,c===0&&(c=-1),p=h.after,p===0&&(p=-1),h=h.total||9e5),m=new Map;for(let $=0,J,tt,nt;$<e.length;$++){let ot;if(r)ot=e,nt=r;else{var d=e[$];if(nt=d.field,!nt)continue;ot=d.result}tt=n.get(nt),J=tt.encoder,d=m.get(J),typeof d!="string"&&(d=J.encode(t),m.set(J,d));for(let ct=0;ct<ot.length;ct++){var g=ot[ct].doc;if(!g||(g=qt(g,nt),!g))continue;var y=g.trim().split(/\s+/);if(!y.length)continue;g="";var v=[];let Mt=[];for(var b=-1,C=-1,k=0,w=0;w<y.length;w++){var M=y[w],O=J.encode(M);O=1<O.length?O.join(" "):O[0];let S;if(O&&M){for(var j=M.length,A=(J.split?M.replace(J.split,""):M).length-O.length,I="",F=0,L=0;L<d.length;L++){var D=d[L];if(D){var N=D.length;N+=A,F&&N<=F||(D=O.indexOf(D),-1<D&&(I=(D?M.substring(0,D):"")+o+M.substring(D,D+N)+l+(D+N<j?M.substring(D+N):""),F=N,S=!0))}}I&&(h&&(0>b&&(b=g.length+(g?1:0)),C=g.length+(g?1:0)+I.length,k+=j,Mt.push(v.length),v.push({match:I})),g+=(g?" ":"")+I)}if(!S)M=y[w],g+=(g?" ":"")+M,h&&v.push({text:M});else if(h&&k>=h)break}if(k=Mt.length*(i.length-2),c||p||h&&g.length-k>h)if(k=h+k-2*f,w=C-b,0<c&&(w+=c),0<p&&(w+=p),w<=k)y=c?b-(0<c?c:0):b-((k-w)/2|0),v=p?C+(0<p?p:0):y+k,a||(0<y&&g.charAt(y)!==" "&&g.charAt(y-1)!==" "&&(y=g.indexOf(" ",y),0>y&&(y=0)),v<g.length&&g.charAt(v-1)!==" "&&g.charAt(v)!==" "&&(v=g.lastIndexOf(" ",v),v<C?v=C:++v)),g=(y?s:"")+g.substring(y,v)+(v<g.length?s:"");else{for(C=[],b={},k={},w={},M={},O={},I=A=j=0,L=F=1;;){var Y=void 0;for(let S=0,Q;S<Mt.length;S++){if(Q=Mt[S],I)if(A!==I){if(w[S+1])continue;if(Q+=I,b[Q]){j-=f,k[S+1]=1,w[S+1]=1;continue}if(Q>=v.length-1){if(Q>=v.length){w[S+1]=1,Q>=y.length&&(k[S+1]=1);continue}j-=f}if(g=v[Q].text,N=p&&O[S])if(0<N){if(g.length>N)if(w[S+1]=1,a)g=g.substring(0,N);else continue;(N-=g.length)||(N=-1),O[S]=N}else{w[S+1]=1;continue}if(j+g.length+1<=h)g=" "+g,C[S]+=g;else if(a)Y=h-j-1,0<Y&&(g=" "+g.substring(0,Y),C[S]+=g),w[S+1]=1;else{w[S+1]=1;continue}}else{if(w[S])continue;if(Q-=A,b[Q]){j-=f,w[S]=1,k[S]=1;continue}if(0>=Q){if(0>Q){w[S]=1,k[S]=1;continue}j-=f}if(g=v[Q].text,N=c&&M[S])if(0<N){if(g.length>N)if(w[S]=1,a)g=g.substring(g.length-N);else continue;(N-=g.length)||(N=-1),M[S]=N}else{w[S]=1;continue}if(j+g.length+1<=h)g+=" ",C[S]=g+C[S];else if(a)Y=g.length+1-(h-j),0<=Y&&Y<g.length&&(g=g.substring(Y)+" ",C[S]=g+C[S]),w[S]=1;else{w[S]=1;continue}}else{g=v[Q].match,c&&(M[S]=c),p&&(O[S]=p),S&&j++;let Le;if(Q?!S&&f&&(j+=f):(k[S]=1,w[S]=1),Q>=y.length-1||Q<v.length-1&&v[Q+1].match?Le=1:f&&(j+=f),j-=i.length-2,!S||j+g.length<=h)C[S]=g;else{Y=F=L=k[S]=0;break}Le&&(k[S+1]=1,w[S+1]=1)}j+=g.length,Y=b[Q]=1}if(Y)A===I?I++:A++;else{if(A===I?F=0:L=0,!F&&!L)break;F?(A++,I=A):I++}}g="";for(let S=0,Q;S<C.length;S++)Q=(S&&k[S]?" ":(S&&!s?" ":"")+s)+C[S],g+=Q;s&&!k[C.length]&&(g+=s)}u&&(g=g.replace(u," ")),ot[ct].highlight=g}if(r)break}return e}function X(t,e){if(!this||this.constructor!==X)return new X(t,e);if(t&&t.index)return t.resolve=!1,this.index=t.index,this.h=t.boost||0,this.result=this.index.search(t).result,this;this.index=e||null,this.result=t||[],this.h=0}X.prototype.limit=function(t){if(this.result.length){const e=[];for(let n=0,r;n<this.result.length;n++)if(r=this.result[n])if(r.length<=t){if(e[n]=r,t-=r.length,!t)break}else{e[n]=r.slice(0,t);break}this.result=e}return this};X.prototype.offset=function(t){if(this.result.length){const e=[];for(let n=0,r;n<this.result.length;n++)(r=this.result[n])&&(r.length<=t?t-=r.length:(e[n]=r.slice(t),t=0));this.result=e}return this};X.prototype.boost=function(t){return this.h+=t,this};X.prototype.resolve=function(t,e,n){const r=this.index;let s=this.result;return this.result=this.index=null,s.length&&(typeof t=="object"&&(n=t.enrich,e=t.offset,t=t.limit),s=nn.call(r,s,t||100,e,n)),s};function Oe(t,e,n,r,s,i,o){const l=t.length;let h=[],a,u;a=H();for(let m=0,f,c,p,d;m<e;m++)for(let g=0;g<l;g++)if(p=t[g],m<p.length&&(f=p[m]))for(let y=0;y<f.length;y++){if(c=f[y],(u=a[c])?a[c]++:(u=0,a[c]=1),d=h[u]||(h[u]=[]),!o){let v=m+(g||!s?0:i||0);d=d[v]||(d[v]=[])}if(d.push(c),o&&n&&u===l-1&&d.length-r===n)return r?d.slice(r):d}if(t=h.length)if(s)h=1<h.length?Yn(h,n,r,o,i):(h=h[0]).length>n||r?h.slice(r,n+r):h;else{if(t<l)return[];if(h=h[t-1],n||r)if(o)(h.length>n||r)&&(h=h.slice(r,n+r));else{s=[];for(let m=0,f;m<h.length;m++)if(f=h[m]){if(r&&f.length>r)r-=f.length;else if((n&&f.length>n||r)&&(f=f.slice(r,n+r),n-=f.length,r&&(r-=f.length)),s.push(f),!n)break}h=s}}return h}function Yn(t,e,n,r,s){const i=[],o=H();let l;var h=t.length;let a;if(r){for(s=h-1;0<=s;s--)if(a=(r=t[s])&&r.length){for(h=0;h<a;h++)if(l=r[h],!o[l]){if(o[l]=1,n)n--;else if(i.push(l),i.length===e)return i}}}else for(let u=h-1,m,f=0;0<=u;u--){m=t[u];for(let c=0;c<m.length;c++)if(a=(r=m[c])&&r.length){for(let p=0;p<a;p++)if(l=r[p],!o[l])if(o[l]=1,n)n--;else{let d=(c+(u<h-1&&s||0))/(u+1)|0;if((i[d]||(i[d]=[])).push(l),++f===e)return i}}}return i}function ei(t,e,n){const r=H(),s=[];for(let i=0,o;i<e.length;i++){o=e[i];for(let l=0;l<o.length;l++)r[o[l]]=1}if(n)for(let i=0,o;i<t.length;i++)o=t[i],r[o]&&(s.push(o),r[o]=0);else for(let i=0,o,l;i<t.result.length;i++)for(o=t.result[i],e=0;e<o.length;e++)l=o[e],r[l]&&((s[i]||(s[i]=[])).push(l),r[l]=0);return s}Wt.prototype.search=function(t,e,n,r){if(n||(!e&&Qt(t)?(n=t,t=""):Qt(e)&&(n=e,e=0)),n&&n.cache){n.cache=!1;var s=this.searchCache(t,e,n);return n.cache=!0,s}let i=[];var o=[];let l,h,a,u,m,f=0,c=!0,p;if(n){n.constructor===Array&&(n={index:n}),t=n.query||t,l=n.pluck,h=n.merge,u=n.boost,m=l||n.field||(m=n.index)&&(m.index?null:m);var d=this.tag&&n.tag;a=n.suggest,p=(c=n.resolve!==!1)&&this.store&&n.highlight,s=!!p||c&&this.store&&n.enrich,e=n.limit||e;var g=n.offset||0;if(e||(e=c?100:0),d&&(!this.db||!r)){d.constructor!==Array&&(d=[d]);var y=[];for(let k=0,w;k<d.length;k++)if(w=d[k],w.field&&w.tag){var v=w.tag;if(v.constructor===Array)for(var b=0;b<v.length;b++)y.push(w.field,v[b]);else y.push(w.field,v)}else{v=Object.keys(w);for(let M=0,O,j;M<v.length;M++)if(O=v[M],j=w[O],j.constructor===Array)for(b=0;b<j.length;b++)y.push(O,j[b]);else y.push(O,j)}if(d=y,!t){if(o=[],y.length)for(d=0;d<y.length;d+=2){if(this.db){if(r=this.index.get(y[d]),!r)continue;o.push(r=r.db.tag(y[d+1],e,g,s))}else r=ni.call(this,y[d],y[d+1],e,g,s);i.push(c?{field:y[d],tag:y[d+1],result:r}:[r])}if(o.length){const k=this;return Promise.all(o).then(function(w){for(let M=0;M<w.length;M++)c?i[M].result=w[M]:i[M]=w[M];return c?i:new X(1<i.length?Oe(i,1,0,0,a,u):i[0],k)})}return c?i:new X(1<i.length?Oe(i,1,0,0,a,u):i[0],this)}}c||l||!(m=m||this.field)||(wt(m)?l=m:(m.constructor===Array&&m.length===1&&(m=m[0]),l=m.field||m.index)),m&&m.constructor!==Array&&(m=[m])}m||(m=this.field);let C;y=(this.worker||this.db)&&!r&&[];for(let k=0,w,M,O;k<m.length;k++){if(M=m[k],this.db&&this.tag&&!this.F[k])continue;let j;if(wt(M)||(j=M,M=j.field,t=j.query||t,e=$t(j.limit,e),g=$t(j.offset,g),a=$t(j.suggest,a),p=c&&this.store&&$t(j.highlight,p),s=!!p||c&&this.store&&$t(j.enrich,s)),r)w=r[k];else if(v=j||n,b=this.index.get(M),d&&(this.db&&(v.tag=d,C=b.db.support_tag_search,v.field=m),C||(v.enrich=!1)),y){y[k]=b.search(t,e,v),v&&s&&(v.enrich=s);continue}else w=b.search(t,e,v),v&&s&&(v.enrich=s);if(O=w&&(c?w.length:w.result.length),d&&O){if(v=[],b=0,this.db&&r){if(!C)for(let A=m.length;A<r.length;A++){let I=r[A];if(I&&I.length)b++,v.push(I);else if(!a)return c?i:new X(i,this)}}else for(let A=0,I,F;A<d.length;A+=2){if(I=this.tag.get(d[A]),!I){if(a)continue;return c?i:new X(i,this)}if(F=(I=I&&I.get(d[A+1]))&&I.length)b++,v.push(I);else if(!a)return c?i:new X(i,this)}if(b){if(w=ei(w,v,c),O=w.length,!O&&!a)return c?w:new X(w,this);b--}}if(O)o[f]=M,i.push(w),f++;else if(m.length===1)return c?i:new X(i,this)}if(y){if(this.db&&d&&d.length&&!C)for(s=0;s<d.length;s+=2){if(o=this.index.get(d[s]),!o){if(a)continue;return c?i:new X(i,this)}y.push(o.db.tag(d[s+1],e,g,!1))}const k=this;return Promise.all(y).then(function(w){return w.length?k.search(t,e,n,w):w})}if(!f)return c?i:new X(i,this);if(l&&(!s||!this.store))return i=i[0],c||(i.index=this),i;for(y=[],g=0;g<o.length;g++){if(d=i[g],s&&d.length&&typeof d[0].doc>"u"&&(this.db?y.push(d=this.index.get(this.field[0]).db.enrich(d)):d=jt.call(this,d)),l)return c?p?Fe(t,d,this.index,l,p):d:new X(d,this);i[g]={field:o[g],result:d}}if(s&&this.db&&y.length){const k=this;return Promise.all(y).then(function(w){for(let M=0;M<w.length;M++)i[M].result=w[M];return p&&(i=Fe(t,i,k.index,l,p)),h?vn(i):i})}return p&&(i=Fe(t,i,this.index,l,p)),h?vn(i):i};function vn(t){const e=[],n=H(),r=H();for(let s=0,i,o,l,h,a,u,m;s<t.length;s++){i=t[s],o=i.field,l=i.result;for(let f=0;f<l.length;f++)a=l[f],typeof a!="object"?a={id:h=a}:h=a.id,(u=n[h])?u.push(o):(a.field=n[h]=[o],e.push(a)),(m=a.highlight)&&(u=r[h],u||(r[h]=u={},a.highlight=u),u[o]=m)}return e}function ni(t,e,n,r,s){return t=this.tag.get(t),t?(t=t.get(e),t?(e=t.length-r,0<e&&((n&&e>n||r)&&(t=t.slice(r,r+n)),s&&(t=jt.call(this,t))),t):[]):[]}function jt(t){if(!this||!this.store)return t;const e=Array(t.length);for(let n=0,r;n<t.length;n++)r=t[n],e[n]={id:r,doc:this.store.get(r)};return e}const yn={normalize:!1,numeric:!1,dedupe:!1},Me={},Ue=new Map([["b","p"],["v","f"],["w","f"],["z","s"],["x","s"],["d","t"],["n","m"],["c","k"],["g","k"],["j","k"],["q","k"],["i","e"],["y","e"],["u","o"]]),wn=new Map([["ae","a"],["oe","o"],["sh","s"],["kh","k"],["th","t"],["ph","f"],["pf","f"]]),_n=[/([^aeo])h(.)/g,"$1$2",/([aeo])h([^aeo]|$)/g,"$1$2",/(.)\1+/g,"$1"],xn={a:"",e:"",i:"",o:"",u:"",y:"",b:1,f:1,p:1,v:1,c:2,g:2,j:2,k:2,q:2,s:2,x:2,z:2,ß:2,d:3,t:3,l:4,m:5,n:5,r:6};var Hn={Exact:yn,Default:Me,Normalize:Me,LatinBalance:{mapper:Ue},LatinAdvanced:{mapper:Ue,matcher:wn,replacer:_n},LatinExtra:{mapper:Ue,replacer:_n.concat([/(?!^)[aeo]/g,""]),matcher:wn},LatinSoundex:{dedupe:!1,include:{letter:!0},finalize:function(t){for(let n=0;n<t.length;n++){var e=t[n];let r=e.charAt(0),s=xn[r];for(let i=1,o;i<e.length&&(o=e.charAt(i),o==="h"||o==="w"||!(o=xn[o])||o===s||(r+=o,s=o,r.length!==4));i++);t[n]=r}}},CJK:{split:""},LatinExact:yn,LatinDefault:Me,LatinSimple:Me};function Wt(t){if(!this||this.constructor!==Wt)return new Wt(t);const e=t.document||t.doc||t;let n,r;if(this.F=[],this.field=[],this.J=[],this.key=(n=e.key||e.id)&&Ce(n,this.J)||"id",(r=t.keystore||0)&&(this.keystore=r),this.fastupdate=!!t.fastupdate,this.reg=!this.fastupdate||t.worker||t.db?r?new _t(r):new Set:r?new kt(r):new Map,this.C=(n=e.store||null)&&n&&n!==!0&&[],this.store=n&&(r?new kt(r):new Map),this.cache=(n=t.cache||null)&&new Rt(n),t.cache=!1,this.worker=t.worker||!1,this.priority=t.priority||4,this.index=ri.call(this,t,e),this.tag=null,(n=e.tag)&&(typeof n=="string"&&(n=[n]),n.length)){this.tag=new Map,this.D=[],this.R=[];for(let s=0,i,o;s<n.length;s++){if(i=n[s],o=i.field||i,!o)throw Error("The tag field from the document descriptor is undefined.");i.custom?this.D[s]=i.custom:(this.D[s]=Ce(o,this.J),i.filter&&(typeof this.D[s]=="string"&&(this.D[s]=new String(this.D[s])),this.D[s].I=i.filter)),this.R[s]=o,this.tag.set(o,new Map)}}if(this.worker){this.fastupdate=!1,t=[];for(const s of this.index.values())s.then&&t.push(s);if(t.length){const s=this;return Promise.all(t).then(function(i){let o=0;for(const l of s.index.entries()){const h=l[0];let a=l[1];a.then&&(a=i[o],s.index.set(h,a),o++)}return s})}}else t.db&&(this.fastupdate=!1,this.mount(t.db))}z=Wt.prototype;z.mount=function(t){let e=this.field;if(this.tag)for(let i=0,o;i<this.R.length;i++){o=this.R[i];var n=void 0;this.index.set(o,n=new xt({},this.reg)),e===this.field&&(e=e.slice(0)),e.push(o),n.tag=this.tag.get(o)}n=[];const r={db:t.db,type:t.type,fastupdate:t.fastupdate};for(let i=0,o,l;i<e.length;i++){r.field=l=e[i],o=this.index.get(l);const h=new t.constructor(t.id,r);h.id=t.id,n[i]=h.mount(o),o.document=!0,i?o.bypass=!0:o.store=this.store}const s=this;return this.db=Promise.all(n).then(function(){s.db=!0})};z.commit=async function(t,e){const n=[];for(const r of this.index.values())n.push(r.commit(t,e));await Promise.all(n),this.reg.clear()};z.destroy=function(){const t=[];for(const e of this.index.values())t.push(e.destroy());return Promise.all(t)};function ri(t,e){const n=new Map;let r=e.index||e.field||e;wt(r)&&(r=[r]);for(let i=0,o,l;i<r.length;i++){if(o=r[i],wt(o)||(l=o,o=o.field),l=Qt(l)?Object.assign({},t,l):t,this.worker){var s=void 0;s=(s=l.encoder)&&s.encode?s:new te(typeof s=="string"?Hn[s]:s||{}),s=new ee(l,s),n.set(o,s)}this.worker||n.set(o,new xt(l,this.reg)),l.custom?this.F[i]=l.custom:(this.F[i]=Ce(o,this.J),l.filter&&(typeof this.F[i]=="string"&&(this.F[i]=new String(this.F[i])),this.F[i].I=l.filter)),this.field[i]=o}if(this.C){t=e.store,wt(t)&&(t=[t]);for(let i=0,o,l;i<t.length;i++)o=t[i],l=o.field||o,o.custom?(this.C[i]=o.custom,o.custom.V=l):(this.C[i]=Ce(l,this.J),o.filter&&(typeof this.C[i]=="string"&&(this.C[i]=new String(this.C[i])),this.C[i].I=o.filter))}return n}function Ce(t,e){const n=t.split(":");let r=0;for(let s=0;s<n.length;s++)t=n[s],t[t.length-1]==="]"&&(t=t.substring(0,t.length-2))&&(e[r]=!0),t&&(n[r++]=t);return r<n.length&&(n.length=r),1<r?n:n[0]}z.append=function(t,e){return this.add(t,e,!0)};z.update=function(t,e){return this.remove(t).add(t,e)};z.remove=function(t){Qt(t)&&(t=qt(t,this.key));for(var e of this.index.values())e.remove(t,!0);if(this.reg.has(t)){if(this.tag&&!this.fastupdate)for(let n of this.tag.values())for(let r of n){e=r[0];const s=r[1],i=s.indexOf(t);-1<i&&(1<s.length?s.splice(i,1):n.delete(e))}this.store&&this.store.delete(t),this.reg.delete(t)}return this.cache&&this.cache.remove(t),this};z.clear=function(){const t=[];for(const e of this.index.values()){const n=e.clear();n.then&&t.push(n)}if(this.tag)for(const e of this.tag.values())e.clear();return this.store&&this.store.clear(),this.cache&&this.cache.clear(),t.length?Promise.all(t):this};z.contain=function(t){return this.db?this.index.get(this.field[0]).db.has(t):this.reg.has(t)};z.cleanup=function(){for(const t of this.index.values())t.cleanup();return this};z.get=function(t){return this.db?this.index.get(this.field[0]).db.enrich(t).then(function(e){return e[0]&&e[0].doc||null}):this.store.get(t)||null};z.set=function(t,e){return typeof t=="object"&&(e=t,t=qt(e,this.key)),this.store.set(t,e),this};z.searchCache=Qn;z.export=function(t,e,n=0,r=0){if(n<this.field.length){const o=this.field[n];if((e=this.index.get(o).export(t,o,n,r=1))&&e.then){const l=this;return e.then(function(){return l.export(t,o,n+1)})}return this.export(t,o,n+1)}let s,i;switch(r){case 0:s="reg",i=Jn(this.reg),e=null;break;case 1:s="tag",i=this.tag&&Fn(this.tag,this.reg.size),e=null;break;case 2:s="doc",i=this.store&&tn(this.store),e=null;break;default:return}return je.call(this,t,e,s,i,n,r)};z.import=function(t,e){var n=t.split(".");n[n.length-1]==="json"&&n.pop();const r=2<n.length?n[0]:"";if(n=2<n.length?n[2]:n[1],this.worker&&r)return this.index.get(r).import(t);if(e){if(typeof e=="string"&&(e=JSON.parse(e)),r)return this.index.get(r).import(n,e);switch(n){case"reg":this.fastupdate=!1,this.reg=Gn(e,this.reg);for(let s=0,i;s<this.field.length;s++)i=this.index.get(this.field[s]),i.fastupdate=!1,i.reg=this.reg;if(this.worker){e=[];for(const s of this.index.values())e.push(s.import(t));return Promise.all(e)}break;case"tag":this.tag=Un(e,this.tag);break;case"doc":this.store=en(e,this.store)}}};qe(Wt.prototype);function Qn(t,e,n){const r=(e?""+t:typeof t=="object"?""+t.query:t).toLowerCase();this.cache||(this.cache=new Rt);let s=this.cache.get(r);if(!s){if(s=this.search(t,e,n),s.then){const i=this;s.then(function(o){return i.cache.set(r,o),o})}this.cache.set(r,s)}return s}function Rt(t){this.limit=t&&t!==!0?t:1e3,this.cache=new Map,this.h=""}Rt.prototype.set=function(t,e){this.cache.set(this.h=t,e),this.cache.size>this.limit&&this.cache.delete(this.cache.keys().next().value)};Rt.prototype.get=function(t){const e=this.cache.get(t);return e&&this.h!==t&&(this.cache.delete(t),this.cache.set(this.h=t,e)),e};Rt.prototype.remove=function(t){for(const e of this.cache){const n=e[0];e[1].includes(t)&&this.cache.delete(n)}};Rt.prototype.clear=function(){this.cache.clear(),this.h=""};xt.prototype.remove=function(t,e){const n=this.reg.size&&(this.fastupdate?this.reg.get(t):this.reg.has(t));if(n){if(this.fastupdate){for(let r=0,s,i;r<n.length;r++)if((s=n[r])&&(i=s.length))if(s[i-1]===t)s.pop();else{const o=s.indexOf(t);0<=o&&s.splice(o,1)}}else ne(this.map,t),this.depth&&ne(this.ctx,t);e||this.reg.delete(t)}return this.db&&(this.commit_task.push({del:t}),this.T&&qn(this)),this.cache&&this.cache.remove(t),this};function ne(t,e){let n=0;var r=typeof e>"u";if(t.constructor===Array){for(let s=0,i,o;s<t.length;s++)if((i=t[s])&&i.length)if(r)n++;else if(o=i.indexOf(e),0<=o)if(1<i.length){i.splice(o,1),n++;break}else delete t[s];else n++}else for(let s of t.entries())r=s[0],ne(s[1],e)?n++:t.delete(r);return n}const si={memory:{resolution:1},performance:{resolution:3,fastupdate:!0,context:{depth:1,resolution:1}},match:{tokenize:"forward"},score:{resolution:9,context:{depth:2,resolution:3}}};xt.prototype.add=function(t,e,n,r){if(e&&(t||t===0)){if(!r&&!n&&this.reg.has(t))return this.update(t,e);r=this.depth,e=this.encoder.encode(e,!r);const a=e.length;if(a){const u=H(),m=H(),f=this.resolution;for(let c=0;c<a;c++){let p=e[this.rtl?a-1-c:c];var s=p.length;if(s&&(r||!m[p])){var i=this.score?this.score(e,p,c,null,0):Se(f,a,c),o="";switch(this.tokenize){case"full":if(2<s){for(let d=0,g;d<s;d++)for(i=s;i>d;i--){o=p.substring(d,i),g=this.rtl?s-1-d:d;var l=this.score?this.score(e,p,c,o,g):Se(f,a,c,s,g);Zt(this,m,o,l,t,n)}break}case"bidirectional":case"reverse":if(1<s){for(l=s-1;0<l;l--){o=p[this.rtl?s-1-l:l]+o;var h=this.score?this.score(e,p,c,o,l):Se(f,a,c,s,l);Zt(this,m,o,h,t,n)}o=""}case"forward":if(1<s){for(l=0;l<s;l++)o+=p[this.rtl?s-1-l:l],Zt(this,m,o,i,t,n);break}default:if(Zt(this,m,p,i,t,n),r&&1<a&&c<a-1){for(s=H(),o=this.U,i=p,l=Math.min(r+1,this.rtl?c+1:a-c),s[i]=1,h=1;h<l;h++)if((p=e[this.rtl?a-1-c-h:c+h])&&!s[p]){s[p]=1;const d=this.score?this.score(e,i,c,p,h-1):Se(o+(a/2>o?0:1),a,c,l-1,h-1),g=this.bidirectional&&p>i;Zt(this,u,g?i:p,d,t,n,g?p:i)}}}}}this.fastupdate||this.reg.add(t)}else e=""}return this.db&&(e||this.commit_task.push({del:t}),this.T&&qn(this)),this};function Zt(t,e,n,r,s,i,o){let l=o?t.ctx:t.map,h;if((!e[n]||o&&!(h=e[n])[o])&&(o?(e=h||(e[n]=H()),e[o]=1,(h=l.get(o))?l=h:l.set(o,l=new Map)):e[n]=1,(h=l.get(n))?l=h:l.set(n,l=h=[]),l=l[r]||(l[r]=[]),!i||!l.includes(s))){if(l.length===2**31-1){if(e=new Nt(l),t.fastupdate)for(let a of t.reg.values())a.includes(l)&&(a[a.indexOf(l)]=e);h[r]=l=e}l.push(s),t.fastupdate&&((r=t.reg.get(s))?r.push(l):t.reg.set(s,[l]))}}function Se(t,e,n,r,s){return n&&1<t?e+(r||0)<=t?n+(s||0):(t-1)/(e+(r||0))*(n+(s||0))+1|0:0}xt.prototype.search=function(t,e,n){if(n||(e||typeof t!="object"?typeof e=="object"&&(n=e,e=0):(n=t,t="")),n&&n.cache)return n.cache=!1,t=this.searchCache(t,e,n),n.cache=!0,t;let r=[],s,i,o,l=0,h,a,u,m,f;n&&(t=n.query||t,e=n.limit||e,l=n.offset||0,i=n.context,o=n.suggest,f=(h=n.resolve)&&n.enrich,u=n.boost,m=n.resolution,a=this.db&&n.tag),typeof h>"u"&&(h=this.resolve),i=this.depth&&i!==!1;let c=this.encoder.encode(t,!i);if(s=c.length,e=e||(h?100:0),s===1)return kn.call(this,c[0],"",e,l,h,f,a);if(s===2&&i&&!o)return kn.call(this,c[1],c[0],e,l,h,f,a);let p=H(),d=0,g;if(i&&(g=c[0],d=1),m||m===0||(m=g?this.U:this.resolution),this.db){if(this.db.search&&(n=this.db.search(this,c,e,l,o,h,f,a),n!==!1))return n;const y=this;return async function(){for(let v,b;d<s;d++){if((b=c[d])&&!p[b]){if(p[b]=1,v=await $e(y,b,g,0,0,!1,!1),v=Pn(v,r,o,m)){r=v;break}g&&(o&&v&&r.length||(g=b))}o&&g&&d===s-1&&!r.length&&(m=y.resolution,g="",d=-1,p=H())}return bn(r,m,e,l,o,u,h)}()}for(let y,v;d<s;d++){if((v=c[d])&&!p[v]){if(p[v]=1,y=$e(this,v,g,0,0,!1,!1),y=Pn(y,r,o,m)){r=y;break}g&&(o&&y&&r.length||(g=v))}o&&g&&d===s-1&&!r.length&&(m=this.resolution,g="",d=-1,p=H())}return bn(r,m,e,l,o,u,h)};function bn(t,e,n,r,s,i,o){let l=t.length,h=t;if(1<l)h=Oe(t,e,n,r,s,i,o);else if(l===1)return o?nn.call(null,t[0],n,r):new X(t[0],this);return o?h:new X(h,this)}function kn(t,e,n,r,s,i,o){return t=$e(this,t,e,n,r,s,i,o),this.db?t.then(function(l){return s?l||[]:new X(l,this)}):t&&t.length?s?nn.call(this,t,n,r):new X(t,this):s?[]:new X([],this)}function Pn(t,e,n,r){let s=[];if(t&&t.length){if(t.length<=r){e.push(t);return}for(let i=0,o;i<r;i++)(o=t[i])&&(s[i]=o);if(s.length){e.push(s);return}}if(!n)return s}function $e(t,e,n,r,s,i,o,l){let h;return n&&(h=t.bidirectional&&e>n)&&(h=n,n=e,e=h),t.db?t.db.get(e,n,r,s,i,o,l):(t=n?(t=t.ctx.get(n))&&t.get(e):t.map.get(e),t)}function xt(t,e){if(!this||this.constructor!==xt)return new xt(t);if(t){var n=wt(t)?t:t.preset;n&&(t=Object.assign({},si[n],t))}else t={};n=t.context;const r=n===!0?{depth:1}:n||{},s=wt(t.encoder)?Hn[t.encoder]:t.encode||t.encoder||{};this.encoder=s.encode?s:typeof s=="object"?new te(s):{encode:s},this.resolution=t.resolution||9,this.tokenize=n=(n=t.tokenize)&&n!=="default"&&n!=="exact"&&n||"strict",this.depth=n==="strict"&&r.depth||0,this.bidirectional=r.bidirectional!==!1,this.fastupdate=!!t.fastupdate,this.score=t.score||null,(n=t.keystore||0)&&(this.keystore=n),this.map=n?new kt(n):new Map,this.ctx=n?new kt(n):new Map,this.reg=e||(this.fastupdate?n?new kt(n):new Map:n?new _t(n):new Set),this.U=r.resolution||3,this.rtl=s.rtl||t.rtl||!1,this.cache=(n=t.cache||null)&&new Rt(n),this.resolve=t.resolve!==!1,(n=t.db)&&(this.db=this.mount(n)),this.T=t.commit!==!1,this.commit_task=[],this.commit_timer=null,this.priority=t.priority||4}z=xt.prototype;z.mount=function(t){return this.commit_timer&&(clearTimeout(this.commit_timer),this.commit_timer=null),t.mount(this)};z.commit=function(t,e){return this.commit_timer&&(clearTimeout(this.commit_timer),this.commit_timer=null),this.db.commit(this,t,e)};z.destroy=function(){return this.commit_timer&&(clearTimeout(this.commit_timer),this.commit_timer=null),this.db.destroy()};function qn(t){t.commit_timer||(t.commit_timer=setTimeout(function(){t.commit_timer=null,t.db.commit(t,void 0,void 0)},1))}z.clear=function(){return this.map.clear(),this.ctx.clear(),this.reg.clear(),this.cache&&this.cache.clear(),this.db&&(this.commit_timer&&clearTimeout(this.commit_timer),this.commit_timer=null,this.commit_task=[{clear:!0}]),this};z.append=function(t,e){return this.add(t,e,!0)};z.contain=function(t){return this.db?this.db.has(t):this.reg.has(t)};z.update=function(t,e){const n=this,r=this.remove(t);return r&&r.then?r.then(()=>n.add(t,e)):this.add(t,e)};z.cleanup=function(){return this.fastupdate?(ne(this.map),this.depth&&ne(this.ctx),this):this};z.searchCache=Qn;z.export=function(t,e,n=0,r=0){let s,i;switch(r){case 0:s="reg",i=Jn(this.reg);break;case 1:s="cfg",i=null;break;case 2:s="map",i=tn(this.map,this.reg.size);break;case 3:s="ctx",i=Fn(this.ctx,this.reg.size);break;default:return}return je.call(this,t,e,s,i,n,r)};z.import=function(t,e){if(e)switch(typeof e=="string"&&(e=JSON.parse(e)),t=t.split("."),t[t.length-1]==="json"&&t.pop(),t.length===3&&t.shift(),t=1<t.length?t[1]:t[0],t){case"reg":this.fastupdate=!1,this.reg=Gn(e,this.reg);break;case"map":this.map=en(e,this.map);break;case"ctx":this.ctx=Un(e,this.ctx)}};z.serialize=function(t=!0){let e="",n="",r="";if(this.reg.size){let i;for(var s of this.reg.keys())i||(i=typeof s),e+=(e?",":"")+(i==="string"?'"'+s+'"':s);e="index.reg=new Set(["+e+"]);",n=gn(this.map,i),n="index.map=new Map(["+n+"]);";for(const o of this.ctx.entries()){s=o[0];let l=gn(o[1],i);l="new Map(["+l+"])",l='["'+s+'",'+l+"]",r+=(r?",":"")+l}r="index.ctx=new Map(["+r+"]);"}return t?"function inject(index){"+e+n+r+"}":e+n+r};qe(xt.prototype);const tr=typeof window<"u"&&(window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB),Ie=["map","ctx","tag","reg","cfg"],Ct=H();function Xe(t,e={}){if(!this||this.constructor!==Xe)return new Xe(t,e);typeof t=="object"&&(e=t,t=t.name),t||console.info("Default storage space was used, because a name was not passed."),this.id="flexsearch"+(t?":"+t.toLowerCase().replace(/[^a-z0-9_\-]/g,""):""),this.field=e.field?e.field.toLowerCase().replace(/[^a-z0-9_\-]/g,""):"",this.type=e.type,this.fastupdate=this.support_tag_search=!1,this.db=null,this.h={}}z=Xe.prototype;z.mount=function(t){return t.index?t.mount(this):(t.db=this,this.open())};z.open=function(){if(this.db)return this.db;let t=this;navigator.storage&&navigator.storage.persist(),Ct[t.id]||(Ct[t.id]=[]),Ct[t.id].push(t.field);const e=tr.open(t.id,1);return e.onupgradeneeded=function(){const n=t.db=this.result;for(let r=0,s;r<Ie.length;r++){s=Ie[r];for(let i=0,o;i<Ct[t.id].length;i++)o=Ct[t.id][i],n.objectStoreNames.contains(s+(s!=="reg"&&o?":"+o:""))||n.createObjectStore(s+(s!=="reg"&&o?":"+o:""))}},t.db=Ot(e,function(n){t.db=n,t.db.onversionchange=function(){t.close()}})};z.close=function(){this.db&&this.db.close(),this.db=null};z.destroy=function(){const t=tr.deleteDatabase(this.id);return Ot(t)};z.clear=function(){const t=[];for(let n=0,r;n<Ie.length;n++){r=Ie[n];for(let s=0,i;s<Ct[this.id].length;s++)i=Ct[this.id][s],t.push(r+(r!=="reg"&&i?":"+i:""))}const e=this.db.transaction(t,"readwrite");for(let n=0;n<t.length;n++)e.objectStore(t[n]).clear();return Ot(e)};z.get=function(t,e,n=0,r=0,s=!0,i=!1){t=this.db.transaction((e?"ctx":"map")+(this.field?":"+this.field:""),"readonly").objectStore((e?"ctx":"map")+(this.field?":"+this.field:"")).get(e?e+":"+t:t);const o=this;return Ot(t).then(function(l){let h=[];if(!l||!l.length)return h;if(s){if(!n&&!r&&l.length===1)return l[0];for(let a=0,u;a<l.length;a++)if((u=l[a])&&u.length){if(r>=u.length){r-=u.length;continue}const m=n?r+Math.min(u.length-r,n):u.length;for(let f=r;f<m;f++)h.push(u[f]);if(r=0,h.length===n)break}return i?o.enrich(h):h}return l})};z.tag=function(t,e=0,n=0,r=!1){t=this.db.transaction("tag"+(this.field?":"+this.field:""),"readonly").objectStore("tag"+(this.field?":"+this.field:"")).get(t);const s=this;return Ot(t).then(function(i){return!i||!i.length||n>=i.length?[]:!e&&!n?i:(i=i.slice(n,n+e),r?s.enrich(i):i)})};z.enrich=function(t){typeof t!="object"&&(t=[t]);const e=this.db.transaction("reg","readonly").objectStore("reg"),n=[];for(let r=0;r<t.length;r++)n[r]=Ot(e.get(t[r]));return Promise.all(n).then(function(r){for(let s=0;s<r.length;s++)r[s]={id:t[s],doc:r[s]?JSON.parse(r[s]):null};return r})};z.has=function(t){return t=this.db.transaction("reg","readonly").objectStore("reg").getKey(t),Ot(t).then(function(e){return!!e})};z.search=null;z.info=function(){};z.transaction=function(t,e,n){t+=t!=="reg"&&this.field?":"+this.field:"";let r=this.h[t+":"+e];if(r)return n.call(this,r);let s=this.db.transaction(t,e);this.h[t+":"+e]=r=s.objectStore(t);const i=n.call(this,r);return this.h[t+":"+e]=null,Ot(s).finally(function(){return s=r=null,i})};z.commit=async function(t,e,n){if(e)await this.clear(),t.commit_task=[];else{let r=t.commit_task;t.commit_task=[];for(let s=0,i;s<r.length;s++)if(i=r[s],i.clear){await this.clear(),e=!0;break}else r[s]=i.del;e||(n||(r=r.concat(Vs(t.reg))),r.length&&await this.remove(r))}t.reg.size&&(await this.transaction("map","readwrite",function(r){for(const s of t.map){const i=s[0],o=s[1];o.length&&(e?r.put(o,i):r.get(i).onsuccess=function(){let l=this.result;var h;if(l&&l.length){const a=Math.max(l.length,o.length);for(let u=0,m,f;u<a;u++)if((f=o[u])&&f.length){if((m=l[u])&&m.length)for(h=0;h<f.length;h++)m.push(f[h]);else l[u]=f;h=1}}else l=o,h=1;h&&r.put(l,i)})}}),await this.transaction("ctx","readwrite",function(r){for(const s of t.ctx){const i=s[0],o=s[1];for(const l of o){const h=l[0],a=l[1];a.length&&(e?r.put(a,i+":"+h):r.get(i+":"+h).onsuccess=function(){let u=this.result;var m;if(u&&u.length){const f=Math.max(u.length,a.length);for(let c=0,p,d;c<f;c++)if((d=a[c])&&d.length){if((p=u[c])&&p.length)for(m=0;m<d.length;m++)p.push(d[m]);else u[c]=d;m=1}}else u=a,m=1;m&&r.put(u,i+":"+h)})}}}),t.store?await this.transaction("reg","readwrite",function(r){for(const s of t.store){const i=s[0],o=s[1];r.put(typeof o=="object"?JSON.stringify(o):1,i)}}):t.bypass||await this.transaction("reg","readwrite",function(r){for(const s of t.reg.keys())r.put(1,s)}),t.tag&&await this.transaction("tag","readwrite",function(r){for(const s of t.tag){const i=s[0],o=s[1];o.length&&(r.get(i).onsuccess=function(){let l=this.result;l=l&&l.length?l.concat(o):o,r.put(l,i)})}}),t.map.clear(),t.ctx.clear(),t.tag&&t.tag.clear(),t.store&&t.store.clear(),t.document||t.reg.clear())};function Je(t,e,n){const r=t.value;let s,i=0;for(let o=0,l;o<r.length;o++){if(l=n?r:r[o]){for(let h=0,a,u;h<e.length;h++)if(u=e[h],a=l.indexOf(u),0<=a)if(s=1,1<l.length)l.splice(a,1);else{r[o]=[];break}i+=l.length}if(n)break}i?s&&t.update(r):t.delete(),t.continue()}z.remove=function(t){return typeof t!="object"&&(t=[t]),Promise.all([this.transaction("map","readwrite",function(e){e.openCursor().onsuccess=function(){const n=this.result;n&&Je(n,t)}}),this.transaction("ctx","readwrite",function(e){e.openCursor().onsuccess=function(){const n=this.result;n&&Je(n,t)}}),this.transaction("tag","readwrite",function(e){e.openCursor().onsuccess=function(){const n=this.result;n&&Je(n,t,!0)}}),this.transaction("reg","readwrite",function(e){for(let n=0;n<t.length;n++)e.delete(t[n])})])};function Ot(t,e){return new Promise((n,r)=>{t.onsuccess=t.oncomplete=function(){e&&e(this.result),e=null,n(this.result)},t.onerror=t.onblocked=r,t=null})}const ii={Index:xt};let Ze,er;function oi(t){Ze=new ii.Index({tokenize:"forward"}),t.forEach((e,n)=>{const r=`${e.title} ${e.content}`;Ze.add(n,r)}),er=t}function li(t){const e=t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return Ze.search(e).map(r=>er[r]).map(({url:r,slug:s,title:i,content:o})=>({url:r,slug:s,title:nr(i,e),content:hi(o,e)}))}function hi(t,e,n=1){const r=new RegExp(e,"gi"),s=[];let i=0,o;for(;(o=r.exec(t))!==null&&i<n;)s.push(o.index),i++;return s.map(l=>{const h=l-20,a=l+80,u=t.substring(h,a).trim();return`...${nr(u,e)}...`})}function nr(t,e){const n=new RegExp(e,"gi");return t.replaceAll(n,r=>`<mark>${r}</mark>`)}var ai=T("<!> <span>Search</span>",1),ui=T('<li class="w-full py-2"><a class="text-neutral-10 text-lg"><!></a> <p class="text-neutral-11"><!></p></li>'),ci=T('<li class="text-neutral-11">No results found.</li>'),fi=T('<ul class="flex flex-col p-4"><!></ul>'),di=T("<!> <!>",1),pi=T("<!> <!>",1);function gi(t,e){rt(e,!0);let n=dt("loading"),r=dt(""),s=U(()=>_(n)==="ready"?li(_(r)):[]);Nr(async()=>{const l=await fetch("/api/search").then(h=>h.json());oi(l),q(n,"ready")});var i=W(),o=E(i);K(o,()=>fs,(l,h)=>{h(l,{children:(a,u)=>{var m=pi(),f=E(m);K(f,()=>ds,(p,d)=>{d(p,{child:(y,v)=>{let b=()=>v==null?void 0:v().props;var C=W(),k=E(C);K(k,()=>He,(w,M)=>{M(w,ht(b,{variant:"ghost",class:"flex justify-between py-1",children:(O,j)=>{var A=ai(),I=E(A);Ae(I,{get icon(){return Ye.searchIcon}}),zt(2),P(O,A)},$$slots:{default:!0}}))}),P(y,C)},$$slots:{child:!0}})});var c=Z(f,2);K(c,()=>us,(p,d)=>{d(p,{class:"p-0",children:(g,y)=>{var v=di(),b=E(v);K(b,()=>Mr,(k,w)=>{w(k,{class:"rounded-b-none",get value(){return _(r)},set value(M){q(r,M,!0)}})});var C=Z(b,2);K(C,()=>In,(k,w)=>{w(k,{class:"",children:(M,O)=>{var j=fi(),A=G(j);{var I=L=>{var D=W(),N=E(D);Qe(N,17,()=>_(s),En,(Y,$)=>{var J=ui(),tt=G(J),nt=G(tt);cn(nt,()=>_($).title),V(tt);var ot=Z(tt,2),ct=G(ot);cn(ct,()=>_($).content),V(ot),V(J),mt(()=>An(tt,"href",_($).url)),P(Y,J)}),P(L,D)},F=L=>{var D=ci();P(L,D)};ut(A,L=>{_(s).length>0?L(I):L(F,!1)})}V(j),P(M,j)},$$slots:{default:!0}})}),P(g,v)},$$slots:{default:!0}})}),P(a,m)},$$slots:{default:!0}})}),P(t,i),st()}var mi=T("<li><!></li>"),vi=T('<header class="border-neutral-6 sticky left-0 top-0 z-50 w-full border-b drop-shadow-md"><nav class="bg-neutral-2 flex items-center justify-between px-8 py-2"><div><ul class="flex items-center gap-6 p-2 text-lg"><li><a href="/"><span class="font-bold">Verdagraph</span></a></li></ul></div> <div class="flex items-center gap-8"><div class="w-max-[300px] w-1/2"><!></div> <ul class="hidden gap-4 md:flex md:gap-8 lg:gap-12"><!> <li><!></li></ul> <div class="flex items-center md:hidden"><!></div></div></nav></header>');function Ii(t,e){rt(e,!1);let n=[{url:"/docs",label:"Docs"},{url:Ge.APP_URL,label:"App"}];Mn();var r=vi(),s=G(r),i=Z(G(s),2),o=G(i),l=G(o);gi(l,{}),V(o);var h=Z(o,2),a=G(h);Qe(a,1,()=>n,En,(p,d)=>{var g=mi(),y=G(g);He(y,{get href(){return _(d).url},variant:"ghost",children:(v,b)=>{zt();var C=Yt();mt(()=>Sn(C,_(d).label)),P(v,C)},$$slots:{default:!0}}),V(g),P(p,g)});var u=Z(a,2),m=G(u);Bn(m,{showLabel:!1}),V(u),V(h);var f=Z(h,2),c=G(f);Gs(c,{}),V(f),V(i),V(s),V(r),P(t,r),st()}export{gs as D,Ii as N,_s as R,ws as T,fn as a,ys as b,Be as c,Fs as d,Ge as e};
