var f6=Object.defineProperty;var z0=t=>{throw TypeError(t)};var h6=(t,e,r)=>e in t?f6(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var z=(t,e,r)=>h6(t,typeof e!="symbol"?e+"":e,r),wp=(t,e,r)=>e.has(t)||z0("Cannot "+r);var _=(t,e,r)=>(wp(t,e,"read from private field"),r?r.call(t):e.get(t)),L=(t,e,r)=>e.has(t)?z0("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),De=(t,e,r,n)=>(wp(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),Nt=(t,e,r)=>(wp(t,e,"access private method"),r);import"./CWj6FrbW.js";import{i as g6}from"./D4tMsWHK.js";import{e as p6,u as $e,aF as m6,p as le,ax as yr,c as re,r as ne,s as Y,t as Ee,a as ce,f as P,K as Ve,U as qe,ap as Me,af as vr,M as p,a8 as U,N as R,ac as fr,Q as v6,n as He,av as Ji,ay as y6,aw as b6,aq as Hm}from"./C33ZBluP.js";import{a0 as _6,s as w6,a1 as Bi,f as Fe,E as nv,C as Oa,a2 as S6,a3 as M_,a4 as ea,g as nr,a5 as x6,c as Jn,d as et,u as dt,Y as mo,a6 as iv,a7 as I6,a8 as C6,a9 as P6,aa as D_,n as xt,e as W,m as Ge,A as E6,a as Lu,B as fs,ab as A6,ac as N_,ad as T6,_ as O6,ae as Da,X as av,H as sv,L as Hi,I as eg,b as F_,z as $_,W as k6,af as R6,K as Wt,J as fn,ag as L_,r as hs,M as gs}from"./D-1toLFz.js";import{y as U0,z as _e,A as M6,G as Gf,a as yi,H as In,J as Un,K as ro,L as no,E as Na,S as Fa,N as D6,O as N6,Q as F6,R as G0,U as B_,V as tg,W as V_,X as rg,Y as $6,Z as L6,_ as B6,$ as V6,a0 as j6,a1 as j_,g as Bu,h as Vu,M as $a,a2 as z6,a3 as U6,a4 as G6,a5 as H6,u as z_,a6 as W6,a7 as K6,a8 as q6,a9 as Y6,aa as X6,ab as U_,q as Q6,j as Z6,e as Kt,i as rr,ac as H0,c as Ue,B as er,I as Je,ad as G_,v as H_,m as W_,l as ot,r as Ga,s as Ha,x as zi,ae as ng,w as J6,af as e9,ag as t9,ah as r9,ai as n9,aj as i9,n as a9,o as s9,C as o9,p as l9,ak as nt,al as c9,b as d9,k as u9}from"./b-jnAxWt.js";import{U as K_,N as f9,P as h9,a as g9,b as q_,e as W0,c as p9,s as m9,d as v9,f as y9,i as Y_,h as Hf,j as b9,g as X_}from"./BuzpPzY2.js";import{g as ki,o as Q_,w as cn,a as ws,d as ov,b as Sp}from"./BKUxGAWh.js";import{$ as li}from"./BSdSrl02.js";import{t as H,a as w,c as F,b as Ke}from"./VptmxkcR.js";import{s as pt}from"./C-nYA6EH.js";import{i as fe,p as T,r as Ce,s as Be,c as M,l as Wa,d as Et,b as Z_,a as J_}from"./QJ-cPXuW.js";import{s as ge}from"./BQUvzZYV.js";import{a as _9}from"./BBx3KdXg.js";import{p as Wf}from"./VBhAFdqd.js";import{b as vo}from"./BdSRcnLh.js";import{g as w9,q as S9}from"./BNEUvLy9.js";import{R as x9,T as I9,C as C9}from"./CJYQxs-V.js";import{u as P9,T as Rr,R as Mr}from"./BZ1wCeQG.js";var Mi,Cs,Il,Mh,ew;const Dh=class Dh{constructor(e){L(this,Mh);L(this,Mi,new WeakMap);L(this,Cs);L(this,Il);De(this,Il,e)}observe(e,r){var n=_(this,Mi).get(e)||new Set;return n.add(r),_(this,Mi).set(e,n),Nt(this,Mh,ew).call(this).observe(e,_(this,Il)),()=>{var i=_(this,Mi).get(e);i.delete(r),i.size===0&&(_(this,Mi).delete(e),_(this,Cs).unobserve(e))}}};Mi=new WeakMap,Cs=new WeakMap,Il=new WeakMap,Mh=new WeakSet,ew=function(){return _(this,Cs)??De(this,Cs,new ResizeObserver(e=>{for(var r of e){Dh.entries.set(r.target,r);for(var n of _(this,Mi).get(r.target)||[])n(r)}}))},z(Dh,"entries",new WeakMap);let Wm=Dh;var E9=new Wm({box:"border-box"});function Km(t,e,r){var n=E9.observe(t,()=>r(t[e]));p6(()=>($e(()=>r(t[e])),n))}function uf(t){let e;const r=_6(i=>{let a=!1;const s=t.subscribe(o=>{e=o,a&&i()});return a=!0,s});function n(){return m6()?(r(),e):ki(t)}return"set"in t?{get current(){return n()},set current(i){t.set(i)}}:{get current(){return n()}}}class xp extends Error{constructor(e,r){super(e),this.name="DevalueError",this.path=r.join("")}}function K0(t){return Object(t)!==t}const A9=Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function T9(t){const e=Object.getPrototypeOf(t);return e===Object.prototype||e===null||Object.getOwnPropertyNames(e).sort().join("\0")===A9}function O9(t){return Object.prototype.toString.call(t).slice(8,-1)}function k9(t){switch(t){case'"':return'\\"';case"<":return"\\u003C";case"\\":return"\\\\";case`
`:return"\\n";case"\r":return"\\r";case"	":return"\\t";case"\b":return"\\b";case"\f":return"\\f";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return t<" "?`\\u${t.charCodeAt(0).toString(16).padStart(4,"0")}`:""}}function ps(t){let e="",r=0;const n=t.length;for(let i=0;i<n;i+=1){const a=t[i],s=k9(a);s&&(e+=t.slice(r,i)+s,r=i+1)}return`"${r===0?t:e+t.slice(r)}"`}function R9(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.getOwnPropertyDescriptor(t,e).enumerable)}const M9=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/;function q0(t){return M9.test(t)?"."+t:"["+JSON.stringify(t)+"]"}function D9(t,e){const r=[],n=new Map,i=[];if(e)for(const c of Object.getOwnPropertyNames(e))i.push({key:c,fn:e[c]});const a=[];let s=0;function o(c){if(typeof c=="function")throw new xp("Cannot stringify a function",a);if(n.has(c))return n.get(c);if(c===void 0)return K_;if(Number.isNaN(c))return f9;if(c===1/0)return h9;if(c===-1/0)return g9;if(c===0&&1/c<0)return q_;const d=s++;n.set(c,d);for(const{key:g,fn:f}of i){const h=f(c);if(h)return r[d]=`["${g}",${o(h)}]`,d}let u="";if(K0(c))u=Ip(c);else{const g=O9(c);switch(g){case"Number":case"String":case"Boolean":u=`["Object",${Ip(c)}]`;break;case"BigInt":u=`["BigInt",${c}]`;break;case"Date":u=`["Date","${!isNaN(c.getDate())?c.toISOString():""}"]`;break;case"RegExp":const{source:h,flags:m}=c;u=m?`["RegExp",${ps(h)},"${m}"]`:`["RegExp",${ps(h)}]`;break;case"Array":u="[";for(let v=0;v<c.length;v+=1)v>0&&(u+=","),v in c?(a.push(`[${v}]`),u+=o(c[v]),a.pop()):u+=p9;u+="]";break;case"Set":u='["Set"';for(const v of c)u+=`,${o(v)}`;u+="]";break;case"Map":u='["Map"';for(const[v,b]of c)a.push(`.get(${K0(v)?Ip(v):"..."})`),u+=`,${o(v)},${o(b)}`,a.pop();u+="]";break;case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":{const b=W0(c.buffer);u='["'+g+'","'+b+'"]';break}case"ArrayBuffer":{u=`["ArrayBuffer","${W0(c)}"]`;break}default:if(!T9(c))throw new xp("Cannot stringify arbitrary non-POJOs",a);if(R9(c).length>0)throw new xp("Cannot stringify POJOs with symbolic keys",a);if(Object.getPrototypeOf(c)===null){u='["null"';for(const v in c)a.push(q0(v)),u+=`,${ps(v)},${o(c[v])}`,a.pop();u+="]"}else{u="{";let v=!1;for(const b in c)v&&(u+=","),v=!0,a.push(q0(b)),u+=`${ps(b)}:${o(c[b])}`,a.pop();u+="}"}}}return r[d]=u,d}const l=o(t);return l<0?`${l}`:`[${r.join(",")}]`}function Ip(t){const e=typeof t;return e==="string"?ps(t):t instanceof String?ps(t.toString()):t===void 0?K_.toString():t===0&&1/t<0?q_.toString():e==="bigint"?`["BigInt","${t}"]`:String(t)}var N9=H('<div class="relative h-full w-full"><div class="absolute left-[0.5px] top-0 h-full w-full"><!></div> <div class="pointer-events-none absolute left-[0.5px] top-0 z-10 h-full w-full"><!></div></div>');function F9(t,e){le(e,!0);const r=yr(e.canvasId);let n;Q_(()=>{r.initialize();const d=new ResizeObserver(r.container.onResize);return d.observe(n),()=>{d.unobserve(n),d.disconnect()}});var i=N9(),a=re(i),s=re(a);{var o=d=>{var u=F(),g=P(u);ge(g,()=>e.children),w(d,u)};fe(s,d=>{r.container.initialized&&d(o)})}ne(a),vo(a,d=>n=d,()=>n);var l=Y(a,2),c=re(l);ge(c,()=>e.overlay),ne(l),ne(i),Ee(()=>w6(a,"id",e.canvasId)),Km(i,"clientWidth",d=>r.container.width=d),Km(i,"clientHeight",d=>r.container.height=d),w(t,i),ce()}function $9(t,e){le(e,!0),yr(e.canvasId).gridManager.initialize(),ce()}const L9={gray1:"#111111",gray2:"#191919",gray3:"#222222",gray4:"#2a2a2a",gray5:"#313131",gray6:"#3a3a3a",gray7:"#484848",gray8:"#606060",gray9:"#6e6e6e",gray10:"#7b7b7b",gray11:"#b4b4b4",gray12:"#eeeeee"},B9={mauve1:"#121113",mauve2:"#1a191b",mauve3:"#232225",mauve4:"#2b292d",mauve5:"#323035",mauve6:"#3c393f",mauve7:"#49474e",mauve8:"#625f69",mauve9:"#6f6d78",mauve10:"#7c7a85",mauve11:"#b5b2bc",mauve12:"#eeeef0"},V9={slate1:"#111113",slate2:"#18191b",slate3:"#212225",slate4:"#272a2d",slate5:"#2e3135",slate6:"#363a3f",slate7:"#43484e",slate8:"#5a6169",slate9:"#696e77",slate10:"#777b84",slate11:"#b0b4ba",slate12:"#edeef0"},j9={sage1:"#101211",sage2:"#171918",sage3:"#202221",sage4:"#272a29",sage5:"#2e3130",sage6:"#373b39",sage7:"#444947",sage8:"#5b625f",sage9:"#63706b",sage10:"#717d79",sage11:"#adb5b2",sage12:"#eceeed"},Y0={olive1:"#111210",olive2:"#181917",olive3:"#212220",olive4:"#282a27",olive5:"#2f312e",olive6:"#383a36",olive7:"#454843",olive8:"#5c625b",olive9:"#687066",olive10:"#767d74",olive11:"#afb5ad",olive12:"#eceeec"},z9={sand1:"#111110",sand2:"#191918",sand3:"#222221",sand4:"#2a2a28",sand5:"#31312e",sand6:"#3b3a37",sand7:"#494844",sand8:"#62605b",sand9:"#6f6d66",sand10:"#7c7b74",sand11:"#b5b3ad",sand12:"#eeeeec"},X0={tomato1:"#181111",tomato2:"#1f1513",tomato3:"#391714",tomato4:"#4e1511",tomato5:"#5e1c16",tomato6:"#6e2920",tomato7:"#853a2d",tomato8:"#ac4d39",tomato9:"#e54d2e",tomato10:"#ec6142",tomato11:"#ff977d",tomato12:"#fbd3cb"},U9={red1:"#191111",red2:"#201314",red3:"#3b1219",red4:"#500f1c",red5:"#611623",red6:"#72232d",red7:"#8c333a",red8:"#b54548",red9:"#e5484d",red10:"#ec5d5e",red11:"#ff9592",red12:"#ffd1d9"},G9={ruby1:"#191113",ruby2:"#1e1517",ruby3:"#3a141e",ruby4:"#4e1325",ruby5:"#5e1a2e",ruby6:"#6f2539",ruby7:"#883447",ruby8:"#b3445a",ruby9:"#e54666",ruby10:"#ec5a72",ruby11:"#ff949d",ruby12:"#fed2e1"},H9={crimson1:"#191114",crimson2:"#201318",crimson3:"#381525",crimson4:"#4d122f",crimson5:"#5c1839",crimson6:"#6d2545",crimson7:"#873356",crimson8:"#b0436e",crimson9:"#e93d82",crimson10:"#ee518a",crimson11:"#ff92ad",crimson12:"#fdd3e8"},W9={pink1:"#191117",pink2:"#21121d",pink3:"#37172f",pink4:"#4b143d",pink5:"#591c47",pink6:"#692955",pink7:"#833869",pink8:"#a84885",pink9:"#d6409f",pink10:"#de51a8",pink11:"#ff8dcc",pink12:"#fdd1ea"},K9={plum1:"#181118",plum2:"#201320",plum3:"#351a35",plum4:"#451d47",plum5:"#512454",plum6:"#5e3061",plum7:"#734079",plum8:"#92549c",plum9:"#ab4aba",plum10:"#b658c4",plum11:"#e796f3",plum12:"#f4d4f4"},q9={purple1:"#18111b",purple2:"#1e1523",purple3:"#301c3b",purple4:"#3d224e",purple5:"#48295c",purple6:"#54346b",purple7:"#664282",purple8:"#8457aa",purple9:"#8e4ec6",purple10:"#9a5cd0",purple11:"#d19dff",purple12:"#ecd9fa"},Y9={violet1:"#14121f",violet2:"#1b1525",violet3:"#291f43",violet4:"#33255b",violet5:"#3c2e69",violet6:"#473876",violet7:"#56468b",violet8:"#6958ad",violet9:"#6e56cf",violet10:"#7d66d9",violet11:"#baa7ff",violet12:"#e2ddfe"},X9={iris1:"#13131e",iris2:"#171625",iris3:"#202248",iris4:"#262a65",iris5:"#303374",iris6:"#3d3e82",iris7:"#4a4a95",iris8:"#5958b1",iris9:"#5b5bd6",iris10:"#6e6ade",iris11:"#b1a9ff",iris12:"#e0dffe"},Q9={indigo1:"#11131f",indigo2:"#141726",indigo3:"#182449",indigo4:"#1d2e62",indigo5:"#253974",indigo6:"#304384",indigo7:"#3a4f97",indigo8:"#435db1",indigo9:"#3e63dd",indigo10:"#5472e4",indigo11:"#9eb1ff",indigo12:"#d6e1ff"},Z9={blue1:"#0d1520",blue2:"#111927",blue3:"#0d2847",blue4:"#003362",blue5:"#004074",blue6:"#104d87",blue7:"#205d9e",blue8:"#2870bd",blue9:"#0090ff",blue10:"#3b9eff",blue11:"#70b8ff",blue12:"#c2e6ff"},J9={cyan1:"#0b161a",cyan2:"#101b20",cyan3:"#082c36",cyan4:"#003848",cyan5:"#004558",cyan6:"#045468",cyan7:"#12677e",cyan8:"#11809c",cyan9:"#00a2c7",cyan10:"#23afd0",cyan11:"#4ccce6",cyan12:"#b6ecf7"},Q0={teal1:"#0d1514",teal2:"#111c1b",teal3:"#0d2d2a",teal4:"#023b37",teal5:"#084843",teal6:"#145750",teal7:"#1c6961",teal8:"#207e73",teal9:"#12a594",teal10:"#0eb39e",teal11:"#0bd8b6",teal12:"#adf0dd"},e8={jade1:"#0d1512",jade2:"#121c18",jade3:"#0f2e22",jade4:"#0b3b2c",jade5:"#114837",jade6:"#1b5745",jade7:"#246854",jade8:"#2a7e68",jade9:"#29a383",jade10:"#27b08b",jade11:"#1fd8a4",jade12:"#adf0d4"},t8={green1:"#0e1512",green2:"#121b17",green3:"#132d21",green4:"#113b29",green5:"#174933",green6:"#20573e",green7:"#28684a",green8:"#2f7c57",green9:"#30a46c",green10:"#33b074",green11:"#3dd68c",green12:"#b1f1cb"},Z0={grass1:"#0e1511",grass2:"#141a15",grass3:"#1b2a1e",grass4:"#1d3a24",grass5:"#25482d",grass6:"#2d5736",grass7:"#366740",grass8:"#3e7949",grass9:"#46a758",grass10:"#53b365",grass11:"#71d083",grass12:"#c2f0c2"},r8={brown1:"#12110f",brown2:"#1c1816",brown3:"#28211d",brown4:"#322922",brown5:"#3e3128",brown6:"#4d3c2f",brown7:"#614a39",brown8:"#7c5f46",brown9:"#ad7f58",brown10:"#b88c67",brown11:"#dbb594",brown12:"#f2e1ca"},n8={bronze1:"#141110",bronze2:"#1c1917",bronze3:"#262220",bronze4:"#302a27",bronze5:"#3b3330",bronze6:"#493e3a",bronze7:"#5a4c47",bronze8:"#6f5f58",bronze9:"#a18072",bronze10:"#ae8c7e",bronze11:"#d4b3a5",bronze12:"#ede0d9"},i8={gold1:"#121211",gold2:"#1b1a17",gold3:"#24231f",gold4:"#2d2b26",gold5:"#38352e",gold6:"#444039",gold7:"#544f46",gold8:"#696256",gold9:"#978365",gold10:"#a39073",gold11:"#cbb99f",gold12:"#e8e2d9"},a8={sky1:"#0d141f",sky2:"#111a27",sky3:"#112840",sky4:"#113555",sky5:"#154467",sky6:"#1b537b",sky7:"#1f6692",sky8:"#197cae",sky9:"#7ce2fe",sky10:"#a8eeff",sky11:"#75c7f0",sky12:"#c2f3ff"},J0={mint1:"#0e1515",mint2:"#0f1b1b",mint3:"#092c2b",mint4:"#003a38",mint5:"#004744",mint6:"#105650",mint7:"#1e685f",mint8:"#277f70",mint9:"#86ead4",mint10:"#a8f5e5",mint11:"#58d5ba",mint12:"#c4f5e1"},ey={lime1:"#11130c",lime2:"#151a10",lime3:"#1f2917",lime4:"#29371d",lime5:"#334423",lime6:"#3d522a",lime7:"#496231",lime8:"#577538",lime9:"#bdee63",lime10:"#d4ff70",lime11:"#bde56c",lime12:"#e3f7ba"},s8={yellow1:"#14120b",yellow2:"#1b180f",yellow3:"#2d2305",yellow4:"#362b00",yellow5:"#433500",yellow6:"#524202",yellow7:"#665417",yellow8:"#836a21",yellow9:"#ffe629",yellow10:"#ffff57",yellow11:"#f5e147",yellow12:"#f6eeb4"},ty={amber1:"#16120c",amber2:"#1d180f",amber3:"#302008",amber4:"#3f2700",amber5:"#4d3000",amber6:"#5c3d05",amber7:"#714f19",amber8:"#8f6424",amber9:"#ffc53d",amber10:"#ffd60a",amber11:"#ffca16",amber12:"#ffe7b3"},o8={orange1:"#17120e",orange2:"#1e160f",orange3:"#331e0b",orange4:"#462100",orange5:"#562800",orange6:"#66350c",orange7:"#7e451d",orange8:"#a35829",orange9:"#f76b15",orange10:"#ff801f",orange11:"#ffa057",orange12:"#ffe0c2"},l8={gray1:"#fcfcfc",gray2:"#f9f9f9",gray3:"#f0f0f0",gray4:"#e8e8e8",gray5:"#e0e0e0",gray6:"#d9d9d9",gray7:"#cecece",gray8:"#bbbbbb",gray9:"#8d8d8d",gray10:"#838383",gray11:"#646464",gray12:"#202020"},c8={mauve1:"#fdfcfd",mauve2:"#faf9fb",mauve3:"#f2eff3",mauve4:"#eae7ec",mauve5:"#e3dfe6",mauve6:"#dbd8e0",mauve7:"#d0cdd7",mauve8:"#bcbac7",mauve9:"#8e8c99",mauve10:"#84828e",mauve11:"#65636d",mauve12:"#211f26"},d8={slate1:"#fcfcfd",slate2:"#f9f9fb",slate3:"#f0f0f3",slate4:"#e8e8ec",slate5:"#e0e1e6",slate6:"#d9d9e0",slate7:"#cdced6",slate8:"#b9bbc6",slate9:"#8b8d98",slate10:"#80838d",slate11:"#60646c",slate12:"#1c2024"},u8={sage1:"#fbfdfc",sage2:"#f7f9f8",sage3:"#eef1f0",sage4:"#e6e9e8",sage5:"#dfe2e0",sage6:"#d7dad9",sage7:"#cbcfcd",sage8:"#b8bcba",sage9:"#868e8b",sage10:"#7c8481",sage11:"#5f6563",sage12:"#1a211e"},ry={olive1:"#fcfdfc",olive2:"#f8faf8",olive3:"#eff1ef",olive4:"#e7e9e7",olive5:"#dfe2df",olive6:"#d7dad7",olive7:"#cccfcc",olive8:"#b9bcb8",olive9:"#898e87",olive10:"#7f847d",olive11:"#60655f",olive12:"#1d211c"},f8={sand1:"#fdfdfc",sand2:"#f9f9f8",sand3:"#f1f0ef",sand4:"#e9e8e6",sand5:"#e2e1de",sand6:"#dad9d6",sand7:"#cfceca",sand8:"#bcbbb5",sand9:"#8d8d86",sand10:"#82827c",sand11:"#63635e",sand12:"#21201c"},ny={tomato1:"#fffcfc",tomato2:"#fff8f7",tomato3:"#feebe7",tomato4:"#ffdcd3",tomato5:"#ffcdc2",tomato6:"#fdbdaf",tomato7:"#f5a898",tomato8:"#ec8e7b",tomato9:"#e54d2e",tomato10:"#dd4425",tomato11:"#d13415",tomato12:"#5c271f"},h8={red1:"#fffcfc",red2:"#fff7f7",red3:"#feebec",red4:"#ffdbdc",red5:"#ffcdce",red6:"#fdbdbe",red7:"#f4a9aa",red8:"#eb8e90",red9:"#e5484d",red10:"#dc3e42",red11:"#ce2c31",red12:"#641723"},g8={ruby1:"#fffcfd",ruby2:"#fff7f8",ruby3:"#feeaed",ruby4:"#ffdce1",ruby5:"#ffced6",ruby6:"#f8bfc8",ruby7:"#efacb8",ruby8:"#e592a3",ruby9:"#e54666",ruby10:"#dc3b5d",ruby11:"#ca244d",ruby12:"#64172b"},p8={crimson1:"#fffcfd",crimson2:"#fef7f9",crimson3:"#ffe9f0",crimson4:"#fedce7",crimson5:"#facedd",crimson6:"#f3bed1",crimson7:"#eaacc3",crimson8:"#e093b2",crimson9:"#e93d82",crimson10:"#df3478",crimson11:"#cb1d63",crimson12:"#621639"},m8={pink1:"#fffcfe",pink2:"#fef7fb",pink3:"#fee9f5",pink4:"#fbdcef",pink5:"#f6cee7",pink6:"#efbfdd",pink7:"#e7acd0",pink8:"#dd93c2",pink9:"#d6409f",pink10:"#cf3897",pink11:"#c2298a",pink12:"#651249"},v8={plum1:"#fefcff",plum2:"#fdf7fd",plum3:"#fbebfb",plum4:"#f7def8",plum5:"#f2d1f3",plum6:"#e9c2ec",plum7:"#deade3",plum8:"#cf91d8",plum9:"#ab4aba",plum10:"#a144af",plum11:"#953ea3",plum12:"#53195d"},y8={purple1:"#fefcfe",purple2:"#fbf7fe",purple3:"#f7edfe",purple4:"#f2e2fc",purple5:"#ead5f9",purple6:"#e0c4f4",purple7:"#d1afec",purple8:"#be93e4",purple9:"#8e4ec6",purple10:"#8347b9",purple11:"#8145b5",purple12:"#402060"},b8={violet1:"#fdfcfe",violet2:"#faf8ff",violet3:"#f4f0fe",violet4:"#ebe4ff",violet5:"#e1d9ff",violet6:"#d4cafe",violet7:"#c2b5f5",violet8:"#aa99ec",violet9:"#6e56cf",violet10:"#654dc4",violet11:"#6550b9",violet12:"#2f265f"},_8={iris1:"#fdfdff",iris2:"#f8f8ff",iris3:"#f0f1fe",iris4:"#e6e7ff",iris5:"#dadcff",iris6:"#cbcdff",iris7:"#b8baf8",iris8:"#9b9ef0",iris9:"#5b5bd6",iris10:"#5151cd",iris11:"#5753c6",iris12:"#272962"},w8={indigo1:"#fdfdfe",indigo2:"#f7f9ff",indigo3:"#edf2fe",indigo4:"#e1e9ff",indigo5:"#d2deff",indigo6:"#c1d0ff",indigo7:"#abbdf9",indigo8:"#8da4ef",indigo9:"#3e63dd",indigo10:"#3358d4",indigo11:"#3a5bc7",indigo12:"#1f2d5c"},S8={blue1:"#fbfdff",blue2:"#f4faff",blue3:"#e6f4fe",blue4:"#d5efff",blue5:"#c2e5ff",blue6:"#acd8fc",blue7:"#8ec8f6",blue8:"#5eb1ef",blue9:"#0090ff",blue10:"#0588f0",blue11:"#0d74ce",blue12:"#113264"},x8={cyan1:"#fafdfe",cyan2:"#f2fafb",cyan3:"#def7f9",cyan4:"#caf1f6",cyan5:"#b5e9f0",cyan6:"#9ddde7",cyan7:"#7dcedc",cyan8:"#3db9cf",cyan9:"#00a2c7",cyan10:"#0797b9",cyan11:"#107d98",cyan12:"#0d3c48"},iy={teal1:"#fafefd",teal2:"#f3fbf9",teal3:"#e0f8f3",teal4:"#ccf3ea",teal5:"#b8eae0",teal6:"#a1ded2",teal7:"#83cdc1",teal8:"#53b9ab",teal9:"#12a594",teal10:"#0d9b8a",teal11:"#008573",teal12:"#0d3d38"},I8={jade1:"#fbfefd",jade2:"#f4fbf7",jade3:"#e6f7ed",jade4:"#d6f1e3",jade5:"#c3e9d7",jade6:"#acdec8",jade7:"#8bceb6",jade8:"#56ba9f",jade9:"#29a383",jade10:"#26997b",jade11:"#208368",jade12:"#1d3b31"},C8={green1:"#fbfefc",green2:"#f4fbf6",green3:"#e6f6eb",green4:"#d6f1df",green5:"#c4e8d1",green6:"#adddc0",green7:"#8eceaa",green8:"#5bb98b",green9:"#30a46c",green10:"#2b9a66",green11:"#218358",green12:"#193b2d"},ay={grass1:"#fbfefb",grass2:"#f5fbf5",grass3:"#e9f6e9",grass4:"#daf1db",grass5:"#c9e8ca",grass6:"#b2ddb5",grass7:"#94ce9a",grass8:"#65ba74",grass9:"#46a758",grass10:"#3e9b4f",grass11:"#2a7e3b",grass12:"#203c25"},P8={brown1:"#fefdfc",brown2:"#fcf9f6",brown3:"#f6eee7",brown4:"#f0e4d9",brown5:"#ebdaca",brown6:"#e4cdb7",brown7:"#dcbc9f",brown8:"#cea37e",brown9:"#ad7f58",brown10:"#a07553",brown11:"#815e46",brown12:"#3e332e"},E8={bronze1:"#fdfcfc",bronze2:"#fdf7f5",bronze3:"#f6edea",bronze4:"#efe4df",bronze5:"#e7d9d3",bronze6:"#dfcdc5",bronze7:"#d3bcb3",bronze8:"#c2a499",bronze9:"#a18072",bronze10:"#957468",bronze11:"#7d5e54",bronze12:"#43302b"},A8={gold1:"#fdfdfc",gold2:"#faf9f2",gold3:"#f2f0e7",gold4:"#eae6db",gold5:"#e1dccf",gold6:"#d8d0bf",gold7:"#cbc0aa",gold8:"#b9a88d",gold9:"#978365",gold10:"#8c7a5e",gold11:"#71624b",gold12:"#3b352b"},T8={sky1:"#f9feff",sky2:"#f1fafd",sky3:"#e1f6fd",sky4:"#d1f0fa",sky5:"#bee7f5",sky6:"#a9daed",sky7:"#8dcae3",sky8:"#60b3d7",sky9:"#7ce2fe",sky10:"#74daf8",sky11:"#00749e",sky12:"#1d3e56"},sy={mint1:"#f9fefd",mint2:"#f2fbf9",mint3:"#ddf9f2",mint4:"#c8f4e9",mint5:"#b3ecde",mint6:"#9ce0d0",mint7:"#7ecfbd",mint8:"#4cbba5",mint9:"#86ead4",mint10:"#7de0cb",mint11:"#027864",mint12:"#16433c"},oy={lime1:"#fcfdfa",lime2:"#f8faf3",lime3:"#eef6d6",lime4:"#e2f0bd",lime5:"#d3e7a6",lime6:"#c2da91",lime7:"#abc978",lime8:"#8db654",lime9:"#bdee63",lime10:"#b0e64c",lime11:"#5c7c2f",lime12:"#37401c"},O8={yellow1:"#fdfdf9",yellow2:"#fefce9",yellow3:"#fffab8",yellow4:"#fff394",yellow5:"#ffe770",yellow6:"#f3d768",yellow7:"#e4c767",yellow8:"#d5ae39",yellow9:"#ffe629",yellow10:"#ffdc00",yellow11:"#9e6c00",yellow12:"#473b1f"},ly={amber1:"#fefdfb",amber2:"#fefbe9",amber3:"#fff7c2",amber4:"#ffee9c",amber5:"#fbe577",amber6:"#f3d673",amber7:"#e9c162",amber8:"#e2a336",amber9:"#ffc53d",amber10:"#ffba18",amber11:"#ab6400",amber12:"#4f3422"},k8={orange1:"#fefcfb",orange2:"#fff7ed",orange3:"#ffefd6",orange4:"#ffdfb5",orange5:"#ffd19a",orange6:"#ffc182",orange7:"#f5ae73",orange8:"#ec9455",orange9:"#f76b15",orange10:"#ef5f00",orange11:"#cc4e00",orange12:"#582d1d"},ff={neutral:{radixId:"olive",radixLightValue:ry,radixDarkValue:Y0},primary:{radixId:"grass",radixLightValue:ay,radixDarkValue:Z0},secondary:{radixId:"teal",radixLightValue:iy,radixDarkValue:Q0},accent:{radixId:"lime",radixLightValue:oy,radixDarkValue:ey},destructive:{radixId:"tomato",radixLightValue:ny,radixDarkValue:X0},warning:{radixId:"amber",radixLightValue:ly,radixDarkValue:ty},success:{radixId:"mint",radixLightValue:sy,radixDarkValue:J0},gray:{radixId:"gray",radixLightValue:l8,radixDarkValue:L9},mauve:{radixId:"mauve",radixLightValue:c8,radixDarkValue:B9},slate:{radixId:"slate",radixLightValue:d8,radixDarkValue:V9},sage:{radixId:"sage",radixLightValue:u8,radixDarkValue:j9},olive:{radixId:"olive",radixLightValue:ry,radixDarkValue:Y0},sand:{radixId:"sand",radixLightValue:f8,radixDarkValue:z9},tomato:{radixId:"tomato",radixLightValue:ny,radixDarkValue:X0},red:{radixId:"red",radixLightValue:h8,radixDarkValue:U9},ruby:{radixId:"ruby",radixLightValue:g8,radixDarkValue:G9},crimson:{radixId:"crimson",radixLightValue:p8,radixDarkValue:H9},pink:{radixId:"pink",radixLightValue:m8,radixDarkValue:W9},plum:{radixId:"plum",radixLightValue:v8,radixDarkValue:K9},purple:{radixId:"purple",radixLightValue:y8,radixDarkValue:q9},violet:{radixId:"violet",radixLightValue:b8,radixDarkValue:Y9},iris:{radixId:"iris",radixLightValue:_8,radixDarkValue:X9},indigo:{radixId:"indigo",radixLightValue:w8,radixDarkValue:Q9},blue:{radixId:"blue",radixLightValue:S8,radixDarkValue:Z9},cyan:{radixId:"cyan",radixLightValue:x8,radixDarkValue:J9},teal:{radixId:"teal",radixLightValue:iy,radixDarkValue:Q0},jade:{radixId:"jade",radixLightValue:I8,radixDarkValue:e8},green:{radixId:"green",radixLightValue:C8,radixDarkValue:t8},grass:{radixId:"grass",radixLightValue:ay,radixDarkValue:Z0},bronze:{radixId:"bronze",radixLightValue:E8,radixDarkValue:n8},gold:{radixId:"gold",radixLightValue:A8,radixDarkValue:i8},brown:{radixId:"brown",radixLightValue:P8,radixDarkValue:r8},orange:{radixId:"orange",radixLightValue:k8,radixDarkValue:o8},amber:{radixId:"amber",radixLightValue:ly,radixDarkValue:ty},yellow:{radixId:"yellow",radixLightValue:O8,radixDarkValue:s8},lime:{radixId:"lime",radixLightValue:oy,radixDarkValue:ey},mint:{radixId:"mint",radixLightValue:sy,radixDarkValue:J0},sky:{radixId:"sky",radixLightValue:T8,radixDarkValue:a8}};function zn(t,e,r){const n=`${ff[t].radixId}${e}`;return r=="light"?ff[t].radixLightValue[n]:r=="dark"?ff[t].radixDarkValue[n]:ff[t].radixLightValue[n]}function _n(t,e){const r=10**e;return Math.round(t*r)/r}const cy=typeof document<"u";function dy(t){const e=cn(t);function r(i){cy&&e.set(i)}function n(i){cy&&e.update(i)}return{subscribe:e.subscribe,set:r,update:n}}let uy=0;function R8(){const t=dy([]),e=dy([]);function r(b){t.update(x=>[b,...x])}function n(b){var O;const{message:x,...y}=b,S=typeof(b==null?void 0:b.id)=="number"||b.id&&((O=b.id)==null?void 0:O.length)>0?b.id:uy++,I=b.dismissable===void 0?!0:b.dismissable,C=b.type===void 0?"default":b.type;return ki(t).find(A=>A.id===S)?t.update(A=>A.map(k=>k.id===S?{...k,...b,id:S,title:x,dismissable:I,type:C,updated:!0}:{...k,updated:!1})):r({...y,id:S,title:x,dismissable:I,type:C}),S}function i(b){if(b===void 0){t.update(x=>x.map(y=>({...y,dismiss:!0})));return}return t.update(x=>x.map(y=>y.id===b?{...y,dismiss:!0}:y)),b}function a(b){if(b===void 0){t.set([]);return}return t.update(x=>x.filter(y=>y.id!==b)),b}function s(b,x){return n({...x,type:"default",message:b})}function o(b,x){return n({...x,type:"error",message:b})}function l(b,x){return n({...x,type:"success",message:b})}function c(b,x){return n({...x,type:"info",message:b})}function d(b,x){return n({...x,type:"warning",message:b})}function u(b,x){return n({...x,type:"loading",message:b})}function g(b,x){if(!x)return;let y;x.loading!==void 0&&(y=n({...x,promise:b,type:"loading",message:x.loading}));const S=b instanceof Promise?b:b();let I=y!==void 0;return S.then(C=>{if(C&&typeof C.ok=="boolean"&&!C.ok){I=!1;const D=typeof x.error=="function"?x.error(`HTTP error! status: ${C.status}`):x.error;n({id:y,type:"error",message:D})}else if(x.success!==void 0){I=!1;const D=typeof x.success=="function"?x.success(C):x.success;n({id:y,type:"success",message:D})}}).catch(C=>{if(x.error!==void 0){I=!1;const D=typeof x.error=="function"?x.error(C):x.error;n({id:y,type:"error",message:D})}}).finally(()=>{var C;I&&(i(y),y=void 0),(C=x.finally)==null||C.call(x)}),y}function f(b,x){const y=(x==null?void 0:x.id)||uy++;return n({component:b,id:y,...x}),y}function h(b){e.update(x=>x.filter(y=>y.toastId!==b))}function m(b){if(ki(e).find(y=>y.toastId===b.toastId)===void 0){e.update(y=>[b,...y]);return}e.update(y=>y.map(S=>S.toastId===b.toastId?b:S))}function v(){t.set([]),e.set([])}return{create:n,addToast:r,dismiss:i,remove:a,message:s,error:o,success:l,info:c,warning:d,loading:u,promise:g,custom:f,removeHeight:h,setHeight:m,reset:v,toasts:t,heights:e}}const $n=R8();function M8(t,e){return $n.create({message:t,...e})}const D8=M8,tw=Object.assign(D8,{success:$n.success,info:$n.info,warning:$n.warning,error:$n.error,custom:$n.custom,message:$n.message,promise:$n.promise,dismiss:$n.dismiss,loading:$n.loading});var $o=function(t){return t&&t.Math===Math&&t},ir=$o(typeof globalThis=="object"&&globalThis)||$o(typeof window=="object"&&window)||$o(typeof self=="object"&&self)||$o(typeof Bi=="object"&&Bi)||$o(typeof Bi=="object"&&Bi)||function(){return this}()||Function("return this")(),ju={},Ur=function(t){try{return!!t()}catch{return!0}},N8=Ur,En=!N8(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),F8=Ur,ig=!F8(function(){var t=(function(){}).bind();return typeof t!="function"||t.hasOwnProperty("prototype")}),$8=ig,hf=Function.prototype.call,yt=$8?hf.bind(hf):function(){return hf.apply(hf,arguments)},rw={},nw={}.propertyIsEnumerable,iw=Object.getOwnPropertyDescriptor,L8=iw&&!nw.call({1:2},1);rw.f=L8?function(e){var r=iw(this,e);return!!r&&r.enumerable}:nw;var lv=function(t,e){return{enumerable:!(t&1),configurable:!(t&2),writable:!(t&4),value:e}},aw=ig,sw=Function.prototype,qm=sw.call,B8=aw&&sw.bind.bind(qm,qm),nn=aw?B8:function(t){return function(){return qm.apply(t,arguments)}},ow=nn,V8=ow({}.toString),j8=ow("".slice),cv=function(t){return j8(V8(t),8,-1)},z8=nn,U8=Ur,G8=cv,Cp=Object,H8=z8("".split),W8=U8(function(){return!Cp("z").propertyIsEnumerable(0)})?function(t){return G8(t)==="String"?H8(t,""):Cp(t)}:Cp,dv=function(t){return t==null},K8=dv,q8=TypeError,uv=function(t){if(K8(t))throw new q8("Can't call method on "+t);return t},Y8=W8,X8=uv,ag=function(t){return Y8(X8(t))},Pp=typeof document=="object"&&document.all,hr=typeof Pp>"u"&&Pp!==void 0?function(t){return typeof t=="function"||t===Pp}:function(t){return typeof t=="function"},Q8=hr,Gr=function(t){return typeof t=="object"?t!==null:Q8(t)},Ep=ir,Z8=hr,J8=function(t){return Z8(t)?t:void 0},An=function(t,e){return arguments.length<2?J8(Ep[t]):Ep[t]&&Ep[t][e]},ex=nn,yo=ex({}.isPrototypeOf),tx=ir,fy=tx.navigator,hy=fy&&fy.userAgent,rx=hy?String(hy):"",lw=ir,Ap=rx,gy=lw.process,py=lw.Deno,my=gy&&gy.versions||py&&py.version,vy=my&&my.v8,Sn,lh;vy&&(Sn=vy.split("."),lh=Sn[0]>0&&Sn[0]<4?1:+(Sn[0]+Sn[1]));!lh&&Ap&&(Sn=Ap.match(/Edge\/(\d+)/),(!Sn||Sn[1]>=74)&&(Sn=Ap.match(/Chrome\/(\d+)/),Sn&&(lh=+Sn[1])));var nx=lh,yy=nx,ix=Ur,ax=ir,sx=ax.String,cw=!!Object.getOwnPropertySymbols&&!ix(function(){var t=Symbol("symbol detection");return!sx(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&yy&&yy<41}),ox=cw,dw=ox&&!Symbol.sham&&typeof Symbol.iterator=="symbol",lx=An,cx=hr,dx=yo,ux=dw,fx=Object,uw=ux?function(t){return typeof t=="symbol"}:function(t){var e=lx("Symbol");return cx(e)&&dx(e.prototype,fx(t))},hx=String,zu=function(t){try{return hx(t)}catch{return"Object"}},gx=hr,px=zu,mx=TypeError,gr=function(t){if(gx(t))return t;throw new mx(px(t)+" is not a function")},vx=gr,yx=dv,ei=function(t,e){var r=t[e];return yx(r)?void 0:vx(r)},Tp=yt,Op=hr,kp=Gr,bx=TypeError,_x=function(t,e){var r,n;if(e==="string"&&Op(r=t.toString)&&!kp(n=Tp(r,t))||Op(r=t.valueOf)&&!kp(n=Tp(r,t))||e!=="string"&&Op(r=t.toString)&&!kp(n=Tp(r,t)))return n;throw new bx("Can't convert object to primitive value")},fw={exports:{}},hw=!1,by=ir,wx=Object.defineProperty,fv=function(t,e){try{wx(by,t,{value:e,configurable:!0,writable:!0})}catch{by[t]=e}return e},Sx=ir,xx=fv,_y="__core-js_shared__",wy=fw.exports=Sx[_y]||xx(_y,{});(wy.versions||(wy.versions=[])).push({version:"3.42.0",mode:"global",copyright:"Â© 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.42.0/LICENSE",source:"https://github.com/zloirock/core-js"});var sg=fw.exports,Sy=sg,gw=function(t,e){return Sy[t]||(Sy[t]=e||{})},Ix=uv,Cx=Object,Uu=function(t){return Cx(Ix(t))},Px=nn,Ex=Uu,Ax=Px({}.hasOwnProperty),gn=Object.hasOwn||function(e,r){return Ax(Ex(e),r)},Tx=nn,Ox=0,kx=Math.random(),Rx=Tx(1 .toString),hv=function(t){return"Symbol("+(t===void 0?"":t)+")_"+Rx(++Ox+kx,36)},Mx=ir,Dx=gw,xy=gn,Nx=hv,Fx=cw,$x=dw,ms=Mx.Symbol,Rp=Dx("wks"),Lx=$x?ms.for||ms:ms&&ms.withoutSetter||Nx,Ir=function(t){return xy(Rp,t)||(Rp[t]=Fx&&xy(ms,t)?ms[t]:Lx("Symbol."+t)),Rp[t]},Bx=yt,Iy=Gr,Cy=uw,Vx=ei,jx=_x,zx=Ir,Ux=TypeError,Gx=zx("toPrimitive"),Hx=function(t,e){if(!Iy(t)||Cy(t))return t;var r=Vx(t,Gx),n;if(r){if(e===void 0&&(e="default"),n=Bx(r,t,e),!Iy(n)||Cy(n))return n;throw new Ux("Can't convert object to primitive value")}return e===void 0&&(e="number"),jx(t,e)},Wx=Hx,Kx=uw,pw=function(t){var e=Wx(t,"string");return Kx(e)?e:e+""},qx=ir,Py=Gr,Ym=qx.document,Yx=Py(Ym)&&Py(Ym.createElement),mw=function(t){return Yx?Ym.createElement(t):{}},Xx=En,Qx=Ur,Zx=mw,vw=!Xx&&!Qx(function(){return Object.defineProperty(Zx("div"),"a",{get:function(){return 7}}).a!==7}),Jx=En,e7=yt,t7=rw,r7=lv,n7=ag,i7=pw,a7=gn,s7=vw,Ey=Object.getOwnPropertyDescriptor;ju.f=Jx?Ey:function(e,r){if(e=n7(e),r=i7(r),s7)try{return Ey(e,r)}catch{}if(a7(e,r))return r7(!e7(t7.f,e,r),e[r])};var ti={},o7=En,l7=Ur,yw=o7&&l7(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),c7=Gr,d7=String,u7=TypeError,bt=function(t){if(c7(t))return t;throw new u7(d7(t)+" is not an object")},f7=En,h7=vw,g7=yw,gf=bt,Ay=pw,p7=TypeError,Mp=Object.defineProperty,m7=Object.getOwnPropertyDescriptor,Dp="enumerable",Np="configurable",Fp="writable";ti.f=f7?g7?function(e,r,n){if(gf(e),r=Ay(r),gf(n),typeof e=="function"&&r==="prototype"&&"value"in n&&Fp in n&&!n[Fp]){var i=m7(e,r);i&&i[Fp]&&(e[r]=n.value,n={configurable:Np in n?n[Np]:i[Np],enumerable:Dp in n?n[Dp]:i[Dp],writable:!1})}return Mp(e,r,n)}:Mp:function(e,r,n){if(gf(e),r=Ay(r),gf(n),h7)try{return Mp(e,r,n)}catch{}if("get"in n||"set"in n)throw new p7("Accessors not supported");return"value"in n&&(e[r]=n.value),e};var v7=En,y7=ti,b7=lv,bo=v7?function(t,e,r){return y7.f(t,e,b7(1,r))}:function(t,e,r){return t[e]=r,t},bw={exports:{}},Xm=En,_7=gn,_w=Function.prototype,w7=Xm&&Object.getOwnPropertyDescriptor,S7=_7(_w,"name"),x7=S7&&(!Xm||Xm&&w7(_w,"name").configurable),I7={CONFIGURABLE:x7},C7=nn,P7=hr,Qm=sg,E7=C7(Function.toString);P7(Qm.inspectSource)||(Qm.inspectSource=function(t){return E7(t)});var ww=Qm.inspectSource,A7=ir,T7=hr,Ty=A7.WeakMap,O7=T7(Ty)&&/native code/.test(String(Ty)),k7=gw,R7=hv,Oy=k7("keys"),gv=function(t){return Oy[t]||(Oy[t]=R7(t))},pv={},M7=O7,Sw=ir,D7=Gr,N7=bo,$p=gn,Lp=sg,F7=gv,$7=pv,ky="Object already initialized",Zm=Sw.TypeError,L7=Sw.WeakMap,ch,fl,dh,B7=function(t){return dh(t)?fl(t):ch(t,{})},V7=function(t){return function(e){var r;if(!D7(e)||(r=fl(e)).type!==t)throw new Zm("Incompatible receiver, "+t+" required");return r}};if(M7||Lp.state){var Mn=Lp.state||(Lp.state=new L7);Mn.get=Mn.get,Mn.has=Mn.has,Mn.set=Mn.set,ch=function(t,e){if(Mn.has(t))throw new Zm(ky);return e.facade=t,Mn.set(t,e),e},fl=function(t){return Mn.get(t)||{}},dh=function(t){return Mn.has(t)}}else{var ts=F7("state");$7[ts]=!0,ch=function(t,e){if($p(t,ts))throw new Zm(ky);return e.facade=t,N7(t,ts,e),e},fl=function(t){return $p(t,ts)?t[ts]:{}},dh=function(t){return $p(t,ts)}}var Gu={set:ch,get:fl,has:dh,enforce:B7,getterFor:V7},mv=nn,j7=Ur,z7=hr,pf=gn,Jm=En,U7=I7.CONFIGURABLE,G7=ww,xw=Gu,H7=xw.enforce,W7=xw.get,Ry=String,Kf=Object.defineProperty,K7=mv("".slice),q7=mv("".replace),Y7=mv([].join),X7=Jm&&!j7(function(){return Kf(function(){},"length",{value:8}).length!==8}),Q7=String(String).split("String"),Z7=bw.exports=function(t,e,r){K7(Ry(e),0,7)==="Symbol("&&(e="["+q7(Ry(e),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),r&&r.getter&&(e="get "+e),r&&r.setter&&(e="set "+e),(!pf(t,"name")||U7&&t.name!==e)&&(Jm?Kf(t,"name",{value:e,configurable:!0}):t.name=e),X7&&r&&pf(r,"arity")&&t.length!==r.arity&&Kf(t,"length",{value:r.arity});try{r&&pf(r,"constructor")&&r.constructor?Jm&&Kf(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch{}var n=H7(t);return pf(n,"source")||(n.source=Y7(Q7,typeof e=="string"?e:"")),t};Function.prototype.toString=Z7(function(){return z7(this)&&W7(this).source||G7(this)},"toString");var Iw=bw.exports,J7=hr,eI=ti,tI=Iw,rI=fv,Hu=function(t,e,r,n){n||(n={});var i=n.enumerable,a=n.name!==void 0?n.name:e;if(J7(r)&&tI(r,a,n),n.global)i?t[e]=r:rI(e,r);else{try{n.unsafe?t[e]&&(i=!0):delete t[e]}catch{}i?t[e]=r:eI.f(t,e,{value:r,enumerable:!1,configurable:!n.nonConfigurable,writable:!n.nonWritable})}return t},Cw={},nI=Math.ceil,iI=Math.floor,aI=Math.trunc||function(e){var r=+e;return(r>0?iI:nI)(r)},sI=aI,vv=function(t){var e=+t;return e!==e||e===0?0:sI(e)},oI=vv,lI=Math.max,cI=Math.min,dI=function(t,e){var r=oI(t);return r<0?lI(r+e,0):cI(r,e)},uI=vv,fI=Math.min,hI=function(t){var e=uI(t);return e>0?fI(e,9007199254740991):0},gI=hI,yv=function(t){return gI(t.length)},pI=ag,mI=dI,vI=yv,yI=function(t){return function(e,r,n){var i=pI(e),a=vI(i);if(a===0)return!t&&-1;var s=mI(n,a),o;if(t&&r!==r){for(;a>s;)if(o=i[s++],o!==o)return!0}else for(;a>s;s++)if((t||s in i)&&i[s]===r)return t||s||0;return!t&&-1}},bI={indexOf:yI(!1)},_I=nn,Bp=gn,wI=ag,SI=bI.indexOf,xI=pv,My=_I([].push),Pw=function(t,e){var r=wI(t),n=0,i=[],a;for(a in r)!Bp(xI,a)&&Bp(r,a)&&My(i,a);for(;e.length>n;)Bp(r,a=e[n++])&&(~SI(i,a)||My(i,a));return i},bv=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],II=Pw,CI=bv,PI=CI.concat("length","prototype");Cw.f=Object.getOwnPropertyNames||function(e){return II(e,PI)};var Ew={};Ew.f=Object.getOwnPropertySymbols;var EI=An,AI=nn,TI=Cw,OI=Ew,kI=bt,RI=AI([].concat),MI=EI("Reflect","ownKeys")||function(e){var r=TI.f(kI(e)),n=OI.f;return n?RI(r,n(e)):r},Dy=gn,DI=MI,NI=ju,FI=ti,$I=function(t,e,r){for(var n=DI(e),i=FI.f,a=NI.f,s=0;s<n.length;s++){var o=n[s];!Dy(t,o)&&!(r&&Dy(r,o))&&i(t,o,a(e,o))}},LI=Ur,BI=hr,VI=/#|\.prototype\./,Wu=function(t,e){var r=zI[jI(t)];return r===GI?!0:r===UI?!1:BI(e)?LI(e):!!e},jI=Wu.normalize=function(t){return String(t).replace(VI,".").toLowerCase()},zI=Wu.data={},UI=Wu.NATIVE="N",GI=Wu.POLYFILL="P",HI=Wu,mf=ir,WI=ju.f,KI=bo,qI=Hu,YI=fv,XI=$I,QI=HI,_t=function(t,e){var r=t.target,n=t.global,i=t.stat,a,s,o,l,c,d;if(n?s=mf:i?s=mf[r]||YI(r,{}):s=mf[r]&&mf[r].prototype,s)for(o in e){if(c=e[o],t.dontCallGetSet?(d=WI(s,o),l=d&&d.value):l=s[o],a=QI(n?o:r+(i?".":"#")+o,t.forced),!a&&l!==void 0){if(typeof c==typeof l)continue;XI(c,l)}(t.sham||l&&l.sham)&&KI(c,"sham",!0),qI(s,o,c,t)}},ZI=yo,JI=TypeError,Aw=function(t,e){if(ZI(e,t))return t;throw new JI("Incorrect invocation")},eC=Ur,tC=!eC(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}),rC=gn,nC=hr,iC=Uu,aC=gv,sC=tC,Ny=aC("IE_PROTO"),e1=Object,oC=e1.prototype,Ku=sC?e1.getPrototypeOf:function(t){var e=iC(t);if(rC(e,Ny))return e[Ny];var r=e.constructor;return nC(r)&&e instanceof r?r.prototype:e instanceof e1?oC:null},Tw={},lC=Pw,cC=bv,dC=Object.keys||function(e){return lC(e,cC)},uC=En,fC=yw,hC=ti,gC=bt,pC=ag,mC=dC;Tw.f=uC&&!fC?Object.defineProperties:function(e,r){gC(e);for(var n=pC(r),i=mC(r),a=i.length,s=0,o;a>s;)hC.f(e,o=i[s++],n[o]);return e};var vC=An,yC=vC("document","documentElement"),bC=bt,_C=Tw,Fy=bv,wC=pv,SC=yC,xC=mw,IC=gv,$y=">",Ly="<",t1="prototype",r1="script",Ow=IC("IE_PROTO"),Vp=function(){},kw=function(t){return Ly+r1+$y+t+Ly+"/"+r1+$y},By=function(t){t.write(kw("")),t.close();var e=t.parentWindow.Object;return t=null,e},CC=function(){var t=xC("iframe"),e="java"+r1+":",r;return t.style.display="none",SC.appendChild(t),t.src=String(e),r=t.contentWindow.document,r.open(),r.write(kw("document.F=Object")),r.close(),r.F},vf,qf=function(){try{vf=new ActiveXObject("htmlfile")}catch{}qf=typeof document<"u"?document.domain&&vf?By(vf):CC():By(vf);for(var t=Fy.length;t--;)delete qf[t1][Fy[t]];return qf()};wC[Ow]=!0;var _v=Object.create||function(e,r){var n;return e!==null?(Vp[t1]=bC(e),n=new Vp,Vp[t1]=null,n[Ow]=e):n=qf(),r===void 0?n:_C.f(n,r)},Rw=ir,Mw=sg,Dw=hr,yf=Ku,PC=Hu,EC=Ir,Vy="USE_FUNCTION_CONSTRUCTOR",jy=EC("asyncIterator"),zy=Rw.AsyncIterator,Uy=Mw.AsyncIteratorPrototype,Ui,jp;if(Uy)Ui=Uy;else if(Dw(zy))Ui=zy.prototype;else if(Mw[Vy]||Rw[Vy])try{jp=yf(yf(yf(Function("return async function*(){}()")()))),yf(jp)===Object.prototype&&(Ui=jp)}catch{}Ui||(Ui={});Dw(Ui[jy])||PC(Ui,jy,function(){return this});var og=Ui,AC=_t,TC=Aw,OC=Ku,Nw=bo,Fw=gn,kC=Ir,Gi=og,RC=hw,Gy=kC("toStringTag"),MC=TypeError,wv=function(){if(TC(this,Gi),OC(this)===Gi)throw new MC("Abstract class AsyncIterator not directly constructable")};wv.prototype=Gi;Fw(Gi,Gy)||Nw(Gi,Gy,"AsyncIterator");(!Fw(Gi,"constructor")||Gi.constructor===Object)&&Nw(Gi,"constructor",wv);AC({global:!0,constructor:!0,forced:RC},{AsyncIterator:wv});var Ft=function(t){return{iterator:t,next:t.next,done:!1}},DC=RangeError,lg=function(t){if(t===t)return t;throw new DC("NaN is not allowed")},NC=vv,FC=RangeError,cg=function(t){var e=NC(t);if(e<0)throw new FC("The argument can't be less than 0");return e},$C=function(t){try{return{error:!1,value:t()}}catch(e){return{error:!0,value:e}}},LC=Hu,Sv=function(t,e,r){for(var n in e)LC(t,n,e[n],r);return t},ta=function(t,e){return{value:t,done:e}},BC=yt,Hy=bt,VC=ei,Fr=function(t,e,r){var n,i;Hy(t);try{if(n=VC(t,"return"),!n){if(e==="throw")throw r;return r}n=BC(n,t)}catch(a){i=!0,n=a}if(e==="throw")throw r;if(i)throw n;return Hy(n),r},jC=yt,bf=$C,Wy=bt,zC=_v,UC=bo,GC=Sv,HC=Ir,$w=Gu,WC=An,KC=ei,qC=og,zp=ta,Ky=Fr,Dn=WC("Promise"),YC=HC("toStringTag"),Lw="AsyncIteratorHelper",Bw="WrapForValidAsyncIterator",XC=$w.set,Vw=function(t){var e=!t,r=$w.getterFor(t?Bw:Lw),n=function(i){var a=bf(function(){return r(i)}),s=a.error,o=a.value;return s||e&&o.done?{exit:!0,value:s?Dn.reject(o):Dn.resolve(zp(void 0,!0))}:{exit:!1,value:o}};return GC(zC(qC),{next:function(){var a=n(this),s=a.value;if(a.exit)return s;var o=bf(function(){return Wy(s.nextHandler(Dn))}),l=o.error,c=o.value;return l&&(s.done=!0),l?Dn.reject(c):Dn.resolve(c)},return:function(){var i=n(this),a=i.value;if(i.exit)return a;a.done=!0;var s=a.iterator,o,l,c=bf(function(){if(a.inner)try{Ky(a.inner.iterator,"normal")}catch(d){return Ky(s,"throw",d)}return KC(s,"return")});return o=l=c.value,c.error?Dn.reject(l):o===void 0?Dn.resolve(zp(void 0,!0)):(c=bf(function(){return jC(o,s)}),l=c.value,c.error?Dn.reject(l):t?Dn.resolve(l):Dn.resolve(l).then(function(d){return Wy(d),zp(void 0,!0)}))}})},QC=Vw(!0),jw=Vw(!1);UC(jw,YC,"Async Iterator Helper");var _o=function(t,e){var r=function(i,a){a?(a.iterator=i.iterator,a.next=i.next):a=i,a.type=e?Bw:Lw,a.nextHandler=t,a.counter=0,a.done=!1,XC(this,a)};return r.prototype=e?QC:jw,r},ZC=_t,JC=yt,n1=bt,eP=Ft,tP=lg,rP=cg,nP=_o,qy=ta,iP=nP(function(t){var e=this;return new t(function(r,n){var i=function(s){e.done=!0,n(s)},a=function(){try{t.resolve(n1(JC(e.next,e.iterator))).then(function(s){try{n1(s).done?(e.done=!0,r(qy(void 0,!0))):e.remaining?(e.remaining--,a()):r(qy(s.value,!1))}catch(o){i(o)}},i)}catch(s){i(s)}};a()})});ZC({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{drop:function(e){n1(this);var r=rP(tP(+e));return new iP(eP(this),{remaining:r})}});var aP=TypeError,sP=9007199254740991,oP=function(t){if(t>sP)throw aP("Maximum allowed index exceeded");return t},lP=yt,cP=An,dP=ei,qu=function(t,e,r,n){try{var i=dP(t,"return");if(i)return cP("Promise").resolve(lP(i,t)).then(function(){e(r)},function(a){n(a)})}catch(a){return n(a)}e(r)},uP=yt,fP=gr,Up=bt,hP=Gr,gP=oP,pP=An,mP=Ft,Gp=qu,Lo=function(t){var e=t===0,r=t===1,n=t===2,i=t===3;return function(a,s,o){Up(a);var l=s!==void 0;(l||!e)&&fP(s);var c=mP(a),d=pP("Promise"),u=c.iterator,g=c.next,f=0;return new d(function(h,m){var v=function(x){Gp(u,m,x,m)},b=function(){try{if(l)try{gP(f)}catch(x){v(x)}d.resolve(Up(uP(g,u))).then(function(x){try{if(Up(x).done)e?(o.length=f,h(o)):h(i?!1:n||void 0);else{var y=x.value;try{if(l){var S=s(y,f),I=function(C){if(r)b();else if(n)C?b():Gp(u,h,!1,m);else if(e)try{o[f++]=C,b()}catch(D){v(D)}else C?Gp(u,h,i||y,m):b()};hP(S)?d.resolve(S).then(I,v):I(S)}else o[f++]=y,b()}catch(C){v(C)}}}catch(C){m(C)}},m)}catch(x){m(x)}};b()})}},wo={toArray:Lo(0),forEach:Lo(1),every:Lo(2),some:Lo(3),find:Lo(4)},vP=_t,yP=wo.every;vP({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{every:function(e){return yP(this,e)}});var bP=_t,_P=yt,wP=gr,i1=bt,SP=Gr,xP=Ft,IP=_o,Yy=ta,CP=qu,PP=IP(function(t){var e=this,r=e.iterator,n=e.predicate;return new t(function(i,a){var s=function(c){e.done=!0,a(c)},o=function(c){CP(r,s,c,s)},l=function(){try{t.resolve(i1(_P(e.next,r))).then(function(c){try{if(i1(c).done)e.done=!0,i(Yy(void 0,!0));else{var d=c.value;try{var u=n(d,e.counter++),g=function(f){f?i(Yy(d,!1)):l()};SP(u)?t.resolve(u).then(g,o):g(u)}catch(f){o(f)}}}catch(f){s(f)}},s)}catch(c){s(c)}};l()})});bP({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{filter:function(e){return i1(this),wP(e),new PP(xP(this),{predicate:e})}});var EP=_t,AP=wo.find;EP({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{find:function(e){return AP(this,e)}});var TP=Ir,OP=TP("toStringTag"),zw={};zw[OP]="z";var kP=String(zw)==="[object z]",RP=kP,MP=hr,Yf=cv,DP=Ir,NP=DP("toStringTag"),FP=Object,$P=Yf(function(){return arguments}())==="Arguments",LP=function(t,e){try{return t[e]}catch{}},xv=RP?Yf:function(t){var e,r,n;return t===void 0?"Undefined":t===null?"Null":typeof(r=LP(e=FP(t),NP))=="string"?r:$P?Yf(e):(n=Yf(e))==="Object"&&MP(e.callee)?"Arguments":n},Uw={},BP=xv,Xy=ei,VP=dv,jP=Uw,zP=Ir,UP=zP("iterator"),Yu=function(t){if(!VP(t))return Xy(t,UP)||Xy(t,"@@iterator")||jP[BP(t)]},Qy=yt,Zy=bt,GP=_v,HP=ei,WP=Sv,Gw=Gu,KP=Fr,qP=An,YP=og,Hw=ta,a1=qP("Promise"),Ww="AsyncFromSyncIterator",XP=Gw.set,Jy=Gw.getterFor(Ww),eb=function(t,e,r,n,i){var a=t.done;a1.resolve(t.value).then(function(s){e(Hw(s,a))},function(s){if(!a&&i)try{KP(n,"throw",s)}catch(o){s=o}r(s)})},Kw=function(e){e.type=Ww,XP(this,e)};Kw.prototype=WP(GP(YP),{next:function(){var e=Jy(this);return new a1(function(r,n){var i=Zy(Qy(e.next,e.iterator));eb(i,r,n,e.iterator,!0)})},return:function(){var t=Jy(this).iterator;return new a1(function(e,r){var n=HP(t,"return");if(n===void 0)return e(Hw(void 0,!0));var i=Zy(Qy(n,t));eb(i,e,r,t)})}});var dg=Kw,QP=yt,ZP=hr,tb=bt,rb=Ft,JP=Yu,eE=ei,tE=Ir,rE=dg,nE=tE("asyncIterator"),qw=function(t){var e=tb(t),r=!0,n=eE(e,nE),i;return ZP(n)||(n=JP(e),r=!1),n!==void 0?i=QP(n,e):(i=e,r=!0),tb(i),rb(r?i:new rE(rb(i)))},iE=_t,nb=yt,aE=gr,rl=bt,sE=Gr,oE=Ft,lE=_o,ib=ta,cE=qw,dE=qu,uE=lE(function(t){var e=this,r=e.iterator,n=e.mapper;return new t(function(i,a){var s=function(d){e.done=!0,a(d)},o=function(d){dE(r,s,d,s)},l=function(){try{t.resolve(rl(nb(e.next,r))).then(function(d){try{if(rl(d).done)e.done=!0,i(ib(void 0,!0));else{var u=d.value;try{var g=n(u,e.counter++),f=function(h){try{e.inner=cE(h),c()}catch(m){o(m)}};sE(g)?t.resolve(g).then(f,o):f(g)}catch(h){o(h)}}}catch(h){s(h)}},s)}catch(d){s(d)}},c=function(){var d=e.inner;if(d)try{t.resolve(rl(nb(d.next,d.iterator))).then(function(u){try{rl(u).done?(e.inner=null,l()):i(ib(u.value,!1))}catch(g){o(g)}},o)}catch(u){o(u)}else l()};c()})});iE({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{flatMap:function(e){return rl(this),aE(e),new uE(oE(this),{mapper:e,inner:null})}});var fE=_t,hE=wo.forEach;fE({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{forEach:function(e){return hE(this,e)}});var gE=yt,pE=_o,Yw=pE(function(){return gE(this.next,this.iterator)},!0),mE=_t,vE=Uu,yE=yo,bE=qw,_E=og,wE=Yw;mE({target:"AsyncIterator",stat:!0,forced:!0},{from:function(e){var r=bE(typeof e=="string"?vE(e):e);return yE(_E,r.iterator)?r.iterator:new wE(r)}});var SE=yt,xE=gr,s1=bt,IE=Gr,CE=Ft,PE=_o,ab=ta,EE=qu,AE=PE(function(t){var e=this,r=e.iterator,n=e.mapper;return new t(function(i,a){var s=function(l){e.done=!0,a(l)},o=function(l){EE(r,s,l,s)};t.resolve(s1(SE(e.next,r))).then(function(l){try{if(s1(l).done)e.done=!0,i(ab(void 0,!0));else{var c=l.value;try{var d=n(c,e.counter++),u=function(g){i(ab(g,!1))};IE(d)?t.resolve(d).then(u,o):u(d)}catch(g){o(g)}}}catch(g){s(g)}},s)})}),Xw=function(e){return s1(this),xE(e),new AE(CE(this),{mapper:e})},TE=_t,OE=Xw;TE({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{map:OE});var kE=_t,RE=yt,ME=gr,Hp=bt,DE=Gr,NE=An,FE=Ft,$E=qu,Wp=NE("Promise"),LE=TypeError;kE({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{reduce:function(e){Hp(this),ME(e);var r=FE(this),n=r.iterator,i=r.next,a=arguments.length<2,s=a?void 0:arguments[1],o=0;return new Wp(function(l,c){var d=function(g){$E(n,c,g,c)},u=function(){try{Wp.resolve(Hp(RE(i,n))).then(function(g){try{if(Hp(g).done)a?c(new LE("Reduce of empty iterator with no initial value")):l(s);else{var f=g.value;if(a)a=!1,s=f,u();else try{var h=e(s,f,o),m=function(v){s=v,u()};DE(h)?Wp.resolve(h).then(m,d):m(h)}catch(v){d(v)}}o++}catch(v){c(v)}},c)}catch(g){c(g)}};u()})}});var BE=_t,VE=wo.some;BE({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{some:function(e){return VE(this,e)}});var jE=_t,sb=yt,Qw=bt,zE=Ft,UE=lg,GE=cg,HE=_o,Kp=ta,WE=HE(function(t){var e=this,r=e.iterator,n;if(!e.remaining--){var i=Kp(void 0,!0);return e.done=!0,n=r.return,n!==void 0?t.resolve(sb(n,r,void 0)).then(function(){return i}):i}return t.resolve(sb(e.next,r)).then(function(a){return Qw(a).done?(e.done=!0,Kp(void 0,!0)):Kp(a.value,!1)}).then(null,function(a){throw e.done=!0,a})});jE({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{take:function(e){Qw(this);var r=GE(UE(+e));return new WE(zE(this),{remaining:r})}});var KE=_t,qE=wo.toArray;KE({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{toArray:function(){return qE(this,void 0,[])}});var ob=Iw,YE=ti,Zw=function(t,e,r){return r.get&&ob(r.get,e,{getter:!0}),r.set&&ob(r.set,e,{setter:!0}),YE.f(t,e,r)},XE=En,QE=ti,ZE=lv,JE=function(t,e,r){XE?QE.f(t,e,ZE(0,r)):t[e]=r},eA=Ur,tA=hr,rA=Gr,lb=Ku,nA=Hu,iA=Ir,o1=iA("iterator"),La,qp,Yp;[].keys&&(Yp=[].keys(),"next"in Yp&&(qp=lb(lb(Yp)),qp!==Object.prototype&&(La=qp)));var aA=!rA(La)||eA(function(){var t={};return La[o1].call(t)!==t});aA&&(La={});tA(La[o1])||nA(La,o1,function(){return this});var ug={IteratorPrototype:La},sA=_t,oA=ir,lA=Aw,cA=bt,dA=hr,uA=Ku,fA=Zw,hA=JE,gA=Ur,Iv=gn,pA=Ir,qn=ug.IteratorPrototype,mA=En,Xp="constructor",Jw="Iterator",cb=pA("toStringTag"),e3=TypeError,Qp=oA[Jw],t3=!dA(Qp)||Qp.prototype!==qn||!gA(function(){Qp({})}),Cv=function(){if(lA(this,qn),uA(this)===qn)throw new e3("Abstract class Iterator not directly constructable")},r3=function(t,e){mA?fA(qn,t,{configurable:!0,get:function(){return e},set:function(r){if(cA(this),this===qn)throw new e3("You can't redefine this property");Iv(this,t)?this[t]=r:hA(this,t,r)}}):qn[t]=e};Iv(qn,cb)||r3(cb,Jw);(t3||!Iv(qn,Xp)||qn[Xp]===Object)&&r3(Xp,Cv);Cv.prototype=qn;sA({global:!0,constructor:!0,forced:t3},{Iterator:Cv});var vA=yt,yA=_v,bA=bo,_A=Sv,wA=Ir,n3=Gu,SA=ei,xA=ug.IteratorPrototype,_f=ta,Zp=Fr,IA=wA("toStringTag"),i3="IteratorHelper",a3="WrapForValidIterator",CA=n3.set,s3=function(t){var e=n3.getterFor(t?a3:i3);return _A(yA(xA),{next:function(){var n=e(this);if(t)return n.nextHandler();if(n.done)return _f(void 0,!0);try{var i=n.nextHandler();return n.returnHandlerResult?i:_f(i,n.done)}catch(a){throw n.done=!0,a}},return:function(){var r=e(this),n=r.iterator;if(r.done=!0,t){var i=SA(n,"return");return i?vA(i,n):_f(void 0,!0)}if(r.inner)try{Zp(r.inner.iterator,"normal")}catch(a){return Zp(n,"throw",a)}return n&&Zp(n,"normal"),_f(void 0,!0)}})},PA=s3(!0),o3=s3(!1);bA(o3,IA,"Iterator Helper");var So=function(t,e,r){var n=function(a,s){s?(s.iterator=a.iterator,s.next=a.next):s=a,s.type=e?a3:i3,s.returnHandlerResult=!!r,s.nextHandler=t,s.counter=0,s.done=!1,CA(this,s)};return n.prototype=e?PA:o3,n},EA=ir,ri=function(t,e){var r=EA.Iterator,n=r&&r.prototype,i=n&&n[t],a=!1;if(i)try{i.call({next:function(){return{done:!0}},return:function(){a=!0}},-1)}catch(s){s instanceof e||(a=!1)}if(!a)return i},AA=_t,l1=yt,c1=bt,TA=Ft,OA=lg,kA=cg,RA=Fr,MA=So,DA=ri,Jp=DA("drop",RangeError),NA=MA(function(){for(var t=this.iterator,e=this.next,r,n;this.remaining;)if(this.remaining--,r=c1(l1(e,t)),n=this.done=!!r.done,n)return;if(r=c1(l1(e,t)),n=this.done=!!r.done,!n)return r.value});AA({target:"Iterator",proto:!0,real:!0,forced:Jp},{drop:function(e){c1(this);var r;try{r=kA(OA(+e))}catch(n){RA(this,"throw",n)}return Jp?l1(Jp,this,r):new NA(TA(this),{remaining:r})}});var FA=cv,$A=nn,LA=function(t){if(FA(t)==="Function")return $A(t)},db=LA,BA=gr,VA=ig,jA=db(db.bind),l3=function(t,e){return BA(t),e===void 0?t:VA?jA(t,e):function(){return t.apply(e,arguments)}},zA=Ir,UA=Uw,GA=zA("iterator"),HA=Array.prototype,WA=function(t){return t!==void 0&&(UA.Array===t||HA[GA]===t)},KA=yt,qA=gr,YA=bt,XA=zu,QA=Yu,ZA=TypeError,Pv=function(t,e){var r=arguments.length<2?QA(t):e;if(qA(r))return YA(KA(r,t));throw new ZA(XA(t)+" is not iterable")},JA=l3,eT=yt,tT=bt,rT=zu,nT=WA,iT=yv,ub=yo,aT=Pv,sT=Yu,fb=Fr,oT=TypeError,Xf=function(t,e){this.stopped=t,this.result=e},hb=Xf.prototype,xo=function(t,e,r){var n=r&&r.that,i=!!(r&&r.AS_ENTRIES),a=!!(r&&r.IS_RECORD),s=!!(r&&r.IS_ITERATOR),o=!!(r&&r.INTERRUPTED),l=JA(e,n),c,d,u,g,f,h,m,v=function(x){return c&&fb(c,"normal",x),new Xf(!0,x)},b=function(x){return i?(tT(x),o?l(x[0],x[1],v):l(x[0],x[1])):o?l(x,v):l(x)};if(a)c=t.iterator;else if(s)c=t;else{if(d=sT(t),!d)throw new oT(rT(t)+" is not iterable");if(nT(d)){for(u=0,g=iT(t);g>u;u++)if(f=b(t[u]),f&&ub(hb,f))return f;return new Xf(!1)}c=aT(t,d)}for(h=a?t.next:c.next;!(m=eT(h,c)).done;){try{f=b(m.value)}catch(x){fb(c,"throw",x)}if(typeof f=="object"&&f&&ub(hb,f))return f}return new Xf(!1)},lT=_t,cT=yt,dT=xo,uT=gr,fT=bt,hT=Ft,gT=Fr,pT=ri,em=pT("every",TypeError);lT({target:"Iterator",proto:!0,real:!0,forced:em},{every:function(e){fT(this);try{uT(e)}catch(i){gT(this,"throw",i)}if(em)return cT(em,this,e);var r=hT(this),n=0;return!dT(r,function(i,a){if(!e(i,n++))return a()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}});var mT=bt,vT=Fr,c3=function(t,e,r,n){try{return n?e(mT(r)[0],r[1]):e(r)}catch(i){vT(t,"throw",i)}},yT=_t,d3=yt,bT=gr,u3=bt,_T=Ft,wT=So,ST=c3,xT=Fr,IT=ri,tm=IT("filter",TypeError),CT=wT(function(){for(var t=this.iterator,e=this.predicate,r=this.next,n,i,a;;){if(n=u3(d3(r,t)),i=this.done=!!n.done,i)return;if(a=n.value,ST(t,e,[a,this.counter++],!0))return a}});yT({target:"Iterator",proto:!0,real:!0,forced:tm},{filter:function(e){u3(this);try{bT(e)}catch(r){xT(this,"throw",r)}return tm?d3(tm,this,e):new CT(_T(this),{predicate:e})}});var PT=_t,ET=yt,AT=xo,TT=gr,OT=bt,kT=Ft,RT=Fr,MT=ri,rm=MT("find",TypeError);PT({target:"Iterator",proto:!0,real:!0,forced:rm},{find:function(e){OT(this);try{TT(e)}catch(i){RT(this,"throw",i)}if(rm)return ET(rm,this,e);var r=kT(this),n=0;return AT(r,function(i,a){if(e(i,n++))return a(i)},{IS_RECORD:!0,INTERRUPTED:!0}).result}});var DT=yt,gb=bt,NT=Ft,FT=Yu,f3=function(t,e){(!e||typeof t!="string")&&gb(t);var r=FT(t);return NT(gb(r!==void 0?DT(r,t):t))},$T=_t,d1=yt,LT=gr,u1=bt,BT=Ft,VT=f3,jT=So,f1=Fr,zT=ri,nm=zT("flatMap",TypeError),UT=jT(function(){for(var t=this.iterator,e=this.mapper,r,n;;){if(n=this.inner)try{if(r=u1(d1(n.next,n.iterator)),!r.done)return r.value;this.inner=null}catch(i){f1(t,"throw",i)}if(r=u1(d1(this.next,t)),this.done=!!r.done)return;try{this.inner=VT(e(r.value,this.counter++),!1)}catch(i){f1(t,"throw",i)}}});$T({target:"Iterator",proto:!0,real:!0,forced:nm},{flatMap:function(e){u1(this);try{LT(e)}catch(r){f1(this,"throw",r)}return nm?d1(nm,this,e):new UT(BT(this),{mapper:e,inner:null})}});var GT=_t,HT=yt,WT=xo,KT=gr,qT=bt,YT=Ft,XT=Fr,QT=ri,im=QT("forEach",TypeError);GT({target:"Iterator",proto:!0,real:!0,forced:im},{forEach:function(e){qT(this);try{KT(e)}catch(i){XT(this,"throw",i)}if(im)return HT(im,this,e);var r=YT(this),n=0;WT(r,function(i){e(i,n++)},{IS_RECORD:!0})}});var ZT=_t,JT=yt,eO=Uu,tO=yo,rO=ug.IteratorPrototype,nO=So,iO=f3,aO=hw,sO=nO(function(){return JT(this.next,this.iterator)},!0);ZT({target:"Iterator",stat:!0,forced:aO},{from:function(e){var r=iO(typeof e=="string"?eO(e):e,!0);return tO(rO,r.iterator)?r.iterator:new sO(r)}});var oO=_t,h3=yt,lO=gr,g3=bt,cO=Ft,dO=So,uO=c3,fO=Fr,hO=ri,am=hO("map",TypeError),gO=dO(function(){var t=this.iterator,e=g3(h3(this.next,t)),r=this.done=!!e.done;if(!r)return uO(t,this.mapper,[e.value,this.counter++],!0)});oO({target:"Iterator",proto:!0,real:!0,forced:am},{map:function(e){g3(this);try{lO(e)}catch(r){fO(this,"throw",r)}return am?h3(am,this,e):new gO(cO(this),{mapper:e})}});var pO=ig,p3=Function.prototype,pb=p3.apply,mb=p3.call,mO=typeof Reflect=="object"&&Reflect.apply||(pO?mb.bind(pb):function(){return mb.apply(pb,arguments)}),vO=_t,yO=xo,bO=gr,_O=bt,wO=Ft,SO=Fr,xO=ri,IO=mO,CO=Ur,m3=TypeError,v3=CO(function(){[].keys().reduce(function(){},void 0)}),sm=!v3&&xO("reduce",m3);vO({target:"Iterator",proto:!0,real:!0,forced:v3||sm},{reduce:function(e){_O(this);try{bO(e)}catch(s){SO(this,"throw",s)}var r=arguments.length<2,n=r?void 0:arguments[1];if(sm)return IO(sm,this,r?[e]:[e,n]);var i=wO(this),a=0;if(yO(i,function(s){r?(r=!1,n=s):n=e(n,s,a),a++},{IS_RECORD:!0}),r)throw new m3("Reduce of empty iterator with no initial value");return n}});var PO=_t,EO=yt,AO=xo,TO=gr,OO=bt,kO=Ft,RO=Fr,MO=ri,om=MO("some",TypeError);PO({target:"Iterator",proto:!0,real:!0,forced:om},{some:function(e){OO(this);try{TO(e)}catch(i){RO(this,"throw",i)}if(om)return EO(om,this,e);var r=kO(this),n=0;return AO(r,function(i,a){if(e(i,n++))return a()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}});var DO=_t,y3=yt,b3=bt,NO=Ft,FO=lg,$O=cg,LO=So,_3=Fr,BO=ri,lm=BO("take",RangeError),VO=LO(function(){var t=this.iterator;if(!this.remaining--)return this.done=!0,_3(t,"normal",void 0);var e=b3(y3(this.next,t)),r=this.done=!!e.done;if(!r)return e.value});DO({target:"Iterator",proto:!0,real:!0,forced:lm},{take:function(e){b3(this);var r;try{r=$O(FO(+e))}catch(n){_3(this,"throw",n)}return lm?y3(lm,this,r):new VO(NO(this),{remaining:r})}});var jO=_t,zO=bt,UO=xo,GO=Ft,HO=[].push;jO({target:"Iterator",proto:!0,real:!0},{toArray:function(){var e=[];return UO(GO(zO(this)),HO,{that:e,IS_RECORD:!0}),e}});var WO=_t,KO=bt,qO=dg,YO=Yw,vb=Ft;WO({target:"Iterator",proto:!0,real:!0,forced:!0},{toAsync:function(){return new YO(vb(new qO(vb(KO(this)))))}});var XO=yt,QO=Xw,ZO=function(t,e){return[e,t]},w3=function(){return XO(QO,this,ZO)},JO=_t,ek=w3;JO({target:"AsyncIterator",name:"indexed",proto:!0,real:!0,forced:!0},{asIndexedPairs:ek});var tk=_t,rk=w3;tk({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{indexed:rk});var nk=yt,ik=ug.IteratorPrototype.map,ak=function(t,e){return[e,t]},S3=function(){return nk(ik,this,ak)},sk=_t,ok=S3;sk({target:"Iterator",name:"indexed",proto:!0,real:!0,forced:!0},{asIndexedPairs:ok});var lk=_t,ck=S3;lk({target:"Iterator",proto:!0,real:!0,forced:!0},{indexed:ck});var x3={},yb=gr,dk=TypeError,uk=function(t){var e,r;this.promise=new t(function(n,i){if(e!==void 0||r!==void 0)throw new dk("Bad Promise constructor");e=n,r=i}),this.resolve=yb(e),this.reject=yb(r)};x3.f=function(t){return new uk(t)};var fk=_t,hk=x3;fk({target:"Promise",stat:!0},{withResolvers:function(){var e=hk.f(this);return{promise:e.promise,resolve:e.resolve,reject:e.reject}}});var gk=ir,pk=gk,fg={},mk=Ir;fg.f=mk;var bb=pk,vk=gn,yk=fg,bk=ti.f,I3=function(t){var e=bb.Symbol||(bb.Symbol={});vk(e,t)||bk(e,t,{value:yk.f(t)})},_k=ir,wk=I3,Sk=ti.f,xk=ju.f,cm=_k.Symbol;wk("asyncDispose");if(cm){var wf=xk(cm,"asyncDispose");wf.enumerable&&wf.configurable&&wf.writable&&Sk(cm,"asyncDispose",{value:wf.value,enumerable:!1,configurable:!1,writable:!1})}var Ik=fg;Ik.f("asyncDispose");var Ck=ir,Pk=I3,Ek=ti.f,Ak=ju.f,dm=Ck.Symbol;Pk("dispose");if(dm){var Sf=Ak(dm,"dispose");Sf.enumerable&&Sf.configurable&&Sf.writable&&Ek(dm,"dispose",{value:Sf.value,enumerable:!1,configurable:!1,writable:!1})}var Tk=fg;Tk.f("dispose");var Ok=nn,kk=Ur,C3=hr,Rk=xv,Mk=An,Dk=ww,P3=function(){},E3=Mk("Reflect","construct"),Ev=/^\s*(?:class|function)\b/,Nk=Ok(Ev.exec),Fk=!Ev.test(P3),Bo=function(e){if(!C3(e))return!1;try{return E3(P3,[],e),!0}catch{return!1}},A3=function(e){if(!C3(e))return!1;switch(Rk(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Fk||!!Nk(Ev,Dk(e))}catch{return!0}};A3.sham=!0;var T3=!E3||kk(function(){var t;return Bo(Bo.call)||!Bo(Object)||!Bo(function(){t=!0})||t})?A3:Bo,$k=yt,Lk=dg,Bk=bt,Vk=Pv,jk=Ft,zk=ei,Uk=Ir,Gk=Uk("asyncIterator"),Hk=function(t,e){var r=arguments.length<2?zk(t,Gk):e;return r?Bk($k(r,t)):new Lk(jk(Vk(t)))},Wk=ir,Kk=function(t,e){var r=Wk[t],n=r&&r.prototype;return n&&n[e]},qk=l3,O3=nn,Yk=Uu,Xk=T3,Qk=Hk,Zk=Pv,Jk=Ft,eR=Yu,tR=ei,rR=An,nR=Kk,iR=Ir,aR=dg,sR=wo.toArray,oR=iR("asyncIterator"),k3=O3(nR("Array","values")),lR=O3(k3([]).next),cR=function(){return new R3(this)},R3=function(t){this.iterator=k3(t)};R3.prototype.next=function(){return lR(this.iterator)};var M3=function(e){var r=this,n=arguments.length,i=n>1?arguments[1]:void 0,a=n>2?arguments[2]:void 0;return new(rR("Promise"))(function(s){var o=Yk(e);i!==void 0&&(i=qk(i,a));var l=tR(o,oR),c=l?void 0:eR(o)||cR,d=Xk(r)?new r:[],u=l?Qk(o,l):new aR(Jk(Zk(o,c)));s(sR(u,i,d))})},dR=_t,uR=M3,fR=Ur,_b=Array.fromAsync,hR=!_b||fR(function(){var t=0;return _b.call(function(){return t++,[]},{length:0}),t!==1});dR({target:"Array",stat:!0,forced:hR},{fromAsync:uR});var gR=T3,pR=zu,mR=TypeError,vR=function(t){if(gR(t))return t;throw new mR(pR(t)+" is not a constructor")},yR=typeof ArrayBuffer<"u"&&typeof DataView<"u",bR=nn,_R=gr,wR=function(t,e,r){try{return bR(_R(Object.getOwnPropertyDescriptor(t,e)[r]))}catch{}},SR=Gr,xR=function(t){return SR(t)||t===null},IR=xR,CR=String,PR=TypeError,ER=function(t){if(IR(t))return t;throw new PR("Can't set "+CR(t)+" as a prototype")},AR=wR,TR=Gr,OR=uv,kR=ER,RR=Object.setPrototypeOf||("__proto__"in{}?function(){var t=!1,e={},r;try{r=AR(Object.prototype,"__proto__","set"),r(e,[]),t=e instanceof Array}catch{}return function(i,a){return OR(i),kR(a),TR(i)&&(t?r(i,a):i.__proto__=a),i}}():void 0),MR=yR,D3=En,zr=ir,N3=hr,DR=Gr,F3=gn,NR=xv,FR=zu,$R=bo,wb=Hu,LR=Zw,BR=yo,Av=Ku,Io=RR,VR=Ir,jR=hv,$3=Gu,L3=$3.enforce;$3.get;var uh=zr.Int8Array,Sb=uh&&uh.prototype,xb=zr.Uint8ClampedArray,Ib=xb&&xb.prototype,hi=uh&&Av(uh),Vi=Sb&&Av(Sb),zR=Object.prototype,B3=zr.TypeError,Cb=VR("toStringTag"),Pb=jR("TYPED_ARRAY_TAG"),V3="TypedArrayConstructor",Ba=MR&&!!Io&&NR(zr.opera)!=="Opera",Br,ji,Ss,io={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},UR={BigInt64Array:8,BigUint64Array:8},GR=function(t){if(N3(t)&&(!Io||BR(hi,t)))return t;throw new B3(FR(t)+" is not a typed array constructor")},HR=function(t,e,r){var n,i;if(D3){if(Io){if(r){for(n in io)if(i=zr[n],i&&F3(i,t))try{delete i[t]}catch{}}if(!hi[t]||r)try{return wb(hi,t,r?e:Ba&&hi[t]||e)}catch{}else return}for(n in io)i=zr[n],i&&(!i[t]||r)&&wb(i,t,e)}};for(Br in io)ji=zr[Br],Ss=ji&&ji.prototype,Ss?L3(Ss)[V3]=ji:Ba=!1;for(Br in UR)ji=zr[Br],Ss=ji&&ji.prototype,Ss&&(L3(Ss)[V3]=ji);if((!Ba||!N3(hi)||hi===Function.prototype)&&(hi=function(){throw new B3("Incorrect invocation")},Ba))for(Br in io)zr[Br]&&Io(zr[Br],hi);if((!Ba||!Vi||Vi===zR)&&(Vi=hi.prototype,Ba))for(Br in io)zr[Br]&&Io(zr[Br].prototype,Vi);Ba&&Av(Ib)!==Vi&&Io(Ib,Vi);if(D3&&!F3(Vi,Cb)){LR(Vi,Cb,{configurable:!0,get:function(){return DR(this)?this[Pb]:void 0}});for(Br in io)zr[Br]&&$R(zr[Br],Pb,Br)}var WR={aTypedArrayConstructor:GR,exportTypedArrayStaticMethod:HR},KR=yv,qR=function(t,e,r){for(var n=0,i=arguments.length>2?r:KR(e),a=new t(i);i>n;)a[n]=e[n++];return a},YR=An,XR=vR,QR=M3,j3=WR,ZR=qR,JR=j3.aTypedArrayConstructor,eM=j3.exportTypedArrayStaticMethod;eM("fromAsync",function(e){var r=this,n=arguments.length,i=n>1?arguments[1]:void 0,a=n>2?arguments[2]:void 0;return new(YR("Promise"))(function(s){XR(r),s(QR(e,i,a))}).then(function(s){return ZR(JR(r),s)})},!0);const h1=null;class z3 extends Error{constructor(e,r){super((r+": "||"Unreachable: ")+e)}}function um(t){if(t===null||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===Object.prototype||e===null}function vs(t,e){return t>e?1:t<e?-1:0}const Ri={null:"b",object:"c",array:"d",number:"e",string:"f",boolean:"g"},Eb=new Map(Object.entries(Ri).sort((t,e)=>t[1]<e[1]?-1:1).map(([t],e)=>[t,e]));function Ab(t){if(t===null)return"null";if(t===!0||t===!1)return"boolean";if(typeof t=="string")return"string";if(typeof t=="number")return"number";if(Array.isArray(t))return"array";if(typeof t=="object")return"object";throw new z3(t,"Unknown value type")}Object.fromEntries(Object.entries(Ri).map(([t,e])=>[e,t]));function xn(t,e){const r=Ab(t),n=Ab(e);if(r===n){if(r==="array")return U3(t,e);if(r==="object")return t===e?0:um(t)?um(e)?tM(t,e):-1:(um(e),1);if(r==="boolean")return vs(t,e);if(r==="null")return 0;if(r==="number")return vs(t,e);if(r==="string")return vs(t,e);throw new z3(r)}return vs(Eb.get(r),Eb.get(n))}function tM(t,e){const r=Object.entries(t).filter(([a,s])=>s!==void 0).sort(([a],[s])=>vs(a,s)),n=Object.entries(e).filter(([a,s])=>s!==void 0).sort(([a],[s])=>vs(a,s)),i=Math.min(r.length,n.length);for(let a=0;a<i;a++){const[s,o]=r[a],[l,c]=n[a],d=xn(s,l);if(d===0){const u=xn(o,c);if(u===0)continue;return u}return d}return r.length>n.length?1:r.length<n.length?-1:0}function U3(t,e){const r=Math.min(t.length,e.length);for(let n=0;n<r;n++){const i=xn(t[n],e[n]);if(i!==0)return i}return t.length>e.length?1:t.length<e.length?-1:0}function Tb(t){return{type:"string",config:{enum:t==null?void 0:t.enum,nullable:t==null?void 0:t.nullable,default:t==null?void 0:t.default}}}function rM(t){return{type:"number",config:{nullable:t==null?void 0:t.nullable,default:t==null?void 0:t.default}}}function nM(t){return{type:"boolean",config:{nullable:t==null?void 0:t.nullable,default:t==null?void 0:t.default}}}function iM(t){return{type:"date",config:{nullable:t==null?void 0:t.nullable,default:t==null?void 0:t.default}}}function Ob(t,e){return{type:"record",config:{nullable:e==null?void 0:e.nullable},properties:t}}function aM(t,e){return{type:"set",items:t,config:{nullable:e==null?void 0:e.nullable,default:e==null?void 0:e.default}}}function sM(t){return{type:"json",config:{nullable:t==null?void 0:t.nullable,default:t==null?void 0:t.default}}}const Lr=class Lr{static Schema(e){return Ob(e)}static get Default(){return{Set:{empty:()=>({func:"Set.empty",args:null})},uuid:e=>({func:"uuid",args:e?[e]:null}),now:()=>({func:"now",args:null})}}static Optional(e){return{...e,config:e.config?{...e.config,optional:!0}:{optional:!0}}}static Collections(e){return e}static Filter(e){return e}};z(Lr,"Id",()=>Tb({nullable:!1,default:Lr.Default.uuid()})),z(Lr,"String",Tb),z(Lr,"Number",rM),z(Lr,"Boolean",nM),z(Lr,"Date",iM),z(Lr,"Record",Ob),z(Lr,"Set",aM),z(Lr,"Json",sM),z(Lr,"RelationMany",(e,r)=>({query:{collectionName:e,...r},cardinality:"many"})),z(Lr,"RelationOne",(e,r)=>({query:{collectionName:e,...r},cardinality:"one"})),z(Lr,"RelationById",(e,r)=>({query:{collectionName:e,where:[["id","=",r]]},cardinality:"one"}));let N=Lr;const G3=Object.freeze(["string","number","boolean","date"]),oM=new Set(G3),lM=Object.freeze(["string","number","boolean","date","set","json"]),cM=new Set(lM),H3=Object.freeze([...G3,"set","json","record"]);new Set(H3);const Dee=Object.freeze(["now","uuid","Set.empty"]),Co=["isDefined"],hg=["=","!=","<",">","<=",">="],W3=["has","!has"],K3=["in","nin"],fh="SET_",q3=[...Co,...hg],dM=[...Co,...hg],Y3=[...Co,...hg,...K3],X3=[...Co],uM=Z3([...Co,...W3],fh),Q3=[...Co,...hg,...K3,"like","nlike"],fM=Array.from(new Set([...q3,...Y3,...Q3,...X3,...W3])),ha={boolean:q3,date:dM,json:fM,number:Y3,record:X3,set:uM,string:Q3};function Z3(t,e){return t.map(r=>`${e}${r}`)}function Nee(t){if(t==="=")return"=";if(t==="!=")return"!=";if(t==="<")return">";if(t===">")return"<";if(t==="<=")return">=";if(t===">=")return"<=";if(t==="in")return"SET_has";if(t==="nin")return"SET_!has";if(t==="SET_has")return"in";if(t==="SET_!has")return"nin";throw new Ye(`Cannot flip operator ${t}`)}var hh;(function(t){function e(f){switch(f.type){case"record":const h={};for(const m in f.properties)h[m]=t.struct(f.properties[m]);return h;default:return}}t.struct=e;function r(f){if(hM(f))return gM(f.config);if(f.type==="record"){const h={};for(const m in f.properties)h[m]=t.defaultValue(f.properties[m]);return h}}t.defaultValue=r;function n(f,h,m){switch(f.type){case"record":for(const v in f.properties){const b=f.properties[v];if(ga(b)&&at(m[v])){h[v]=m[v];continue}h[v]=t.assign(b,h[v],m[v])}return h;default:return m===void 0?t.defaultValue(f):m}}t.assign=n;function i(f,h){var m,v;if(!(ga(f)&&at(h))){switch(f.type){case"boolean":if(typeof h=="boolean")return h;throw new Pi("boolean",h);case"date":if(h instanceof Date&&!isNaN(h.getTime()))return h.toISOString();if(typeof h=="string"&&!Number.isNaN(Date.parse(h)))return new Date(h).toISOString();if(typeof h=="number"&&!Number.isNaN(h))return new Date(h).toISOString();throw new Pi("date",h);case"json":if(!at(h))return h;throw new Pi("json",h);case"number":if(typeof h=="number")return h;throw new Pi("number",h);case"record":if(typeof h=="object"&&h!==null){for(const b in h){const x=f.properties[b];if(!x)throw new Pi("record",h,`Unrecognized property: ${b}`);ga(x)&&at(h[b])||(h[b]=t.encode(x,h[b]))}return h}throw new Pi("record",h);case"string":if(typeof h=="string")if((m=f.config)!=null&&m.enum){if((v=f.config)!=null&&v.enum.includes(h))return h}else return h;throw new Pi("string",h);case"set":if(Array.isArray(h))return Object.fromEntries(h.map(b=>[t.collectionKeyEncode(f.items,b),!0]));if(h instanceof Set)return Object.fromEntries(Array.from(h).map(b=>[t.collectionKeyEncode(f.items,b),!0]));if(typeof h=="object"&&h!==null)return h;throw new Pi(`set<${f.items.type}>`,h)}throw new xf(f.type,"Failed to encode value")}}t.encode=i;function a(f,h,m){switch(f.type){case"boolean":return typeof h=="boolean"?{valid:!0}:{valid:!1,error:rs("boolean",h)};case"date":return typeof h=="string"?{valid:!0}:{valid:!1,error:rs("date",h)};case"json":return typeof h<"u"?{valid:!0}:{valid:!1,error:rs("json",h)};case"number":return typeof h=="number"?{valid:!0}:{valid:!1,error:rs("number",h)};case"record":for(const v in f.properties){const b=f.properties[v];if(ga(b)&&at(h[v])||m.partial&&!(v in h))continue;const x=t.validateEncoded(b,h[v],m);if(!x.valid)return x}return{valid:!0};case"string":return typeof h=="string"?{valid:!0}:{valid:!1,error:rs("string",h)};case"set":return typeof h=="object"&&h!==null?{valid:!0}:{valid:!1,error:rs(`set<${f.items.type}>`,h)}}throw new xf(f.type,"Failed to validate value")}t.validateEncoded=a;function s(f,h){switch(f.type){case"boolean":if(typeof h=="boolean")return h;throw new Vo("boolean",h);case"date":if(typeof h=="string")return new Date(h);throw new Vo("date",h);case"json":return h;case"number":if(typeof h=="number")return h;throw new Vo("number",h);case"record":const m={};for(const v in h){const b=f.properties[v];if(b){if(ga(b)&&at(h[v])){h[v]===null&&(m[v]=null);continue}m[v]=t.decode(b,h[v])}}return m;case"string":if(typeof h=="string")return h;throw new Vo("string",h);case"set":if(typeof h=="object")return new Set(Object.entries(h).filter(([v,b])=>b).map(([v,b])=>t.collectionKeyDecode(f.items,v)));throw new Vo(`set<${f.items.type}>`,h)}throw new xf(f.type,"Failed to decode value")}t.decode=s;function o(f,h){if(!kb(f))throw new Ye("Cannot encode collection key for non-primitive type");return t.encode(f,h).toString()}t.collectionKeyEncode=o;function l(f,h){if(!kb(f))throw new Ye("Cannot decode collection key for non-primitive type");return f.type==="number"?Number(h):f.type==="boolean"?h==="true":t.decode(f,h)}t.collectionKeyDecode=l;function c(f,h){return f.type==="boolean"&&h.type==="boolean"?mM(f,h):f.type==="date"&&h.type==="date"?vM(f,h):f.type==="number"&&h.type==="number"?yM(f,h):f.type==="record"&&h.type==="record"?pM(f,h):f.type==="set"&&h.type==="set"?bM(f,h):f.type==="string"&&h.type==="string"?_M(f,h):!1}t.equal=c;function d(f,h,m){if(f.type==="date"){if(m==="encoded")return h;if(m==="decoded")return t.encode(f,h);throw new Ye("Invalid data format: "+m)}if(f.type==="record"){const v={};for(const b in h){const x=f.properties[b];if(!x)throw new EM("record",h,`Unrecognized property: ${b}`);ga(x)&&at(h[b])||(v[b]=t.serialize(x,h[b],m))}return v}if(f.type==="set"){if(m==="encoded")return Object.entries(h).filter(([v,b])=>b).map(([v,b])=>t.serialize(f.items,t.collectionKeyDecode(f.items,v),m));if(m==="decoded"){const v=[];for(const b of h)v.push(t.serialize(f.items,b,m));return v}throw new Ye("Invalid data format: "+m)}return h}t.serialize=d;function u(f,h,m){if(f.type==="date"){if(m==="encoded")return h;if(m==="decoded")return t.decode(f,h);throw new Ye("Invalid data format: "+m)}if(f.type==="record"){for(const v in h){const b=f.properties[v];if(!b)throw new AM("record",h,`Unrecognized property: ${v}`);ga(b)&&at(h[v])||(h[v]=t.deserialize(b,h[v],m))}return h}if(f.type==="set"){if(m==="encoded"){const v={};for(const b of h)v[t.collectionKeyEncode(f.items,b)]=!0;return v}if(m==="decoded"){const v=[];for(const b of h)v.push(t.deserialize(f.items,b,m));return new Set(v)}throw new Ye("Invalid data format: "+m)}return h}t.deserialize=u;function g(f){if(f.type==="boolean")return ha.boolean;if(f.type==="date")return ha.date;if(f.type==="json")return ha.json;if(f.type==="number")return ha.number;if(f.type==="record")return ha.record;if(f.type==="set")return[...ha.set,...Z3(t.supportedOperations(f.items),fh)];if(f.type==="string")return ha.string;throw new xf(f.type,"Failed to get supported operations")}t.supportedOperations=g})(hh||(hh={}));function hM(t){return cM.has(t.type)}function kb(t){return oM.has(t.type)}function gM(t){let e=t.default;if(!at(e)){if(typeof e!="object"||e===null)return e;{const{args:r,func:n}=e;if(n===void 0)return e;if(n==="uuid")return r&&typeof r[0]=="number"?U0(r[0]):U0();if(n==="now")return new Date().toISOString();if(n==="Set.empty")return{}}}}function at(t){return t==null}function ga(t){var e,r;return((e=t.config)==null?void 0:e.optional)===!0||((r=t.config)==null?void 0:r.nullable)===!0}function rs(t,e){return`Encoded value ${e} is not valid for type ${t}`}function pM(t,e){return!!wM(t.properties,e.properties)}function mM(t,e){return Xu(t.config,e.config)}function vM(t,e){return Xu(t.config,e.config)}function yM(t,e){return Xu(t.config,e.config)}function bM(t,e){return!(!Xu(t.config,e.config)||!hh.equal(t.items,e.items))}function _M(t,e){var r,n,i,a,s,o;if((r=t.config)!=null&&r.enum&&!((n=e.config)!=null&&n.enum)||!((i=t.config)!=null&&i.enum)&&((a=e.config)!=null&&a.enum))return!1;if((s=t.config)!=null&&s.enum&&((o=e.config)!=null&&o.enum)){if(t.config.enum.length!==e.config.enum.length)return!1;for(const l of t.config.enum)if(!e.config.enum.includes(l))return!1}return Xu(t.config,e.config)}function wM(t,e){const r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(const i of r)if(!e[i]||!hh.equal(t[i],e[i]))return!1;return!0}function Xu(t,e){return!(!!(t!=null&&t.optional)!=!!(e!=null&&e.optional)||!!(t!=null&&t.nullable)!=!!(e!=null&&e.nullable)||!SM(t==null?void 0:t.default,e==null?void 0:e.default))}function SM(t,e){return typeof t!=typeof e?!1:Rb(t)&&Rb(e)?xM(t,e):t===e}function Rb(t){return typeof t=="object"&&t!==null&&"func"in t}function xM(t,e){var r,n;if(t.func!==e.func||((r=t.args)==null?void 0:r.length)!==((n=e.args)==null?void 0:n.length))return!1;if(t.args&&e.args){for(let i=0;i<t.args.length;i++)if(t.args[i]!==e.args[i])return!1}return!0}const gt={"Bad Request":400,Unauthorized:401,Forbidden:403,"Not Found":404,"Internal Server Error":500,"Service Unavailable":503};class Ye extends Error{constructor(r,...n){super(...n);z(this,"status",gt["Internal Server Error"]);z(this,"baseMessage");z(this,"contextMessage");z(this,"__isTriplitError",!0);this.name="TriplitError",this.baseMessage=n[0]||"Triplit Error",this.contextMessage=r}get message(){return this.contextMessage?`${this.baseMessage} | Context: ${this.contextMessage}`:this.baseMessage}toString(){return JSON.stringify(this.toJSON())}toJSON(){return{name:this.name,message:this.message,baseMessage:this.baseMessage,status:this.status,contextMessage:this.contextMessage}}static fromJson(r){const n=new Ye(r.contextMessage);return r.baseMessage&&(n.baseMessage=r.baseMessage),r.name&&(n.name=r.name),r.status&&(n.status=r.status),n}}class Fee extends Ye{constructor(e,...r){super(...r),this.name="InvalidQueryInclusionError",this.baseMessage=`An inclusion was provided to a query that is not valid or could not be transformed into a valid inclusion. The inclusion was: ${JSON.stringify(e)}`,this.status=gt["Bad Request"]}}class $ee extends Ye{constructor(e,...r){super(...r),this.name="InvalidQueryLimitError",this.baseMessage=`A limit was provided to a query that is not valid or could not be transformed into a valid limit. The limit was: ${JSON.stringify(e)}`,this.status=gt["Bad Request"]}}class Lee extends Ye{constructor(e,...r){super(...r),this.name="InvalidQueryWhereError",this.baseMessage=`A where clause was provided to a query that is not valid or could not be transformed into a valid where clause. The where clause was: ${JSON.stringify(e)}`,this.status=gt["Bad Request"]}}class Bee extends Ye{constructor(e,...r){super(...r),this.name="InvalidQueryAfterError",this.baseMessage=`An after cursor was provided to a query that is not valid or could not be transformed into a valid after cursor. The after cursor was: ${JSON.stringify(e)}`,this.status=gt["Bad Request"]}}class IM extends Ye{constructor(...e){super(...e),this.name="TransactionAlreadyCommittedError",this.baseMessage="This transaction has already been committed.",this.status=gt["Bad Request"]}}class CM extends Ye{constructor(...e){super(...e),this.name="TransactionAlreadyCanceledError",this.baseMessage="This transaction has already been canceled.",this.status=gt["Bad Request"]}}class PM extends Ye{constructor(...e){super(...e),this.name="QueryNotPreparedError",this.baseMessage="The query has parameters that have not been prepared with the schema. This could indicate that the database does not have a schema or that it is not up-to-date. Run `npx triplit schema diff` to verify that the serverâs schema is in sync with the clientâs. If it is not, run `npx triplit schema push` to update the serverâs schema.",this.status=gt["Internal Server Error"]}}class Vee extends Ye{constructor(e,r,...n){super(...n),this.name="EntityNotFoundError",this.baseMessage=`Could not find entity with id ${e} in collection ${r}.`,this.status=gt["Not Found"]}}class jee extends Ye{constructor(e,...r){super(...r),this.name="InvalidCollectionNameError",this.baseMessage=`${e} is not a valid collection name.`,this.status=gt["Bad Request"]}}class zee extends Ye{constructor(...e){super(...e),this.name="InvalidInsertDocumentError",this.baseMessage="The document you are attempting to insert is invalid.",this.status=gt["Bad Request"]}}class Uee extends Ye{constructor(...e){super(...e),this.name="InvalidOperationError",this.baseMessage="You are attempting to perform an operation that is not valid.",this.status=gt["Bad Request"]}}class Gee extends Ye{constructor(e,r,n,i,...a){super(...a),this.name="WritePermissionError",this.baseMessage=`'${n}' permission for the collection '${e}' prevented the ${n==="insert"?"insertion":n==="delete"?"deletion":"update"} of the entity with id '${r}'. The provided session roles were [${i.map(s=>s.key).join(", ")}].`,this.status=gt.Unauthorized}}class Pi extends Ye{constructor(e,r,...n){super(...n),this.name="DBSerializationError",this.baseMessage=`There was an error serializing an input to an acceptable format. Could not transform the data: ${r} as type: ${e}`,this.status=gt["Bad Request"]}}class Vo extends Ye{constructor(e,r,...n){super(...n),this.name="DBDeserializationError",this.baseMessage=`There was an error deserializing an database value to JS. Could not tranform the data: ${r} as type: ${e}`,this.status=gt["Bad Request"]}}class EM extends Ye{constructor(e,r,...n){super(...n),this.name="JSONSerializationError",this.baseMessage=`There was an error serializing an input to JSON. Could not tranform the data: ${e} as type: ${r}`,this.status=gt["Bad Request"]}}class AM extends Ye{constructor(e,r,...n){super(...n),this.name="JSONDeserializationError",this.baseMessage=`There was an error deserializing a JSON value. Could not tranform the data: ${e} as type: ${r}`,this.status=gt["Bad Request"]}}class xf extends Ye{constructor(e,...r){super(...r),this.name="UnrecognizedAttributeTypeError",this.baseMessage=`An attribute in the schema contains an unsupported type: ${e}. Valid types are ${[H3]}`,this.status=gt["Bad Request"]}}class Mb extends Ye{constructor(...e){super(...e),this.name="InvalidFilterError",this.baseMessage="Your query passed a filter that is invalid.",this.status=gt["Bad Request"]}}class Hee extends Ye{constructor(e,...r){super(...r),this.name="InvalidQueryCardinalityError",this.baseMessage=`The cardinality ${e} is not valid for the query type.`,this.status=gt["Bad Request"]}}class Wee extends Ye{constructor(...e){super(...e),this.name="InvalidOrderClauseError",this.baseMessage="An order clause has been determined to be invalid.",this.status=gt["Bad Request"]}}class Kee extends Ye{constructor(...e){super(...e),this.name="InvalidSelectClauseError",this.baseMessage="The select clause of this query has been determined to be invalid.",this.status=gt["Bad Request"]}}class qee extends Ye{constructor(e,r,n,...i){super(...i),this.name="RelationDoesNotExistError",this.baseMessage=`Your attempt to load '${e}' at alias '${r}' failed because '${e}' does not exist in the schema for the collection '${n}'.`,this.status=gt["Bad Request"]}}class Yee extends Ye{constructor(e,r,n,...i){super(...i),this.name="IncludedNonRelationError",this.baseMessage=`Your attempt to load '${e}' at alias '${r}' failed because '${e}' in the collection '${n}' in not a query type.`,this.status=gt["Bad Request"]}}class TM extends Ye{constructor(...e){super(...e),this.name="QueryCacheError",this.baseMessage="An error occurred inside the query cache",this.status=gt["Bad Request"]}}class Xee extends Ye{constructor(e,r,...n){super(...n),this.name="QueryClauseFormattingError",this.baseMessage=`The ${e} clause is not formatted correctly.
    
    Received: ${JSON.stringify(r)}`,this.status=gt["Bad Request"]}}class Qee extends Ye{constructor(...e){super(...e),this.name="AfterClauseWithNoOrderError",this.baseMessage="The 'after' clause must be used after an 'order' clause.",this.status=gt["Bad Request"]}}class Db extends Ye{constructor(e,r,...n){super(...n),this.name="InvalidResultCardinalityError",this.baseMessage=`Expected cardinality ${e} but got ${r}. This indicates an issue with the query engine. Please report this issue to the Triplit team.`,this.status=gt["Internal Server Error"]}}function gg(t,...e){if(e.length===0)return t;t=t??{};for(const r of e){if(r===null)return t=null,t;if(r){for(const n in r)if(Object.prototype.hasOwnProperty.call(r,n)){const i=r[n],a=t[n];if(Array.isArray(i)){t[n]=[...i];continue}if(i&&typeof i=="object"&&a&&typeof a=="object"&&!Array.isArray(a)){t[n]=gg({},a,i);continue}t[n]=i}}}return t}class Nb{constructor(){z(this,"_changes",{})}clear(e){return this._changes={},Promise.resolve()}write(e,r){return g1(this._changes,r),Promise.resolve()}getChanges(e){return Promise.resolve(this._changes)}getChangesForCollection(e,r){return Promise.resolve(this._changes[r])}getChangesForEntity(e,r,n){const i=this._changes[r];if(!i)return Promise.resolve(void 0);const a=i.sets.get(n);return a?Promise.resolve({update:a,delete:i.deletes.has(n)}):Promise.resolve(void 0)}isEmpty(e){return Promise.resolve(hl(this._changes))}}function g1(t,...e){for(const r of e)for(const n of Object.keys(r)){const i=r[n];if(i){t[n]||(t[n]={sets:new Map,deletes:new Set});for(const a of i.deletes)t[n].sets.delete(a),t[n].deletes.add(a);for(const[a,s]of i.sets.entries()){const o=t[n].sets.get(a);o?gg(o,s):t[n].sets.set(a,s)}}}return t}function hl(t){for(const e in t)if(Object.hasOwn(t,e))return!1;return!0}function OM(t){for(const e in t)if(Object.hasOwn(t,e))if(typeof t[e]=="object"&&t[e]!==null&&!Array.isArray(t[e])){if(!OM(t[e]))return!1}else return!1;return!0}class kM{constructor(e=[]){z(this,"storagePrefix");this.storagePrefix=e}getEntity(e,r,n){return e.scope(this.storagePrefix).get([r,n])}async getCollectionStats(e,r){const n=e.scope(this.storagePrefix),i=new Map;if(r)for(const a of r){const s=await n.count({prefix:[a]});i.set(a,s)}else for await(const[[a]]of n.scan({prefix:[]}))i.set(a,(i.get(a)||0)+1);return i}async applyChanges(e,r,n){const i=e.scope(this.storagePrefix),a={},s=[],o=async(d,u,g)=>{const f=await this.getEntity(e,d,u),h=!!f;return n.entityChangeValidator&&n.entityChangeValidator(d,g,{ignoreRequiredProperties:h}),{collection:d,id:u,...gh(f,g),operation:h?"upsert":"insert"}},l=async(d,u,g)=>{const f=await this.getEntity(e,d,u);if(!f)return;n.entityChangeValidator&&n.entityChangeValidator(d,g,{ignoreRequiredProperties:!0});const h=gh(f,g);return{collection:d,id:u,...h,operation:"update"}},c=async(d,u)=>{if(n.checkWritePermission){const g=await this.getEntity(e,d,u);return{collection:d,id:u,prev:g,next:void 0,change:void 0,operation:"delete"}}return{collection:d,id:u,prev:void 0,next:void 0,change:void 0,operation:"delete"}};for(const[d,u]of Object.entries(r)){for(const g of u.deletes){const f=await c(d,g);await i.delete([d,g]),s.push(f)}for(const[g,f]of u.sets.entries()){const m=!!f.id?await o(d,g,f):await l(d,g,f);if(!m)continue;const{prev:v,next:b,change:x}=m;await i.set([d,g],b),s.push(m)}}for(const d of s){if(n.checkWritePermission)if(d.operation==="insert")await n.checkWritePermission(e,d.collection,d.next,"insert");else if(d.operation==="update"||d.operation==="upsert")await n.checkWritePermission(e,d.collection,d.prev,"update"),await n.checkWritePermission(e,d.collection,d.next,"postUpdate");else if(d.operation==="delete")await n.checkWritePermission(e,d.collection,d.prev,"delete");else throw new Ye("An invalid delta was created and could not finish permission checks.");if(a[d.collection]||(a[d.collection]={deletes:new Set,sets:new Map}),d.operation==="delete")a[d.collection].deletes.add(d.id);else{if(hl(d.change))continue;a[d.collection].sets.set(d.id,d.change)}}return a}getEntitiesInCollection(e,r){return e.scope(this.storagePrefix).scanValues({prefix:[r]})}}function gh(t,e,r={clone:!0}){if(!t)return{prev:t,next:e,change:e};const n=r.clone?structuredClone(t):t,i={};for(const[a,s]of Object.entries(e)){const o=n[a];if(typeof o=="object"&&o!=null&&typeof s=="object"&&s!=null&&!Array.isArray(s)){const{next:l,change:c}=gh(o,s,r);hl(c)||(i[a]=gg(i[a]??{},c),n[a]=l)}else n[a]!==s&&(i[a]=s,n[a]=s)}return{prev:t,next:n,change:i}}class bi{static Get(e,r){const n=typeof r=="string"?r.split("."):r;let i=e;for(const a of n){if(i===void 0)return;if(Array.isArray(i)){const s=parseInt(a,10);isNaN(s)?i=i.map(o=>o==null?void 0:o[a]):i=i[s]}else{if(i[a]===void 0)return;i=i[a]}}return i}static Set(e,r,n){const i=Array.isArray(r)?r:r.split(".");let a=e;for(let s=0;s<i.length-1;s++){const o=i[s];a[o]===void 0&&(a[o]={}),a=a[o]}a[i[i.length-1]]=n}}const J3=["TRACE","DEBUG","INFO","WARN","ERROR","FATAL"],Fb=Object.fromEntries(J3.map((t,e)=>[t,e]));class RM{constructor(e,r){z(this,"logger");z(this,"spans");this.logger=e,this.spans=r}[Symbol.dispose](){this.logger._endSpans(this.spans)}}class Tv{constructor(e,r,n="INFO"){z(this,"handlers");z(this,"loggerContext");z(this,"resourceAttributes");z(this,"exclusiveHandlerMode",!1);z(this,"logLevel","INFO");this.handlers=e??[],this.resourceAttributes=r||{},this.logLevel=n}registerHandler(e,r){return this.exclusiveHandlerMode?!1:(this.handlers.push(e),r!=null&&r.exclusive&&(this.exclusiveHandlerMode=!0),!0)}context(e){const r=new Tv(this.handlers,this.resourceAttributes,this.logLevel);return r.loggerContext=e,r}setLogLevel(e){const r=e.toUpperCase();(J3.includes(r)||r==="NONE")&&(this.logLevel=r)}_log(e,r,n){if(this.logLevel==="NONE"||Fb[e]<Fb[this.logLevel])return;const i={level:e,message:r,timestamp:Date.now(),context:this.loggerContext,attributes:n,resource:this.resourceAttributes};for(const a of this.handlers)try{a.log(i)}catch(s){console.error("Error in log handler:",s)}}spanTrace(e,r){const n=this.handlers.map(i=>i.startSpan(e,this.loggerContext,{...this.resourceAttributes,...r}));return new RM(this,n)}trace(e,r){this._log("TRACE",e,r)}debug(e,r){this._log("DEBUG",e,r)}log(e,r){this.info(e,r)}info(e,r){this._log("INFO",e,r)}warn(e,r){this._log("WARN",e,r)}error(e,r){this._log("ERROR",e,r)}fatal(e,r){this._log("FATAL",e,r)}metric(e,r,n){for(const i of this.handlers)i.recordMetric(e,r,{...this.resourceAttributes,...n})}_endSpans(e){for(let r=0;r<e.length;r++){const n=e[r],i=this.handlers[r];i&&i.endSpan(n)}}}const ph=new Tv,MM=new Set(["$global","$session","$token","$role","$query"]);function Tn(t){return typeof t=="string"&&t[0]==="$"}function Wi(t){const e=t.split(".");if(e.length<1)throw new Error(`Invalid variable: ${t}`);if(e.length===1)return e.unshift(void 0),e[1]=e[1].slice(1),e;const r=DM(e[0]);return r===void 0?(e.unshift(void 0),e[1]=e[1].slice(1),e):(e[0]=r,e)}function DM(t){if(MM.has(t))return t==="$token"?"$session":t;const e=parseInt(t.slice(1),10);if(!isNaN(e))return e}function e5(t){return typeof t=="number"}function NM(t,e=1){if(!Tn(t))return t;const r=Wi(t),n=r[0];return e5(n)?`$${n+e}.${r.slice(1).join(".")}`:t}function p1(t,e=1){const r=[];for(const n of t){if(br(n)){let[i,a,s]=n;s=NM(s,e),r.push([i,a,s]);continue}if(an(n)){r.push({...n,filters:p1(n.filters,e)});continue}if(Cr(n)){r.push({exists:FM(n.exists,e)});continue}kv(n)&&r.push({exists:{...n.exists,where:n.exists.where?p1(n.exists.where,e):void 0}}),r.push(n)}return r}function FM(t,e=1){return t.where?{...t,where:p1(t.where,e)}:t}function Ov(t,e){var a;if(t in e)return e[t];const[r,...n]=Wi(t);if(typeof r=="number"){if(!e.entityStack||e.entityStack.length<r)throw new Error(`Variable reference is out of bounds. Tried to find ${t} in stack of size ${(a=e.entityStack)==null?void 0:a.length}`);return bi.Get(e.entityStack[e.entityStack.length-r],n)}return bi.Get(e,n)}function ll(t,e){return t.map(r=>$M(r,e))}function $M(t,e){if(an(t))return{mod:t.mod,filters:ll(t.filters,e)};if(br(t)&&Tn(t[2])){const r=t[2];let n=Ov(r,e);return Array.isArray(n)&&(n=new Set(n)),[t[0],t[1],n]}return t}async function $b(t,e,r){let n=!0;const i=UM(e);for(const a of i){const s=e[a];if(n=await LM(t,s,r),!n)break}return n}async function LM(t,e,r){if(an(e)){if(e.mod==="and")return await $b(t,e.filters,r);{let n=!1;for(const i of e.filters)if(n=await $b(t,[i],r),n)break;return n}}else if(Cr(e)){const n=await r.fetch(e.exists,{entityStack:[t]});return Array.isArray(n)?n.length>0:!!n}else return ao(t,e)}function ao(t,e,r=!1){if(Po(e))return e;if(an(e)){const{mod:n,filters:i}=e;return n==="and"?i.every(a=>ao(t,a,r)):n==="or"?i.some(a=>ao(t,a,r)):!1}if(Cr(e)){if(r)return!0;throw new Error(`Subquery filters should be filtered out before this point, found ${e}`)}return BM(t,e)}function BM(t,e){const[r,n,i]=e,a=bi.Get(t,r);return t5(a,n,i)}function t5(t,e,r){if(e.startsWith(fh)){if(typeof t!="object"&&t!==null&&t!==void 0)throw new Mb(`The operator requires a set value, but got ${t}`);const n=e.slice(fh.length);if(n==="has"){if(at(t))return!1;for(const i of Object.keys(t)){if(!t[i])continue;if(fm(i,r)===r)return!0}return!1}else if(n==="!has"){if(at(t))return!0;for(const i of Object.keys(t)){if(!t[i])continue;if(fm(i,r)===r)return!1}return!0}else{if(n==="isDefined")return r?!at(t):at(t);if(at(t))return!1;for(const i of Object.keys(t)){if(!t[i])continue;const a=fm(i,r);if(t5(a,n,r))return!0}return!1}}switch(e){case"=":return at(t)&&at(r)?!0:xn(t??null,r??null)===0;case"!=":return at(t)&&at(r)?!1:xn(t??null,r??null)!==0;case">":return at(t)?!1:at(r)?!0:xn(t,r)>0;case">=":return at(t)&&at(r)?!0:at(t)?!1:at(r)?!0:xn(t,r)>=0;case"<":return at(r)?!1:at(t)?!0:xn(t,r)<0;case"<=":return at(t)&&at(r)?!0:at(r)?!1:at(t)?!0:xn(t,r)<=0;case"like":return at(r)||at(t)?!1:Lb(t,r);case"nlike":return at(r)||at(t)?!0:!Lb(t,r);case"in":return at(t)||at(r)?!1:r instanceof Set?r.has(t):r instanceof Array?r.includes(t):r instanceof Object?!!r[t]:(ph.warn('Invalid filter value for "in" operator'),!1);case"nin":return at(t)||at(r)?!0:r instanceof Set?!r.has(t):r instanceof Array?r.includes(t):r instanceof Object?!r[t]:(ph.warn('Invalid filter value for "in" operator'),!1);case"isDefined":return r?!at(t):at(t);default:throw new Mb(`The operator ${e} is not recognized.`)}}function fm(t,e){return typeof e=="boolean"?t==="true":typeof e=="number"?parseFloat(t):t}function Lb(t,e){return e=e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),e=e.replace(/%/g,".*"),e=e.replace(/_/g,"."),new RegExp(`^${e}$`,"i").test(t)}function br(t){return t instanceof Array&&t.length===3&&typeof t[0]=="string"&&typeof t[1]=="string"}function VM(t){return br(t)&&t[0]==="id"}function jM(t){return VM(t)&&(t[1]==="="||t[1]==="in")}function an(t){return t instanceof Object&&"mod"in t}function Cr(t){return t instanceof Object&&"exists"in t&&"collectionName"in t.exists}function kv(t){return t instanceof Object&&"exists"in t&&"_extends"in t.exists}function Po(t){return typeof t=="boolean"}function Zee(t){return br(t)||an(t)||Cr(t)||kv(t)||Po(t)}function Bb(t){if(!br(t))return!1;const[e,r,n]=t;return!(!Tn(n)||!["=","<","<=",">",">=","!="].includes(r))}function zM(t){if(br(t))return"basic";if(Cr(t))return"relational";if(an(t))return"group";if(Po(t))return"boolean";throw new Error(`Filter type could not be determined: ${JSON.stringify(t)}`)}function UM(t){if(!t)return[];const e=[],r=[],n=[],i=[];for(let a=0;a<t.length;a++){const s=t[a];switch(zM(s)){case"boolean":r.push(a);break;case"basic":e.push(a);break;case"group":n.push(a);break;case"relational":i.push(a);break}}return[...r,...e,...n,...i]}function We(t){return{mod:"or",filters:t}}function Jee(t){return{mod:"and",filters:t}}function ete(t,e={}){return{exists:{_extends:t,...e}}}function GM(t,e){for(const r of ra(t))if(e(r))return!0;return!1}function*ra(t){for(const e of t)an(e)?yield*ra(e.filters):yield e}function Rv(t){if(Po(t)||br(t))return!0;if(an(t)){const{mod:e,filters:r}=t;return r.every(n=>Rv(n))}return!(Cr(t)||kv(t))}class gl{static canCacheQuery(e){return!e.where||e.where.length===0?!0:(e.where??[]).filter(Bb).length!==0}static resolveQueryFromView(e,[r,n,i]){let a,s;if(["=","<","<=",">",">="].includes(n)&&(a=If(e,i,o=>o.data[r],"start",(o,l)=>n==="<"?o<l?0:1:n==="<="?o<=l?0:1:n===">"?o>l?0:-1:n===">="?o>=l?0:-1:o===l?0:o<l?-1:1),s=If(e,i,o=>o.data[r],"end",(o,l)=>n==="<"?o<l?0:1:n==="<="?o<=l?0:1:n===">"?o>l?0:-1:n===">="?o>=l?0:-1:o===l?0:o<l?-1:1)),n==="!=")return a=If(e,i,l=>l.data[r],"start",(l,c)=>l===c?0:l<c?-1:1),s=If(e,i,l=>l.data[r],"end",(l,c)=>l===c?0:l<c?-1:1),[...e.slice(0,a+1),...e.slice(s)];if(a==null||s==null)throw new TM(`Queries with the operator "${n}" in a where clause can't be stored in the query cache. Currently, supported operators are: ${["=","!=","<","<=",">",">="]}`);return e.slice(a,s+1)}static queryToViews(e){const r=[],n=[],i=[];for(const a of e.where??[]){if(Bb(a)){r.push(a);continue}if(Rv(a)){n.push(a);continue}i.push(a)}return{views:[{collectionName:e.collectionName,where:n,order:[...r.map(a=>[a[0],"ASC"]),...e.order??[]],limit:r.length>0?void 0:e.limit,include:e.include}],variableFilters:r,unusedFilters:i}}}function If(t,e,r,n="start",i=(a,s)=>a<s?-1:a>s?1:0){let a=0,s=t.length-1,o=-1;for(;a<=s;){const l=Math.floor((a+s)/2),c=r(t[l]);i(c,e)===0?(o=l,n==="start"?s=l-1:a=l+1):i(c,e)<0?a=l+1:s=l-1}return o}async function*HM(t,e){let r=0;for await(const n of t){if(r>=e)return;yield n,r++}}async function*Vb(t,e){for await(const r of t)await e(r)&&(yield r)}async function*WM(...t){for(const e of t)for await(const r of e)yield r}async function*KM(t,e){const r=new Set;for await(const n of t){const i=e?e(n):n;r.has(i)||(r.add(i),yield n)}}async function*jb(t,e){for await(const r of t)yield e(r)}function m1(t,e,r){const[n,i]=e;if(!r||r.length!==n.length)throw new PM("The order and after cursor are not compatible");let a=!0;for(let s=0;s<n.length;s++){const o=n[s],l=r[s][0],c=r[s][1],d=bi.Get(t,l)??h1,u=xn(d,o)*(c==="ASC"?1:-1);if(u<0){a=!1;break}if(u>0){a=!0;break}if(s===n.length-1){a=i;break}}return a}function qM(t){if(!t.where)return[null,-1];const e=t.where.findIndex(r=>br(r)&&jM(r));return e===-1?[null,-1]:[t.where[e],e]}function YM(t,e){return t.every(e)}function Tt(t,e=2166136261){let r=e;for(let n=0;n<t.length;n++)r^=t.charCodeAt(n),r=Math.imul(r,16777619);return r>>>0}function kt(t,e){let r=t^e;return r=Math.imul(r,16777619),r>>>0}function r5(t){function e(n){return typeof n!="object"||n===null?String(n):Array.isArray(n)?"["+n.map(e).join(",")+"]":"{"+Object.keys(n).sort().map(a=>`${a}:${e(n[a])}`).join(",")+"}"}const r=e(t);return Tt(r)}function tte(t){return r5(t).toString()}const XM=["after","collectionName","select","include","limit","order","vars","where"];function rte(t){const e=Object.fromEntries(Object.entries(t).filter(([n])=>XM.includes(n)));return r5(e).toString()}const QM=Tt("C");function Yn(t){let e=QM;if(e=kt(e,Tt(t.collectionName)),t.where){const r=n5(t.where);e=kt(e,r)}if(t.order){const r=aD(t.order);e=kt(e,r)}if(t.limit!=null){const r=pD(t.limit);e=kt(e,r)}if(t.after){const r=hD(t.after);e=kt(e,r)}if(t.include){const r=uD(t.include);e=kt(e,r)}if(t.select){const r=cD(t.select);e=kt(e,r)}return e}const ZM=Tt("B"),JM=Tt("S"),eD=Tt("G"),tD=Tt("Q");function rD(t){if(Po(t)){let e=ZM;const r=t.toString();return e=kt(e,Tt(r)),{hash:e,sortKey:`B|${r}`}}else if(br(t)){let e=JM;e=kt(e,Tt(t[0])),e=kt(e,Tt(t[1]));const r=i5(t[2]);return e=kt(e,Tt(r)),{hash:e,sortKey:`S|${t[0]}|${t[1]}|${r}`}}else if(an(t)){let e=eD;e=kt(e,Tt(t.mod));const r=n5(t.filters);return e=kt(e,r),{hash:e,sortKey:`G|${t.mod}|${r}`}}else if(Cr(t)){let e=tD;const r=Yn(t.exists);return e=kt(e,r),{hash:e,sortKey:`Q|${e}`}}throw new Ye("Could not hash filter, it is not a valid filter type")}const nD=Tt("F");function n5(t){let e=nD;const r=t.map(rD);r.sort((n,i)=>n.sortKey<i.sortKey?-1:n.sortKey>i.sortKey?1:0);for(const n of r)e=kt(e,n.hash);return e}const iD=Tt("O");function aD(t){let e=iD;for(const r of t)e=kt(e,oD(r));return e}const sD=Tt("o");function oD(t){let e=sD;return e=kt(e,Tt(t[0])),e=kt(e,Tt(t[1])),t[2]&&(e=kt(e,Yn(t[2].subquery))),e}const lD=Tt("P");function cD(t){let e=lD;const r=[...t].sort();for(const n of r)e=kt(e,Tt(n));return e}const dD=Tt("I");function uD(t){let e=dD;const r=Object.entries(t).sort(([n],[i])=>n<i?-1:n>i?1:0);for(const[n,i]of r)e=kt(e,Tt(n)),e=kt(e,Tt(i.cardinality)),e=kt(e,Yn(i.subquery));return e}const fD=Tt("A");function hD(t){let e=fD;const[r,n]=t;for(const i of r)e=kt(e,Tt(i5(i)));return e=kt(e,Tt(n.toString())),e}const gD=Tt("L");function pD(t){let e=gD;return e=kt(e,Tt(t.toString())),e}const zb={undefined:"a",...Ri};function i5(t){if(t===void 0)return zb.undefined;if(t===null)return zb.null;if(t===!0||t===!1)return Ri.boolean+t;if(typeof t=="string")return Ri.string+t;if(typeof t=="number")return Ri.number+t;if(Array.isArray(t))return Ri.array+JSON.stringify(t);if(typeof t=="object")return Ri.object+JSON.stringify(t);throw new Ye(`Failed to encode hash value: ${t}`)}function pl(t,e){const r={views:{},rootQuery:t};if(t.where){const{where:n,views:i}=v1(t.where,e);t.where=n,Object.assign(r.views,i)}if(t.include)for(const[n,i]of Object.entries(t.include)){const{newViews:a,rewrittenQuery:s}=Ub(i.subquery,e);Object.assign(r.views,a),t.include[n]={...t.include[n],subquery:s}}if(t.order)for(let n=0;n<t.order.length;n++){const[i,a,s]=t.order[n];if(s==null)continue;const{newViews:o,rewrittenQuery:l}=Ub(s.subquery,e);Object.assign(r.views,o),t.order[n][2]={...s,subquery:l}}return r}function Ub(t,e){let r=null,n=null;const i=t.include&&Object.keys(t.include).length>0;if(gl.canCacheQuery(t)&&!i){const a=e(),s=gl.queryToViews(t),o=pl(s.views[0],e);r={[a]:o.rootQuery,...o.views},n={...t,collectionName:`$view_${a}`,where:s.variableFilters}}else{const a=pl(t,e);r=a.views,n=a.rootQuery}return{newViews:r,rewrittenQuery:n}}function v1(t,e){var i,a;const r={},n=[];for(const s of t)if(Cr(s)){const o=s.exists,l=o.where&&Mv(o.where),c=(o.where??[]).filter(d=>br(d)&&Tn(d[2])&&Wi(d[2])[0]===1);if(!l&&c.length<2){const d=e(),u=pl(o,e);r[d]=u.rootQuery,Object.assign(r,u.views),u.rootQuery.where=(i=o.where)==null?void 0:i.filter(f=>!c.includes(f));const g=c.map(f=>[Wi(f[2])[1],"in",`$view_${d}.${f[0]}`]);n.push(...g)}else if(gl.canCacheQuery(o)){const d=e(),u=gl.queryToViews(o),g=pl(u.views[0],e),{where:f,views:h}=v1(u.unusedFilters,e);(a=g.rootQuery.where)==null||a.concat(f),r[d]=g.rootQuery,Object.assign(r,g.views),Object.assign(r,h),n.push({exists:{...o,collectionName:`$view_${d}`,where:[...u.variableFilters,...f]}})}else n.push(s)}else if(an(s)){const{where:o,views:l}=v1(s.filters,e);n.push({...s,filters:o}),Object.assign(r,l)}else n.push(s);return{where:n,views:r}}function Mv(t){for(const e of ra(t))if(br(e)&&Tn(e[2])){const[r]=Wi(e[2]);if(typeof r=="number"&&r>1)return!0}else if(Cr(e)&&Mv(e.exists.where||[]))return!0;return!1}function mD(t){let e=0;const n=pl(t,()=>`${e++}`);return vD(n)}function vD(t){const e={};for(const[i,a]of Object.entries(t.views)){const s=ys(a);e[i]={steps:s,views:{}}}const r=ys(t.rootQuery),n=[];return n.push(...r),{steps:n,views:e}}function yD(t,e=new Set){for(const r of ra(t))br(r)&&a5(r)&&e.add(r[2]);return e}function a5(t){return Tn(t[2])&&t[2].startsWith("$view_")}function ys(t){const e=[];let r=!1,n=!1,i=!1,a=!1;const s=[],o=[];if(t.where)for(const u of t.where)if(Rv(u))o.push(u);else if(Cr(u))s.push(u);else throw new Ye(`Could not compile query: Unsupported filter type in where clause: ${JSON.stringify(u)}`);const l=t.after?{after:t.after,order:t.order}:void 0,[c,d]=qM(t);if(t.collectionName.startsWith("$view_")){const u=t.collectionName.slice(6);if(!YM(o,br))throw new Ye(`Filters on view ${u} must be simple filter statements.`);if(e.push({type:"PREPARE_VIEW",viewId:u}),e.push({type:"RESOLVE_FROM_VIEW",viewId:u,filter:o}),s.length>0){for(const g of s)e.push({type:"ITERATOR_SUBQUERY_FILTER",subPlan:ys(g.exists)});e.push({type:"COLLECT"})}n=!0,i=!0,a=!0}else if(c){if(typeof c[2]=="string"&&c[2].startsWith("$view_")){const u=c[2].split(".")[0].slice(6);e.push({type:"PREPARE_VIEW",viewId:u})}e.push({type:"ID_LOOK_UP",collectionName:t.collectionName,ids:Tn(c[2])?c[2]:typeof c[2]=="string"?new Set().add(c[2]):c[2]}),o.splice(d,1)}else e.push({type:"SCAN",collectionName:t.collectionName});if(o.length>0){const u=yD(o);if(u.size>0)for(const g of u){const f=g.split(".")[0].slice(6);e.push({type:"PREPARE_VIEW",viewId:f})}}if(!n){(o.length>0||l)&&(e.push({type:"ITERATOR_FILTER",filter:o,after:l}),i=!0);for(const u of s)e.push({type:"ITERATOR_SUBQUERY_FILTER",subPlan:ys(u.exists)});t.limit&&!t.order&&(e.push({type:"ITERATOR_LIMIT",count:t.limit}),r=!0),e.push({type:"COLLECT"})}if((o.length>0||l)&&!i&&(e.push({type:"FILTER",filter:o,after:l}),i=!0),t.order&&t.order.length>0&&!a){const u=[];for(let g=0;g<t.order.length;g++){const[f,h,m]=t.order[g];if(m==null){u.push(t.order[g]);continue}const v=`_order_${g}`,b=ys(m.subquery);e.push({type:"SUBQUERY",alias:v,subPlan:b});const x=f.split(".").toSpliced(0,1,v).join(".");u.push([x,h,m])}e.push({type:"SORT",fields:u})}if(typeof t.limit=="number"&&!r&&e.push({type:"LIMIT",count:t.limit}),t.include)for(const[u,g]of Object.entries(t.include)){const f=ys(g.subquery);g.cardinality==="one"&&f.push({type:"PICK"}),e.push({type:"SUBQUERY",alias:u,subPlan:f})}return e}function mh(t){const e={views:new Map,rewrittenQuery:t};if(t.where){const{where:r,views:n}=s5(t.where);t.where=r,cl(e.views,n)}if(t.include)for(const[r,n]of Object.entries(t.include)){const{views:i,rewrittenQuery:a}=mh(n.subquery);cl(e.views,i),t.include[r]={...t.include[r],subquery:a}}if(t.order)for(let r=0;r<t.order.length;r++){const[n,i,a]=t.order[r];if(a==null)continue;const{views:s,rewrittenQuery:o}=mh(a.subquery);cl(e.views,s),t.order[r][2]={...a,subquery:o}}return e}function cl(t,e){for(const[r,n]of e.entries())t.has(r)||t.set(r,n)}function s5(t){var n;const e=new Map,r=[];for(const i of t)if(Cr(i)){const a=i.exists,s=a.where&&Mv(a.where),o=(a.where??[]).filter(l=>br(l)&&Tn(l[2])&&Wi(l[2])[0]===1);if(!s&&o.length<2){const l=mh(a);l.rewrittenQuery.where=(n=a.where)==null?void 0:n.filter(u=>!o.includes(u));const c=Yn(l.rewrittenQuery);e.set(c,l.rewrittenQuery),cl(e,l.views);const d=o.map(u=>[Wi(u[2])[1],"in",`$view_${c}.${u[0]}`]);r.push(...d)}else r.push(i)}else if(an(i)){const{where:a,views:s}=s5(i.filters);r.push({...i,filters:a}),cl(e,s)}else r.push(i);return{where:r,views:e}}function vh(t){return{data:t,subqueries:{}}}function so(t){if(!t)return t;if(!("data"in t)||!("subqueries"in t))throw new Error('View entity is not properly formatted, expected "data" and "subqueries" keys but instead got: '+Object.keys(t));if(Object.keys(t.subqueries).length===0)return t.data;const e={};for(const[r,n]of Object.entries(t.subqueries))e[r]=Array.isArray(n)?n.map(so):so(n);return{...t.data,...e}}function yh(t){return Object.fromEntries(Object.entries(t).map(([r,n])=>[r,Array.isArray(n)?n.map(so):so(n)]))}class nte{constructor(e,r){z(this,"storage");z(this,"store");this.storage=e,this.store=r}async fetch(e,r={}){const n=mD(structuredClone(e)),i=await this.executeSteps(n.steps,{vars:r,viewPlans:n.views});if(Array.isArray(i))return i;throw new Db("many","one")}async executeSteps(e,{vars:r,viewPlans:n,preparedViews:i={}}){r.entityStack=r.entityStack||[];let a=[],s,o;for(const l of e)switch(l.type){case"PREPARE_VIEW":{const c=`view_${l.viewId}`;if(c in i)break;const{steps:d}=n[l.viewId],u=await this.executeSteps(d,{vars:r,viewPlans:n,preparedViews:i});i[c]=u;break}case"RESOLVE_FROM_VIEW":{const c=`view_${l.viewId}`,d=i[c];if(!d)throw new Error(`View ${l.viewId} not found`);if(!Array.isArray(d))throw new Db("many","one");const u=ll(l.filter,r);a=[...d];for(const g of u)a=gl.resolveQueryFromView(a,g);o=a;break}case"SUBQUERY":{const c=l.subPlan;for(const d of a){l.alias in d.subqueries;const u=await this.executeSteps(c,{vars:{...r,entityStack:(r.entityStack??[]).concat(so(d))},viewPlans:n,preparedViews:i});d.subqueries[l.alias]=u}break}case"SCAN":{s=l.collectionName,o=this.getCollectionCandidates({collectionName:s});break}case"ID_LOOK_UP":{let c=l.ids;if(typeof c=="string"){if(!Tn(c))throw new Ye("Invalid ID_LOOK_UP input, expected variable or string[]");const d=Ov(c,{...r,...yh(i)});c=o5(d)}s=l.collectionName,o=this.getCollectionCandidatesById(s,new Set(c));break}case"COLLECT":{if(!o)throw new Error("No candidate iterator found when trying to COLLECT");a=await Array.fromAsync(o);break}case"ITERATOR_LIMIT":{if(!o)throw new Error("No candidate iterator found when trying to ITERATOR_LIMIT");o=HM(o,l.count);break}case"ITERATOR_FILTER":{const d=ll(l.filter,{...r,...yh(i)}).map(u=>g=>ao(g.data,u));l.after&&d.push(({data:u})=>!!m1(u,l.after.after,l.after.order)),o=Vb(o,u=>{for(const g of d)if(!g(u))return!1;return!0});break}case"ITERATOR_SUBQUERY_FILTER":{const c=l.subPlan;o=Vb(o,async d=>{const u=await this.executeSteps(c,{vars:{...r,entityStack:(r.entityStack??[]).concat(so(d))},viewPlans:n,preparedViews:i});return Array.isArray(u)?u.length>0:u!==null});break}case"FILTER":{if(s==null)throw new Error("No collection name found when trying to FILTER");const c=ll(l.filter,{...r,...i});a=a.filter(d=>{for(const u of c){let g=u;if(!ao(d.data,g))return!1}return!(l.after&&!m1(d.data,l.after.after,l.after.order))});break}case"SORT":{l5(a,l.fields);break}case"LIMIT":{a=a.slice(0,l.count);break}case"PICK":return a[0]??null;default:throw new Error(`Unknown step type: ${l.type}`)}return a}async*getCollectionCandidates(e){for await(const r of this.store.getEntitiesInCollection(this.storage,e.collectionName))yield vh(r)}async*getCollectionCandidatesById(e,r){let n=[];for(const i of r){const a=await this.store.getEntity(this.storage,e,i);a&&(yield vh(a))}return n}}function o5(t){let e=[];if(typeof t=="string")e=[t];else if(Array.isArray(t))e=t.flatMap(o5);else if(typeof t=="object"&&t!==null)for(const[r,n]of Object.entries(t))n===!0&&e.push(r);return e}function l5(t,e){const r=e.map(([n,i,a])=>{const s=n.split(".");if(a){const o=c5(a.subquery);return[s.slice(0,o+1).flatMap(l=>["subqueries",l]).concat("data",s.slice(-1)),i,a]}return[["data",...s],i]});t.sort((n,i)=>{for(const[a,s]of r){const o=xn(bi.Get(n,a)??h1,bi.Get(i,a)??h1);if(o!==0)return s==="ASC"?o:-o}return 0})}function c5(t){let e=0;if(!t.include)return e;for(const r in t.include){const n=t.include[r];e=Math.max(e,c5(n.subquery)+1)}return e}var Kn={},bD=Bi&&Bi.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(Kn,"__esModule",{value:!0});Kn.EmptyBTree=Kn.asSet=Kn.simpleComparator=Kn.defaultComparator=void 0;function d5(t,e){if(Number.isFinite(t)&&Number.isFinite(e))return t-e;var r=typeof t,n=typeof e;if(r!==n)return r<n?-1:1;if(r==="object"){if(t===null)return e===null?0:-1;if(e===null)return 1;if(t=t.valueOf(),e=e.valueOf(),r=typeof t,n=typeof e,r!==n)return r<n?-1:1}return t<e?-1:t>e?1:t===e?0:Number.isNaN(t)?Number.isNaN(e)?0:-1:Number.isNaN(e)?1:Array.isArray(t)?0:Number.NaN}Kn.defaultComparator=d5;function _D(t,e){return t>e?1:t<e?-1:0}Kn.simpleComparator=_D;var Qn=function(){function t(e,r,n){this._root=gm,this._size=0,this._maxNodeSize=n>=4?Math.min(n,256):32,this._compare=r||d5,e&&this.setPairs(e)}return Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this._size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isEmpty",{get:function(){return this._size===0},enumerable:!1,configurable:!0}),t.prototype.clear=function(){this._root=gm,this._size=0},t.prototype.forEach=function(e,r){var n=this;return r!==void 0&&(e=e.bind(r)),this.forEachPair(function(i,a){return e(a,i,n)})},t.prototype.forEachPair=function(e,r){var n=this.minKey(),i=this.maxKey();return this.forRange(n,i,!0,e,r)},t.prototype.get=function(e,r){return this._root.get(e,r,this)},t.prototype.set=function(e,r,n){this._root.isShared&&(this._root=this._root.clone());var i=this._root.set(e,r,n,this);return i===!0||i===!1?i:(this._root=new SD([this._root,i]),!0)},t.prototype.has=function(e){return this.forRange(e,e,!0,void 0)!==0},t.prototype.delete=function(e){return this.editRange(e,e,!0,Gb)!==0},t.prototype.with=function(e,r,n){var i=this.clone();return i.set(e,r,n)||n?i:this},t.prototype.withPairs=function(e,r){var n=this.clone();return n.setPairs(e,r)!==0||r?n:this},t.prototype.withKeys=function(e,r){for(var n=this.clone(),i=!1,a=0;a<e.length;a++)i=n.set(e[a],void 0,!1)||i;return r&&!i?this:n},t.prototype.without=function(e,r){return this.withoutRange(e,e,!0,r)},t.prototype.withoutKeys=function(e,r){var n=this.clone();return n.deleteKeys(e)||!r?n:this},t.prototype.withoutRange=function(e,r,n,i){var a=this.clone();return a.deleteRange(e,r,n)===0&&i?this:a},t.prototype.filter=function(e,r){var n=this.greedyClone(),i;return n.editAll(function(a,s,o){if(!e(a,s,o))return i=f5}),!i&&r?this:n},t.prototype.mapValues=function(e){var r={},n=this.greedyClone();return n.editAll(function(i,a,s){return r.value=e(a,i,s),r}),n},t.prototype.reduce=function(e,r){for(var n=0,i=r,a=this.entries(this.minKey(),jo),s;!(s=a.next()).done;)i=e(i,s.value,n++,this);return i},t.prototype.entries=function(e,r){var n=this.findPath(e);if(n===void 0)return ns();var i=n.nodequeue,a=n.nodeindex,s=n.leaf,o=r!==void 0?1:0,l=e===void 0?-1:s.indexOf(e,0,this._compare)-1;return ns(function(){e:for(;;)switch(o){case 0:if(++l<s.keys.length)return{done:!1,value:[s.keys[l],s.values[l]]};o=2;continue;case 1:if(++l<s.keys.length)return r[0]=s.keys[l],r[1]=s.values[l],{done:!1,value:r};o=2;case 2:for(var c=-1;;){if(++c>=i.length){o=3;continue e}if(++a[c]<i[c].length)break}for(;c>0;c--)i[c-1]=i[c][a[c]].children,a[c-1]=0;s=i[0][a[0]],l=-1,o=r!==void 0?1:0;continue;case 3:return{done:!0,value:void 0}}})},t.prototype.entriesReversed=function(e,r,n){if(e===void 0&&(e=this.maxKey(),n=void 0,e===void 0))return ns();var i=this.findPath(e)||this.findPath(this.maxKey()),a=i.nodequeue,s=i.nodeindex,o=i.leaf;en(!a[0]||o===a[0][s[0]],"wat!");var l=o.indexOf(e,0,this._compare);!n&&l<o.keys.length&&this._compare(o.keys[l],e)<=0&&l++;var c=r!==void 0?1:0;return ns(function(){e:for(;;)switch(c){case 0:if(--l>=0)return{done:!1,value:[o.keys[l],o.values[l]]};c=2;continue;case 1:if(--l>=0)return r[0]=o.keys[l],r[1]=o.values[l],{done:!1,value:r};c=2;case 2:for(var d=-1;;){if(++d>=a.length){c=3;continue e}if(--s[d]>=0)break}for(;d>0;d--)a[d-1]=a[d][s[d]].children,s[d-1]=a[d-1].length-1;o=a[0][s[0]],l=o.keys.length,c=r!==void 0?1:0;continue;case 3:return{done:!0,value:void 0}}})},t.prototype.findPath=function(e){var r=this._root,n,i;if(r.isLeaf)n=Hb,i=Hb;else{n=[],i=[];for(var a=0;!r.isLeaf;a++){if(n[a]=r.children,i[a]=e===void 0?0:r.indexOf(e,0,this._compare),i[a]>=n[a].length)return;r=n[a][i[a]]}n.reverse(),i.reverse()}return{nodequeue:n,nodeindex:i,leaf:r}},t.prototype.diffAgainst=function(e,r,n,i){if(e._compare!==this._compare)throw new Error("Tree comparators are not the same.");if(this.isEmpty||e.isEmpty)return this.isEmpty&&e.isEmpty?void 0:this.isEmpty?n===void 0?void 0:t.stepToEnd(t.makeDiffCursor(e),n):r===void 0?void 0:t.stepToEnd(t.makeDiffCursor(this),r);for(var a=this._compare,s=t.makeDiffCursor(this),o=t.makeDiffCursor(e),l=!0,c=!0,d=t.compare(s,o,a);l&&c;){var u=t.compare(s,o,a),g=s.leaf,f=s.internalSpine,h=s.levelIndices,m=o.leaf,v=o.internalSpine,b=o.levelIndices;if(g||m){if(d!==0){if(u===0){if(g&&m&&i){var x=g.values[h[h.length-1]],y=m.values[b[b.length-1]];if(!Object.is(x,y)){var S=i(s.currentKey,x,y);if(S&&S.break)return S.break}}}else if(u>0){if(m&&n){var I=m.values[b[b.length-1]],S=n(o.currentKey,I);if(S&&S.break)return S.break}}else if(r&&g&&d!==0){var x=g.values[h[h.length-1]],S=r(s.currentKey,x);if(S&&S.break)return S.break}}}else if(!g&&!m&&u===0){var C=f.length-1,D=v.length-1,E=f[C][h[C]],O=v[D][b[D]];if(O===E){d=0,l=t.step(s,!0),c=t.step(o,!0);continue}}d=u,u<0?l=t.step(s):c=t.step(o)}if(l&&r)return t.finishCursorWalk(s,o,a,r);if(c&&n)return t.finishCursorWalk(o,s,a,n)},t.finishCursorWalk=function(e,r,n,i){var a=t.compare(e,r,n);if(a===0){if(!t.step(e))return}else a<0&&en(!1,"cursor walk terminated early");return t.stepToEnd(e,i)},t.stepToEnd=function(e,r){for(var n=!0;n;){var i=e.leaf,a=e.levelIndices,s=e.currentKey;if(i){var o=i.values[a[a.length-1]],l=r(s,o);if(l&&l.break)return l.break}n=t.step(e)}},t.makeDiffCursor=function(e){var r=e._root,n=e.height;return{height:n,internalSpine:[[r]],levelIndices:[0],leaf:void 0,currentKey:r.maxKey()}},t.step=function(e,r){var n=e.internalSpine,i=e.levelIndices,a=e.leaf;if(r===!0||a){var s=i.length;if(r===!0||i[s-1]===0){var o=n.length;if(o===0)return!1;for(var l=o-1,c=l;c>=0;){if(i[c]>0)return c<s-1&&(e.leaf=void 0,i.pop()),c<l&&(e.internalSpine=n.slice(0,c+1)),e.currentKey=n[c][--i[c]].maxKey(),!0;c--}return!1}else{var d=--i[s-1];return e.currentKey=a.keys[d],!0}}else{var u=n.length,g=u-1,f=n[g][i[g]];if(f.isLeaf){e.leaf=f;var d=i[u]=f.values.length-1;e.currentKey=f.keys[d]}else{var h=f.children;n[u]=h;var m=h.length-1;i[u]=m,e.currentKey=h[m].maxKey()}return!0}},t.compare=function(e,r,n){var i=e.height,a=e.currentKey,s=e.levelIndices,o=r.height,l=r.currentKey,c=r.levelIndices,d=n(l,a);if(d!==0)return d;var u=i<o?i:o,g=s.length-(i-u),f=c.length-(o-u);return g-f},t.prototype.keys=function(e){var r=this.entries(e,jo);return ns(function(){var n=r.next();return n.value&&(n.value=n.value[0]),n})},t.prototype.values=function(e){var r=this.entries(e,jo);return ns(function(){var n=r.next();return n.value&&(n.value=n.value[1]),n})},Object.defineProperty(t.prototype,"maxNodeSize",{get:function(){return this._maxNodeSize},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this._root.minKey()},t.prototype.maxKey=function(){return this._root.maxKey()},t.prototype.clone=function(){this._root.isShared=!0;var e=new t(void 0,this._compare,this._maxNodeSize);return e._root=this._root,e._size=this._size,e},t.prototype.greedyClone=function(e){var r=new t(void 0,this._compare,this._maxNodeSize);return r._root=this._root.greedyClone(e),r._size=this._size,r},t.prototype.toArray=function(e){e===void 0&&(e=2147483647);var r=this.minKey(),n=this.maxKey();return r!==void 0?this.getRange(r,n,!0,e):[]},t.prototype.keysArray=function(){var e=[];return this._root.forRange(this.minKey(),this.maxKey(),!0,!1,this,0,function(r,n){e.push(r)}),e},t.prototype.valuesArray=function(){var e=[];return this._root.forRange(this.minKey(),this.maxKey(),!0,!1,this,0,function(r,n){e.push(n)}),e},t.prototype.toString=function(){return this.toArray().toString()},t.prototype.setIfNotPresent=function(e,r){return this.set(e,r,!1)},t.prototype.nextHigherPair=function(e,r){return r=r||[],e===void 0?this._root.minPair(r):this._root.getPairOrNextHigher(e,this._compare,!1,r)},t.prototype.nextHigherKey=function(e){var r=this.nextHigherPair(e,jo);return r&&r[0]},t.prototype.nextLowerPair=function(e,r){return r=r||[],e===void 0?this._root.maxPair(r):this._root.getPairOrNextLower(e,this._compare,!1,r)},t.prototype.nextLowerKey=function(e){var r=this.nextLowerPair(e,jo);return r&&r[0]},t.prototype.getPairOrNextLower=function(e,r){return this._root.getPairOrNextLower(e,this._compare,!0,r||[])},t.prototype.getPairOrNextHigher=function(e,r){return this._root.getPairOrNextHigher(e,this._compare,!0,r||[])},t.prototype.changeIfPresent=function(e,r){return this.editRange(e,e,!0,function(n,i){return{value:r}})!==0},t.prototype.getRange=function(e,r,n,i){i===void 0&&(i=67108863);var a=[];return this._root.forRange(e,r,n,!1,this,0,function(s,o){return a.push([s,o]),a.length>i?xD:void 0}),a},t.prototype.setPairs=function(e,r){for(var n=0,i=0;i<e.length;i++)this.set(e[i][0],e[i][1],r)&&n++;return n},t.prototype.forRange=function(e,r,n,i,a){var s=this._root.forRange(e,r,n,!1,this,a||0,i);return typeof s=="number"?s:s.break},t.prototype.editRange=function(e,r,n,i,a){var s=this._root;s.isShared&&(this._root=s=s.clone());try{var o=s.forRange(e,r,n,!0,this,a||0,i);return typeof o=="number"?o:o.break}finally{for(var l=void 0;s.keys.length<=1&&!s.isLeaf;)l||(l=s.isShared),this._root=s=s.keys.length===0?gm:s.children[0];l&&(s.isShared=!0)}},t.prototype.editAll=function(e,r){return this.editRange(this.minKey(),this.maxKey(),!0,e,r)},t.prototype.deleteRange=function(e,r,n){return this.editRange(e,r,n,Gb)},t.prototype.deleteKeys=function(e){for(var r=0,n=0;r<e.length;r++)this.delete(e[r])&&n++;return n},Object.defineProperty(t.prototype,"height",{get:function(){for(var e=this._root,r=-1;e;)r++,e=e.isLeaf?void 0:e.children[0];return r},enumerable:!1,configurable:!0}),t.prototype.freeze=function(){var e=this;e.clear=e.set=e.editRange=function(){throw new Error("Attempted to modify a frozen BTree")}},t.prototype.unfreeze=function(){delete this.clear,delete this.set,delete this.editRange},Object.defineProperty(t.prototype,"isFrozen",{get:function(){return this.hasOwnProperty("editRange")},enumerable:!1,configurable:!0}),t.prototype.checkValid=function(){var e=this._root.checkValid(0,this,0);en(e===this.size,"size mismatch: counted ",e,"but stored",this.size)},t}(),hm=Kn.default=Qn;function wD(t){return t}Kn.asSet=wD;Symbol&&Symbol.iterator&&(Qn.prototype[Symbol.iterator]=Qn.prototype.entries);Qn.prototype.where=Qn.prototype.filter;Qn.prototype.setRange=Qn.prototype.setPairs;Qn.prototype.add=Qn.prototype.set;function ns(t){t===void 0&&(t=function(){return{done:!0,value:void 0}});var e={next:t};return Symbol&&Symbol.iterator&&(e[Symbol.iterator]=function(){return this}),e}var u5=function(){function t(e,r){e===void 0&&(e=[]),this.keys=e,this.values=r||pr,this.isShared=void 0}return Object.defineProperty(t.prototype,"isLeaf",{get:function(){return this.children===void 0},enumerable:!1,configurable:!0}),t.prototype.maxKey=function(){return this.keys[this.keys.length-1]},t.prototype.indexOf=function(e,r,n){for(var i=this.keys,a=0,s=i.length,o=s>>1;a<s;){var l=n(i[o],e);if(l<0)a=o+1;else if(l>0)s=o;else{if(l===0)return o;if(e===e)return i.length;throw new Error("BTree: NaN was used as a key")}o=a+s>>1}return o^r},t.prototype.minKey=function(){return this.keys[0]},t.prototype.minPair=function(e){if(this.keys.length!==0)return e[0]=this.keys[0],e[1]=this.values[0],e},t.prototype.maxPair=function(e){if(this.keys.length!==0){var r=this.keys.length-1;return e[0]=this.keys[r],e[1]=this.values[r],e}},t.prototype.clone=function(){var e=this.values;return new t(this.keys.slice(0),e===pr?e:e.slice(0))},t.prototype.greedyClone=function(e){return this.isShared&&!e?this:this.clone()},t.prototype.get=function(e,r,n){var i=this.indexOf(e,-1,n._compare);return i<0?r:this.values[i]},t.prototype.getPairOrNextLower=function(e,r,n,i){var a=this.indexOf(e,-1,r),s=a<0?~a-1:n?a:a-1;if(s>=0)return i[0]=this.keys[s],i[1]=this.values[s],i},t.prototype.getPairOrNextHigher=function(e,r,n,i){var a=this.indexOf(e,-1,r),s=a<0?~a:n?a:a+1,o=this.keys;if(s<o.length)return i[0]=o[s],i[1]=this.values[s],i},t.prototype.checkValid=function(e,r,n){var i=this.keys.length,a=this.values.length;return en(this.values===pr?i<=a:i===a,"keys/values length mismatch: depth",e,"with lengths",i,a,"and baseIndex",n),en(e==0||i>0,"empty leaf at depth",e,"and baseIndex",n),i},t.prototype.set=function(e,r,n,i){var a=this.indexOf(e,-1,i._compare);if(a<0){if(a=~a,i._size++,this.keys.length<i._maxNodeSize)return this.insertInLeaf(a,e,r,i);var s=this.splitOffRightSide(),o=this;return a>this.keys.length&&(a-=this.keys.length,o=s),o.insertInLeaf(a,e,r,i),s}else return n!==!1&&(r!==void 0&&this.reifyValues(),this.keys[a]=e,this.values[a]=r),!1},t.prototype.reifyValues=function(){return this.values===pr?this.values=this.values.slice(0,this.keys.length):this.values},t.prototype.insertInLeaf=function(e,r,n,i){if(this.keys.splice(e,0,r),this.values===pr){for(;pr.length<i._maxNodeSize;)pr.push(void 0);if(n===void 0)return!0;this.values=pr.slice(0,this.keys.length-1)}return this.values.splice(e,0,n),!0},t.prototype.takeFromRight=function(e){var r=this.values;e.values===pr?r!==pr&&r.push(void 0):(r=this.reifyValues(),r.push(e.values.shift())),this.keys.push(e.keys.shift())},t.prototype.takeFromLeft=function(e){var r=this.values;e.values===pr?r!==pr&&r.unshift(void 0):(r=this.reifyValues(),r.unshift(e.values.pop())),this.keys.unshift(e.keys.pop())},t.prototype.splitOffRightSide=function(){var e=this.keys.length>>1,r=this.keys.splice(e),n=this.values===pr?pr:this.values.splice(e);return new t(r,n)},t.prototype.forRange=function(e,r,n,i,a,s,o){var l=a._compare,c,d;if(r===e){if(!n||(d=(c=this.indexOf(e,-1,l))+1,c<0))return s}else c=this.indexOf(e,0,l),d=this.indexOf(r,-1,l),d<0?d=~d:n===!0&&d++;var u=this.keys,g=this.values;if(o!==void 0)for(var f=c;f<d;f++){var h=u[f],m=o(h,g[f],s++);if(m!==void 0){if(i===!0){if(h!==u[f]||this.isShared===!0)throw new Error("BTree illegally changed or cloned in editRange");m.delete?(this.keys.splice(f,1),this.values!==pr&&this.values.splice(f,1),a._size--,f--,d--):m.hasOwnProperty("value")&&(g[f]=m.value)}if(m.break!==void 0)return m}}else s+=d-c;return s},t.prototype.mergeSibling=function(e,r){if(this.keys.push.apply(this.keys,e.keys),this.values===pr){if(e.values===pr)return;this.values=this.values.slice(0,this.keys.length)}this.values.push.apply(this.values,e.reifyValues())},t}(),SD=function(t){bD(e,t);function e(r,n){var i=this;if(!n){n=[];for(var a=0;a<r.length;a++)n[a]=r[a].maxKey()}return i=t.call(this,n)||this,i.children=r,i}return e.prototype.clone=function(){for(var r=this.children.slice(0),n=0;n<r.length;n++)r[n].isShared=!0;return new e(r,this.keys.slice(0))},e.prototype.greedyClone=function(r){if(this.isShared&&!r)return this;for(var n=new e(this.children.slice(0),this.keys.slice(0)),i=0;i<n.children.length;i++)n.children[i]=n.children[i].greedyClone(r);return n},e.prototype.minKey=function(){return this.children[0].minKey()},e.prototype.minPair=function(r){return this.children[0].minPair(r)},e.prototype.maxPair=function(r){return this.children[this.children.length-1].maxPair(r)},e.prototype.get=function(r,n,i){var a=this.indexOf(r,0,i._compare),s=this.children;return a<s.length?s[a].get(r,n,i):void 0},e.prototype.getPairOrNextLower=function(r,n,i,a){var s=this.indexOf(r,0,n),o=this.children;if(s>=o.length)return this.maxPair(a);var l=o[s].getPairOrNextLower(r,n,i,a);return l===void 0&&s>0?o[s-1].maxPair(a):l},e.prototype.getPairOrNextHigher=function(r,n,i,a){var s=this.indexOf(r,0,n),o=this.children,l=o.length;if(!(s>=l)){var c=o[s].getPairOrNextHigher(r,n,i,a);return c===void 0&&s<l-1?o[s+1].minPair(a):c}},e.prototype.checkValid=function(r,n,i){var a=this.keys.length,s=this.children.length;en(a===s,"keys/children length mismatch: depth",r,"lengths",a,s,"baseIndex",i),en(a>1||r>0,"internal node has length",a,"at depth",r,"baseIndex",i);for(var o=0,l=this.children,c=this.keys,d=0,u=0;u<s;u++)o+=l[u].checkValid(r+1,n,i+o),d+=l[u].keys.length,en(o>=d,"wtf",i),en(u===0||l[u-1].constructor===l[u].constructor,"type mismatch, baseIndex:",i),l[u].maxKey()!=c[u]&&en(!1,"keys[",u,"] =",c[u],"is wrong, should be ",l[u].maxKey(),"at depth",r,"baseIndex",i),u===0||n._compare(c[u-1],c[u])<0||en(!1,"sort violation at depth",r,"index",u,"keys",c[u-1],c[u]);var g=d===0;return(g||d>n.maxNodeSize*s)&&en(!1,g?"too few":"too many","children (",d,o,") at depth",r,"maxNodeSize:",n.maxNodeSize,"children.length:",s,"baseIndex:",i),o},e.prototype.set=function(r,n,i,a){var s=this.children,o=a._maxNodeSize,l=a._compare,c=Math.min(this.indexOf(r,0,l),s.length-1),d=s[c];if(d.isShared&&(s[c]=d=d.clone()),d.keys.length>=o){var u;c>0&&(u=s[c-1]).keys.length<o&&l(d.keys[0],r)<0?(u.isShared&&(s[c-1]=u=u.clone()),u.takeFromRight(d),this.keys[c-1]=u.maxKey()):(u=s[c+1])!==void 0&&u.keys.length<o&&l(d.maxKey(),r)<0&&(u.isShared&&(s[c+1]=u=u.clone()),u.takeFromLeft(d),this.keys[c]=s[c].maxKey())}var g=d.set(r,n,i,a);if(g===!1)return!1;if(this.keys[c]=d.maxKey(),g===!0)return!0;if(this.keys.length<o)return this.insert(c+1,g),!0;var f=this.splitOffRightSide(),h=this;return l(g.maxKey(),this.maxKey())>0&&(h=f,c-=this.keys.length),h.insert(c+1,g),f},e.prototype.insert=function(r,n){this.children.splice(r,0,n),this.keys.splice(r,0,n.maxKey())},e.prototype.splitOffRightSide=function(){var r=this.children.length>>1;return new e(this.children.splice(r),this.keys.splice(r))},e.prototype.takeFromRight=function(r){this.keys.push(r.keys.shift()),this.children.push(r.children.shift())},e.prototype.takeFromLeft=function(r){this.keys.unshift(r.keys.pop()),this.children.unshift(r.children.pop())},e.prototype.forRange=function(r,n,i,a,s,o,l){var c=s._compare,d=this.keys,u=this.children,g=this.indexOf(r,0,c),f=g,h=Math.min(n===r?g:this.indexOf(n,0,c),d.length-1);if(a){if(f<=h)try{for(;f<=h;f++){u[f].isShared&&(u[f]=u[f].clone());var m=u[f].forRange(r,n,i,a,s,o,l);if(d[f]=u[f].maxKey(),typeof m!="number")return m;o=m}}finally{var v=s._maxNodeSize>>1;for(g>0&&g--,f=h;f>=g;f--)u[f].keys.length<=v&&(u[f].keys.length!==0?this.tryMerge(f,s._maxNodeSize):(d.splice(f,1),u.splice(f,1)));u.length!==0&&u[0].keys.length===0&&en(!1,"emptiness bug")}}else for(;f<=h;f++){var m=u[f].forRange(r,n,i,a,s,o,l);if(typeof m!="number")return m;o=m}return o},e.prototype.tryMerge=function(r,n){var i=this.children;return r>=0&&r+1<i.length&&i[r].keys.length+i[r+1].keys.length<=n?(i[r].isShared&&(i[r]=i[r].clone()),i[r].mergeSibling(i[r+1],n),i.splice(r+1,1),this.keys.splice(r+1,1),this.keys[r]=i[r].maxKey(),!0):!1},e.prototype.mergeSibling=function(r,n){var i=this.keys.length;this.keys.push.apply(this.keys,r.keys);var a=r.children;if(this.children.push.apply(this.children,a),r.isShared&&!this.isShared)for(var s=0;s<a.length;s++)a[s].isShared=!0;this.tryMerge(i-1,n)},e}(u5),pr=[],f5={delete:!0},Gb=function(){return f5},xD={break:!0},gm=function(){var t=new u5;return t.isShared=!0,t}(),Hb=[],jo=[];function en(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(!t)throw e.unshift("B+ tree"),new Error(e.join(" "))}Kn.EmptyBTree=function(){var t=new Qn;return t.freeze(),t}();class Dv{constructor(e,r,n){z(this,"storage");z(this,"sets");z(this,"deletes");z(this,"_status","open");this.storage=e,this.sets=r??new y1,this.deletes=n??new y1}get status(){return this._status}scope(e){return new Dv(this.storage.scope(e),this.sets.scope(e),this.deletes.scope(e))}async clear(e){this.checkTxStatusBeforeOperation(),await this.sets.clear(e),await this.deletes.clear(e)}async get(e,r){this.checkTxStatusBeforeOperation();const n=await this.deletes.get(e,r)===null,i=await this.sets.get(e,r);if(n)return i;const a=await this.storage.get(e,r);return i===void 0?a:i}async set(e,r,n){return this.checkTxStatusBeforeOperation(),this.sets.set(e,r,n)}async delete(e,r){return this.checkTxStatusBeforeOperation(),await this.sets.delete(e,r),this.deletes.set(e,null,r)}async*scan(e,r){var n;this.checkTxStatusBeforeOperation();for await(const[i,a]of KM(WM(this.storage.scan(e,r),this.sets.scan(e,r),this.deletes.scan(e,r)),([s])=>JSON.stringify(s))){const s=(n=e.prefix)!=null&&n.length?[...e.prefix,...i]:i,o=await this.sets.get(s,r),l=await this.deletes.get(s,r)===null;if(!l&&o===void 0){yield[i,a];continue}l&&o===void 0||(yield[i,o])}}async*scanValues(e,r){yield*jb(this.scan(e,r),([n,i])=>i)}async count(e,r){this.checkTxStatusBeforeOperation();let n=0;for await(const[i]of this.scan({prefix:e.prefix},r))n++;return Promise.resolve(n)}async commit(){this.checkTxStatusBeforeOperation(),await this.storage.applyEdits(this.sets.scan({prefix:[]}),jb(this.deletes.scan({prefix:[]}),e=>e[0])),this._status="committed"}checkTxStatusBeforeOperation(){if(this._status!=="open"){if(this._status==="committed")throw new IM;if(this._status==="cancelled")throw new CM}}cancel(){this.checkTxStatusBeforeOperation(),this._status="cancelled"}}class Nv{constructor(e,r){z(this,"store");z(this,"prefix");this.store=e,this.prefix=r}scope(e){return new Nv(this.store,[...this.prefix,...e])}get(e){return this.store.get(e,this.prefix)}set(e,r){return this.store.set(e,r,this.prefix)}delete(e){return this.store.delete(e,this.prefix)}scan(e){return this.store.scan(e,this.prefix)}scanValues(e){return this.store.scanValues(e,this.prefix)}clear(){return this.store.clear(this.prefix)}count(e){return this.store.count(e,this.prefix)}transact(){return new Fv(this.store.transact(),this.prefix)}applyEdits(e,r){return this.store.applyEdits(e,r)}}class Fv{constructor(e,r){z(this,"tx");z(this,"prefix");this.tx=e,this.prefix=r}scope(e){return new Fv(this.tx,[...this.prefix,...e])}get(e){return this.tx.get(e,this.prefix)}set(e,r){return this.tx.set(e,r,this.prefix)}delete(e){return this.tx.delete(e,this.prefix)}scan(e){return this.tx.scan(e,this.prefix)}scanValues(e){return this.tx.scanValues(e,this.prefix)}clear(){return this.tx.clear(this.prefix)}count(e){return this.tx.count(e,this.prefix)}commit(){return this.tx.commit()}cancel(){return this.tx.cancel()}get status(){return this.tx.status}}const ID="default"in hm?hm.default:hm;class y1{constructor(e){z(this,"data");this.data=e??new ID(void 0,U3)}get(e,r){const n=r?[...r,...e]:e;return Promise.resolve(this.data.get(n))}set(e,r,n){const i=n?[...n,...e]:e;return this.data.set(i,r),Promise.resolve()}delete(e,r){const n=r?[...r,...e]:e;return this.data.delete(n),Promise.resolve()}*scan(e,r){const n=r?[...r,...e.prefix]:e.prefix,i=[...n,"ï¿¿"],a=[];this.data.forRange(n,i,!1,(s,o)=>{const l=((r==null?void 0:r.length)??0)+e.prefix.length,c=l>0?s.slice(l):s;c.length!==0&&a.push([c,o])}),yield*a}*scanValues(e,r){const n=r?[...r,...e.prefix]:e.prefix,i=[...n,"ï¿¿"],a=[];this.data.forRange(n,i,!1,(s,o)=>{a.push(o)}),yield*a}count(e,r){const n=r?[...r,...e.prefix]:e.prefix;if(!n.length)return this.data.size;const i=[...n,"ï¿¿"];return this.data.forRange(n,i,!1)}transact(){return new Dv(this)}async clear(e){if(!(e!=null&&e.length)){this.data.clear();return}for await(const[r]of this.scan({prefix:e}))await this.delete(r,e)}scope(e){return new Nv(this,e)}async applyEdits(e,r){for await(const n of r)this.data.delete(n);for await(const[n,i]of e)this.data.set(n,i)}}class CD{constructor(e,r){z(this,"_buffers");z(this,"activeBufferIndex",0);this._buffers=[e,r]}get activeBuffer(){return this._buffers[this.activeBufferIndex]}get inactiveBuffer(){return this._buffers[1-this.activeBufferIndex]}async getChangesForCollection(e,r){const[n,i]=await Promise.all([this.inactiveBuffer.getChangesForCollection(e,r),this.activeBuffer.getChangesForCollection(e,r)]);if(!(!n&&!i))return n?i?g1({},{[r]:n},{[r]:i})[r]:n:i}async getChangesForEntity(e,r,n){const i=await this.inactiveBuffer.getChangesForEntity(e,r,n),a=await this.activeBuffer.getChangesForEntity(e,r,n);if(!i&&!a)return;const s=!!(i!=null&&i.delete||a!=null&&a.delete);return{update:gg({},i==null?void 0:i.update,a==null?void 0:a.update),delete:s}}async clear(e){await Promise.all(this._buffers.map(r=>r.clear(e)))}async clearChangesForEntity(e,r,n){await Promise.all(this._buffers.map(i=>i.clearChangesForEntity(e,r,n)))}async write(e,r){await this.activeBuffer.write(e,r)}async isEmpty(e){return(await Promise.all([this.activeBuffer.isEmpty(e),this.inactiveBuffer.isEmpty(e)])).every(r=>r)}async getChanges(e){const r=await Promise.all([this.getLockedBuffer().getChanges(e),this.getUnlockedBuffer().getChanges(e)]);return g1({},r[0],r[1])}lockAndSwitchBuffers(){this.activeBufferIndex=this.activeBufferIndex===0?1:0}getLockedBuffer(){return this.inactiveBuffer}getUnlockedBuffer(){return this.activeBuffer}}function Qf(t,e=[],r=new Map){var n;if(e.push(t),t.where){for(const i of ra(t.where))if(Cr(i))Qf(i.exists,e,r);else if(br(i)&&Tn(i[2])){const[a,s]=Wi(i[2]);if(e5(a)){const o=e[e.length-a-1];if(o){const l=Yn(o);r.has(l)||r.set(l,new Set),(n=r.get(l))==null||n.add(s)}}}}if(t.include)for(const i in t.include){const{subquery:a}=t.include[i];Qf(a,e,r)}if(t.order)for(const i of t.order){const a=i[2];a&&Qf(a.subquery,e,r)}return e.pop(),r}function Zf(t,e=[],r=new Map){var i;for(const a of e)(i=r.get(a))==null||i.add(t.collectionName);const n=Yn(t);if(e.push(n),r.set(n,new Set().add(t.collectionName)),t.where){for(const a of ra(t.where))if(Cr(a)){const{exists:s}=a;Zf(s,e,r)}}if(t.include)for(const a in t.include){const{subquery:s}=t.include[a];Zf(s,e,r)}if(t.order)for(const a of t.order){const s=a[2];s&&Zf(s.subquery,e,r)}return e.pop(),r}function bh(t){if(t.where&&GM(t.where,Cr))return!0;if(t.include)for(const e in t.include){const{subquery:r}=t.include[e];if(bh(r))return!0}if(t.order)for(const e of t.order){const r=e[2];if(r&&bh(r.subquery))return!0}return!1}function $v(t){if(t.order){for(const e of t.order)if(e[2])return!0}if(t.include)for(const e in t.include){const{subquery:r}=t.include[e];if($v(r))return!0}return!1}function _h(t,e,r=!0){if(r&&(t=JSON.parse(JSON.stringify(t))),t.where&&(t.where=h5(t.where,e)),t.include)for(const n in t.include)t.include[n].subquery=_h(t.include[n].subquery,e,!1);if(t.order)for(const n of t.order){const i=n[2];i&&(i.subquery=_h(i.subquery,e,!1))}return t}function h5(t,e){return t.map(r=>PD(r,e))}function PD(t,e){if(an(t))return{mod:t.mod,filters:h5(t.filters,e)};if(br(t)&&Tn(t[2])&&t[2].startsWith("$view_")){const r=t[2];let n=Ov(r,e);return Array.isArray(n)&&(n=new Set(n)),[t[0],t[1],n]}return t}function ED(t){const e=structuredClone(t);let r=0;if(e.where)for(const n of ra(e.where))Cr(n)&&(e.include||(e.include={}),e.include[`_exists-${r}`]={subquery:ED(n.exists),cardinality:"one"},r++);return e}function ite(t){if(!t.order)return t;const e=structuredClone(t);for(const[r,n,i]of e.order)i&&(e.include={...e.include,[r]:i});return e}function AD(t,e,r={}){const n=e.collectionName;r[n]||(r[n]={sets:new Map,deletes:new Set});const i=e.include??{};for(const a of t){r[n].sets.set(a.data.id,a.data);for(const[s,{subquery:o}]of Object.entries(i)){const l=a.subqueries[s];l!=null&&AD(Array.isArray(l)?l:[l],o,r)}}return r}function b1(t){return{id:Yn(t),usedBy:new Set,dependsOn:new Map,results:void 0,query:t,shouldRefetch:bh(t)||$v(t),hasChanged:!1,cachedBoundQuery:void 0,referencedRelationalVariables:Qf(t),collectionsReferencedInSubqueries:Zf(t)}}function TD(t){for(const e of t.values())e.results=void 0,e.cachedBoundQuery=void 0,e.hasChanged=!0}function Lv(t,e,r){if(e.where){for(const n of ra(e.where))if(br(n)&&a5(n)){const i=Number(n[2].split(".")[0].split("_")[1]);r.has(i)&&(t.dependsOn.set(n[2],r.get(i)),r.get(i).usedBy.add(t))}}if(e.include)for(const n in e.include){const i=e.include[n].subquery;Lv(t,i,r)}}function g5(t){const e=new Set;if(t.usedBy.size>0)return e;e.add(t.id);for(const[r,n]of t.dependsOn.entries()){n.usedBy.delete(t);const i=g5(n);for(const a of i)e.add(a)}return e}function OD(t,e){const r=g5(t);for(const n of r)e.delete(n);return r}function kD(t,e){let r=null;const{views:n,rewrittenQuery:i}=mh(structuredClone(t));return!bh(i)&&!$v(i)?(r=b1(i),e.set(r.id,r),RD(n,e),Lv(r,i,e)):(r=b1(t),e.set(r.id,r)),r}function RD(t,e){const r=[];for(const[n,i]of t.entries()){if(e.has(n))continue;const a=b1(i);e.set(n,a),r.push(a)}for(const n of r)Lv(n,n.query,e);return e}var MD=function(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,i;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],r&&(i=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");i&&(n=function(){try{i.call(this)}catch(a){return Promise.reject(a)}}),t.stack.push({value:e,dispose:n,async:r})}else r&&t.stack.push({async:!0});return e},DD=function(t){return function(e){function r(s){e.error=e.hasError?new t(s,e.error,"An error was suppressed during disposal."):s,e.hasError=!0}var n,i=0;function a(){for(;n=e.stack.pop();)try{if(!n.async&&i===1)return i=0,e.stack.push(n),Promise.resolve().then(a);if(n.dispose){var s=n.dispose.call(n.value);if(n.async)return i|=2,Promise.resolve(s).then(a,function(o){return r(o),a()})}else i|=1}catch(o){r(o)}if(i===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return a()}}(typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=t,n.suppressed=e,n});class ate{constructor(e){z(this,"db");z(this,"storage",new y1);z(this,"entityStore",new kM(["entities"]));z(this,"doubleBuffer",new CD(new Nb,new Nb));z(this,"runningLock");z(this,"subscribedQueries",new Map);z(this,"uninitializedQueries",new Set);z(this,"viewGraph",new Map);this.db=e}subscribe(e,r,n){const i=Yn(e);if(!this.subscribedQueries.has(i)){const s=kD(e,this.viewGraph),o={query:e,listeners:new Set,errorCallbacks:new Set,uninitializedListeners:new WeakSet,rootNode:s};this.subscribedQueries.set(i,o),this.uninitializedQueries.add(i)}const a=this.subscribedQueries.get(i);return a.listeners.add(r),a.uninitializedListeners.add(r),n&&a.errorCallbacks.add(n),()=>{const s=this.subscribedQueries.get(i);if(!s){ph.warn("Query not found",{rootQueryId:i});return}s.listeners.delete(r),s.uninitializedListeners.delete(r),n&&s.errorCallbacks.delete(n),s.listeners.size===0&&(OD(s.rootNode,this.viewGraph),this.subscribedQueries.delete(i))}}async initializeQueryResults(e){if(e.results)return e.results;let r=e.query;if(e.dependsOn.size>0)if(e.cachedBoundQuery)r=e.cachedBoundQuery;else{const i={};for(const[a,s]of e.dependsOn.entries()){const o=await this.initializeQueryResults(s);i[a.split(".")[0].slice(1)]=o}r=_h(r,yh(i)),e.cachedBoundQuery=r}const n=await this.db.rawFetch(r);return e.results=n,n}flushChangesToListeners(){for(const e of this.subscribedQueries.keys()){const r=this.subscribedQueries.get(e);for(const n of r.listeners){if(!r.rootNode.results){ph.error("Results not found for query",{queryId:e});continue}if(!r.uninitializedListeners.has(n)&&!r.rootNode.hasChanged)continue;const i=r.rootNode.results;r.uninitializedListeners.delete(n),i!=null&&n({results:i})}r.rootNode.hasChanged=!1}}async bufferChanges(e){const r=structuredClone(e);for(const i in r)r[i].sets.size===0&&r[i].deletes.size===0&&delete r[i];if(hl(r))return;const n=this.storage.transact();try{this.subscribedQueries.size>0&&this.doubleBuffer.write(void 0,r)}finally{await n.commit()}}async acquireRunningLock(){var r;for(;this.runningLock!==void 0;)await((r=this.runningLock)==null?void 0:r.promise);this.runningLock=Promise.withResolvers();const e=this.runningLock.resolve;return{[Symbol.dispose]:()=>{this.runningLock=void 0,e()}}}async updateViews(){const e={stack:[],error:void 0,hasError:!1};try{const r=MD(e,await this.acquireRunningLock(),!1);this.doubleBuffer.lockAndSwitchBuffers();const n=await this.doubleBuffer.inactiveBuffer.getChanges(this.storage),i=new Set;for(const o of this.uninitializedQueries){const l=this.subscribedQueries.get(o);l&&l.rootNode.results==null&&(await this.initializeQueryResults(l.rootNode),i.add(l.rootNode)),this.uninitializedQueries.delete(o)}const a=this.getAffectedViewsInTopologicalOrder(n);for(const[o,l]of a){if(i.has(o))continue;if(o.shouldRefetch){o.results=await this.db.rawFetch(o.query),o.hasChanged=!0;continue}let c=!1;for(const g of o.dependsOn.values())if(g.hasChanged){c=!0;break}if(!c){if(o.dependsOn.size>0&&!o.cachedBoundQuery)throw new Error("View node has dependencies but no cached bound query");const{updatedResults:g,hasChanged:f}=await this.updateQueryResultsInPlace(o.results,l,o.cachedBoundQuery??o.query,o.query,o);o.results=g,o.hasChanged=f;continue}const d={};for(const[g,f]of o.dependsOn.entries()){if(!f.results)throw new Error("view results not found during update: "+f.results);d[g.split(".")[0].slice(1)]=f.results}const u=_h(o.query,yh(d));o.cachedBoundQuery=u,o.results=await this.db.rawFetch(u),o.hasChanged=!0}const s=this.storage.transact();this.doubleBuffer.inactiveBuffer.clear(s),await s.commit()}catch(r){e.error=r,e.hasError=!0}finally{DD(e)}}async updateQueryResultsInPlace(e,r,n,i,a,s=[]){var S,I;const o=r[n.collectionName];let l=e??[];const c=new Map,d=new Map,u=new Map,g=new Map,{collectionName:f,where:h,order:m,after:v,limit:b,include:x}=n;if(o){const C=new Set,D=o.deletes,E=o.sets,O=k=>m&&m.some(([V])=>bi.Get(k,V)!==void 0),A=k=>(!h||ND(k,h))&&(!v||m1(k,v,m));if((D.size>0||E.size>0)&&(l=e.filter(k=>{let V=!0;if(D.has(k.data.id)&&(V=!1),E.has(k.data.id)){const G=E.get(k.data.id);gh(k.data,G,{clone:!1}),u.set(k.data.id,k.data),V=A(k.data),V&&(g.set(k.data.id,G),O(G)&&C.add(k.data.id))}return V||c.set(k.data.id,k.data),V}),b&&e.length===b&&(c.size>0||C.size>0&&m)))return{updatedResults:await this.db.rawFetch(n,{entityStack:s}),hasChanged:!0};for(const[k,V]of E){if(u.has(k))continue;if(FD(V)){A(V)&&(d.set(k,V),l.push(vh(V)));continue}if(h&&!p5(V,h)&&!O(V))continue;const G=await this.db.entityStore.getEntity(this.db.kv,f,k);G!=null&&A(G)&&(d.set(G.id,G),l.push(vh(G)))}if(m!=null&&!(d.size===0&&C.size===0)&&l5(l,m),b!=null&&l.length>b){for(let k=b;k<l.length;k++){const V=l[k];d.has(V.data.id)&&d.delete(V.data.id)}l=l.slice(0,b)}}let y=!1;if(x){const C=new Set;d.keys().forEach(E=>{C.add(E)});const D=a.referencedRelationalVariables.get(Yn(i));if(D&&g.entries().forEach(([E,O])=>{for(const A of D)if(bi.Get(O,A)!==void 0){C.add(E);break}}),l.length>0)for(const E in x){const{subquery:O,cardinality:A}=x[E],k=(S=i.include)==null?void 0:S[E];if(!k)throw new Error("Inclusion is transformed query not found in original query: "+E);const{subquery:V}=k,G=a.collectionsReferencedInSubqueries.get(Yn(V));if(!G)throw new Error("Subquery not found in collectionsReferencedInSubqueries");let K=!1;for(const j of G)if(r[j]){K=!0;break}if(K)for(const j of l){if(C.has(j.data.id))continue;const Q=s.concat(j.data),te=j.subqueries[E],q=await this.updateQueryResultsInPlace(Array.isArray(te)?te:te===null?[]:[te],r,{...O,where:O.where?ll(O.where,{entityStack:Q}):void 0},V,a,Q),Z=A==="one"?((I=q.updatedResults)==null?void 0:I[0])??null:q.updatedResults;j.subqueries[E]=Z,q.hasChanged&&(y=!0)}}if(C.size>0){const E=[["id","in",C]],O=await this.db.rawFetch({...n,where:h?h.concat(E):E},{entityStack:s});for(const A of O){const k=l.findIndex(V=>V.data.id===A.data.id);l[k]=A}}}return{updatedResults:l,hasChanged:c.size>0||d.size>0||u.size>0||y}}getAffectedViewsInTopologicalOrder(e){var s;const r=new Map;for(const o of this.viewGraph.values()){const l={};for(const c in e)(s=o.collectionsReferencedInSubqueries.get(o.id))!=null&&s.has(c)&&(l[c]=e[c]);hl(l)||r.set(o,l)}let n=new Set(Array.from(r.keys()));for(;n.size>0;){const o=new Set;for(const l of n)for(const c of l.usedBy)r.has(c)||(r.set(c,{}),o.add(c));n=o}let i=new Map,a=new Set(Array.from(r.keys()));for(;a.size>0;){const o=new Set;for(const l of a)if(l.dependsOn.size===0){i.set(l,r.get(l));continue}else{let c=!0;for(const d of l.dependsOn.values())if(a.has(d)){c=!1;break}if(c){i.set(l,r.get(l));continue}o.add(l)}a=o}return i}resetSubscriptions(){TD(this.viewGraph);for(const e of this.subscribedQueries.keys())this.uninitializedQueries.add(e)}async clear(){await this.storage.clear(),this.subscribedQueries.clear(),this.uninitializedQueries.clear(),this.viewGraph.clear()}}function ND(t,e){return e.every(r=>ao(t,r,!0))}function p5(t,e){return e.some(r=>{if(Po(r))return!1;if(an(r))return p5(t,r.filters);if(Cr(r))throw new Error("Subquery filters are not supported in this context");const n=r[0].split(".");return bi.Get(t,n)!==void 0})}function FD(t){return t.id!==void 0}class ste extends Ye{constructor(e,...r){super(...r),this.name="UnrecognizedFetchPolicyError",this.baseMessage="The fetch policy "+e+" is not recognized.",this.status=gt["Bad Request"]}}class ote extends Ye{constructor(e,...r){super(...r),this.name="RemoteSyncFailedError",this.baseMessage="Remote sync failed for query: "+JSON.stringify(e,null,2),this.status=gt["Internal Server Error"]}}class lte extends Ye{constructor(...e){super(...e),this.name="IndexedDbUnavailableError",this.baseMessage="IndexedDB is not available in this environment. If you are creating a TriplitClient on the server e.g. prerendering with a SSR framework like Next.js or SvelteKit, you may need to use the `memory` storage provider. Consult our SSR guide (https://triplit.dev/docs/ssr) for more information. If you are running on a non-browser client, like a mobile app, try one of our other storage providers (https://triplit.dev/docs/client/storage).",this.status=gt["Service Unavailable"]}}class $D extends Ye{constructor(...e){super(...e),this.name="WebSocketsUnavailableError",this.baseMessage="The TriplitClient syncs over WebSockets, which are not available in this environment. If you are creating a TriplitClient on the server e.g. prerendering with a SSR framework like Next.js or SvelteKit, you should interact with Triplit over HTTP. Consult our SSR guide (https://triplit.dev/docs/ssr) for more information.",this.status=gt["Service Unavailable"]}}class cte extends Ye{constructor(...e){super(...e),this.name="SessionRoleMismatchError",this.baseMessage="Attempted to use `TriplitClient.updateSessionToken` with a token that does not have the same roles as the current session token. `updateSessionToken` should only be used to refresh the session with the server to prevent token expiry. To connect with a new token with new roles, use `TriplitClient.endSession` and then `TriplitClient.startSession(...)` with the new token.",this.status=gt.Forbidden}}class dte extends Ye{constructor(...e){super(...e),this.name="TokenExpiredError",this.baseMessage="The provided token has expired. Please ensure that you are using a fresh token when calling `startSession` or `updateSessionToken`.",this.status=gt.Unauthorized}}class ute extends Ye{constructor(...e){super(...e),this.name="NoActiveSessionError",this.baseMessage="Attempted to perform an operation that requires an active session when no session is active. Call `TriplitClient.startSession(...)` to start a new session.",this.status=gt.Forbidden}}class fte extends Ye{constructor(e,...r){super(...r),this.name="TokenDecodingError",this.baseMessage=`The provided token ("${e}") could not be decoded. Please ensure that you are using a valid JWT token.`,this.status=gt.Unauthorized}}const LD=1024*1024/2;function BD(){return typeof WebSocket<"u"}class hte{constructor(e={}){z(this,"options");z(this,"ws");z(this,"connectionListeners",new Set);this.options=e,this.options.messagePayloadSizeLimit=this.options.messagePayloadSizeLimit==null?LD:this.options.messagePayloadSizeLimit}get isOpen(){return!!this.ws&&this.ws.readyState===this.ws.OPEN}get connectionStatus(){return this.ws?m5(this.ws):"UNINITIALIZED"}onOpen(e){this.ws&&(this.ws.onopen=e)}sendMessage(e){if(!this.ws||!this.isOpen)return!1;const r=JSON.stringify(e),n=VD(r);if(this.options.messagePayloadSizeLimit&&n>this.options.messagePayloadSizeLimit){const i=jD(r,Math.ceil(n/this.options.messagePayloadSizeLimit)),a=(Math.random()+1).toString(36).substring(7);for(let s=0;s<i.length;s++)this.ws.send(JSON.stringify({type:"CHUNK",payload:{data:i[s],total:i.length,index:s,id:a}}));return!0}return this.ws.send(JSON.stringify(e)),!0}connect(e){this.close();const{token:r,schema:n,syncSchema:i,server:a}=e,s=new URLSearchParams;n&&s.set("schema",n.toString()),s.set("sync-schema",String(!!i)),s.set("token",r);const o=a.startsWith("https://"),l=a.slice(o?8:7),c=`${o?"wss":"ws"}://${l}?${s.toString()}`;if(!BD())throw new $D;this.ws=new WebSocket(c),this.ws.onconnectionchange=d=>{this.connectionListeners.forEach(u=>u(d))}}onMessage(e){this.ws&&(this.ws.onmessage=e)}onError(e){this.ws&&(this.ws.onerror=e)}close(e){if(this.ws){if(this.ws.readyState===this.ws.OPEN)return this.ws.close(1e3,JSON.stringify(e));if(this.ws.readyState===this.ws.CONNECTING)return this.ws.addEventListener("open",()=>{var r;(r=this.ws)==null||r.close(1e3,JSON.stringify(e))},{once:!0})}}onClose(e){this.ws&&(this.ws.onclose=e)}onConnectionChange(e){return this.connectionListeners.add(e),()=>{this.connectionListeners.delete(e)}}}function VD(t){var e=0;for(let r=0;r<t.length;r++){const n=t.charCodeAt(r);e+=n<128?1:n<2048?2:n<65536?3:4}return e}function jD(t,e){let r=[];const n=Math.ceil(t.length/e);for(let i=0;i<t.length;i+=n)r.push(t.slice(i,i+n));return r}function m5(t){switch(t.readyState){case t.CONNECTING:return"CONNECTING";case t.OPEN:return"OPEN";case t.CLOSING:return"CLOSING";case t.CLOSED:default:return"CLOSED"}}if(typeof globalThis<"u"&&globalThis.WebSocket){var zD=new Proxy(globalThis.WebSocket,{construct:function(t,e){const r=new t(...e);function n(){r.dispatchEvent(new Event("connectionchange")),r.onconnectionchange&&typeof r.onconnectionchange=="function"&&r.onconnectionchange(m5(r))}setTimeout(()=>{n()},0);const i=()=>{n()},a=()=>{n(),r.removeEventListener("open",i),r.removeEventListener("close",a)};return r.addEventListener("open",i),r.addEventListener("close",a),r}});globalThis.WebSocket=zD}class UD{constructor(){this.keyToValue=new Map,this.valueToKey=new Map}set(e,r){this.keyToValue.set(e,r),this.valueToKey.set(r,e)}getByKey(e){return this.keyToValue.get(e)}getByValue(e){return this.valueToKey.get(e)}clear(){this.keyToValue.clear(),this.valueToKey.clear()}}class v5{constructor(e){this.generateIdentifier=e,this.kv=new UD}register(e,r){this.kv.getByValue(e)||(r||(r=this.generateIdentifier(e)),this.kv.set(r,e))}clear(){this.kv.clear()}getIdentifier(e){return this.kv.getByValue(e)}getValue(e){return this.kv.getByKey(e)}}class GD extends v5{constructor(){super(e=>e.name),this.classToAllowedProps=new Map}register(e,r){typeof r=="object"?(r.allowProps&&this.classToAllowedProps.set(e,r.allowProps),super.register(e,r.identifier)):super.register(e,r)}getAllowedProps(e){return this.classToAllowedProps.get(e)}}function HD(t){if("values"in Object)return Object.values(t);const e=[];for(const r in t)t.hasOwnProperty(r)&&e.push(t[r]);return e}function WD(t,e){const r=HD(t);if("find"in r)return r.find(e);const n=r;for(let i=0;i<n.length;i++){const a=n[i];if(e(a))return a}}function oo(t,e){Object.entries(t).forEach(([r,n])=>e(n,r))}function Jf(t,e){return t.indexOf(e)!==-1}function Wb(t,e){for(let r=0;r<t.length;r++){const n=t[r];if(e(n))return n}}class KD{constructor(){this.transfomers={}}register(e){this.transfomers[e.name]=e}findApplicable(e){return WD(this.transfomers,r=>r.isApplicable(e))}findByName(e){return this.transfomers[e]}}const qD=t=>Object.prototype.toString.call(t).slice(8,-1),y5=t=>typeof t>"u",YD=t=>t===null,ml=t=>typeof t!="object"||t===null||t===Object.prototype?!1:Object.getPrototypeOf(t)===null?!0:Object.getPrototypeOf(t)===Object.prototype,_1=t=>ml(t)&&Object.keys(t).length===0,Ki=t=>Array.isArray(t),XD=t=>typeof t=="string",QD=t=>typeof t=="number"&&!isNaN(t),ZD=t=>typeof t=="boolean",JD=t=>t instanceof RegExp,vl=t=>t instanceof Map,yl=t=>t instanceof Set,b5=t=>qD(t)==="Symbol",eN=t=>t instanceof Date&&!isNaN(t.valueOf()),tN=t=>t instanceof Error,Kb=t=>typeof t=="number"&&isNaN(t),rN=t=>ZD(t)||YD(t)||y5(t)||QD(t)||XD(t)||b5(t),nN=t=>typeof t=="bigint",iN=t=>t===1/0||t===-1/0,aN=t=>ArrayBuffer.isView(t)&&!(t instanceof DataView),sN=t=>t instanceof URL,_5=t=>t.replace(/\./g,"\\."),pm=t=>t.map(String).map(_5).join("."),dl=t=>{const e=[];let r="";for(let i=0;i<t.length;i++){let a=t.charAt(i);if(a==="\\"&&t.charAt(i+1)==="."){r+=".",i++;continue}if(a==="."){e.push(r),r="";continue}r+=a}const n=r;return e.push(n),e};function Nn(t,e,r,n){return{isApplicable:t,annotation:e,transform:r,untransform:n}}const w5=[Nn(y5,"undefined",()=>null,()=>{}),Nn(nN,"bigint",t=>t.toString(),t=>typeof BigInt<"u"?BigInt(t):(console.error("Please add a BigInt polyfill."),t)),Nn(eN,"Date",t=>t.toISOString(),t=>new Date(t)),Nn(tN,"Error",(t,e)=>{const r={name:t.name,message:t.message};return e.allowedErrorProps.forEach(n=>{r[n]=t[n]}),r},(t,e)=>{const r=new Error(t.message);return r.name=t.name,r.stack=t.stack,e.allowedErrorProps.forEach(n=>{r[n]=t[n]}),r}),Nn(JD,"regexp",t=>""+t,t=>{const e=t.slice(1,t.lastIndexOf("/")),r=t.slice(t.lastIndexOf("/")+1);return new RegExp(e,r)}),Nn(yl,"set",t=>[...t.values()],t=>new Set(t)),Nn(vl,"map",t=>[...t.entries()],t=>new Map(t)),Nn(t=>Kb(t)||iN(t),"number",t=>Kb(t)?"NaN":t>0?"Infinity":"-Infinity",Number),Nn(t=>t===0&&1/t===-1/0,"number",()=>"-0",Number),Nn(sN,"URL",t=>t.toString(),t=>new URL(t))];function pg(t,e,r,n){return{isApplicable:t,annotation:e,transform:r,untransform:n}}const S5=pg((t,e)=>b5(t)?!!e.symbolRegistry.getIdentifier(t):!1,(t,e)=>["symbol",e.symbolRegistry.getIdentifier(t)],t=>t.description,(t,e,r)=>{const n=r.symbolRegistry.getValue(e[1]);if(!n)throw new Error("Trying to deserialize unknown symbol");return n}),oN=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,Uint8ClampedArray].reduce((t,e)=>(t[e.name]=e,t),{}),x5=pg(aN,t=>["typed-array",t.constructor.name],t=>[...t],(t,e)=>{const r=oN[e[1]];if(!r)throw new Error("Trying to deserialize unknown typed array");return new r(t)});function I5(t,e){return t!=null&&t.constructor?!!e.classRegistry.getIdentifier(t.constructor):!1}const C5=pg(I5,(t,e)=>["class",e.classRegistry.getIdentifier(t.constructor)],(t,e)=>{const r=e.classRegistry.getAllowedProps(t.constructor);if(!r)return{...t};const n={};return r.forEach(i=>{n[i]=t[i]}),n},(t,e,r)=>{const n=r.classRegistry.getValue(e[1]);if(!n)throw new Error(`Trying to deserialize unknown class '${e[1]}' - check https://github.com/blitz-js/superjson/issues/116#issuecomment-773996564`);return Object.assign(Object.create(n.prototype),t)}),P5=pg((t,e)=>!!e.customTransformerRegistry.findApplicable(t),(t,e)=>["custom",e.customTransformerRegistry.findApplicable(t).name],(t,e)=>e.customTransformerRegistry.findApplicable(t).serialize(t),(t,e,r)=>{const n=r.customTransformerRegistry.findByName(e[1]);if(!n)throw new Error("Trying to deserialize unknown custom value");return n.deserialize(t)}),lN=[C5,S5,P5,x5],qb=(t,e)=>{const r=Wb(lN,i=>i.isApplicable(t,e));if(r)return{value:r.transform(t,e),type:r.annotation(t,e)};const n=Wb(w5,i=>i.isApplicable(t,e));if(n)return{value:n.transform(t,e),type:n.annotation}},E5={};w5.forEach(t=>{E5[t.annotation]=t});const cN=(t,e,r)=>{if(Ki(e))switch(e[0]){case"symbol":return S5.untransform(t,e,r);case"class":return C5.untransform(t,e,r);case"custom":return P5.untransform(t,e,r);case"typed-array":return x5.untransform(t,e,r);default:throw new Error("Unknown transformation: "+e)}else{const n=E5[e];if(!n)throw new Error("Unknown transformation: "+e);return n.untransform(t,r)}},bs=(t,e)=>{if(e>t.size)throw new Error("index out of bounds");const r=t.keys();for(;e>0;)r.next(),e--;return r.next().value};function A5(t){if(Jf(t,"__proto__"))throw new Error("__proto__ is not allowed as a property");if(Jf(t,"prototype"))throw new Error("prototype is not allowed as a property");if(Jf(t,"constructor"))throw new Error("constructor is not allowed as a property")}const dN=(t,e)=>{A5(e);for(let r=0;r<e.length;r++){const n=e[r];if(yl(t))t=bs(t,+n);else if(vl(t)){const i=+n,a=+e[++r]==0?"key":"value",s=bs(t,i);switch(a){case"key":t=s;break;case"value":t=t.get(s);break}}else t=t[n]}return t},w1=(t,e,r)=>{if(A5(e),e.length===0)return r(t);let n=t;for(let a=0;a<e.length-1;a++){const s=e[a];if(Ki(n)){const o=+s;n=n[o]}else if(ml(n))n=n[s];else if(yl(n)){const o=+s;n=bs(n,o)}else if(vl(n)){if(a===e.length-2)break;const l=+s,c=+e[++a]==0?"key":"value",d=bs(n,l);switch(c){case"key":n=d;break;case"value":n=n.get(d);break}}}const i=e[e.length-1];if(Ki(n)?n[+i]=r(n[+i]):ml(n)&&(n[i]=r(n[i])),yl(n)){const a=bs(n,+i),s=r(a);a!==s&&(n.delete(a),n.add(s))}if(vl(n)){const a=+e[e.length-2],s=bs(n,a);switch(+i==0?"key":"value"){case"key":{const l=r(s);n.set(l,n.get(s)),l!==s&&n.delete(s);break}case"value":{n.set(s,r(n.get(s)));break}}}return t};function S1(t,e,r=[]){if(!t)return;if(!Ki(t)){oo(t,(a,s)=>S1(a,e,[...r,...dl(s)]));return}const[n,i]=t;i&&oo(i,(a,s)=>{S1(a,e,[...r,...dl(s)])}),e(n,r)}function uN(t,e,r){return S1(e,(n,i)=>{t=w1(t,i,a=>cN(a,n,r))}),t}function fN(t,e){function r(n,i){const a=dN(t,dl(i));n.map(dl).forEach(s=>{t=w1(t,s,()=>a)})}if(Ki(e)){const[n,i]=e;n.forEach(a=>{t=w1(t,dl(a),()=>t)}),i&&oo(i,r)}else oo(e,r);return t}const hN=(t,e)=>ml(t)||Ki(t)||vl(t)||yl(t)||I5(t,e);function gN(t,e,r){const n=r.get(t);n?n.push(e):r.set(t,[e])}function pN(t,e){const r={};let n;return t.forEach(i=>{if(i.length<=1)return;e||(i=i.map(o=>o.map(String)).sort((o,l)=>o.length-l.length));const[a,...s]=i;a.length===0?n=s.map(pm):r[pm(a)]=s.map(pm)}),n?_1(r)?[n]:[n,r]:_1(r)?void 0:r}const T5=(t,e,r,n,i=[],a=[],s=new Map)=>{const o=rN(t);if(!o){gN(t,i,e);const f=s.get(t);if(f)return n?{transformedValue:null}:f}if(!hN(t,r)){const f=qb(t,r),h=f?{transformedValue:f.value,annotations:[f.type]}:{transformedValue:t};return o||s.set(t,h),h}if(Jf(a,t))return{transformedValue:null};const l=qb(t,r),c=(l==null?void 0:l.value)??t,d=Ki(c)?[]:{},u={};oo(c,(f,h)=>{if(h==="__proto__"||h==="constructor"||h==="prototype")throw new Error(`Detected property ${h}. This is a prototype pollution risk, please remove it from your object.`);const m=T5(f,e,r,n,[...i,h],[...a,t],s);d[h]=m.transformedValue,Ki(m.annotations)?u[h]=m.annotations:ml(m.annotations)&&oo(m.annotations,(v,b)=>{u[_5(h)+"."+b]=v})});const g=_1(u)?{transformedValue:d,annotations:l?[l.type]:void 0}:{transformedValue:d,annotations:l?[l.type,u]:u};return o||s.set(t,g),g};function O5(t){return Object.prototype.toString.call(t).slice(8,-1)}function Yb(t){return O5(t)==="Array"}function mN(t){if(O5(t)!=="Object")return!1;const e=Object.getPrototypeOf(t);return!!e&&e.constructor===Object&&e===Object.prototype}function vN(t,e,r,n,i){const a={}.propertyIsEnumerable.call(n,e)?"enumerable":"nonenumerable";a==="enumerable"&&(t[e]=r),i&&a==="nonenumerable"&&Object.defineProperty(t,e,{value:r,enumerable:!1,writable:!0,configurable:!0})}function x1(t,e={}){if(Yb(t))return t.map(i=>x1(i,e));if(!mN(t))return t;const r=Object.getOwnPropertyNames(t),n=Object.getOwnPropertySymbols(t);return[...r,...n].reduce((i,a)=>{if(Yb(e.props)&&!e.props.includes(a))return i;const s=t[a],o=x1(s,e);return vN(i,a,o,t,e.nonenumerable),i},{})}class vt{constructor({dedupe:e=!1}={}){this.classRegistry=new GD,this.symbolRegistry=new v5(r=>r.description??""),this.customTransformerRegistry=new KD,this.allowedErrorProps=[],this.dedupe=e}serialize(e){const r=new Map,n=T5(e,r,this,this.dedupe),i={json:n.transformedValue};n.annotations&&(i.meta={...i.meta,values:n.annotations});const a=pN(r,this.dedupe);return a&&(i.meta={...i.meta,referentialEqualities:a}),i}deserialize(e){const{json:r,meta:n}=e;let i=x1(r);return n!=null&&n.values&&(i=uN(i,n.values,this)),n!=null&&n.referentialEqualities&&(i=fN(i,n.referentialEqualities)),i}stringify(e){return JSON.stringify(this.serialize(e))}parse(e){return this.deserialize(JSON.parse(e))}registerClass(e,r){this.classRegistry.register(e,r)}registerSymbol(e,r){this.symbolRegistry.register(e,r)}registerCustom(e,r){this.customTransformerRegistry.register({name:r,...e})}allowErrorProps(...e){this.allowedErrorProps.push(...e)}}vt.defaultInstance=new vt;vt.serialize=vt.defaultInstance.serialize.bind(vt.defaultInstance);vt.deserialize=vt.defaultInstance.deserialize.bind(vt.defaultInstance);vt.stringify=vt.defaultInstance.stringify.bind(vt.defaultInstance);vt.parse=vt.defaultInstance.parse.bind(vt.defaultInstance);vt.registerClass=vt.defaultInstance.registerClass.bind(vt.defaultInstance);vt.registerSymbol=vt.defaultInstance.registerSymbol.bind(vt.defaultInstance);vt.registerCustom=vt.defaultInstance.registerCustom.bind(vt.defaultInstance);vt.allowErrorProps=vt.defaultInstance.allowErrorProps.bind(vt.defaultInstance);vt.serialize;vt.deserialize;vt.stringify;vt.parse;vt.registerClass;vt.registerCustom;vt.registerSymbol;vt.allowErrorProps;const yN=_e.number().min(0,"May not be negative.").describe("The expected amount of days from starting a seed to its germination."),bN=_e.number().min(0,"May not be negative.").describe("The expected amount of days from the germination of a seed to when it will be ready for transplant.             For cultivars which are not able to be transplanted, this value is unused."),_N=_e.number().min(0,"May not be negative.").describe("The expected amount of days the germination of a seed to when it will be ready for a harvest."),wN=_e.number().min(0,"May not be negative.").describe("The expected amount of days the first and last harvest of a plant.             For plants which only have one harvest, this value is zero."),SN=_e.object({sowToGerm:yN.optional(),germToTransplant:bN.optional(),germToFirstHarvest:_N.optional(),firstToLastHarvest:wN.optional()}).describe("The annual lifecycle defines the length of the stages of life for annual plants."),xN=N.Record({sowToGerm:N.Optional(N.Number()),germToTransplant:N.Optional(N.Number()),germToFirstHarvest:N.Optional(N.Number()),firstToLastHarvest:N.Optional(N.Number())}),IN=_e.number().describe("The amount of days between the last frost and the beginning of the planting window. 			Positive values indicate the window begins after the last frost date. 			For example, a value of -15 indicates the cultivar may be planted 15 days before the last frost date."),CN=_e.number().describe("The amount of days between the last frost and the end of the planting window. 			Positive values indicate the window begins after the last frost date. 			For example, a value of 15 indicates the cultivar must be planted before 15 days after the last frost date."),PN=_e.number().describe("The amount of days between the first frost and the beginning of the planting window. 			Positive values indicate the window begins after the first frost date. 			For example, a value of -15 indicates the cultivar may be planted 15 days before the first frost date."),EN=_e.number().describe("The amount of days between the first frost and the end of the planting window. 			Positive values indicate the window begins after the first frost date. 			For example, a value of 15 indicates the cultivar must be planted before 15 days after the first frost date."),AN=_e.object({lastFrostWindowOpen:IN.optional(),lastFrostWindowClose:CN.optional(),firstFrostWindowOpen:PN.optional(),firstFrostWindowClose:EN.optional()}).describe("A planting window defines a period of time within an environment that a cultivar should be planted. 		These attributes define an allowed planting window of time relative to the first and last frost dates. 		These planting windows are used for incdicating within the Verdagraph when plants are suggested to be planted."),TN=N.Record({lastFrostWindowOpen:N.Optional(N.Number()),lastFrostWindowClose:N.Optional(N.Number()),firstFrostWindowOpen:N.Optional(N.Number()),firstFrostWindowClose:N.Optional(N.Number())}),ON=_e.boolean().describe("Defines whether a plant may be started as a seed in one location and transplanted to another. 		Some plants, such as carrots, don't tolerate transplants, and so must be started directly."),kN=_e.object({transplantable:ON.optional()}).describe("The origin refers to the method used to create plants."),RN=N.Record({transplantable:N.Optional(N.Boolean())}),k5=N.Record({annualLifeCycle:N.Optional(xN),frostDatePlantingWindows:N.Optional(TN),origin:N.Optional(RN)});_e.object({annualLifeCycle:SN.optional(),frostDatePlantingWindows:AN.optional(),osrigin:kN.optional()});const gte={anon:{match:{"x-triplit-token-type":"anon"}},user:{match:{type:"user",accountId:"$accountId",profileId:"$profileId",username:"$username"}}},MN=N.Collections({profiles:{schema:N.Schema({id:N.Id(),username:N.String(),createdAt:N.Date({default:N.Default.now()})}),permissions:{anon:{read:{filter:[!0]}},user:{read:{filter:[!0]}}}},accounts:{schema:N.Schema({id:N.Id(),profileId:N.String(),passwordHash:N.String(),verifiedEmail:N.String({nullable:!0}),unverifiedEmail:N.Record({address:N.String({nullable:!0,default:null}),token:N.String({nullable:!0,default:null})}),passwordResetToken:N.String({nullable:!0,default:null}),isActive:N.Boolean({default:!0})}),relationships:{profile:N.RelationById("profiles","$profileId")},permissions:{user:{read:{filter:[["id","=","$role.accountId"]]}}}}}),R5=["HIDDEN","UNLISTED","PUBLIC"],M5=["ADMIN","EDITOR","VIEWER"],DN=["CREATED","PENDING","ACCEPTED"],NN=N.Collections({...MN,gardens:{schema:N.Schema({id:N.Id(),name:N.String(),visibility:N.String({enum:[...R5]}),description:N.String({nullable:!0,default:null}),isActive:N.Boolean({default:!0}),creatorId:N.String({nullable:!0}),adminIds:N.Set(N.String()),editorIds:N.Set(N.String(),{default:N.Default.Set.empty()}),viewerIds:N.Set(N.String(),{default:N.Default.Set.empty()}),createdAt:N.Date({default:N.Default.now()})}),relationships:{creator:N.RelationById("profiles","$creatorId"),adminMemberships:N.RelationMany("gardenMemberships",{where:[["userId","in","$adminIds"]]}),editorMemberships:N.RelationMany("gardenMemberships",{where:[["userId","in","$adminIds"]]}),viewerMemberships:N.RelationMany("gardenMemberships",{where:[["userId","in","$adminIds"]]})},permissions:{anon:{read:{filter:[["visibility","!=","HIDDEN"]]}},user:{read:{filter:[We([["visibility","!=","HIDDEN"],["adminIds","has","$role.profileId"],["editorIds","has","$role.profileId"],["viewerIds","has","$role.profileId"]])]},insert:{filter:[["creatorId","=","$role.profileId"]]},update:{filter:[["adminIds","has","$role.profileId"]]}}}},gardenMemberships:{schema:N.Schema({id:N.Id(),gardenId:N.String(),userId:N.String(),role:N.String({enum:[...M5]}),inviterId:N.String({nullable:!0}),status:N.String({enum:[...DN]}),acceptedAt:N.Date({nullable:!0,default:null}),favorite:N.Boolean({default:!1})}),relationships:{garden:N.RelationById("gardens","$gardenId"),user:N.RelationById("profiles","$userId"),inviter:N.RelationById("profiles","$inviterId")},permissions:{anon:{read:{filter:[["garden.visibility","!=","HIDDEN"]]}},user:{read:{filter:[We([["garden.visibility","!=","HIDDEN"],["garden.adminIds","has","$role.profileId"],["garden.editorIds","has","$role.profileId"],["garden.viewerIds","has","$role.profileId"]])]},insert:{filter:[["garden.adminIds","has","$role.profileId"]]},update:{filter:[We([["garden.adminIds","has","$role.profileId"],["userId","=","$role.profileId"]])]},delete:{filter:[We([["garden.adminIds","has","$role.profileId"],["userId","=","$role.accountId"]])]}}}}}),FN=_e.string().trim().min(2,"Must be at least 3 characters.").max(50,"May be at most 50 characters.").regex(/[0-9A-Za-z _-]+/,"Must contain only letters, numbers, spaces, underscores, and hyphens."),$N=_e.string().max(1400,"May be at most 1400 characters."),On={nameSchema:FN,descriptionSchema:$N},Bv=_e.string().trim().min(3,"Must be at least 3 characters.").max(50,"May be at most 50 characters.").regex(/^[a-zA-Z0-9-_]*$/,"Must contain only letters, numbers, hyphens, and underscores.").describe("Unique username to identify yourself in the application. May be changed later."),Qu=_e.string().email("Must be a valid email address.").describe("Must be a valid email address."),ka=_e.string().min(6,"Must be at least 6 characters.").max(255,"Must be at most 255 characters.").describe("Must be between 6 and 255 characters long."),LN={usernameSchema:Bv};_e.object({email:Qu,password:_e.string()});_e.object({email:Qu,password1:ka,password2:ka,username:Bv}).refine(t=>t.password1==t.password2,{message:"Passwords must match",path:["password2"]});_e.object({newEmail:Qu.optional(),newPassword1:ka.optional(),newPassword2:ka.optional(),newUsername:Bv.optional(),password:ka}).refine(t=>t.newPassword1==t.newPassword2,{message:"Passwords must match",path:["newPassword2"]});_e.object({email:Qu});_e.object({token:_e.string()});_e.object({email:Qu});_e.object({userId:_e.string().nanoid(),token:_e.string(),password1:ka,password2:ka}).refine(t=>t.password1==t.password2,{message:"Passwords must match",path:["password2"]});const BN=_e.string().trim().toLowerCase().min(4,"Must be at least 4 characters.").max(21,"May be at most 21 characters.").regex(/[0-9A-Za-z-]+/,"Must contain only alphanumeric characters and hyphens.").describe("Unique shorthand name for the garden used in URLs."),VN=On.nameSchema.describe("Name of the garden."),jN=On.descriptionSchema.describe("Optional description."),zN=_e.enum(R5),UN=_e.enum(M5),xs=_e.array(LN.usernameSchema).max(10,"A maximum of 10 users can be invited at once.");_e.object({id:BN,name:VN,description:jN.default(""),visibility:zN.default("HIDDEN"),adminInvites:xs.describe("A list of usernames to invite as admins. A maximum of 10 users can be invited at once.").default([]),editorInvites:xs.describe("A list of usernames to invite as editors. A maximum of 10 users can be invited at once.").default([]),viewerInvites:xs.describe("A list of usernames to invite as viewers. A maximum of 10 users can be invited at once.").default([])});_e.object({gardenId:_e.string(),adminInvites:xs.describe("A list of usernames to invite as admins.").default([]),editorInvites:xs.describe("A list of usernames to invite as editors.").default([]),viewerInvites:xs.describe("A list of usernames to invite as viewers.").default([])});_e.object({gardenId:_e.string()});_e.object({gardenId:_e.string()});_e.object({gardenId:_e.string(),profileId:_e.string()});_e.object({gardenId:_e.string(),profileId:_e.string(),newRole:UN});const GN=(t,e,r)=>{switch(r){case"ADMIN":return!!t.adminIds.has(e);case"EDITOR":return!!(t.adminIds.has(e)||t.editorIds.has(e));case"VIEWER":return!!(t.adminIds.has(e)||t.editorIds.has(e)||t.viewerIds.has(e));default:return!1}},D5=["RECTANGLE","POLYGON","ELLIPSE","LINES"],HN=N.Collections({...NN,coordinates:{schema:N.Schema({id:N.Id(),gardenId:N.String(),x:N.Number(),y:N.Number(),z:N.Number({nullable:!0,default:0}),createdAt:N.Date({default:N.Default.now()})}),relationships:{garden:N.RelationById("gardens","$gardenId")},permissions:{anon:{read:{filter:[["garden.visibility","!=","HIDDEN"]]}},user:{read:{filter:[We([["garden.visibility","!=","HIDDEN"],["garden.adminIds","has","$role.profileId"],["garden.editorIds","has","$role.profileId"],["garden.viewerIds","has","$role.profileId"]])]},insert:{filter:[We([["garden.adminIds","has","$role.profileId"],["garden.editorIds","has","$role.profileId"]])]},update:{filter:[We([["garden.adminIds","has","$role.profileId"],["garden.editorIds","has","$role.profileId"]])]},delete:{filter:[We([["garden.adminIds","has","$role.profileId"],["garden.editorIds","has","$role.profileId"]])]}}}},geometries:{schema:N.Schema({id:N.Id(),gardenId:N.String(),type:N.String({enum:[...D5]}),date:N.Date(),scaleFactor:N.Number({default:1}),rotation:N.Number({default:0}),rectangleLength:N.Number({default:1}),rectangleWidth:N.Number({default:1}),polygonNumSides:N.Number({default:3}),polygonRadius:N.Number({default:1}),ellipseLength:N.Number({default:1}),ellipseWidth:N.Number({default:1}),linesCoordinateIds:N.Set(N.String(),{default:N.Default.Set.empty()}),linesClosed:N.Boolean({default:!0})}),relationships:{garden:N.RelationById("gardens","$gardenId"),linesCoordinates:N.RelationMany("coordinates",{where:[["id","in","$linesCoordinateIds"]],order:[["createdAt","ASC"]]})},permissions:{anon:{read:{filter:[["garden.visibility","!=","HIDDEN"]]}},user:{read:{filter:[We([["garden.visibility","!=","HIDDEN"],["garden.adminIds","has","$role.profileId"],["garden.editorIds","has","$role.profileId"],["garden.viewerIds","has","$role.profileId"]])]},insert:{filter:[We([["garden.adminIds","has","$role.profileId"],["garden.editorIds","has","$role.profileId"]])]},update:{filter:[We([["garden.adminIds","has","$role.profileId"],["garden.editorIds","has","$role.profileId"]])]},delete:{filter:[We([["garden.adminIds","has","$role.profileId"],["garden.editorIds","has","$role.profileId"]])]}}}},geometryHistories:{schema:N.Schema({id:N.Id(),gardenId:N.String(),geometryIds:N.Set(N.String())}),relationships:{garden:N.RelationById("gardens","$gardenId"),geometries:N.RelationMany("geometries",{where:[["id","in","$geometryIds"]],order:[["date","ASC"]]})},permissions:{anon:{read:{filter:[["garden.visibility","!=","HIDDEN"]]}},user:{read:{filter:[We([["garden.visibility","!=","HIDDEN"],["garden.adminIds","has","$role.profileId"],["garden.editorIds","has","$role.profileId"],["garden.viewerIds","has","$role.profileId"]])]},insert:{filter:[We([["garden.adminIds","has","$role.profileId"],["garden.editorIds","has","$role.profileId"]])]},update:{filter:[We([["garden.adminIds","has","$role.profileId"],["garden.editorIds","has","$role.profileId"]])]},delete:{filter:[We([["garden.adminIds","has","$role.profileId"],["garden.editorIds","has","$role.profileId"]])]}}}},locations:{schema:N.Schema({id:N.Id(),gardenId:N.String(),workspaceId:N.String(),x:N.Number(),y:N.Number(),z:N.Number({nullable:!0,default:0}),date:N.Date()}),relationships:{garden:N.RelationById("gardens","$gardenId"),workspace:N.RelationById("workspaces","$workspaceId")},permissions:{anon:{read:{filter:[["garden.visibility","!=","HIDDEN"]]}},user:{read:{filter:[We([["garden.visibility","!=","HIDDEN"],["garden.adminIds","has","$role.profileId"],["garden.editorIds","has","$role.profileId"],["garden.viewerIds","has","$role.profileId"]])]},insert:{filter:[We([["garden.adminIds","has","$role.profileId"],["garden.editorIds","has","$role.profileId"]])]},update:{filter:[We([["garden.adminIds","has","$role.profileId"],["garden.editorIds","has","$role.profileId"]])]},delete:{filter:[We([["garden.adminIds","has","$role.profileId"],["garden.editorIds","has","$role.profileId"]])]}}}},locationHistories:{schema:N.Schema({id:N.Id(),gardenId:N.String(),locationIds:N.Set(N.String()),workspaceIds:N.Set(N.String())}),relationships:{garden:N.RelationById("gardens","$gardenId"),locations:N.RelationMany("locations",{where:[["id","in","$locationIds"]],order:[["date","ASC"]]})},permissions:{anon:{read:{filter:[["garden.visibility","!=","HIDDEN"]]}},user:{read:{filter:[We([["garden.visibility","!=","HIDDEN"],["garden.adminIds","has","$role.profileId"],["garden.editorIds","has","$role.profileId"],["garden.viewerIds","has","$role.profileId"]])]},insert:{filter:[We([["garden.adminIds","has","$role.profileId"],["garden.editorIds","has","$role.profileId"]])]},update:{filter:[We([["garden.adminIds","has","$role.profileId"],["garden.editorIds","has","$role.profileId"]])]},delete:{filter:[We([["garden.adminIds","has","$role.profileId"],["garden.editorIds","has","$role.profileId"]])]}}}},plantingAreas:{schema:N.Schema({id:N.Id(),gardenId:N.String(),name:N.String(),geometryId:N.String(),locationHistoryId:N.String(),depth:N.Number({default:0}),description:N.String({default:""})}),relationships:{garden:N.RelationById("gardens","$gardenId"),geometry:N.RelationById("geometries","$geometryId"),locationHistory:N.RelationById("locationHistories","$locationHistoryId")},permissions:{anon:{read:{filter:[["garden.visibility","!=","HIDDEN"]]}},user:{read:{filter:[We([["garden.visibility","!=","HIDDEN"],["garden.adminIds","has","$role.profileId"],["garden.editorIds","has","$role.profileId"],["garden.viewerIds","has","$role.profileId"]])]},insert:{filter:[["garden.adminIds","has","$role.profileId"]]},update:{filter:[["garden.adminIds","has","$role.profileId"]]},delete:{filter:[["garden.adminIds","has","$role.profileId"]]}}}},workspaces:{schema:N.Schema({id:N.Id(),gardenId:N.String(),name:N.String(),slug:N.String(),description:N.String({default:""})}),relationships:{garden:N.RelationById("gardens","$gardenId")},permissions:{anon:{read:{filter:[["garden.visibility","!=","HIDDEN"]]}},user:{read:{filter:[We([["garden.visibility","!=","HIDDEN"],["garden.adminIds","has","$role.profileId"],["garden.editorIds","has","$role.profileId"],["garden.viewerIds","has","$role.profileId"]])]},insert:{filter:[["garden.adminIds","has","$role.profileId"]]},update:{filter:[["garden.adminIds","has","$role.profileId"]]},delete:{filter:[["garden.adminIds","has","$role.profileId"]]}}}}}),WN=_e.number().describe("The minimum temperature that is expected to occur within a year in the environment."),KN=_e.number().describe("The maxmium temperature that is expected to occur within a year in the environment."),qN=_e.object({minimum:WN.optional(),maximum:KN.optional()}).describe("Defines the expected range of temperatures over a year."),YN=N.Record({minimum:N.Optional(N.Number()),maximum:N.Optional(N.Number())}),XN=_e.date().describe("The date within the environment when the last frost of the year is expected to occur."),QN=_e.date().describe("The date within the environment when the first frost of the year is expected to occur."),ZN=_e.object({lastFrostDate:XN.optional(),firstFrostDate:QN.optional()}).describe("Defines when the first and last frost are expected to occur within a year."),JN=N.Record({lastFrostDate:N.Optional(N.Date()),firstFrostDate:N.Optional(N.Date())}),eF=N.Record({frostDates:N.Optional(JN),annualTemperature:N.Optional(YN)});_e.object({frostDates:ZN.optional(),annualTemperature:qN.optional()});const N5=["GARDEN","WORKSPACE","PLANTING_AREA","INDEPENDENT"],F5=N.Collections({...HN,environments:{schema:N.Schema({id:N.Id(),name:N.String(),description:N.String({default:""}),parentType:N.String({enum:[...N5],default:"GARDEN"}),gardenId:N.String(),workspaceIds:N.Optional(N.Set(N.String())),plantingAreaIds:N.Optional(N.Set(N.String())),geometryHistoryId:N.Optional(N.String()),locationHistoryId:N.Optional(N.String()),inherit:N.Boolean({default:!0}),attributes:eF}),relationships:{garden:N.RelationById("gardens","$gardenId"),workspaces:N.RelationMany("workspaces",{where:[["id","in","$workspaceIds"]]}),plantingAreas:N.RelationMany("plantingAreas",{where:[["id","in","$plantingAreaIds"]]}),geometriHistory:N.RelationById("geometryHistories","$geometryHistoryId"),locationHistory:N.RelationById("locationHistories","$locationHistoryId")},permissions:{anon:{read:{filter:[["garden.visibility","!=","HIDDEN"]]}},user:{read:{filter:[We([["garden.visibility","!=","HIDDEN"],["garden.adminIds","has","$role.profileId"],["garden.editorIds","has","$role.profileId"],["garden.viewerIds","has","$role.profileId"]])]},insert:{filter:[We([["garden.adminIds","has","$role.profileId"],["garden.editorIds","has","$role.profileId"]])]},update:{filter:[We([["garden.adminIds","has","$role.profileId"],["garden.editorIds","has","$role.profileId"]])]},delete:{filter:[We([["garden.adminIds","has","$role.profileId"],["garden.editorIds","has","$role.profileId"]])]}}}}}),tF=["DIRECT_SEED","SEED_TO_TRANSPLANT","SEEDLING_TO_TRANSPLANT"],rF=["COMPOST","LOW","MEDIUM","HIGH","PERFECT"],pte=N.Collections({...F5,harvests:{schema:N.Schema({id:N.Id(),gardenId:N.String(),date:N.Date(),mass:N.Optional(N.Number()),units:N.Optional(N.Number()),quality:N.Optional(N.String({enum:[...rF]})),description:N.String({default:""})}),relationships:{garden:N.RelationById("gardens","$gardenId")},permissions:{anon:{read:{filter:[["garden.visibility","!=","HIDDEN"]]}},user:{read:{filter:[We([["garden.visibility","!=","HIDDEN"],["garden.adminIds","has","$role.profileId"],["garden.editorIds","has","$role.profileId"],["garden.viewerIds","has","$role.profileId"]])]},insert:{filter:[We([["garden.adminIds","has","$role.profileId"],["garden.editorIds","has","$role.profileId"]])]},update:{filter:[We([["garden.adminIds","has","$role.profileId"],["garden.editorIds","has","$role.profileId"]])]},delete:{filter:[We([["garden.adminIds","has","$role.profileId"],["garden.editorIds","has","$role.profileId"]])]}}}},lifespans:{schema:N.Schema({id:N.Id(),gardenId:N.String(),origin:N.String({enum:[...tF]}),geometryHistoryId:N.Optional(N.String()),locationHistoryId:N.Optional(N.String()),dates:N.Record({seedDate:N.Optional(N.Date()),germDate:N.Optional(N.Date()),expiryDate:N.Optional(N.Date()),dormancyDates:N.Optional(N.Set(N.Date())),growthDates:N.Optional(N.Set(N.Date()))}),harvestIds:N.Set(N.String())}),relationships:{garden:N.RelationById("gardens","$gardenId"),geometryHistory:N.RelationById("geometryHistories","$geometryHistoryId"),locationHistory:N.RelationById("locationHistories","$locationHistoryId"),harvests:N.RelationMany("harvests",{where:[["id","in","$harvestIds"]]})},permissions:{anon:{read:{filter:[["garden.visibility","!=","HIDDEN"]]}},user:{read:{filter:[We([["garden.visibility","!=","HIDDEN"],["garden.adminIds","has","$role.profileId"],["garden.editorIds","has","$role.profileId"],["garden.viewerIds","has","$role.profileId"]])]},insert:{filter:[We([["garden.adminIds","has","$role.profileId"],["garden.editorIds","has","$role.profileId"]])]},update:{filter:[We([["garden.adminIds","has","$role.profileId"],["garden.editorIds","has","$role.profileId"]])]},delete:{filter:[We([["garden.adminIds","has","$role.profileId"],["garden.editorIds","has","$role.profileId"]])]}}}},plants:{schema:N.Schema({id:N.Id(),gardenId:N.String(),cultivarName:N.String(),cultivarAttributes:k5,expectedLifespanId:N.String(),recordedLifespanId:N.String(),aggregate:N.Boolean({default:!1})}),relationships:{garden:N.RelationById("gardens","$gardenId"),expectedLifespan:N.RelationById("lifespans","$expectedLifespanId"),recordedLifespan:N.RelationById("lifespans","$recordedLifespanId")},permissions:{anon:{read:{filter:[["garden.visibility","!=","HIDDEN"]]}},user:{read:{filter:[We([["garden.visibility","!=","HIDDEN"],["garden.adminIds","has","$role.profileId"],["garden.editorIds","has","$role.profileId"],["garden.viewerIds","has","$role.profileId"]])]},insert:{filter:[We([["garden.adminIds","has","$role.profileId"],["garden.editorIds","has","$role.profileId"]])]},update:{filter:[We([["garden.adminIds","has","$role.profileId"],["garden.editorIds","has","$role.profileId"]])]},delete:{filter:[We([["garden.adminIds","has","$role.profileId"],["garden.editorIds","has","$role.profileId"]])]}}}},plantGroups:{schema:N.Schema({id:N.Id(),gardenId:N.String(),name:N.String(),plantIds:N.Set(N.String()),description:N.String({default:""})}),relationships:{garden:N.RelationById("gardens","$gardenId"),plants:N.RelationMany("plants",{where:[["id","in","$plantIds"]]})},permissions:{anon:{read:{filter:[["garden.visibility","!=","HIDDEN"]]}},user:{read:{filter:[We([["garden.visibility","!=","HIDDEN"],["garden.adminIds","has","$role.profileId"],["garden.editorIds","has","$role.profileId"],["garden.viewerIds","has","$role.profileId"]])]},insert:{filter:[We([["garden.adminIds","has","$role.profileId"],["garden.editorIds","has","$role.profileId"]])]},update:{filter:[We([["garden.adminIds","has","$role.profileId"],["garden.editorIds","has","$role.profileId"]])]},delete:{filter:[We([["garden.adminIds","has","$role.profileId"],["garden.editorIds","has","$role.profileId"]])]}}}}}),$5=On.nameSchema.describe("Name of the workspace. Must be unique within a garden."),L5=On.descriptionSchema.describe("Optional description."),Vv=On.nameSchema.describe("The name of the planting area."),jv=On.descriptionSchema.describe("Optional description."),zv=_e.number().min(0,"May not be negative").max(1e3,"May be at most 1000m.").describe("The depth of the planting area."),nF=_e.number().min(-1e6,"Limited to 1 000 000 meters.").max(1e6,"Limited to 1 000 000 meters.").describe("The horizontal X component of the coordinate."),iF=_e.number().min(-1e6,"Limited to 1 000 000 meters.").max(1e6,"Limited to 1 000 000 meters.").describe("The vertical Y component of the coordinate."),Zu=_e.object({x:nF,y:iF}).describe("A position relative to the origin of a workspace or a geometry."),mg=_e.date().describe("The date at which the location applies."),Uv=_e.enum(D5).describe("Describes the type of geometry. Each type has a unique set of attributes associated with it."),Gv=_e.date().describe("The date at which the geometry applies to the object."),Hv=_e.number().min(.01,"Must be at least 1%.").max(100,"May be at most 10000%").describe("Factor used to scale the geometry up or down. Must be within 1 and 1000 percent."),Wv=_e.number().min(-360,"Must be at least negative 360 degrees.").max(360,"May be at most 360 degrees.").describe("The rotation of the geometry in degrees. Must be between 0 and 360 degrees."),Kv=_e.number().min(.01,"May not be negative or zero.").max(1e3,"May be at most 1000m").describe("The horizontal, or x-axis length of the rectangle."),qv=_e.number().min(.01,"May not be negative or zero.").max(1e3,"May be at most 1000m").describe("The vertical, or y-axis width of the rectangle."),Yv=_e.number().min(3,"Must have at least 3 sides.").max(20,"May have at most 20 sides.").describe("The amount of sides the polygon has."),Xv=_e.number().min(.01,"May not be negative or zero.").max(1e3,"May be at most 1000m").describe("The distance from the center to any vertex of the polygon."),Qv=_e.number().min(.01,"May not be negative or zero.").max(1e3,"May be at most 1000m.").describe("The horizontal, or x-axis diameter of the ellipse."),Zv=_e.number().min(.01,"May not be negative or zero.").max(1e3,"May be at most 1000m").describe("The vertical, or y-axis diameter of the ellipse. Must be between 0 and 1000 meters."),B5=_e.array(Zu).min(3,"Must have at least 3 points.").describe("A list of coordinates relative to the position of the geometry which define an irregular polygonal."),Jv=_e.boolean().describe("If true, the line segments form a closed shape."),Ze={plantingAreaNameSchema:Vv,plantingAreaDescriptionSchema:jv,plantingAreaDepthSchema:zv,coordinateSchema:Zu,locationDateSchema:mg,geometryTypeSchema:Uv,geometryDateSchema:Gv,geometryScaleFactorSchema:Hv,geometryRotationSchema:Wv,geometryRectangleLengthSchema:Kv,geometryRectangleWidthSchema:qv,geometryPolygonNumSidesSchema:Yv,geometryPolygonRadiusSchema:Xv,geometryEllipseLengthSchema:Qv,geometryEllipseWidthSchema:Zv,geometryLinesClosedSchema:Jv},aF=_e.object({gardenId:_e.string(),workspaceId:_e.string(),coordinate:Zu,date:mg});_e.object({id:_e.string(),workspaceId:_e.string(),coordinate:Zu,date:mg});_e.object({coordinate:Zu.optional(),date:mg.optional(),workspaceId:_e.string().optional(),delete:_e.boolean().optional()});const sF=_e.object({type:Uv.default("RECTANGLE"),date:Gv,scaleFactor:Hv.default(1),rotation:Wv.default(0),rectangleLength:Kv.default(1),rectangleWidth:qv.default(1),polygonNumSides:Yv.default(3),polygonRadius:Xv.default(1),ellipseLength:Qv.default(1),ellipseWidth:Zv.default(1),linesCoordinates:B5.default([{x:-1,y:0},{x:0,y:1},{x:1,y:0}]),linesClosed:Jv.default(!0)});_e.object({type:Uv.optional(),date:Gv.optional(),scaleFactor:Hv.optional(),rotation:Wv.optional(),rectangleLength:Kv.optional(),rectangleWidth:qv.optional(),polygonNumSides:Yv.optional(),polygonRadius:Xv.optional(),ellipseLength:Qv.optional(),ellipseWidth:Zv.optional(),linesCoordinates:B5.optional(),linesClosed:Jv.optional(),delete:_e.boolean().optional()});_e.object({gardenId:_e.string(),name:$5,description:L5.optional()});_e.object({name:$5.optional(),description:L5.optional()});const Xb=_e.object({gardenId:_e.string(),workspaceId:_e.string(),name:Vv,description:jv.default(""),location:aF,geometry:sF,depth:zv.default(0)});_e.object({name:Vv.optional(),description:jv.optional(),depth:zv.optional()});function oF(t,e){return t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()&&t.getDate()===e.getDate()}function lF(t,e){if(t.length===0)return null;const r=e.getTime(),n=[...t].sort((i,a)=>i.date.getTime()-a.date.getTime());if(r<n[0].date.getTime())return null;if(r>=n[n.length-1].date.getTime())return n[n.length-1];for(let i=0;i<n.length-1;i++){const a=n[i].date.getTime(),s=n[i+1].date.getTime();if(r>=a&&r<s)return n[i]}return null}function V5(t,e){return[...t].find(r=>oF(r.date,e))||null}function Qb(t){switch(t.type){case"RECTANGLE":return t.rectangleWidth/2*t.scaleFactor;case"POLYGON":return t.polygonRadius*t.scaleFactor;case"ELLIPSE":return t.ellipseWidth/2*t.scaleFactor;case"LINES":return Math.max(...t.linesCoordinates.map(e=>e.y))*t.scaleFactor}}class ur extends Error{constructor(r,n){var e=(...Vte)=>(super(...Vte),z(this,"defaultMessage","A failure has occurred."),z(this,"details",{}),this);r?e(r):(e(""),this.message=this.defaultMessage),n&&(n.fieldErrors&&(this.details.fieldErrors=n.fieldErrors),n.nonFieldErrors&&(this.details.nonFieldErrors=n.nonFieldErrors),n.nonFormErrors&&(this.details.nonFormErrors=n.nonFormErrors))}}async function cF(t,e,r){const n=[];if(e.linesCoordinates&&e.type==="LINES")for(const a of e.linesCoordinates){const s=await r.insert("coordinates",{gardenId:t,x:a.x,y:a.y});n.push(s.id)}const i={gardenId:t,type:e.type,date:e.date,scaleFactor:e.scaleFactor,rotation:e.rotation,rectangleLength:e.rectangleLength,rectangleWidth:e.rectangleWidth,polygonNumSides:e.polygonNumSides,polygonRadius:e.polygonRadius,ellipseLength:e.ellipseLength,ellipseWidth:e.ellipseWidth,linesCoordinateIds:new Set(n),linesClosed:e.linesClosed};return await r.insert("geometries",i)}async function j5(t,e,r){const n=await r.triplit.fetchOne(r.triplit.query("geometries").Id(t));if(!n)throw new ur("Geometry does not exist.",{nonFormErrors:["Failed to update object geometry."]});if(e.delete){await r.triplit.delete("geometries",t);return}await r.triplit.transact(async i=>{let a=[...n.linesCoordinateIds];if(e.linesCoordinates){const s=e.linesCoordinates.length,o=Math.min(a.length,s);for(let l=0;l<o;l++){const c=a[l];await i.update("coordinates",c,d=>{e.linesCoordinates&&(d.x=e.linesCoordinates[l].x,d.y=e.linesCoordinates[l].y)})}if(a.length>s){const l=a.slice(s);for(const c of l)await i.delete("coordinates",c);a=a.slice(0,s)}if(s>a.length){const l=e.linesCoordinates.slice(a.length);for(const c of l){const d=await i.insert("coordinates",{gardenId:n.gardenId,x:c.x,y:c.y});a.push(d.id)}}}await i.update("geometries",n.id,s=>{e.type&&(s.type=e.type),e.date&&(s.date=e.date),e.scaleFactor&&(s.scaleFactor=e.scaleFactor),e.rotation&&(s.rotation=e.rotation),e.rectangleLength&&(s.rectangleLength=e.rectangleLength),e.rectangleWidth&&(s.rectangleWidth=e.rectangleWidth),e.polygonNumSides&&(s.polygonNumSides=e.polygonNumSides),e.polygonRadius&&(s.polygonRadius=e.polygonRadius),e.ellipseLength&&(s.ellipseLength=e.ellipseLength),e.ellipseWidth&&(s.ellipseWidth=e.ellipseWidth),e.linesCoordinates&&(s.linesCoordinateIds=new Set(a)),e.linesClosed&&(s.linesClosed=e.linesClosed)})})}async function dF(t,e){const r=await e.insert("locations",{gardenId:t.gardenId,workspaceId:t.workspaceId,x:t.coordinate.x,y:t.coordinate.y,date:t.date});return await e.insert("locationHistories",{gardenId:t.gardenId,locationIds:new Set([r.id]),workspaceIds:new Set([t.workspaceId])})}async function uF(t,e,r){if(!await r.triplit.fetchOne(r.triplit.query("locations").Id(t)))throw new ur("Location does not exist.",{nonFormErrors:["Failed to update object location."]});if(e.delete){await r.triplit.delete("locations",t);return}await r.triplit.update("locations",t,i=>{e.coordinate&&(i.x=e.coordinate.x,i.y=e.coordinate.y),e.date&&(i.date=e.date),e.workspaceId&&(i.workspaceId=e.workspaceId)})}async function fF(t,e){const r=await e.triplit.fetchOne(e.triplit.query("locationHistories").Id(t.id).Include("locations"));if(!r)throw new ur("Location history does not exist.",{nonFormErrors:["Failed to update object location."]});const n=V5(r.locations,t.date);n?await e.triplit.update("locations",n.id,i=>{i.x=t.coordinate.x,i.y=t.coordinate.y}):await e.triplit.transact(async i=>{const a=await i.insert("locations",{gardenId:r.gardenId,workspaceId:t.workspaceId,x:t.coordinate.x,y:t.coordinate.y,date:t.date});await i.update("locationHistories",r.id,s=>{s.locationIds.add(a.id),s.workspaceIds.has(t.workspaceId)||s.workspaceIds.add(t.workspaceId)})})}async function hF(t,e,r){const n=await r.triplit.fetchOne(r.triplit.query("locationHistories").Id(t).Include("locations"));if(!n)throw new ur("Location history does not exist.",{nonFormErrors:["Failed to update object location."]});const i=V5(n.locations,e.date)||n.locations[n.locations.length-1]||{x:0,y:0};await r.triplit.transact(async a=>{const s=await a.insert("locations",{gardenId:n.gardenId,workspaceId:i.workspaceId,x:i.x,y:i.y,date:e.date});await a.update("locationHistories",t,o=>{o.locationIds.add(s.id)})})}async function gF(t,e){const{garden:r}=await e.requireRole(t.gardenId,"PlantingAreaCreate");if(await e.triplit.fetchOne(e.triplit.query("workspaces").Id(t.workspaceId))==null)throw new ur(`Failed to retrieve workspace ${t.workspaceId}`,{nonFormErrors:["Failed to retrieve workspace."]});await e.triplit.transact(async i=>{const a=await cF(t.gardenId,t.geometry,i),s=await dF(t.location,i);await i.insert("plantingAreas",{gardenId:r.id,name:t.name,description:t.description||"",geometryId:a.id,locationHistoryId:s.id,depth:t.depth})})}async function pF(t,e,r){if(await r.triplit.fetchOne(r.triplit.query("plantingAreas").Id(t))==null)throw new ur(`Failed to retrieve planting area ${t}`,{nonFormErrors:["Failed to retrieve planting area."]});await r.triplit.update("plantingAreas",t,i=>{e.name&&(i.name=e.name),e.description&&(i.description=e.description),e.depth&&(i.depth=e.depth)})}const z5=["HIDDEN","UNLISTED","PUBLIC"];N.Collections({...F5,cultivarCollections:{schema:N.Schema({id:N.Id(),name:N.String(),slug:N.String(),visibility:N.String({enum:[...z5]}),userId:N.String(),gardenId:N.String(),description:N.String({default:""}),parentId:N.String({nullable:!0,default:null})}),relationships:{user:N.RelationById("profiles","userId"),garden:N.RelationById("gardens","$gardenId"),parent:N.RelationById("cultivarCollections","$parentId")},permissions:{anon:{read:{filter:[["visibility","!=","HIDDEN"]]}},user:{read:{filter:[We([["visibility","!=","HIDDEN"],["userId","=","$role.profileId"],["garden.adminIds","has","$role.profileId"],["garden.editorIds","has","$role.profileId"],["garden.viewerIds","has","$role.profileId"]])]},insert:{filter:[We([["userId","=","$role.profileId"],["garden.adminIds","has","$role.profileId"]])]},update:{filter:[We([["userId","=","$role.profileId"],["garden.adminIds","has","$role.profileId"]])]},delete:{filter:[We([["userId","=","$role.profileId"],["garden.adminIds","has","$role.profileId"]])]}}}},cultivars:{schema:N.Schema({id:N.Id(),collectionId:N.String(),names:N.Set(N.String()),abbreviation:N.String(),scientificName:N.Optional(N.String()),description:N.String({default:""}),parentId:N.String({nullable:!0,default:null}),attributes:k5}),relationships:{collection:N.RelationById("cultivarCollections","$collectionId"),parent:N.RelationById("cultivars","$parentId")},permissions:{anon:{read:{filter:[["collection.visibility","!=","HIDDEN"]]}},user:{read:{filter:[We([["collection.visibility","!=","HIDDEN"],["collection.userId","=","$role.profileId"],["collection.garden.adminIds","has","$role.profileId"],["collection.garden.editorIds","has","$role.profileId"],["collection.garden.viewerIds","has","$role.profileId"]])]},insert:{filter:[We([["collection.userId","=","$role.profileId"],["collection.garden.adminIds","has","$role.profileId"]])]},update:{filter:[We([["collection.userId","=","$role.profileId"],["collection.garden.adminIds","has","$role.profileId"]])]},delete:{filter:[We([["collection.userId","=","$role.profileId"],["collection.garden.adminIds","has","$role.profileId"]])]}}}}});const mF=_e.string().trim().min(3,"Must be at least 3 characters.").max(30,"May be at most 30 characters.").regex(/^[0-9A-Za-z _-]+$/,"Must contain only letters, numbers, spaces, hyphens, and underscores.").describe("A common name of this plant species."),vF=_e.array(mF).min(1,"Must contain at least 1 name.").max(10,"May contain at most 10 names.").describe("A set of common names associated with this plant species."),yF=_e.string().trim().min(1,"Must be at least 1 character.").max(6,"May be at most 6 characters.").regex(/^[0-9A-Za-z]+$/,"Must contain only alphanumeric characters.").describe("A very short abbreviation for this plant species."),bF=_e.string().trim().max(60,"May be at most 60 characters.").describe("The scientific name of this plant species."),_F=On.descriptionSchema.describe("Optional description."),wF=On.descriptionSchema.describe("The name of the collection."),SF=On.descriptionSchema.describe("Optional description."),xF=_e.enum(z5).describe("Public collections may be viewed by anyone and are publicly searchable.             Unlisted collections may be viewed by anyone with the link.             Private collections may only be accessed by the creator or members of the associated garden."),IF=_e.string().trim().max(150,"Must be at most 150 characters.").regex(/^[0-9A-Za-z ]+$/,"Must contain only alphanumeric characters and spaces.").describe("A metadata tag."),CF=_e.array(IF).max(150,"Must contain at most 150 tags.").describe("A set of metadata tags.");_e.object({collectionId:_e.string(),names:vF,abbreviation:yF,scientificName:bF.optional(),description:_F.default(""),parentId:_e.string().optional()});_e.object({name:wF,visibility:xF.default("HIDDEN"),description:SF.default(""),tags:CF.default([]),parentId:_e.string().optional(),gardenId:_e.string().optional(),userId:_e.string().optional()}).refine(t=>t.gardenId&&t.parentId,{message:"A cultivar collection must be connected to a garden or a user..",path:["gardenId","userId"]});const PF=On.nameSchema.describe("Name of the environment. Must be unique."),EF=On.descriptionSchema.describe("Optional description."),AF=_e.enum(N5);_e.object({gardenId:_e.string(),parendId:_e.string(),parentType:AF.default("GARDEN"),name:PF,description:EF.default("")});function TF(t,e){const r=e.safeParse(t);if(!r.success)return r.error.issues.map(n=>n.message)}const e0="TriplitController";function mte(t,e,r=!1){const n=t.query("gardens").Id("$query.id");async function i(){const s=await e(t);if(s)return s;throw new ur("Authentication failed.",{nonFormErrors:["Authentication failed. A login is required."]})}async function a(s,o){const l=await i(),c=await t.fetchOne(n.Vars({id:s}));if(c==null)throw new ur("Garden key does not exist.",{nonFormErrors:["Garden key does not exist."]});const d=U5(o);if(!GN(c,l.profile.id,d))throw new ur(`Requires ${d} access.`,{nonFormErrors:[`This action requires the ${d} role.`]});return{client:l,garden:c}}return{triplit:t,getClient:e,disablePermissions:r,getClientOrError:i,requireRole:a}}const OF=Object.freeze({MembershipCreate:"ADMIN",MembershipRevoke:"ADMIN",MembershipRoleChange:"ADMIN",WorkspaceCreate:"ADMIN",WorkspaceUpdate:"ADMIN",WorkspaceEdit:"EDITOR",PlantingAreaCreate:"EDITOR"});function U5(t){return OF[t]}function kF(t){if(t.nonFormErrors)for(const e of t.nonFormErrors)tw.error(e)}function ma(t,e,r,n){const i=Array.isArray(e)?e:[e];return i.forEach(a=>t.addEventListener(a,r,n)),()=>{i.forEach(a=>t.removeEventListener(a,r,n))}}function Qr(t,e){le(e,!0);let r=T(e,"ref",15),n=Ce(e,["$$slots","$$events","$$legacy","href","type","children","ref"]);var i=F(),a=P(i);M6(a,()=>e.href?"a":"button",!1,(s,o)=>{vo(s,u=>r(u),()=>r());let l;Ee(()=>l=Fe(s,l,{type:e.href?void 0:e.type,href:e.href,tabindex:"0",...n}));var c=F(),d=P(c);ge(d,()=>e.children??Ve),w(o,c)}),w(t,i),ce()}function mm(t,e){return t-e*Math.floor(t/e)}const G5=1721426;function Cf(t,e,r,n){e=t0(t,e);let i=e-1,a=-2;return r<=2?a=0:eh(e)&&(a=-1),G5-1+365*i+Math.floor(i/4)-Math.floor(i/100)+Math.floor(i/400)+Math.floor((367*r-362)/12+a+n)}function eh(t){return t%4===0&&(t%100!==0||t%400===0)}function t0(t,e){return t==="BC"?1-e:e}function RF(t){let e="AD";return t<=0&&(e="BC",t=1-t),[e,t]}const MF={standard:[31,28,31,30,31,30,31,31,30,31,30,31],leapyear:[31,29,31,30,31,30,31,31,30,31,30,31]};class lo{fromJulianDay(e){let r=e,n=r-G5,i=Math.floor(n/146097),a=mm(n,146097),s=Math.floor(a/36524),o=mm(a,36524),l=Math.floor(o/1461),c=mm(o,1461),d=Math.floor(c/365),u=i*400+s*100+l*4+d+(s!==4&&d!==4?1:0),[g,f]=RF(u),h=r-Cf(g,f,1,1),m=2;r<Cf(g,f,3,1)?m=0:eh(f)&&(m=1);let v=Math.floor(((h+m)*12+373)/367),b=r-Cf(g,f,v,1)+1;return new ja(g,f,v,b)}toJulianDay(e){return Cf(e.era,e.year,e.month,e.day)}getDaysInMonth(e){return MF[eh(e.year)?"leapyear":"standard"][e.month-1]}getMonthsInYear(e){return 12}getDaysInYear(e){return eh(e.year)?366:365}getYearsInEra(e){return 9999}getEras(){return["BC","AD"]}isInverseEra(e){return e.era==="BC"}balanceDate(e){e.year<=0&&(e.era=e.era==="BC"?"AD":"BC",e.year=1-e.year)}constructor(){this.identifier="gregory"}}const DF={"001":1,AD:1,AE:6,AF:6,AI:1,AL:1,AM:1,AN:1,AR:1,AT:1,AU:1,AX:1,AZ:1,BA:1,BE:1,BG:1,BH:6,BM:1,BN:1,BY:1,CH:1,CL:1,CM:1,CN:1,CR:1,CY:1,CZ:1,DE:1,DJ:6,DK:1,DZ:6,EC:1,EE:1,EG:6,ES:1,FI:1,FJ:1,FO:1,FR:1,GB:1,GE:1,GF:1,GP:1,GR:1,HR:1,HU:1,IE:1,IQ:6,IR:6,IS:1,IT:1,JO:6,KG:1,KW:6,KZ:1,LB:1,LI:1,LK:1,LT:1,LU:1,LV:1,LY:6,MC:1,MD:1,ME:1,MK:1,MN:1,MQ:1,MV:5,MY:1,NL:1,NO:1,NZ:1,OM:6,PL:1,QA:6,RE:1,RO:1,RS:1,RU:1,SD:6,SE:1,SI:1,SK:1,SM:1,SY:6,TJ:1,TM:1,TR:1,UA:1,UY:1,UZ:1,VA:1,VN:1,XK:1};function ba(t,e){return e=rn(e,t.calendar),t.era===e.era&&t.year===e.year&&t.month===e.month&&t.day===e.day}function r0(t,e){return e=rn(e,t.calendar),t=C1(t),e=C1(e),t.era===e.era&&t.year===e.year&&t.month===e.month}function NF(t,e){var r,n,i,a;return(a=(i=(r=t.isEqual)===null||r===void 0?void 0:r.call(t,e))!==null&&i!==void 0?i:(n=e.isEqual)===null||n===void 0?void 0:n.call(e,t))!==null&&a!==void 0?a:t.identifier===e.identifier}function FF(t,e){return ba(t,I1(e))}function n0(t,e,r){let n=t.calendar.toJulianDay(t),i=jF(e),a=Math.ceil(n+1-i)%7;return a<0&&(a+=7),a}function $F(t){return Cn(Date.now(),t)}function I1(t){return GF($F(t))}function H5(t,e){return t.calendar.toJulianDay(t)-e.calendar.toJulianDay(e)}function LF(t,e){return Zb(t)-Zb(e)}function Zb(t){return t.hour*36e5+t.minute*6e4+t.second*1e3+t.millisecond}let vm=null;function hn(){return vm==null&&(vm=new Intl.DateTimeFormat().resolvedOptions().timeZone),vm}function C1(t){return t.subtract({days:t.day-1})}function BF(t){return t.add({days:t.calendar.getDaysInMonth(t)-t.day})}const Jb=new Map;function VF(t){if(Intl.Locale){let r=Jb.get(t);return r||(r=new Intl.Locale(t).maximize().region,r&&Jb.set(t,r)),r}let e=t.split("-")[1];return e==="u"?void 0:e}function jF(t){let e=VF(t);return e&&DF[e]||0}function qi(t){t=rn(t,new lo);let e=t0(t.era,t.year);return W5(e,t.month,t.day,t.hour,t.minute,t.second,t.millisecond)}function W5(t,e,r,n,i,a,s){let o=new Date;return o.setUTCHours(n,i,a,s),o.setUTCFullYear(t,e-1,r),o.getTime()}function bl(t,e){if(e==="UTC")return 0;if(t>0&&e===hn())return new Date(t).getTimezoneOffset()*-6e4;let{year:r,month:n,day:i,hour:a,minute:s,second:o}=K5(t,e);return W5(r,n,i,a,s,o,0)-Math.floor(t/1e3)*1e3}const e2=new Map;function K5(t,e){let r=e2.get(e);r||(r=new Intl.DateTimeFormat("en-US",{timeZone:e,hour12:!1,era:"short",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}),e2.set(e,r));let n=r.formatToParts(new Date(t)),i={};for(let a of n)a.type!=="literal"&&(i[a.type]=a.value);return{year:i.era==="BC"||i.era==="B"?-i.year+1:+i.year,month:+i.month,day:+i.day,hour:i.hour==="24"?0:+i.hour,minute:+i.minute,second:+i.second}}const wh=864e5;function zF(t,e){let r=qi(t),n=r-bl(r-wh,e),i=r-bl(r+wh,e);return q5(t,e,n,i)}function q5(t,e,r,n){return(r===n?[r]:[r,n]).filter(a=>UF(t,e,a))}function UF(t,e,r){let n=K5(r,e);return t.year===n.year&&t.month===n.month&&t.day===n.day&&t.hour===n.hour&&t.minute===n.minute&&t.second===n.second}function Gn(t,e,r="compatible"){let n=Yi(t);if(e==="UTC")return qi(n);if(e===hn()&&r==="compatible"){n=rn(n,new lo);let l=new Date,c=t0(n.era,n.year);return l.setFullYear(c,n.month-1,n.day),l.setHours(n.hour,n.minute,n.second,n.millisecond),l.getTime()}let i=qi(n),a=bl(i-wh,e),s=bl(i+wh,e),o=q5(n,e,i-a,i-s);if(o.length===1)return o[0];if(o.length>1)switch(r){case"compatible":case"earlier":return o[0];case"later":return o[o.length-1];case"reject":throw new RangeError("Multiple possible absolute times found")}switch(r){case"earlier":return Math.min(i-a,i-s);case"compatible":case"later":return Math.max(i-a,i-s);case"reject":throw new RangeError("No such absolute time found")}}function Y5(t,e,r="compatible"){return new Date(Gn(t,e,r))}function Cn(t,e){let r=bl(t,e),n=new Date(t+r),i=n.getUTCFullYear(),a=n.getUTCMonth()+1,s=n.getUTCDate(),o=n.getUTCHours(),l=n.getUTCMinutes(),c=n.getUTCSeconds(),d=n.getUTCMilliseconds();return new _i(i<1?"BC":"AD",i<1?-i+1:i,a,s,e,r,o,l,c,d)}function X5(t,e){return Cn(t.getTime(),e)}function GF(t){return new ja(t.calendar,t.era,t.year,t.month,t.day)}function Yi(t,e){let r=0,n=0,i=0,a=0;if("timeZone"in t)({hour:r,minute:n,second:i,millisecond:a}=t);else if("hour"in t&&!e)return t;return e&&({hour:r,minute:n,second:i,millisecond:a}=e),new Xi(t.calendar,t.era,t.year,t.month,t.day,r,n,i,a)}function rn(t,e){if(NF(t.calendar,e))return t;let r=e.fromJulianDay(t.calendar.toJulianDay(t)),n=t.copy();return n.calendar=e,n.era=r.era,n.year=r.year,n.month=r.month,n.day=r.day,Va(n),n}function HF(t,e,r){if(t instanceof _i)return t.timeZone===e?t:KF(t,e);let n=Gn(t,e,r);return Cn(n,e)}function WF(t){let e=qi(t)-t.offset;return new Date(e)}function KF(t,e){let r=qi(t)-t.offset;return rn(Cn(r,e),t.calendar)}const zo=36e5;function vg(t,e){let r=t.copy(),n="hour"in r?QF(r,e):0;P1(r,e.years||0),r.calendar.balanceYearMonth&&r.calendar.balanceYearMonth(r,t),r.month+=e.months||0,E1(r),Q5(r),r.day+=(e.weeks||0)*7,r.day+=e.days||0,r.day+=n,qF(r),r.calendar.balanceDate&&r.calendar.balanceDate(r),r.year<1&&(r.year=1,r.month=1,r.day=1);let i=r.calendar.getYearsInEra(r);if(r.year>i){var a,s;let l=(a=(s=r.calendar).isInverseEra)===null||a===void 0?void 0:a.call(s,r);r.year=i,r.month=l?1:r.calendar.getMonthsInYear(r),r.day=l?1:r.calendar.getDaysInMonth(r)}r.month<1&&(r.month=1,r.day=1);let o=r.calendar.getMonthsInYear(r);return r.month>o&&(r.month=o,r.day=r.calendar.getDaysInMonth(r)),r.day=Math.max(1,Math.min(r.calendar.getDaysInMonth(r),r.day)),r}function P1(t,e){var r,n;!((r=(n=t.calendar).isInverseEra)===null||r===void 0)&&r.call(n,t)&&(e=-e),t.year+=e}function E1(t){for(;t.month<1;)P1(t,-1),t.month+=t.calendar.getMonthsInYear(t);let e=0;for(;t.month>(e=t.calendar.getMonthsInYear(t));)t.month-=e,P1(t,1)}function qF(t){for(;t.day<1;)t.month--,E1(t),t.day+=t.calendar.getDaysInMonth(t);for(;t.day>t.calendar.getDaysInMonth(t);)t.day-=t.calendar.getDaysInMonth(t),t.month++,E1(t)}function Q5(t){t.month=Math.max(1,Math.min(t.calendar.getMonthsInYear(t),t.month)),t.day=Math.max(1,Math.min(t.calendar.getDaysInMonth(t),t.day))}function Va(t){t.calendar.constrainDate&&t.calendar.constrainDate(t),t.year=Math.max(1,Math.min(t.calendar.getYearsInEra(t),t.year)),Q5(t)}function Z5(t){let e={};for(let r in t)typeof t[r]=="number"&&(e[r]=-t[r]);return e}function J5(t,e){return vg(t,Z5(e))}function i0(t,e){let r=t.copy();return e.era!=null&&(r.era=e.era),e.year!=null&&(r.year=e.year),e.month!=null&&(r.month=e.month),e.day!=null&&(r.day=e.day),Va(r),r}function Sh(t,e){let r=t.copy();return e.hour!=null&&(r.hour=e.hour),e.minute!=null&&(r.minute=e.minute),e.second!=null&&(r.second=e.second),e.millisecond!=null&&(r.millisecond=e.millisecond),XF(r),r}function YF(t){t.second+=Math.floor(t.millisecond/1e3),t.millisecond=Pf(t.millisecond,1e3),t.minute+=Math.floor(t.second/60),t.second=Pf(t.second,60),t.hour+=Math.floor(t.minute/60),t.minute=Pf(t.minute,60);let e=Math.floor(t.hour/24);return t.hour=Pf(t.hour,24),e}function XF(t){t.millisecond=Math.max(0,Math.min(t.millisecond,1e3)),t.second=Math.max(0,Math.min(t.second,59)),t.minute=Math.max(0,Math.min(t.minute,59)),t.hour=Math.max(0,Math.min(t.hour,23))}function Pf(t,e){let r=t%e;return r<0&&(r+=e),r}function QF(t,e){return t.hour+=e.hours||0,t.minute+=e.minutes||0,t.second+=e.seconds||0,t.millisecond+=e.milliseconds||0,YF(t)}function a0(t,e,r,n){let i=t.copy();switch(e){case"era":{let o=t.calendar.getEras(),l=o.indexOf(t.era);if(l<0)throw new Error("Invalid era: "+t.era);l=gi(l,r,0,o.length-1,n==null?void 0:n.round),i.era=o[l],Va(i);break}case"year":var a,s;!((a=(s=i.calendar).isInverseEra)===null||a===void 0)&&a.call(s,i)&&(r=-r),i.year=gi(t.year,r,-1/0,9999,n==null?void 0:n.round),i.year===-1/0&&(i.year=1),i.calendar.balanceYearMonth&&i.calendar.balanceYearMonth(i,t);break;case"month":i.month=gi(t.month,r,1,t.calendar.getMonthsInYear(t),n==null?void 0:n.round);break;case"day":i.day=gi(t.day,r,1,t.calendar.getDaysInMonth(t),n==null?void 0:n.round);break;default:throw new Error("Unsupported field "+e)}return t.calendar.balanceDate&&t.calendar.balanceDate(i),Va(i),i}function e4(t,e,r,n){let i=t.copy();switch(e){case"hour":{let a=t.hour,s=0,o=23;if((n==null?void 0:n.hourCycle)===12){let l=a>=12;s=l?12:0,o=l?23:11}i.hour=gi(a,r,s,o,n==null?void 0:n.round);break}case"minute":i.minute=gi(t.minute,r,0,59,n==null?void 0:n.round);break;case"second":i.second=gi(t.second,r,0,59,n==null?void 0:n.round);break;case"millisecond":i.millisecond=gi(t.millisecond,r,0,999,n==null?void 0:n.round);break;default:throw new Error("Unsupported field "+e)}return i}function gi(t,e,r,n,i=!1){if(i){t+=Math.sign(e),t<r&&(t=n);let a=Math.abs(e);e>0?t=Math.ceil(t/a)*a:t=Math.floor(t/a)*a,t>n&&(t=r)}else t+=e,t<r?t=n-(r-t-1):t>n&&(t=r+(t-n-1));return t}function t4(t,e){let r;if(e.years!=null&&e.years!==0||e.months!=null&&e.months!==0||e.weeks!=null&&e.weeks!==0||e.days!=null&&e.days!==0){let i=vg(Yi(t),{years:e.years,months:e.months,weeks:e.weeks,days:e.days});r=Gn(i,t.timeZone)}else r=qi(t)-t.offset;r+=e.milliseconds||0,r+=(e.seconds||0)*1e3,r+=(e.minutes||0)*6e4,r+=(e.hours||0)*36e5;let n=Cn(r,t.timeZone);return rn(n,t.calendar)}function ZF(t,e){return t4(t,Z5(e))}function JF(t,e,r,n){switch(e){case"hour":{let i=0,a=23;if((n==null?void 0:n.hourCycle)===12){let h=t.hour>=12;i=h?12:0,a=h?23:11}let s=Yi(t),o=rn(Sh(s,{hour:i}),new lo),l=[Gn(o,t.timeZone,"earlier"),Gn(o,t.timeZone,"later")].filter(h=>Cn(h,t.timeZone).day===o.day)[0],c=rn(Sh(s,{hour:a}),new lo),d=[Gn(c,t.timeZone,"earlier"),Gn(c,t.timeZone,"later")].filter(h=>Cn(h,t.timeZone).day===c.day).pop(),u=qi(t)-t.offset,g=Math.floor(u/zo),f=u%zo;return u=gi(g,r,Math.floor(l/zo),Math.floor(d/zo),n==null?void 0:n.round)*zo+f,rn(Cn(u,t.timeZone),t.calendar)}case"minute":case"second":case"millisecond":return e4(t,e,r,n);case"era":case"year":case"month":case"day":{let i=a0(Yi(t),e,r,n),a=Gn(i,t.timeZone);return rn(Cn(a,t.timeZone),t.calendar)}default:throw new Error("Unsupported field "+e)}}function e$(t,e,r){let n=Yi(t),i=Sh(i0(n,e),e);if(i.compare(n)===0)return t;let a=Gn(i,t.timeZone,r);return rn(Cn(a,t.timeZone),t.calendar)}const t$=/^([+-]\d{6}|\d{4})-(\d{2})-(\d{2})$/,r$=/^([+-]\d{6}|\d{4})-(\d{2})-(\d{2})(?:T(\d{2}))?(?::(\d{2}))?(?::(\d{2}))?(\.\d+)?$/,n$=/^([+-]\d{6}|\d{4})-(\d{2})-(\d{2})(?:T(\d{2}))?(?::(\d{2}))?(?::(\d{2}))?(\.\d+)?(?:([+-]\d{2})(?::?(\d{2}))?)?\[(.*?)\]$/;function i$(t){let e=t.match(t$);if(!e)throw new Error("Invalid ISO 8601 date string: "+t);let r=new ja(tr(e[1],0,9999),tr(e[2],1,12),1);return r.day=tr(e[3],0,r.calendar.getDaysInMonth(r)),r}function a$(t){let e=t.match(r$);if(!e)throw new Error("Invalid ISO 8601 date time string: "+t);let r=tr(e[1],-9999,9999),n=r<1?"BC":"AD",i=new Xi(n,r<1?-r+1:r,tr(e[2],1,12),1,e[4]?tr(e[4],0,23):0,e[5]?tr(e[5],0,59):0,e[6]?tr(e[6],0,59):0,e[7]?tr(e[7],0,1/0)*1e3:0);return i.day=tr(e[3],0,i.calendar.getDaysInMonth(i)),i}function s$(t,e){let r=t.match(n$);if(!r)throw new Error("Invalid ISO 8601 date time string: "+t);let n=tr(r[1],-9999,9999),i=n<1?"BC":"AD",a=new _i(i,n<1?-n+1:n,tr(r[2],1,12),1,r[10],0,r[4]?tr(r[4],0,23):0,r[5]?tr(r[5],0,59):0,r[6]?tr(r[6],0,59):0,r[7]?tr(r[7],0,1/0)*1e3:0);a.day=tr(r[3],0,a.calendar.getDaysInMonth(a));let s=Yi(a),o;if(r[8]){var l;if(a.offset=tr(r[8],-23,23)*36e5+tr((l=r[9])!==null&&l!==void 0?l:"0",0,59)*6e4,o=qi(a)-a.offset,!zF(s,a.timeZone).includes(o))throw new Error(`Offset ${n4(a.offset)} is invalid for ${s0(a)} in ${a.timeZone}`)}else o=Gn(Yi(s),a.timeZone,e);return Cn(o,a.timeZone)}function tr(t,e,r){let n=Number(t);if(n<e||n>r)throw new RangeError(`Value out of range: ${e} <= ${n} <= ${r}`);return n}function o$(t){return`${String(t.hour).padStart(2,"0")}:${String(t.minute).padStart(2,"0")}:${String(t.second).padStart(2,"0")}${t.millisecond?String(t.millisecond/1e3).slice(1):""}`}function r4(t){let e=rn(t,new lo),r;return e.era==="BC"?r=e.year===1?"0000":"-"+String(Math.abs(1-e.year)).padStart(6,"00"):r=String(e.year).padStart(4,"0"),`${r}-${String(e.month).padStart(2,"0")}-${String(e.day).padStart(2,"0")}`}function s0(t){return`${r4(t)}T${o$(t)}`}function n4(t){let e=Math.sign(t)<0?"-":"+";t=Math.abs(t);let r=Math.floor(t/36e5),n=t%36e5/6e4;return`${e}${String(r).padStart(2,"0")}:${String(n).padStart(2,"0")}`}function l$(t){return`${s0(t)}${n4(t.offset)}[${t.timeZone}]`}function c$(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function o0(t,e,r){c$(t,e),e.set(t,r)}function l0(t){let e=typeof t[0]=="object"?t.shift():new lo,r;if(typeof t[0]=="string")r=t.shift();else{let s=e.getEras();r=s[s.length-1]}let n=t.shift(),i=t.shift(),a=t.shift();return[e,r,n,i,a]}var d$=new WeakMap;class ja{copy(){return this.era?new ja(this.calendar,this.era,this.year,this.month,this.day):new ja(this.calendar,this.year,this.month,this.day)}add(e){return vg(this,e)}subtract(e){return J5(this,e)}set(e){return i0(this,e)}cycle(e,r,n){return a0(this,e,r,n)}toDate(e){return Y5(this,e)}toString(){return r4(this)}compare(e){return H5(this,e)}constructor(...e){o0(this,d$,{writable:!0,value:void 0});let[r,n,i,a,s]=l0(e);this.calendar=r,this.era=n,this.year=i,this.month=a,this.day=s,Va(this)}}var u$=new WeakMap;class Xi{copy(){return this.era?new Xi(this.calendar,this.era,this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond):new Xi(this.calendar,this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond)}add(e){return vg(this,e)}subtract(e){return J5(this,e)}set(e){return i0(Sh(this,e),e)}cycle(e,r,n){switch(e){case"era":case"year":case"month":case"day":return a0(this,e,r,n);default:return e4(this,e,r,n)}}toDate(e,r){return Y5(this,e,r)}toString(){return s0(this)}compare(e){let r=H5(this,e);return r===0?LF(this,Yi(e)):r}constructor(...e){o0(this,u$,{writable:!0,value:void 0});let[r,n,i,a,s]=l0(e);this.calendar=r,this.era=n,this.year=i,this.month=a,this.day=s,this.hour=e.shift()||0,this.minute=e.shift()||0,this.second=e.shift()||0,this.millisecond=e.shift()||0,Va(this)}}var f$=new WeakMap;class _i{copy(){return this.era?new _i(this.calendar,this.era,this.year,this.month,this.day,this.timeZone,this.offset,this.hour,this.minute,this.second,this.millisecond):new _i(this.calendar,this.year,this.month,this.day,this.timeZone,this.offset,this.hour,this.minute,this.second,this.millisecond)}add(e){return t4(this,e)}subtract(e){return ZF(this,e)}set(e,r){return e$(this,e,r)}cycle(e,r,n){return JF(this,e,r,n)}toDate(){return WF(this)}toString(){return l$(this)}toAbsoluteString(){return this.toDate().toISOString()}compare(e){return this.toDate().getTime()-HF(e,this.timeZone).toDate().getTime()}constructor(...e){o0(this,f$,{writable:!0,value:void 0});let[r,n,i,a,s]=l0(e),o=e.shift(),l=e.shift();this.calendar=r,this.era=n,this.year=i,this.month=a,this.day=s,this.timeZone=o,this.offset=l,this.hour=e.shift()||0,this.minute=e.shift()||0,this.second=e.shift()||0,this.millisecond=e.shift()||0,Va(this)}}function h$(){if(!nv)return null;let t=document.querySelector("[data-bits-announcer]");if(!Oa(t)){const n=document.createElement("div");n.style.cssText=S6,n.setAttribute("data-bits-announcer",""),n.appendChild(e("assertive")),n.appendChild(e("polite")),t=n,document.body.insertBefore(t,document.body.firstChild)}function e(n){const i=document.createElement("div");return i.role="log",i.ariaLive=n,i.setAttribute("aria-relevant","additions"),i}function r(n){if(!Oa(t))return null;const i=t.querySelector(`[aria-live="${n}"]`);return Oa(i)?i:null}return{getLog:r}}function g$(){const t=h$();function e(r,n="assertive",i=7500){if(!t||!nv)return;const a=t.getLog(n),s=document.createElement("div");return typeof r=="number"?r=r.toString():r===null?r="Empty":r=r.trim(),s.innerText=r,n==="assertive"?a==null||a.replaceChildren(s):a==null||a.appendChild(s),setTimeout(()=>{s.remove()},i)}return{announce:e}}const p$={defaultValue:void 0,defaultPlaceholder:void 0,granularity:"day"};function m$(t){const e={...p$,...t},{defaultValue:r,defaultPlaceholder:n,granularity:i}=e;if(Array.isArray(r)&&r.length)return r[r.length-1];if(r&&!Array.isArray(r))return r;if(n)return n;{const a=new Date,s=a.getFullYear(),o=a.getMonth()+1,l=a.getDate();return["hour","minute","second"].includes(i??"day")?new Xi(s,o,l,0,0,0):new ja(s,o,l)}}function i4(t,e){let r;return e instanceof _i?r=s$(t):e instanceof Xi?r=a$(t):r=i$(t),r.calendar!==e.calendar?rn(r,e.calendar):r}function pi(t,e=hn()){return t instanceof _i?t.toDate():t.toDate(e)}function v$(t){return t instanceof Xi}function a4(t){return t instanceof _i}function y$(t){return v$(t)||a4(t)}function b$(t){if(t instanceof Date){const e=t.getFullYear(),r=t.getMonth()+1;return new Date(e,r,0).getDate()}else return t.set({day:100}).day}function A1(t,e){return t.compare(e)<0}function _$(t,e){return t.compare(e)>0}function w$(t,e,r){const n=n0(t,r);return e>n?t.subtract({days:n+7-e}):e===n?t:t.subtract({days:n-e})}function S$(t,e,r){const n=n0(t,r),i=e===0?6:e-1;return n===i?t:n>i?t.add({days:7-n+i}):t.add({days:i-n})}const x$={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"};function I$(t){let e=t;function r(f){e=f}function n(){return e}function i(f,h){return new li(e,h).format(f)}function a(f,h=!0){return y$(f)&&h?i(pi(f),{dateStyle:"long",timeStyle:"long"}):i(pi(f),{dateStyle:"long"})}function s(f){return new li(e,{month:"long",year:"numeric"}).format(f)}function o(f){return new li(e,{month:"long"}).format(f)}function l(f){return new li(e,{year:"numeric"}).format(f)}function c(f,h){return a4(f)?new li(e,{...h,timeZone:f.timeZone}).formatToParts(pi(f)):new li(e,h).formatToParts(pi(f))}function d(f,h="narrow"){return new li(e,{weekday:h}).format(f)}function u(f,h=void 0){var b;return((b=new li(e,{hour:"numeric",minute:"numeric",hourCycle:h===24?"h23":void 0}).formatToParts(f).find(x=>x.type==="dayPeriod"))==null?void 0:b.value)==="PM"?"PM":"AM"}function g(f,h,m={}){const v={...x$,...m},x=c(f,v).find(y=>y.type===h);return x?x.value:""}return{setLocale:r,getLocale:n,fullMonth:o,fullYear:l,fullMonthAndYear:s,toParts:c,custom:i,part:g,dayPeriod:u,selectedDate:a,dayOfWeek:d}}function C$(t){return!(!Oa(t)||!t.hasAttribute("data-bits-day"))}function t2(t,e){const r=[];let n=t.add({days:1});const i=e;for(;n.compare(i)<0;)r.push(n),n=n.add({days:1});return r}function ym(t){const{dateObj:e,weekStartsOn:r,fixedWeeks:n,locale:i}=t,a=b$(e),s=Array.from({length:a},(v,b)=>e.set({day:b+1})),o=C1(e),l=BF(e),c=w$(o,r,i),d=S$(l,r,i),u=t2(c.subtract({days:1}),o),g=t2(l,d.add({days:1})),f=u.length+s.length+g.length;if(n&&f<42){const v=42-f;let b=g[g.length-1];b||(b=e.add({months:1}).set({day:1}));let x=v;g.length===0&&(x=v-1,g.push(b));const y=Array.from({length:x},(S,I)=>{const C=I+1;return b.add({days:C})});g.push(...y)}const h=u.concat(s,g),m=D6(h,7);return{value:e,dates:h,weeks:m}}function Ju(t){const{numberOfMonths:e,dateObj:r,...n}=t,i=[];if(!e||e===1)return i.push(ym({...n,dateObj:r})),i;i.push(ym({...n,dateObj:r}));for(let a=1;a<e;a++){const s=r.add({months:a});i.push(ym({...n,dateObj:s}))}return i}function bm(t){return t?Array.from(t.querySelectorAll("[data-bits-day]:not([data-disabled]):not([data-outside-visible-months])")).filter(r=>Oa(r)):[]}function r2(t,e){const r=t.getAttribute("data-value");r&&(e.current=i4(r,e.current))}function P$({node:t,add:e,placeholder:r,calendarNode:n,isPrevButtonDisabled:i,isNextButtonDisabled:a,months:s,numberOfMonths:o}){var u,g;const l=bm(n);if(!l.length)return;const d=l.indexOf(t)+e;if(Gf(d,l)){const f=l[d];return r2(f,r),f.focus()}if(d<0){if(i)return;const f=(u=s[0])==null?void 0:u.value;if(!f)return;r.current=f.subtract({months:o}),yi(()=>{const h=bm(n);if(!h.length)return;const m=h.length-Math.abs(d);if(Gf(m,h)){const v=h[m];return r2(v,r),v.focus()}})}if(d>=l.length){if(a)return;const f=(g=s[0])==null?void 0:g.value;if(!f)return;r.current=f.add({months:o}),yi(()=>{const h=bm(n);if(!h.length)return;const m=d-l.length;if(Gf(m,h))return h[m].focus()})}}const n2=[In,Un,ro,no],i2=[Na,Fa];function E$({event:t,handleCellClick:e,shiftFocus:r,placeholderValue:n}){const i=t.target;if(!C$(i)||!n2.includes(t.key)&&!i2.includes(t.key))return;t.preventDefault();const a={[In]:7,[Un]:-7,[ro]:-1,[no]:1};if(n2.includes(t.key)){const s=a[t.key];s!==void 0&&r(i,s)}if(i2.includes(t.key)){const s=i.getAttribute("data-value");if(!s)return;e(t,i4(s,n))}}function A$({months:t,setMonths:e,numberOfMonths:r,pagedNavigation:n,weekStartsOn:i,locale:a,fixedWeeks:s,setPlaceholder:o}){var c;const l=(c=t[0])==null?void 0:c.value;if(l)if(n)o(l.add({months:r}));else{const d=Ju({dateObj:l.add({months:1}),weekStartsOn:i,locale:a,fixedWeeks:s,numberOfMonths:r});e(d);const u=d[0];if(!u)return;o(u.value.set({day:1}))}}function T$({months:t,setMonths:e,numberOfMonths:r,pagedNavigation:n,weekStartsOn:i,locale:a,fixedWeeks:s,setPlaceholder:o}){var c;const l=(c=t[0])==null?void 0:c.value;if(l)if(n)o(l.subtract({months:r}));else{const d=Ju({dateObj:l.subtract({months:1}),weekStartsOn:i,locale:a,fixedWeeks:s,numberOfMonths:r});e(d);const u=d[0];if(!u)return;o(u.value.set({day:1}))}}function O$({months:t,formatter:e,weekdayFormat:r}){if(!t.length)return[];const i=t[0].weeks[0];return i?i.map(a=>e.dayOfWeek(pi(a),r)):[]}function k$(t){const e=t.weekStartsOn.current,r=t.locale.current,n=t.fixedWeeks.current,i=t.numberOfMonths.current;$e(()=>{const a=t.placeholder.current;if(!a)return;const s={weekStartsOn:e,locale:r,fixedWeeks:n,numberOfMonths:i};t.setMonths(Ju({...s,dateObj:a}))})}function R$({calendarNode:t,label:e,accessibleHeadingId:r}){const n=document.createElement("div");n.style.cssText=M_({border:"0px",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(50%)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0px",position:"absolute",whiteSpace:"nowrap",width:"1px"});const i=document.createElement("div");return i.textContent=e,i.id=r,i.role="heading",i.ariaLevel="2",t.insertBefore(n,t.firstChild),n.appendChild(i),()=>{var s;const a=document.getElementById(r);a&&((s=n.parentElement)==null||s.removeChild(n),a.remove())}}function M$({placeholder:t,getVisibleMonths:e,weekStartsOn:r,locale:n,fixedWeeks:i,numberOfMonths:a,setMonths:s}){qe(()=>{t.current,$e(()=>{if(e().some(l=>r0(l,t.current)))return;const o={weekStartsOn:r.current,locale:n.current,fixedWeeks:i.current,numberOfMonths:a.current};s(Ju({...o,dateObj:t.current}))})})}function D$({maxValue:t,months:e,disabled:r}){var a;if(!t||!e.length)return!1;if(r)return!0;const n=(a=e[e.length-1])==null?void 0:a.value;if(!n)return!1;const i=n.add({months:1}).set({day:1});return _$(i,t)}function N$({minValue:t,months:e,disabled:r}){var a;if(!t||!e.length)return!1;if(r)return!0;const n=(a=e[0])==null?void 0:a.value;if(!n)return!1;const i=n.subtract({months:1}).set({day:35});return A1(i,t)}function F$({months:t,locale:e,formatter:r}){if(!t.length)return"";if(e!==r.getLocale()&&r.setLocale(e),t.length===1){const d=pi(t[0].value);return`${r.fullMonthAndYear(d)}`}const n=pi(t[0].value),i=pi(t[t.length-1].value),a=r.fullMonth(n),s=r.fullMonth(i),o=r.fullYear(n),l=r.fullYear(i);return o===l?`${a} - ${s} ${l}`:`${a} ${o} - ${s} ${l}`}function $$({fullCalendarLabel:t,id:e,isInvalid:r,disabled:n,readonly:i}){return{id:e,role:"application","aria-label":t,"data-invalid":x6(r),"data-disabled":nr(n),"data-readonly":ea(i)}}var Cl,Pl,El,Al,Tl,Ol,kl,Rl,Ml,Dl;class L${constructor(e){z(this,"ref");z(this,"id");z(this,"value");z(this,"placeholder");z(this,"preventDeselect");z(this,"minValue");z(this,"maxValue");z(this,"disabled");z(this,"pagedNavigation");z(this,"weekStartsOn");z(this,"weekdayFormat");z(this,"isDateDisabledProp");z(this,"isDateUnavailableProp");z(this,"fixedWeeks");z(this,"numberOfMonths");z(this,"locale");z(this,"calendarLabel");z(this,"type");z(this,"readonly");z(this,"disableDaysOutsideMonth");z(this,"onDateSelect");z(this,"initialFocus");L(this,Cl,Me(vr([])));L(this,Pl,R(()=>this.months.map(e=>e.value)));z(this,"announcer");z(this,"formatter");z(this,"accessibleHeadingId",et());L(this,El,R(()=>O$({months:this.months,formatter:this.formatter,weekdayFormat:this.weekdayFormat.current})));L(this,Al,R(()=>D$({maxValue:this.maxValue.current,months:this.months,disabled:this.disabled.current})));L(this,Tl,R(()=>N$({minValue:this.minValue.current,months:this.months,disabled:this.disabled.current})));L(this,Ol,R(()=>{const e=this.value.current,r=this.isDateDisabledProp.current,n=this.isDateUnavailableProp.current;if(Array.isArray(e)){if(!e.length)return!1;for(const i of e)if(r(i)||n(i))return!0}else{if(!e)return!1;if(r(e)||n(e))return!0}return!1}));L(this,kl,R(()=>F$({months:this.months,formatter:this.formatter,locale:this.locale.current})));L(this,Rl,R(()=>`${this.calendarLabel.current} ${this.headingValue}`));L(this,Ml,R(()=>({months:this.months,weekdays:this.weekdays})));L(this,Dl,R(()=>({...$$({fullCalendarLabel:this.fullCalendarLabel,id:this.id.current,isInvalid:this.isInvalid,disabled:this.disabled.current,readonly:this.readonly.current}),[this.getBitsAttr("root")]:"",onkeydown:this.onkeydown})));this.value=e.value,this.placeholder=e.placeholder,this.preventDeselect=e.preventDeselect,this.minValue=e.minValue,this.maxValue=e.maxValue,this.disabled=e.disabled,this.pagedNavigation=e.pagedNavigation,this.weekStartsOn=e.weekStartsOn,this.weekdayFormat=e.weekdayFormat,this.isDateDisabledProp=e.isDateDisabled,this.isDateUnavailableProp=e.isDateUnavailable,this.fixedWeeks=e.fixedWeeks,this.numberOfMonths=e.numberOfMonths,this.locale=e.locale,this.calendarLabel=e.calendarLabel,this.type=e.type,this.readonly=e.readonly,this.id=e.id,this.ref=e.ref,this.disableDaysOutsideMonth=e.disableDaysOutsideMonth,this.onDateSelect=e.onDateSelect,this.initialFocus=e.initialFocus,this.announcer=g$(),this.formatter=I$(this.locale.current),this.setMonths=this.setMonths.bind(this),this.nextPage=this.nextPage.bind(this),this.prevPage=this.prevPage.bind(this),this.prevYear=this.prevYear.bind(this),this.nextYear=this.nextYear.bind(this),this.setYear=this.setYear.bind(this),this.setMonth=this.setMonth.bind(this),this.isOutsideVisibleMonths=this.isOutsideVisibleMonths.bind(this),this.isDateDisabled=this.isDateDisabled.bind(this),this.isDateSelected=this.isDateSelected.bind(this),this.shiftFocus=this.shiftFocus.bind(this),this.handleCellClick=this.handleCellClick.bind(this),this.handleMultipleUpdate=this.handleMultipleUpdate.bind(this),this.handleSingleUpdate=this.handleSingleUpdate.bind(this),this.onkeydown=this.onkeydown.bind(this),this.getBitsAttr=this.getBitsAttr.bind(this),dt({id:this.id,ref:this.ref}),this.months=Ju({dateObj:this.placeholder.current,weekStartsOn:this.weekStartsOn.current,locale:this.locale.current,fixedWeeks:this.fixedWeeks.current,numberOfMonths:this.numberOfMonths.current}),qe(()=>{var n;if($e(()=>this.initialFocus.current)){const i=(n=this.ref.current)==null?void 0:n.querySelector("[data-focused]");i&&i.focus()}}),qe(()=>this.ref.current?R$({calendarNode:this.ref.current,label:this.fullCalendarLabel,accessibleHeadingId:this.accessibleHeadingId}):void 0),qe(()=>{this.formatter.getLocale()!==this.locale.current&&this.formatter.setLocale(this.locale.current)}),M$({placeholder:this.placeholder,getVisibleMonths:()=>this.visibleMonths,weekStartsOn:this.weekStartsOn,locale:this.locale,fixedWeeks:this.fixedWeeks,numberOfMonths:this.numberOfMonths,setMonths:r=>this.months=r}),k$({fixedWeeks:this.fixedWeeks,locale:this.locale,numberOfMonths:this.numberOfMonths,placeholder:this.placeholder,setMonths:this.setMonths,weekStartsOn:this.weekStartsOn}),qe(()=>{const r=document.getElementById(this.accessibleHeadingId);r&&(r.textContent=this.fullCalendarLabel)}),qe(()=>{this.value.current,$e(()=>{const r=this.value.current;if(Array.isArray(r)&&r.length){const n=r[r.length-1];n&&this.placeholder.current!==n&&(this.placeholder.current=n)}else!Array.isArray(r)&&r&&this.placeholder.current!==r&&(this.placeholder.current=r)})})}get months(){return p(_(this,Cl))}set months(e){U(_(this,Cl),e,!0)}get visibleMonths(){return p(_(this,Pl))}set visibleMonths(e){U(_(this,Pl),e)}setMonths(e){this.months=e}get weekdays(){return p(_(this,El))}set weekdays(e){U(_(this,El),e)}nextPage(){A$({fixedWeeks:this.fixedWeeks.current,locale:this.locale.current,numberOfMonths:this.numberOfMonths.current,pagedNavigation:this.pagedNavigation.current,setMonths:this.setMonths,setPlaceholder:e=>this.placeholder.current=e,weekStartsOn:this.weekStartsOn.current,months:this.months})}prevPage(){T$({fixedWeeks:this.fixedWeeks.current,locale:this.locale.current,numberOfMonths:this.numberOfMonths.current,pagedNavigation:this.pagedNavigation.current,setMonths:this.setMonths,setPlaceholder:e=>this.placeholder.current=e,weekStartsOn:this.weekStartsOn.current,months:this.months})}nextYear(){this.placeholder.current=this.placeholder.current.add({years:1})}prevYear(){this.placeholder.current=this.placeholder.current.subtract({years:1})}setYear(e){this.placeholder.current=this.placeholder.current.set({year:e})}setMonth(e){this.placeholder.current=this.placeholder.current.set({month:e})}get isNextButtonDisabled(){return p(_(this,Al))}set isNextButtonDisabled(e){U(_(this,Al),e)}get isPrevButtonDisabled(){return p(_(this,Tl))}set isPrevButtonDisabled(e){U(_(this,Tl),e)}get isInvalid(){return p(_(this,Ol))}set isInvalid(e){U(_(this,Ol),e)}get headingValue(){return p(_(this,kl))}set headingValue(e){U(_(this,kl),e)}get fullCalendarLabel(){return p(_(this,Rl))}set fullCalendarLabel(e){U(_(this,Rl),e)}isOutsideVisibleMonths(e){return!this.visibleMonths.some(r=>r0(e,r))}isDateDisabled(e){if(this.isDateDisabledProp.current(e)||this.disabled.current)return!0;const r=this.minValue.current,n=this.maxValue.current;return!!(r&&A1(e,r)||n&&A1(n,e))}isDateSelected(e){const r=this.value.current;return Array.isArray(r)?r.some(n=>ba(n,e)):r?ba(r,e):!1}shiftFocus(e,r){return P$({node:e,add:r,placeholder:this.placeholder,calendarNode:this.ref.current,isPrevButtonDisabled:this.isPrevButtonDisabled,isNextButtonDisabled:this.isNextButtonDisabled,months:this.months,numberOfMonths:this.numberOfMonths.current})}handleCellClick(e,r){var l,c;if(this.readonly.current)return;const i=this.isDateDisabledProp.current,a=this.isDateUnavailableProp.current;if(i!=null&&i(r)||a!=null&&a(r))return;const s=this.value.current;if(this.type.current==="multiple")(Array.isArray(s)||s===void 0)&&(this.value.current=this.handleMultipleUpdate(s,r));else if(!Array.isArray(s)){const d=this.handleSingleUpdate(s,r);d?this.announcer.announce(`Selected Date: ${this.formatter.selectedDate(d,!1)}`,"polite"):this.announcer.announce("Selected date is now empty.","polite",5e3),this.value.current=d,d!==void 0&&((c=(l=this.onDateSelect)==null?void 0:l.current)==null||c.call(l))}}handleMultipleUpdate(e,r){if(!e)return[r];if(!Array.isArray(e))return;const n=e.findIndex(a=>ba(a,r)),i=this.preventDeselect.current;if(n===-1)return[...e,r];if(i)return e;{const a=e.filter(s=>!ba(s,r));if(!a.length){this.placeholder.current=r;return}return a}}handleSingleUpdate(e,r){if(!e)return r;if(!this.preventDeselect.current&&ba(e,r)){this.placeholder.current=r;return}return r}onkeydown(e){E$({event:e,handleCellClick:this.handleCellClick,shiftFocus:this.shiftFocus,placeholderValue:this.placeholder.current})}get snippetProps(){return p(_(this,Ml))}set snippetProps(e){U(_(this,Ml),e)}getBitsAttr(e){return`data-bits-calendar-${e}`}get props(){return p(_(this,Dl))}set props(e){U(_(this,Dl),e)}}Cl=new WeakMap,Pl=new WeakMap,El=new WeakMap,Al=new WeakMap,Tl=new WeakMap,Ol=new WeakMap,kl=new WeakMap,Rl=new WeakMap,Ml=new WeakMap,Dl=new WeakMap;var Nl,Fl;class B${constructor(e,r){z(this,"root");z(this,"id");z(this,"ref");L(this,Nl,R(()=>this.root.headingValue));L(this,Fl,R(()=>({id:this.id.current,"aria-hidden":iv(!0),"data-disabled":nr(this.root.disabled.current),"data-readonly":ea(this.root.readonly.current),[this.root.getBitsAttr("heading")]:""})));this.root=r,this.id=e.id,this.ref=e.ref,dt({id:this.id,ref:this.ref})}get headingValue(){return p(_(this,Nl))}set headingValue(e){U(_(this,Nl),e)}get props(){return p(_(this,Fl))}set props(e){U(_(this,Fl),e)}}Nl=new WeakMap,Fl=new WeakMap;var $l,Ll,Bl,Vl,jl,zl,Ul,Gl,Hl,Wl,Kl,ql,Yl;class V${constructor(e,r){z(this,"root");z(this,"id");z(this,"ref");z(this,"date");z(this,"month");L(this,$l,R(()=>pi(this.date.current)));L(this,Ll,R(()=>this.root.isDateDisabled(this.date.current)));L(this,Bl,R(()=>this.root.isDateUnavailableProp.current(this.date.current)));L(this,Vl,R(()=>FF(this.date.current,hn())));L(this,jl,R(()=>!r0(this.date.current,this.month.current)));L(this,zl,R(()=>this.root.isOutsideVisibleMonths(this.date.current)));L(this,Ul,R(()=>ba(this.date.current,this.root.placeholder.current)));L(this,Gl,R(()=>this.root.isDateSelected(this.date.current)));L(this,Hl,R(()=>this.root.formatter.custom(this.cellDate,{weekday:"long",month:"long",day:"numeric",year:"numeric"})));L(this,Wl,R(()=>({disabled:this.isDisabled,unavailable:this.isUnavailable,selected:this.isSelectedDate})));L(this,Kl,R(()=>this.isDisabled||this.isOutsideMonth&&this.root.disableDaysOutsideMonth.current||this.isUnavailable));L(this,ql,R(()=>({"data-unavailable":P6(this.isUnavailable),"data-today":this.isDateToday?"":void 0,"data-outside-month":this.isOutsideMonth?"":void 0,"data-outside-visible-months":this.isOutsideVisibleMonths?"":void 0,"data-focused":this.isFocusedDate?"":void 0,"data-selected":C6(this.isSelectedDate),"data-value":this.date.current.toString(),"data-disabled":nr(this.isDisabled||this.isOutsideMonth&&this.root.disableDaysOutsideMonth.current)})));L(this,Yl,R(()=>({id:this.id.current,role:"gridcell","aria-selected":D_(this.isSelectedDate),"aria-disabled":mo(this.ariaDisabled),...this.sharedDataAttrs,[this.root.getBitsAttr("cell")]:""})));this.root=r,this.id=e.id,this.ref=e.ref,this.date=e.date,this.month=e.month,dt({id:this.id,ref:this.ref})}get cellDate(){return p(_(this,$l))}set cellDate(e){U(_(this,$l),e)}get isDisabled(){return p(_(this,Ll))}set isDisabled(e){U(_(this,Ll),e)}get isUnavailable(){return p(_(this,Bl))}set isUnavailable(e){U(_(this,Bl),e)}get isDateToday(){return p(_(this,Vl))}set isDateToday(e){U(_(this,Vl),e)}get isOutsideMonth(){return p(_(this,jl))}set isOutsideMonth(e){U(_(this,jl),e)}get isOutsideVisibleMonths(){return p(_(this,zl))}set isOutsideVisibleMonths(e){U(_(this,zl),e)}get isFocusedDate(){return p(_(this,Ul))}set isFocusedDate(e){U(_(this,Ul),e)}get isSelectedDate(){return p(_(this,Gl))}set isSelectedDate(e){U(_(this,Gl),e)}get labelText(){return p(_(this,Hl))}set labelText(e){U(_(this,Hl),e)}get snippetProps(){return p(_(this,Wl))}set snippetProps(e){U(_(this,Wl),e)}get ariaDisabled(){return p(_(this,Kl))}set ariaDisabled(e){U(_(this,Kl),e)}get sharedDataAttrs(){return p(_(this,ql))}set sharedDataAttrs(e){U(_(this,ql),e)}get props(){return p(_(this,Yl))}set props(e){U(_(this,Yl),e)}}$l=new WeakMap,Ll=new WeakMap,Bl=new WeakMap,Vl=new WeakMap,jl=new WeakMap,zl=new WeakMap,Ul=new WeakMap,Gl=new WeakMap,Hl=new WeakMap,Wl=new WeakMap,Kl=new WeakMap,ql=new WeakMap,Yl=new WeakMap;var Nh,Xl,Ql;class j${constructor(e,r){z(this,"cell");z(this,"id");z(this,"ref");L(this,Nh,R(()=>this.cell.isFocusedDate?0:this.cell.isOutsideMonth&&this.cell.root.disableDaysOutsideMonth.current||this.cell.isDisabled?void 0:-1));L(this,Xl,R(()=>({disabled:this.cell.isDisabled,unavailable:this.cell.isUnavailable,selected:this.cell.isSelectedDate,day:`${this.cell.date.current.day}`})));L(this,Ql,R(()=>({id:this.id.current,role:"button","aria-label":this.cell.labelText,"aria-disabled":mo(this.cell.ariaDisabled),...this.cell.sharedDataAttrs,tabindex:p(_(this,Nh)),[this.cell.root.getBitsAttr("day")]:"","data-bits-day":"",onclick:this.onclick})));this.cell=r,this.id=e.id,this.ref=e.ref,this.onclick=this.onclick.bind(this),dt({id:this.id,ref:this.ref})}onclick(e){this.cell.isDisabled||this.cell.root.handleCellClick(e,this.cell.date.current)}get snippetProps(){return p(_(this,Xl))}set snippetProps(e){U(_(this,Xl),e)}get props(){return p(_(this,Ql))}set props(e){U(_(this,Ql),e)}}Nh=new WeakMap,Xl=new WeakMap,Ql=new WeakMap;var Zl,Jl;class z${constructor(e,r){z(this,"root");z(this,"id");z(this,"ref");L(this,Zl,R(()=>this.root.isNextButtonDisabled));L(this,Jl,R(()=>({id:this.id.current,role:"button",type:"button","aria-label":"Next","aria-disabled":mo(this.isDisabled),"data-disabled":nr(this.isDisabled),disabled:this.isDisabled,[this.root.getBitsAttr("next-button")]:"",onclick:this.onclick})));this.root=r,this.id=e.id,this.ref=e.ref,this.onclick=this.onclick.bind(this),dt({id:this.id,ref:this.ref})}get isDisabled(){return p(_(this,Zl))}set isDisabled(e){U(_(this,Zl),e)}onclick(e){this.isDisabled||this.root.nextPage()}get props(){return p(_(this,Jl))}set props(e){U(_(this,Jl),e)}}Zl=new WeakMap,Jl=new WeakMap;var ec,tc;class U${constructor(e,r){z(this,"root");z(this,"id");z(this,"ref");L(this,ec,R(()=>this.root.isPrevButtonDisabled));L(this,tc,R(()=>({id:this.id.current,role:"button",type:"button","aria-label":"Previous","aria-disabled":mo(this.isDisabled),"data-disabled":nr(this.isDisabled),disabled:this.isDisabled,[this.root.getBitsAttr("prev-button")]:"",onclick:this.onclick})));this.root=r,this.id=e.id,this.ref=e.ref,this.onclick=this.onclick.bind(this),dt({id:this.id,ref:this.ref})}get isDisabled(){return p(_(this,ec))}set isDisabled(e){U(_(this,ec),e)}onclick(e){this.isDisabled||this.root.prevPage()}get props(){return p(_(this,tc))}set props(e){U(_(this,tc),e)}}ec=new WeakMap,tc=new WeakMap;var rc;class G${constructor(e,r){z(this,"root");z(this,"id");z(this,"ref");L(this,rc,R(()=>({id:this.id.current,tabindex:-1,role:"grid","aria-readonly":I6(this.root.readonly.current),"aria-disabled":mo(this.root.disabled.current),"data-readonly":ea(this.root.readonly.current),"data-disabled":nr(this.root.disabled.current),[this.root.getBitsAttr("grid")]:""})));this.root=r,this.id=e.id,this.ref=e.ref,dt({id:this.id,ref:this.ref})}get props(){return p(_(this,rc))}set props(e){U(_(this,rc),e)}}rc=new WeakMap;var nc;class H${constructor(e,r){z(this,"root");z(this,"id");z(this,"ref");L(this,nc,R(()=>({id:this.id.current,"data-disabled":nr(this.root.disabled.current),"data-readonly":ea(this.root.readonly.current),[this.root.getBitsAttr("grid-body")]:""})));this.root=r,this.id=e.id,this.ref=e.ref,dt({id:this.id,ref:this.ref})}get props(){return p(_(this,nc))}set props(e){U(_(this,nc),e)}}nc=new WeakMap;var ic;class W${constructor(e,r){z(this,"root");z(this,"id");z(this,"ref");L(this,ic,R(()=>({id:this.id.current,"data-disabled":nr(this.root.disabled.current),"data-readonly":ea(this.root.readonly.current),[this.root.getBitsAttr("grid-head")]:""})));this.root=r,this.id=e.id,this.ref=e.ref,dt({id:this.id,ref:this.ref})}get props(){return p(_(this,ic))}set props(e){U(_(this,ic),e)}}ic=new WeakMap;var ac;class K${constructor(e,r){z(this,"root");z(this,"id");z(this,"ref");L(this,ac,R(()=>({id:this.id.current,"data-disabled":nr(this.root.disabled.current),"data-readonly":ea(this.root.readonly.current),[this.root.getBitsAttr("grid-row")]:""})));this.root=r,this.id=e.id,this.ref=e.ref,dt({id:this.id,ref:this.ref})}get props(){return p(_(this,ac))}set props(e){U(_(this,ac),e)}}ac=new WeakMap;var sc;class q${constructor(e,r){z(this,"root");z(this,"id");z(this,"ref");L(this,sc,R(()=>({id:this.id.current,"data-disabled":nr(this.root.disabled.current),"data-readonly":ea(this.root.readonly.current),[this.root.getBitsAttr("head-cell")]:""})));this.root=r,this.id=e.id,this.ref=e.ref,dt({id:this.id,ref:this.ref})}get props(){return p(_(this,sc))}set props(e){U(_(this,sc),e)}}sc=new WeakMap;var oc;class Y${constructor(e,r){z(this,"root");z(this,"id");z(this,"ref");L(this,oc,R(()=>({id:this.id.current,"data-disabled":nr(this.root.disabled.current),"data-readonly":ea(this.root.readonly.current),[this.root.getBitsAttr("header")]:""})));this.root=r,this.id=e.id,this.ref=e.ref,dt({id:this.id,ref:this.ref})}get props(){return p(_(this,oc))}set props(e){U(_(this,oc),e)}}oc=new WeakMap;const[X$,ni]=Jn(["Calendar.Root","RangeCalendar.Root"],"Calendar.Root",!1),[Q$,Z$]=Jn("Calendar.Cell");function J$(t){return X$(new L$(t))}function eL(t){const e=ni();return new G$(t,e)}function tL(t){const e=ni();return Q$(new V$(t,e))}function rL(t){const e=ni();return new z$(t,e)}function nL(t){const e=ni();return new U$(t,e)}function iL(t){const e=Z$();return new j$(t,e)}function aL(t){const e=ni();return new H$(t,e)}function sL(t){const e=ni();return new W$(t,e)}function oL(t){const e=ni();return new K$(t,e)}function lL(t){const e=ni();return new q$(t,e)}function cL(t){const e=ni();return new Y$(t,e)}function dL(t){const e=ni();return new B$(t,e)}var uL=H("<div><!></div>");function fL(t,e){le(e,!0);let r=T(e,"id",19,et),n=T(e,"ref",15,null),i=T(e,"value",15),a=T(e,"onValueChange",3,xt),s=T(e,"placeholder",15),o=T(e,"onPlaceholderChange",3,xt),l=T(e,"weekdayFormat",3,"narrow"),c=T(e,"weekStartsOn",3,0),d=T(e,"pagedNavigation",3,!1),u=T(e,"isDateDisabled",3,()=>!1),g=T(e,"isDateUnavailable",3,()=>!1),f=T(e,"fixedWeeks",3,!1),h=T(e,"numberOfMonths",3,1),m=T(e,"locale",3,"en"),v=T(e,"calendarLabel",3,"Event"),b=T(e,"disabled",3,!1),x=T(e,"readonly",3,!1),y=T(e,"minValue",3,void 0),S=T(e,"maxValue",3,void 0),I=T(e,"preventDeselect",3,!1),C=T(e,"disableDaysOutsideMonth",3,!0),D=T(e,"initialFocus",3,!1),E=T(e,"controlledValue",3,!1),O=T(e,"controlledPlaceholder",3,!1),A=Ce(e,["$$slots","$$events","$$legacy","child","children","id","ref","value","onValueChange","placeholder","onPlaceholderChange","weekdayFormat","weekStartsOn","pagedNavigation","isDateDisabled","isDateUnavailable","fixedWeeks","numberOfMonths","locale","calendarLabel","disabled","readonly","minValue","maxValue","preventDeselect","type","disableDaysOutsideMonth","initialFocus","controlledValue","controlledPlaceholder"]);if(s()===void 0){const te=m$({defaultPlaceholder:void 0,defaultValue:i()});O()?o()(te):s(te)}if(i()===void 0){const te=e.type==="single"?"":[];E()?a()(te):i(te)}i()===void 0&&i(e.type==="single"?void 0:[]);const k=J$({id:W.with(()=>r()),ref:W.with(()=>n(),te=>n(te)),weekdayFormat:W.with(()=>l()),weekStartsOn:W.with(()=>c()),pagedNavigation:W.with(()=>d()),isDateDisabled:W.with(()=>u()),isDateUnavailable:W.with(()=>g()),fixedWeeks:W.with(()=>f()),numberOfMonths:W.with(()=>h()),locale:W.with(()=>m()),calendarLabel:W.with(()=>v()),readonly:W.with(()=>x()),disabled:W.with(()=>b()),minValue:W.with(()=>y()),maxValue:W.with(()=>S()),disableDaysOutsideMonth:W.with(()=>C()),initialFocus:W.with(()=>D()),placeholder:W.with(()=>s(),te=>{O()||s(te),o()(te)}),preventDeselect:W.with(()=>I()),value:W.with(()=>i(),te=>{E()||i(te),a()(te)}),type:W.with(()=>e.type)}),V=R(()=>Ge(A,k.props));var G=F(),K=P(G);{var j=te=>{var q=F(),Z=P(q),ee=fr(()=>({props:p(V),...k.snippetProps}));ge(Z,()=>e.child,()=>p(ee)),w(te,q)},Q=te=>{var q=uL();let Z;var ee=re(q);ge(ee,()=>e.children??Ve,()=>k.snippetProps),ne(q),Ee(()=>Z=Fe(q,Z,{...p(V)})),w(te,q)};fe(K,te=>{e.child?te(j):te(Q,!1)})}w(t,G),ce()}var hL=H("<div><!></div>");function gL(t,e){le(e,!0);let r=T(e,"ref",15,null),n=T(e,"id",19,et),i=Ce(e,["$$slots","$$events","$$legacy","children","child","ref","id"]);const a=iL({id:W.with(()=>n()),ref:W.with(()=>r(),u=>r(u))}),s=R(()=>Ge(i,a.props));var o=F(),l=P(o);{var c=u=>{var g=F(),f=P(g),h=fr(()=>({props:p(s),...a.snippetProps}));ge(f,()=>e.child,()=>p(h)),w(u,g)},d=u=>{var g=hL();let f;var h=re(g);{var m=b=>{var x=F(),y=P(x);ge(y,()=>e.children??Ve,()=>a.snippetProps),w(b,x)},v=b=>{var x=Ke();Ee(()=>pt(x,a.cell.date.current.day)),w(b,x)};fe(h,b=>{e.children?b(m):b(v,!1)})}ne(g),Ee(()=>f=Fe(g,f,{...p(s)})),w(u,g)};fe(l,u=>{e.child?u(c):u(d,!1)})}w(t,o),ce()}var pL=H("<table><!></table>");function mL(t,e){le(e,!0);let r=T(e,"ref",15,null),n=T(e,"id",19,et),i=Ce(e,["$$slots","$$events","$$legacy","children","child","ref","id"]);const a=eL({id:W.with(()=>n()),ref:W.with(()=>r(),u=>r(u))}),s=R(()=>Ge(i,a.props));var o=F(),l=P(o);{var c=u=>{var g=F(),f=P(g);ge(f,()=>e.child,()=>({props:p(s)})),w(u,g)},d=u=>{var g=pL();let f;var h=re(g);ge(h,()=>e.children??Ve),ne(g),Ee(()=>f=Fe(g,f,{...p(s)})),w(u,g)};fe(l,u=>{e.child?u(c):u(d,!1)})}w(t,o),ce()}var vL=H("<tbody><!></tbody>");function yL(t,e){le(e,!0);let r=T(e,"ref",15,null),n=T(e,"id",19,et),i=Ce(e,["$$slots","$$events","$$legacy","children","child","ref","id"]);const a=aL({id:W.with(()=>n()),ref:W.with(()=>r(),u=>r(u))}),s=R(()=>Ge(i,a.props));var o=F(),l=P(o);{var c=u=>{var g=F(),f=P(g);ge(f,()=>e.child,()=>({props:p(s)})),w(u,g)},d=u=>{var g=vL();let f;var h=re(g);ge(h,()=>e.children??Ve),ne(g),Ee(()=>f=Fe(g,f,{...p(s)})),w(u,g)};fe(l,u=>{e.child?u(c):u(d,!1)})}w(t,o),ce()}var bL=H("<td><!></td>");function _L(t,e){le(e,!0);let r=T(e,"ref",15,null),n=T(e,"id",19,et),i=Ce(e,["$$slots","$$events","$$legacy","children","child","ref","id","date","month"]);const a=tL({id:W.with(()=>n()),ref:W.with(()=>r(),u=>r(u)),date:W.with(()=>e.date),month:W.with(()=>e.month)}),s=R(()=>Ge(i,a.props));var o=F(),l=P(o);{var c=u=>{var g=F(),f=P(g),h=fr(()=>({props:p(s),...a.snippetProps}));ge(f,()=>e.child,()=>p(h)),w(u,g)},d=u=>{var g=bL();let f;var h=re(g);ge(h,()=>e.children??Ve,()=>a.snippetProps),ne(g),Ee(()=>f=Fe(g,f,{...p(s)})),w(u,g)};fe(l,u=>{e.child?u(c):u(d,!1)})}w(t,o),ce()}var wL=H("<thead><!></thead>");function SL(t,e){le(e,!0);let r=T(e,"ref",15,null),n=T(e,"id",19,et),i=Ce(e,["$$slots","$$events","$$legacy","children","child","ref","id"]);const a=sL({id:W.with(()=>n()),ref:W.with(()=>r(),u=>r(u))}),s=R(()=>Ge(i,a.props));var o=F(),l=P(o);{var c=u=>{var g=F(),f=P(g);ge(f,()=>e.child,()=>({props:p(s)})),w(u,g)},d=u=>{var g=wL();let f;var h=re(g);ge(h,()=>e.children??Ve),ne(g),Ee(()=>f=Fe(g,f,{...p(s)})),w(u,g)};fe(l,u=>{e.child?u(c):u(d,!1)})}w(t,o),ce()}var xL=H("<th><!></th>");function IL(t,e){le(e,!0);let r=T(e,"ref",15,null),n=T(e,"id",19,et),i=Ce(e,["$$slots","$$events","$$legacy","children","child","ref","id"]);const a=lL({id:W.with(()=>n()),ref:W.with(()=>r(),u=>r(u))}),s=R(()=>Ge(i,a.props));var o=F(),l=P(o);{var c=u=>{var g=F(),f=P(g);ge(f,()=>e.child,()=>({props:p(s)})),w(u,g)},d=u=>{var g=xL();let f;var h=re(g);ge(h,()=>e.children??Ve),ne(g),Ee(()=>f=Fe(g,f,{...p(s)})),w(u,g)};fe(l,u=>{e.child?u(c):u(d,!1)})}w(t,o),ce()}var CL=H("<tr><!></tr>");function PL(t,e){le(e,!0);let r=T(e,"ref",15,null),n=T(e,"id",19,et),i=Ce(e,["$$slots","$$events","$$legacy","children","child","ref","id"]);const a=oL({id:W.with(()=>n()),ref:W.with(()=>r(),u=>r(u))}),s=R(()=>Ge(i,a.props));var o=F(),l=P(o);{var c=u=>{var g=F(),f=P(g);ge(f,()=>e.child,()=>({props:p(s)})),w(u,g)},d=u=>{var g=CL();let f;var h=re(g);ge(h,()=>e.children??Ve),ne(g),Ee(()=>f=Fe(g,f,{...p(s)})),w(u,g)};fe(l,u=>{e.child?u(c):u(d,!1)})}w(t,o),ce()}var EL=H("<header><!></header>");function AL(t,e){le(e,!0);let r=T(e,"ref",15,null),n=T(e,"id",19,et),i=Ce(e,["$$slots","$$events","$$legacy","children","child","ref","id"]);const a=cL({id:W.with(()=>n()),ref:W.with(()=>r(),u=>r(u))}),s=R(()=>Ge(i,a.props));var o=F(),l=P(o);{var c=u=>{var g=F(),f=P(g);ge(f,()=>e.child,()=>({props:p(s)})),w(u,g)},d=u=>{var g=EL();let f;var h=re(g);ge(h,()=>e.children??Ve),ne(g),Ee(()=>f=Fe(g,f,{...p(s)})),w(u,g)};fe(l,u=>{e.child?u(c):u(d,!1)})}w(t,o),ce()}var TL=H("<div><!></div>");function OL(t,e){le(e,!0);let r=T(e,"ref",15,null),n=T(e,"id",19,et),i=Ce(e,["$$slots","$$events","$$legacy","children","child","ref","id"]);const a=dL({id:W.with(()=>n()),ref:W.with(()=>r(),u=>r(u))}),s=R(()=>Ge(i,a.props));var o=F(),l=P(o);{var c=u=>{var g=F(),f=P(g);ge(f,()=>e.child,()=>({props:p(s),headingValue:a.headingValue})),w(u,g)},d=u=>{var g=TL();let f;var h=re(g);{var m=b=>{var x=F(),y=P(x);ge(y,()=>e.children??Ve,()=>({headingValue:a.headingValue})),w(b,x)},v=b=>{var x=Ke();Ee(()=>pt(x,a.headingValue)),w(b,x)};fe(h,b=>{e.children?b(m):b(v,!1)})}ne(g),Ee(()=>f=Fe(g,f,{...p(s)})),w(u,g)};fe(l,u=>{e.child?u(c):u(d,!1)})}w(t,o),ce()}var kL=H("<button><!></button>");function RL(t,e){le(e,!0);let r=T(e,"id",19,et),n=T(e,"ref",15,null),i=Ce(e,["$$slots","$$events","$$legacy","children","child","id","ref"]);const a=rL({id:W.with(()=>r()),ref:W.with(()=>n(),u=>n(u))}),s=R(()=>Ge(i,a.props));var o=F(),l=P(o);{var c=u=>{var g=F(),f=P(g);ge(f,()=>e.child,()=>({props:p(s)})),w(u,g)},d=u=>{var g=kL();let f;var h=re(g);ge(h,()=>e.children??Ve),ne(g),Ee(()=>f=Fe(g,f,{...p(s)})),w(u,g)};fe(l,u=>{e.child?u(c):u(d,!1)})}w(t,o),ce()}var ML=H("<button><!></button>");function DL(t,e){le(e,!0);let r=T(e,"id",19,et),n=T(e,"ref",15,null),i=Ce(e,["$$slots","$$events","$$legacy","children","child","id","ref"]);const a=nL({id:W.with(()=>r()),ref:W.with(()=>n(),u=>n(u))}),s=R(()=>Ge(i,a.props));var o=F(),l=P(o);{var c=u=>{var g=F(),f=P(g);ge(f,()=>e.child,()=>({props:p(s)})),w(u,g)},d=u=>{var g=ML();let f;var h=re(g);ge(h,()=>e.children??Ve),ne(g),Ee(()=>f=Fe(g,f,{...p(s)})),w(u,g)};fe(l,u=>{e.child?u(c):u(d,!1)})}w(t,o),ce()}var NL=H("<span><!></span>");function FL(t,e){le(e,!0);let r=Ce(e,["$$slots","$$events","$$legacy","children","child"]);const n={position:"absolute",border:0,width:"1px",display:"inline-block",height:"1px",padding:0,margin:"-1px",overflow:"hidden",clip:"rect(0 0 0 0)",whiteSpace:"nowrap",wordWrap:"normal"},i=R(()=>Ge(r,{style:n}));var a=F(),s=P(a);{var o=c=>{var d=F(),u=P(d);ge(u,()=>e.child,()=>({props:p(i)})),w(c,d)},l=c=>{var d=NL();let u;var g=re(d);ge(g,()=>e.children??Ve),ne(d),Ee(()=>u=Fe(d,u,{...p(i)})),w(c,d)};fe(s,c=>{e.child?c(o):c(l,!1)})}w(t,a),ce()}function $L(t){const e=E6("",1e3);function r(i,a){if(!t.enabled||!a.length)return;e.current=e.current+i;const s=t.getCurrentItem(),o=a.find(u=>u===s)??"",l=a.map(u=>u??""),c=N6(l,e.current,o),d=a.find(u=>u===c);return d&&t.onMatch(d),d}function n(){e.current=""}return{search:e,handleTypeaheadSearch:r,resetTypeahead:n}}const LL=[In,B_,tg],BL=[Un,V_,rg],VL=[...LL,...BL];var lc,cc,dc,uc,fc,hc,gc,pc,mc,vc,yc,bc,_c;class s4{constructor(e){z(this,"disabled");z(this,"required");z(this,"name");z(this,"loop");z(this,"open");z(this,"scrollAlignment");z(this,"items");z(this,"allowDeselect");L(this,lc,Me(!1));L(this,cc,Me(""));L(this,dc,Me(null));L(this,uc,Me(null));L(this,fc,Me(null));L(this,hc,Me(""));L(this,gc,Me(null));L(this,pc,R(()=>this.highlightedNode?this.highlightedNode.getAttribute("data-value"):null));L(this,mc,R(()=>{if(this.highlightedNode)return this.highlightedNode.id}));L(this,vc,R(()=>this.highlightedNode?this.highlightedNode.getAttribute("data-label"):null));L(this,yc,Me(!1));L(this,bc,Me(!1));z(this,"bitsAttrs");L(this,_c,Me({x:0,y:0}));this.disabled=e.disabled,this.required=e.required,this.name=e.name,this.loop=e.loop,this.open=e.open,this.scrollAlignment=e.scrollAlignment,this.isCombobox=e.isCombobox,this.items=e.items,this.allowDeselect=e.allowDeselect,this.bitsAttrs=dB(this),v6(()=>{this.open.current||this.setHighlightedNode(null)})}get touchedInput(){return p(_(this,lc))}set touchedInput(e){U(_(this,lc),e,!0)}get inputValue(){return p(_(this,cc))}set inputValue(e){U(_(this,cc),e,!0)}get inputNode(){return p(_(this,dc))}set inputNode(e){U(_(this,dc),e,!0)}get contentNode(){return p(_(this,uc))}set contentNode(e){U(_(this,uc),e,!0)}get triggerNode(){return p(_(this,fc))}set triggerNode(e){U(_(this,fc),e,!0)}get valueId(){return p(_(this,hc))}set valueId(e){U(_(this,hc),e,!0)}get highlightedNode(){return p(_(this,gc))}set highlightedNode(e){U(_(this,gc),e,!0)}get highlightedValue(){return p(_(this,pc))}set highlightedValue(e){U(_(this,pc),e)}get highlightedId(){return p(_(this,mc))}set highlightedId(e){U(_(this,mc),e)}get highlightedLabel(){return p(_(this,vc))}set highlightedLabel(e){U(_(this,vc),e)}get isUsingKeyboard(){return p(_(this,yc))}set isUsingKeyboard(e){U(_(this,yc),e,!0)}get isCombobox(){return p(_(this,bc))}set isCombobox(e){U(_(this,bc),e,!0)}get triggerPointerDownPos(){return p(_(this,_c))}set triggerPointerDownPos(e){U(_(this,_c),e)}setHighlightedNode(e){this.highlightedNode=e,e&&this.isUsingKeyboard&&e.scrollIntoView({block:"nearest"})}getCandidateNodes(){const e=this.contentNode;return e?Array.from(e.querySelectorAll(`[${this.bitsAttrs.item}]:not([data-disabled])`)):[]}setHighlightedToFirstCandidate(){this.setHighlightedNode(null);const e=this.getCandidateNodes();e.length&&this.setHighlightedNode(e[0])}getNodeByValue(e){return this.getCandidateNodes().find(n=>n.dataset.value===e)??null}setOpen(e){this.open.current=e}toggleOpen(){this.open.current=!this.open.current}handleOpen(){this.setOpen(!0)}handleClose(){this.setHighlightedNode(null),this.setOpen(!1)}toggleMenu(){this.toggleOpen()}}lc=new WeakMap,cc=new WeakMap,dc=new WeakMap,uc=new WeakMap,fc=new WeakMap,hc=new WeakMap,gc=new WeakMap,pc=new WeakMap,mc=new WeakMap,vc=new WeakMap,yc=new WeakMap,bc=new WeakMap,_c=new WeakMap;var wc,Sc,xc,Ic;class jL extends s4{constructor(r){super(r);z(this,"value");z(this,"isMulti",!1);L(this,wc,R(()=>this.value.current!==""));L(this,Sc,R(()=>{var n;return this.items.current.length?((n=this.items.current.find(i=>i.value===this.value.current))==null?void 0:n.label)??"":""}));L(this,xc,R(()=>this.items.current.length?this.items.current.filter(n=>!n.disabled).map(n=>n.label):[]));L(this,Ic,R(()=>!(this.isMulti||this.items.current.length===0)));this.value=r.value,qe(()=>{!this.open.current&&this.highlightedNode&&this.setHighlightedNode(null)}),qe(()=>{this.open.current&&yi(()=>{this.setInitialHighlightedNode()})})}get hasValue(){return p(_(this,wc))}set hasValue(r){U(_(this,wc),r)}get currentLabel(){return p(_(this,Sc))}set currentLabel(r){U(_(this,Sc),r)}get candidateLabels(){return p(_(this,xc))}set candidateLabels(r){U(_(this,xc),r)}get dataTypeaheadEnabled(){return p(_(this,Ic))}set dataTypeaheadEnabled(r){U(_(this,Ic),r)}includesItem(r){return this.value.current===r}toggleItem(r,n=r){this.value.current=this.includesItem(r)?"":r,this.inputValue=n}setInitialHighlightedNode(){if(this.highlightedNode&&document.contains(this.highlightedNode))return;if(this.value.current!==""){const n=this.getNodeByValue(this.value.current);if(n){this.setHighlightedNode(n);return}}const r=this.getCandidateNodes()[0];r&&this.setHighlightedNode(r)}}wc=new WeakMap,Sc=new WeakMap,xc=new WeakMap,Ic=new WeakMap;var Cc;class zL extends s4{constructor(r){super(r);z(this,"value");z(this,"isMulti",!0);L(this,Cc,R(()=>this.value.current.length>0));this.value=r.value,qe(()=>{this.open.current&&yi(()=>{this.highlightedNode||this.setInitialHighlightedNode()})})}get hasValue(){return p(_(this,Cc))}set hasValue(r){U(_(this,Cc),r)}includesItem(r){return this.value.current.includes(r)}toggleItem(r,n=r){this.includesItem(r)?this.value.current=this.value.current.filter(i=>i!==r):this.value.current=[...this.value.current,r],this.inputValue=n}setInitialHighlightedNode(){if(this.highlightedNode)return;if(this.value.current.length&&this.value.current[0]!==""){const n=this.getNodeByValue(this.value.current[0]);if(n){this.setHighlightedNode(n);return}}const r=this.getCandidateNodes()[0];r&&this.setHighlightedNode(r)}}Cc=new WeakMap;var Ps,Pc,Es,As,Ua,o4,T1,Ec;class UL{constructor(e,r){L(this,Ua);L(this,Ps);L(this,Pc);z(this,"root");L(this,Es);L(this,As);z(this,"onpointerdown",e=>{if(this.root.disabled.current)return;if(e.pointerType==="touch")return e.preventDefault();const r=e.target;r!=null&&r.hasPointerCapture(e.pointerId)&&(r==null||r.releasePointerCapture(e.pointerId)),e.button===0&&e.ctrlKey===!1&&(this.root.open.current===!1?(Nt(this,Ua,T1).call(this,e),e.preventDefault()):this.root.handleClose())});z(this,"onpointerup",e=>{e.preventDefault(),e.pointerType==="touch"&&Nt(this,Ua,T1).call(this,e)});L(this,Ec,R(()=>({id:_(this,Ps).current,disabled:this.root.disabled.current?!0:void 0,"aria-haspopup":"listbox","data-state":Lu(this.root.open.current),"data-disabled":nr(this.root.disabled.current),"data-placeholder":this.root.hasValue?void 0:"",[this.root.bitsAttrs.trigger]:"",onpointerdown:this.onpointerdown,onkeydown:this.onkeydown,onclick:this.onclick,onpointerup:this.onpointerup})));this.root=r,De(this,Ps,e.id),De(this,Pc,e.ref),dt({id:_(this,Ps),ref:_(this,Pc),onRefChange:n=>{this.root.triggerNode=n}}),De(this,Es,F6({getCurrentItem:()=>this.root.highlightedNode,onMatch:n=>{this.root.setHighlightedNode(n)}})),De(this,As,$L({getCurrentItem:()=>this.root.isMulti?"":this.root.currentLabel,onMatch:n=>{if(this.root.isMulti||!this.root.items.current)return;const i=this.root.items.current.find(a=>a.label===n);i&&(this.root.value.current=i.value)},enabled:!this.root.isMulti&&this.root.dataTypeaheadEnabled})),this.onkeydown=this.onkeydown.bind(this),this.onpointerdown=this.onpointerdown.bind(this),this.onpointerup=this.onpointerup.bind(this),this.onclick=this.onclick.bind(this)}onkeydown(e){if(this.root.isUsingKeyboard=!0,(e.key===Un||e.key===In)&&e.preventDefault(),!this.root.open.current){if(e.key===Na||e.key===Fa||e.key===In||e.key===Un)e.preventDefault(),this.root.handleOpen();else if(!this.root.isMulti&&this.root.dataTypeaheadEnabled){_(this,As).handleTypeaheadSearch(e.key,this.root.candidateLabels);return}yi(()=>{if(this.root.hasValue)return;const a=this.root.getCandidateNodes();if(a.length){if(e.key===In){const s=a[0];this.root.setHighlightedNode(s)}else if(e.key===Un){const s=a[a.length-1];this.root.setHighlightedNode(s)}}});return}if(e.key===G0){this.root.handleClose();return}if((e.key===Na||e.key===Fa)&&!e.isComposing){e.preventDefault();const a=this.root.highlightedValue,s=a===this.root.value.current;if(!this.root.allowDeselect.current&&s&&!this.root.isMulti){this.root.handleClose();return}a!==null&&this.root.toggleItem(a,this.root.highlightedLabel??void 0),!this.root.isMulti&&!s&&this.root.handleClose()}if(e.key===Un&&e.altKey&&this.root.handleClose(),VL.includes(e.key)){e.preventDefault();const a=this.root.getCandidateNodes(),s=this.root.highlightedNode,o=s?a.indexOf(s):-1,l=this.root.loop.current;let c;if(e.key===In?c=$6(a,o,l):e.key===Un?c=L6(a,o,l):e.key===V_?c=B6(a,o,10,l):e.key===B_?c=V6(a,o,10,l):e.key===tg?c=a[0]:e.key===rg&&(c=a[a.length-1]),!c)return;this.root.setHighlightedNode(c);return}const r=e.ctrlKey||e.altKey||e.metaKey,n=e.key.length===1;if(e.code==="Space")return;const i=this.root.getCandidateNodes();if(e.key!==G0){if(!r&&n){_(this,Es).handleTypeaheadSearch(e.key,i);return}this.root.highlightedNode||this.root.setHighlightedToFirstCandidate()}}onclick(e){e.currentTarget.focus()}get props(){return p(_(this,Ec))}set props(e){U(_(this,Ec),e)}}Ps=new WeakMap,Pc=new WeakMap,Es=new WeakMap,As=new WeakMap,Ua=new WeakSet,o4=function(){this.root.open.current=!0,_(this,As).resetTypeahead(),_(this,Es).resetTypeahead()},T1=function(e){Nt(this,Ua,o4).call(this),this.root.triggerPointerDownPos={x:Math.round(e.pageX),y:Math.round(e.pageY)}},Ec=new WeakMap;var Ac,Tc,Fh,Oc,kc;class GL{constructor(e,r){z(this,"id");z(this,"ref");L(this,Ac,Me(null));z(this,"root");L(this,Tc,Me(!1));L(this,Fh,R(()=>this.root.isCombobox?{"--bits-combobox-content-transform-origin":"var(--bits-floating-transform-origin)","--bits-combobox-content-available-width":"var(--bits-floating-available-width)","--bits-combobox-content-available-height":"var(--bits-floating-available-height)","--bits-combobox-anchor-width":"var(--bits-floating-anchor-width)","--bits-combobox-anchor-height":"var(--bits-floating-anchor-height)"}:{"--bits-select-content-transform-origin":"var(--bits-floating-transform-origin)","--bits-select-content-available-width":"var(--bits-floating-available-width)","--bits-select-content-available-height":"var(--bits-floating-available-height)","--bits-select-anchor-width":"var(--bits-floating-anchor-width)","--bits-select-anchor-height":"var(--bits-floating-anchor-height)"}));L(this,Oc,R(()=>({open:this.root.open.current})));L(this,kc,R(()=>({id:this.id.current,role:"listbox","data-state":Lu(this.root.open.current),[this.root.bitsAttrs.content]:"",style:{display:"flex",flexDirection:"column",outline:"none",boxSizing:"border-box",pointerEvents:"auto",...p(_(this,Fh))},onpointermove:this.onpointermove})));this.root=r,this.id=e.id,this.ref=e.ref,dt({id:this.id,ref:this.ref,onRefChange:n=>{this.root.contentNode=n},deps:()=>this.root.open.current}),qe(()=>()=>{this.root.contentNode=null}),qe(()=>{this.root.open.current===!1&&(this.isPositioned=!1)}),this.onpointermove=this.onpointermove.bind(this),this.handleInteractOutside=this.handleInteractOutside.bind(this)}get viewportNode(){return p(_(this,Ac))}set viewportNode(e){U(_(this,Ac),e,!0)}get isPositioned(){return p(_(this,Tc))}set isPositioned(e){U(_(this,Tc),e,!0)}onpointermove(e){this.root.isUsingKeyboard=!1}handleInteractOutside(e){(e.target===this.root.triggerNode||e.target===this.root.inputNode)&&e.preventDefault()}get snippetProps(){return p(_(this,Oc))}set snippetProps(e){U(_(this,Oc),e)}get props(){return p(_(this,kc))}set props(e){U(_(this,kc),e)}}Ac=new WeakMap,Tc=new WeakMap,Fh=new WeakMap,Oc=new WeakMap,kc=new WeakMap;var Ts,xa,Rc,Mc,Dc,Nc,Fc,$c;class HL{constructor(e,r){L(this,Ts);L(this,xa);z(this,"root");z(this,"value");z(this,"label");z(this,"onHighlight");z(this,"onUnhighlight");z(this,"disabled");L(this,Rc,R(()=>this.root.includesItem(this.value.current)));L(this,Mc,R(()=>this.root.highlightedValue===this.value.current));z(this,"prevHighlighted",new j6(()=>this.isHighlighted));L(this,Dc,Me(""));L(this,Nc,Me(!1));L(this,Fc,R(()=>({selected:this.isSelected,highlighted:this.isHighlighted})));L(this,$c,R(()=>({id:_(this,Ts).current,role:"option","aria-selected":this.root.includesItem(this.value.current)?"true":void 0,"data-value":this.value.current,"data-disabled":nr(this.disabled.current),"data-highlighted":this.root.highlightedValue===this.value.current?"":void 0,"data-selected":this.root.includesItem(this.value.current)?"":void 0,"data-label":this.label.current,[this.root.bitsAttrs.item]:"",onpointermove:this.onpointermove,onpointerdown:this.onpointerdown,onpointerup:this.onpointerup})));this.root=r,this.value=e.value,this.disabled=e.disabled,this.label=e.label,this.onHighlight=e.onHighlight,this.onUnhighlight=e.onUnhighlight,De(this,Ts,e.id),De(this,xa,e.ref),qe(()=>{this.isHighlighted?this.onHighlight.current():this.prevHighlighted.current&&this.onUnhighlight.current()}),dt({id:_(this,Ts),ref:_(this,xa)}),qe(()=>{this.mounted&&$e(()=>this.root.setInitialHighlightedNode())}),this.onpointerdown=this.onpointerdown.bind(this),this.onpointerup=this.onpointerup.bind(this),this.onpointermove=this.onpointermove.bind(this)}get isSelected(){return p(_(this,Rc))}set isSelected(e){U(_(this,Rc),e)}get isHighlighted(){return p(_(this,Mc))}set isHighlighted(e){U(_(this,Mc),e)}get textId(){return p(_(this,Dc))}set textId(e){U(_(this,Dc),e,!0)}get mounted(){return p(_(this,Nc))}set mounted(e){U(_(this,Nc),e,!0)}get snippetProps(){return p(_(this,Fc))}set snippetProps(e){U(_(this,Fc),e)}onpointerdown(e){e.preventDefault()}onpointerup(e){if(e.defaultPrevented||(e.preventDefault(),this.disabled.current))return;const r=this.value.current===this.root.value.current;if(!this.root.allowDeselect.current&&r&&!this.root.isMulti){this.root.handleClose();return}this.root.toggleItem(this.value.current,this.label.current),!this.root.isMulti&&!r&&this.root.handleClose()}onpointermove(e){this.root.highlightedNode!==_(this,xa).current&&this.root.setHighlightedNode(_(this,xa).current)}get props(){return p(_(this,$c))}set props(e){U(_(this,$c),e)}}Ts=new WeakMap,xa=new WeakMap,Rc=new WeakMap,Mc=new WeakMap,Dc=new WeakMap,Nc=new WeakMap,Fc=new WeakMap,$c=new WeakMap;var Os,Lc,Bc,Vc;class WL{constructor(e,r){L(this,Os);L(this,Lc);z(this,"root");L(this,Bc,Me(null));L(this,Vc,R(()=>{var e;return{id:_(this,Os).current,role:"group",[this.root.bitsAttrs.group]:"","aria-labelledby":((e=this.labelNode)==null?void 0:e.id)??void 0}}));De(this,Os,e.id),De(this,Lc,e.ref),this.root=r,dt({id:_(this,Os),ref:_(this,Lc)})}get labelNode(){return p(_(this,Bc))}set labelNode(e){U(_(this,Bc),e,!0)}get props(){return p(_(this,Vc))}set props(e){U(_(this,Vc),e)}}Os=new WeakMap,Lc=new WeakMap,Bc=new WeakMap,Vc=new WeakMap;var jc,zc,Uc;class KL{constructor(e,r){L(this,jc);z(this,"root");L(this,zc,R(()=>this.root.name.current!==""));L(this,Uc,R(()=>({disabled:N_(this.root.disabled.current),required:A6(this.root.required.current),name:this.root.name.current,value:_(this,jc).current,style:M_(T6),tabindex:-1,onfocus:this.onfocus})));this.root=r,De(this,jc,e.value),this.onfocus=this.onfocus.bind(this)}get shouldRender(){return p(_(this,zc))}set shouldRender(e){U(_(this,zc),e)}onfocus(e){var r,n;e.preventDefault(),this.root.isCombobox?(n=this.root.inputNode)==null||n.focus():(r=this.root.triggerNode)==null||r.focus()}get props(){return p(_(this,Uc))}set props(e){U(_(this,Uc),e)}}jc=new WeakMap,zc=new WeakMap,Uc=new WeakMap;var ks,Gc,Hc,Wc;class qL{constructor(e,r){L(this,ks);L(this,Gc);z(this,"root");z(this,"content");L(this,Hc,Me(0));L(this,Wc,R(()=>({id:_(this,ks).current,role:"presentation",[this.root.bitsAttrs.viewport]:"",style:{position:"relative",flex:1,overflow:"auto"}})));De(this,ks,e.id),De(this,Gc,e.ref),this.content=r,this.root=r.root,dt({id:_(this,ks),ref:_(this,Gc),onRefChange:n=>{this.content.viewportNode=n},deps:()=>this.root.open.current})}get prevScrollTop(){return p(_(this,Hc))}set prevScrollTop(e){U(_(this,Hc),e,!0)}get props(){return p(_(this,Wc))}set props(e){U(_(this,Wc),e)}}ks=new WeakMap,Gc=new WeakMap,Hc=new WeakMap,Wc=new WeakMap;var Kc,qc;class l4{constructor(e,r){z(this,"id");z(this,"ref");z(this,"content");z(this,"root");L(this,Kc,Me(null));z(this,"onAutoScroll",xt);z(this,"mounted");L(this,qc,R(()=>({id:this.id.current,"aria-hidden":iv(!0),style:{flexShrink:0},onpointerdown:this.onpointerdown,onpointermove:this.onpointermove,onpointerleave:this.onpointerleave})));this.ref=e.ref,this.id=e.id,this.mounted=e.mounted,this.content=r,this.root=r.root,dt({id:this.id,ref:this.ref,deps:()=>this.mounted.current}),qe(()=>{if(!this.mounted.current)return;const n=$e(()=>this.root.highlightedNode);n==null||n.scrollIntoView({block:"nearest"})}),this.onpointerdown=this.onpointerdown.bind(this),this.onpointermove=this.onpointermove.bind(this),this.onpointerleave=this.onpointerleave.bind(this)}get autoScrollTimer(){return p(_(this,Kc))}set autoScrollTimer(e){U(_(this,Kc),e,!0)}clearAutoScrollTimer(){this.autoScrollTimer!==null&&(window.clearInterval(this.autoScrollTimer),this.autoScrollTimer=null)}onpointerdown(e){this.autoScrollTimer===null&&(this.autoScrollTimer=window.setInterval(()=>{this.onAutoScroll()},50))}onpointermove(e){this.autoScrollTimer===null&&(this.autoScrollTimer=window.setInterval(()=>{this.onAutoScroll()},50))}onpointerleave(e){this.clearAutoScrollTimer()}get props(){return p(_(this,qc))}set props(e){U(_(this,qc),e)}}Kc=new WeakMap,qc=new WeakMap;var Yc,Xc;class YL{constructor(e){z(this,"state");z(this,"content");z(this,"root");L(this,Yc,Me(!1));z(this,"handleAutoScroll",()=>{yi(()=>{const e=this.content.viewportNode,r=this.root.highlightedNode;!e||!r||(e.scrollTop=e.scrollTop+r.offsetHeight)})});L(this,Xc,R(()=>({...this.state.props,[this.root.bitsAttrs["scroll-down-button"]]:""})));this.state=e,this.content=e.content,this.root=e.root,this.state.onAutoScroll=this.handleAutoScroll,qe(()=>{const r=this.content.viewportNode,n=this.content.isPositioned;if(!r||!n)return;let i=xt;return $e(()=>{const a=()=>{yi(()=>{const s=r.scrollHeight-r.clientHeight,o=Number.parseInt(getComputedStyle(r).paddingTop,10);this.canScrollDown=Math.ceil(r.scrollTop)<s-o})};a(),i=fs(r,"scroll",a)}),i}),qe(()=>{this.state.mounted.current||this.state.clearAutoScrollTimer()})}get canScrollDown(){return p(_(this,Yc))}set canScrollDown(e){U(_(this,Yc),e,!0)}get props(){return p(_(this,Xc))}set props(e){U(_(this,Xc),e)}}Yc=new WeakMap,Xc=new WeakMap;var Qc,Zc;class XL{constructor(e){z(this,"state");z(this,"content");z(this,"root");L(this,Qc,Me(!1));z(this,"handleAutoScroll",()=>{yi(()=>{const e=this.content.viewportNode,r=this.root.highlightedNode;!e||!r||(e.scrollTop=e.scrollTop-r.offsetHeight)})});L(this,Zc,R(()=>({...this.state.props,[this.root.bitsAttrs["scroll-up-button"]]:""})));this.state=e,this.content=e.content,this.root=e.root,this.state.onAutoScroll=this.handleAutoScroll,qe(()=>{const r=this.content.viewportNode,n=this.content.isPositioned;if(!r||!n)return;let i=xt;return $e(()=>{const a=()=>{const s=Number.parseInt(getComputedStyle(r).paddingTop,10);this.canScrollUp=r.scrollTop-s>0};a(),i=fs(r,"scroll",a)}),i}),qe(()=>{this.state.mounted.current||this.state.clearAutoScrollTimer()})}get canScrollUp(){return p(_(this,Qc))}set canScrollUp(e){U(_(this,Qc),e,!0)}get props(){return p(_(this,Zc))}set props(e){U(_(this,Zc),e)}}Qc=new WeakMap,Zc=new WeakMap;const[QL,ef]=Jn(["Select.Root","Combobox.Root"]),[ZL,vte]=Jn(["Select.Group","Combobox.Group"]),[JL,c0]=Jn(["Select.Content","Combobox.Content"]);function eB(t){const{type:e,...r}=t,n=e==="single"?new jL(r):new zL(r);return QL(n)}function tB(t){return JL(new GL(t,ef()))}function rB(t){return new UL(t,ef())}function nB(t){return new HL(t,ef())}function iB(t){return new qL(t,c0())}function aB(t){return new XL(new l4(t,c0()))}function sB(t){return new YL(new l4(t,c0()))}function oB(t){return ZL(new WL(t,ef()))}function lB(t){return new KL(t,ef())}const cB=["trigger","content","item","viewport","scroll-up-button","scroll-down-button","group","group-label","separator","arrow","input","content-wrapper","item-text","value"];function dB(t){const e=t.isCombobox,r={};for(const n of cB)r[n]=e?`data-combobox-${n}`:`data-select-${n}`;return r}var uB=H("<input>");function a2(t,e){le(e,!0);let r=T(e,"value",15,"");const n=lB({value:W.with(()=>r())});FL(t,{children:(i,a)=>{var s=F(),o=P(s);{var l=c=>{var d=uB();O6(d);let u;Ee(()=>u=Fe(d,u,{...n.props})),j_(d,r),w(c,d)};fe(o,c=>{n.shouldRender&&c(l)})}w(i,s)},$$slots:{default:!0}}),ce()}const fB="data-separator-root";var Rs,Jc,Ms,Ds,ed;class hB{constructor(e){L(this,Rs);L(this,Jc);L(this,Ms);L(this,Ds);L(this,ed,R(()=>({id:_(this,Rs).current,role:_(this,Ds).current?"none":"separator","aria-orientation":av(_(this,Ms).current),"aria-hidden":iv(_(this,Ds).current),"data-orientation":Da(_(this,Ms).current),[fB]:""})));De(this,Ms,e.orientation),De(this,Ds,e.decorative),De(this,Rs,e.id),De(this,Jc,e.ref),dt({id:_(this,Rs),ref:_(this,Jc)})}get props(){return p(_(this,ed))}set props(e){U(_(this,ed),e)}}Rs=new WeakMap,Jc=new WeakMap,Ms=new WeakMap,Ds=new WeakMap,ed=new WeakMap;function gB(t){return new hB(t)}var pB=H("<div><!></div>");function mB(t,e){le(e,!0);let r=T(e,"id",19,et),n=T(e,"ref",15,null),i=T(e,"decorative",3,!1),a=T(e,"orientation",3,"horizontal"),s=Ce(e,["$$slots","$$events","$$legacy","id","ref","child","children","decorative","orientation"]);const o=gB({ref:W.with(()=>n(),f=>n(f)),id:W.with(()=>r()),decorative:W.with(()=>i()),orientation:W.with(()=>a())}),l=R(()=>Ge(s,o.props));var c=F(),d=P(c);{var u=f=>{var h=F(),m=P(h);ge(m,()=>e.child,()=>({props:p(l)})),w(f,h)},g=f=>{var h=pB();let m;var v=re(h);ge(v,()=>e.children??Ve),ne(h),Ee(()=>m=Fe(h,m,{...p(l)})),w(f,h)};fe(d,f=>{e.child?f(u):f(g,!1)})}w(t,c),ce()}var vB=H("<div><div><!></div></div>"),yB=H("<div><div><!></div></div>");function bB(t,e){le(e,!0);let r=T(e,"id",19,et),n=T(e,"ref",15,null),i=T(e,"forceMount",3,!1),a=T(e,"side",3,"bottom"),s=T(e,"onInteractOutside",3,xt),o=T(e,"onEscapeKeydown",3,xt),l=T(e,"preventScroll",3,!1),c=Ce(e,["$$slots","$$events","$$legacy","id","ref","forceMount","side","onInteractOutside","onEscapeKeydown","children","child","preventScroll"]);const d=tB({id:W.with(()=>r()),ref:W.with(()=>n(),x=>n(x))}),u=R(()=>Ge(c,d.props));function g(x){d.handleInteractOutside(x),!x.defaultPrevented&&(s()(x),!x.defaultPrevented&&d.root.handleClose())}function f(x){o()(x),!x.defaultPrevented&&d.root.handleClose()}var h=F(),m=P(h);{var v=x=>{Bu(x,Be(()=>p(u),{get side(){return a()},get enabled(){return d.root.open.current},get id(){return r()},onInteractOutside:g,onEscapeKeydown:f,onOpenAutoFocus:S=>S.preventDefault(),onCloseAutoFocus:S=>S.preventDefault(),trapFocus:!1,loop:!1,get preventScroll(){return l()},onPlaced:()=>d.isPositioned=!0,forceMount:!0,popper:(S,I)=>{let C=()=>I==null?void 0:I().props,D=()=>I==null?void 0:I().wrapperProps;var E=F();const O=R(()=>Ge(C(),{style:d.props.style}));var A=P(E);{var k=G=>{var K=F(),j=P(K),Q=fr(()=>({props:p(O),wrapperProps:D(),...d.snippetProps}));ge(j,()=>e.child,()=>p(Q)),w(G,K)},V=G=>{var K=vB();let j;var Q=re(K);let te;var q=re(Q);ge(q,()=>e.children??Ve),ne(Q),ne(K),Ee(()=>{j=Fe(K,j,{...D()}),te=Fe(Q,te,{...p(O)})}),w(G,K)};fe(A,G=>{e.child?G(k):G(V,!1)})}w(S,E)},$$slots:{popper:!0}}))},b=(x,y)=>{{var S=I=>{Vu(I,Be(()=>p(u),{get side(){return a()},get present(){return d.root.open.current},get id(){return r()},onInteractOutside:g,onEscapeKeydown:f,onOpenAutoFocus:D=>D.preventDefault(),onCloseAutoFocus:D=>D.preventDefault(),trapFocus:!1,loop:!1,get preventScroll(){return l()},onPlaced:()=>d.isPositioned=!0,forceMount:!1,popper:(D,E)=>{let O=()=>E==null?void 0:E().props,A=()=>E==null?void 0:E().wrapperProps;var k=F();const V=R(()=>Ge(O(),{style:d.props.style}));var G=P(k);{var K=Q=>{var te=F(),q=P(te),Z=fr(()=>({props:p(V),wrapperProps:A(),...d.snippetProps}));ge(q,()=>e.child,()=>p(Z)),w(Q,te)},j=Q=>{var te=yB();let q;var Z=re(te);let ee;var de=re(Z);ge(de,()=>e.children??Ve),ne(Z),ne(te),Ee(()=>{q=Fe(te,q,{...A()}),ee=Fe(Z,ee,{...p(V)})}),w(Q,te)};fe(G,Q=>{e.child?Q(K):Q(j,!1)})}w(D,k)},$$slots:{popper:!0}}))};fe(x,I=>{i()||I(S)},y)}};fe(m,x=>{i()?x(v):x(b,!1)})}w(t,h),ce()}var _B=H("<div><!></div>"),wB=H("<!> <!>",1);function SB(t,e){le(e,!0);let r=T(e,"id",19,et),n=T(e,"ref",15,null),i=T(e,"label",19,()=>e.value),a=T(e,"disabled",3,!1),s=T(e,"onHighlight",3,xt),o=T(e,"onUnhighlight",3,xt),l=Ce(e,["$$slots","$$events","$$legacy","id","ref","value","label","disabled","children","child","onHighlight","onUnhighlight"]);const c=nB({id:W.with(()=>r()),ref:W.with(()=>n(),v=>n(v)),value:W.with(()=>e.value),disabled:W.with(()=>a()),label:W.with(()=>i()),onHighlight:W.with(()=>s()),onUnhighlight:W.with(()=>o())}),d=R(()=>Ge(l,c.props));var u=wB(),g=P(u);{var f=v=>{var b=F(),x=P(b),y=fr(()=>({props:p(d),...c.snippetProps}));ge(x,()=>e.child,()=>p(y)),w(v,b)},h=v=>{var b=_B();let x;var y=re(b);ge(y,()=>e.children??Ve,()=>c.snippetProps),ne(b),Ee(()=>x=Fe(b,x,{...p(d)})),w(v,b)};fe(g,v=>{e.child?v(f):v(h,!1)})}var m=Y(g,2);$a(m,{onMountedChange:v=>{c.mounted=v}}),w(t,u),ce()}var xB=H("<div><!></div>");function IB(t,e){le(e,!0);let r=T(e,"id",19,et),n=T(e,"ref",15,null),i=Ce(e,["$$slots","$$events","$$legacy","id","ref","children","child"]);const a=oB({id:W.with(()=>r()),ref:W.with(()=>n(),u=>n(u))}),s=R(()=>Ge(i,a.props));var o=F(),l=P(o);{var c=u=>{var g=F(),f=P(g);ge(f,()=>e.child,()=>({props:p(s)})),w(u,g)},d=u=>{var g=xB();let f;var h=re(g);ge(h,()=>e.children??Ve),ne(g),Ee(()=>f=Fe(g,f,{...p(s)})),w(u,g)};fe(l,u=>{e.child?u(c):u(d,!1)})}w(t,o),ce()}var CB=H("<div><!></div>");function PB(t,e){le(e,!0);let r=T(e,"id",19,et),n=T(e,"ref",15,null),i=Ce(e,["$$slots","$$events","$$legacy","id","ref","children","child"]);const a=iB({id:W.with(()=>r()),ref:W.with(()=>n(),u=>n(u))}),s=R(()=>Ge(i,a.props));var o=F(),l=P(o);{var c=u=>{var g=F(),f=P(g);ge(f,()=>e.child,()=>({props:p(s)})),w(u,g)},d=u=>{var g=CB();let f;var h=re(g);ge(h,()=>e.children??Ve),ne(g),Ee(()=>f=Fe(g,f,{...p(s)})),w(u,g)};fe(l,u=>{e.child?u(c):u(d,!1)})}w(t,o),ce()}var EB=H("<div><!></div>"),AB=H("<!> <!>",1);function TB(t,e){le(e,!0);let r=T(e,"id",19,et),n=T(e,"ref",15,null),i=Ce(e,["$$slots","$$events","$$legacy","id","ref","child","children"]),a=Me(!1);const s=sB({id:W.with(()=>r()),mounted:W.with(()=>p(a)),ref:W.with(()=>n(),u=>n(u))}),o=R(()=>Ge(i,s.props));var l=F(),c=P(l);{var d=u=>{var g=AB(),f=P(g);$a(f,{onMountedChange:b=>U(a,b,!0)});var h=Y(f,2);{var m=b=>{var x=F(),y=P(x);ge(y,()=>e.child,()=>({props:i})),w(b,x)},v=b=>{var x=EB();let y;var S=re(x);ge(S,()=>e.children??Ve),ne(x),Ee(()=>y=Fe(x,y,{...p(o)})),w(b,x)};fe(h,b=>{e.child?b(m):b(v,!1)})}w(u,g)};fe(c,u=>{s.canScrollDown&&u(d)})}w(t,l),ce()}var OB=H("<div><!></div>"),kB=H("<!> <!>",1);function RB(t,e){le(e,!0);let r=T(e,"id",19,et),n=T(e,"ref",15,null),i=Ce(e,["$$slots","$$events","$$legacy","id","ref","child","children"]),a=Me(!1);const s=aB({id:W.with(()=>r()),mounted:W.with(()=>p(a)),ref:W.with(()=>n(),u=>n(u))}),o=R(()=>Ge(i,s.props));var l=F(),c=P(l);{var d=u=>{var g=kB(),f=P(g);$a(f,{onMountedChange:b=>U(a,b,!0)});var h=Y(f,2);{var m=b=>{var x=F(),y=P(x);ge(y,()=>e.child,()=>({props:i})),w(b,x)},v=b=>{var x=OB();let y;var S=re(x);ge(S,()=>e.children??Ve),ne(x),Ee(()=>y=Fe(x,y,{...p(o)})),w(b,x)};fe(h,b=>{e.child?b(m):b(v,!1)})}w(u,g)};fe(c,u=>{s.canScrollUp&&u(d)})}w(t,l),ce()}function MB(t,e){le(e,!0);let r=T(e,"open",15,!1),n=T(e,"onOpenChange",3,xt),i=T(e,"controlledOpen",3,!1);z6({open:W.with(()=>r(),a=>{var s;i()?n()(a):(r(a),(s=n())==null||s(a))})}),sv(t,{children:(a,s)=>{var o=F(),l=P(o);ge(l,()=>e.children??Ve),w(a,o)},$$slots:{default:!0}}),ce()}var DB=H("<div><!></div>");function NB(t,e){le(e,!0);let r=T(e,"ref",15,null),n=T(e,"id",19,et),i=T(e,"disabled",3,!1),a=T(e,"onSelect",3,xt),s=T(e,"closeOnSelect",3,!0),o=Ce(e,["$$slots","$$events","$$legacy","child","children","ref","id","disabled","onSelect","closeOnSelect"]);const l=U6({id:W.with(()=>n()),disabled:W.with(()=>i()),onSelect:W.with(()=>a()),ref:W.with(()=>r(),h=>r(h)),closeOnSelect:W.with(()=>s())}),c=R(()=>Ge(o,l.props));var d=F(),u=P(d);{var g=h=>{var m=F(),v=P(m);ge(v,()=>e.child,()=>({props:p(c)})),w(h,m)},f=h=>{var m=DB();let v;var b=re(m);ge(b,()=>e.children??Ve),ne(m),Ee(()=>v=Fe(m,v,{...p(c)})),w(h,m)};fe(u,h=>{e.child?h(g):h(f,!1)})}w(t,d),ce()}var FB=H("<div><!></div>");function $B(t,e){le(e,!0);let r=T(e,"ref",15,null),n=T(e,"id",19,et),i=Ce(e,["$$slots","$$events","$$legacy","children","child","ref","id"]);const a=G6({id:W.with(()=>n()),ref:W.with(()=>r(),u=>r(u))}),s=R(()=>Ge(i,a.props));var o=F(),l=P(o);{var c=u=>{var g=F(),f=P(g);ge(f,()=>e.child,()=>({props:p(s)})),w(u,g)},d=u=>{var g=FB();let f;var h=re(g);ge(h,()=>e.children??Ve),ne(g),Ee(()=>f=Fe(g,f,{...p(s)})),w(u,g)};fe(l,u=>{e.child?u(c):u(d,!1)})}w(t,o),ce()}var LB=H("<div><!></div>");function BB(t,e){le(e,!0);let r=T(e,"ref",15,null),n=T(e,"id",19,et),i=Ce(e,["$$slots","$$events","$$legacy","ref","id","child","children"]);const a=H6({id:W.with(()=>n()),ref:W.with(()=>r(),u=>r(u))}),s=R(()=>Ge(i,a.props));var o=F(),l=P(o);{var c=u=>{var g=F(),f=P(g);ge(f,()=>e.child,()=>({props:p(s)})),w(u,g)},d=u=>{var g=LB();let f;var h=re(g);ge(h,()=>e.children??Ve),ne(g),Ee(()=>f=Fe(g,f,{...p(s)})),w(u,g)};fe(l,u=>{e.child?u(c):u(d,!1)})}w(t,o),ce()}var VB=H("<div><div><!></div></div>"),jB=H("<!> <!>",1),zB=H("<div><div><!></div></div>"),UB=H("<!> <!>",1);function GB(t,e){le(e,!0);let r=T(e,"id",19,et),n=T(e,"ref",15,null),i=T(e,"loop",3,!0),a=T(e,"onInteractOutside",3,xt),s=T(e,"forceMount",3,!1),o=T(e,"onEscapeKeydown",3,xt),l=T(e,"interactOutsideBehavior",3,"defer-otherwise-close"),c=T(e,"escapeKeydownBehavior",3,"defer-otherwise-close"),d=T(e,"onOpenAutoFocus",3,xt),u=T(e,"onCloseAutoFocus",3,xt),g=T(e,"onFocusOutside",3,xt),f=T(e,"side",3,"right"),h=Ce(e,["$$slots","$$events","$$legacy","id","ref","children","child","loop","onInteractOutside","forceMount","onEscapeKeydown","interactOutsideBehavior","escapeKeydownBehavior","onOpenAutoFocus","onCloseAutoFocus","onFocusOutside","side"]),m=Me(!1);const v=z_({id:W.with(()=>r()),loop:W.with(()=>i()),ref:W.with(()=>n(),G=>n(G)),isMounted:W.with(()=>p(m))});function b(G){const K=G.currentTarget.contains(G.target),j=K6[v.parentMenu.root.dir.current].includes(G.key);if(K&&j){v.parentMenu.onClose();const Q=v.parentMenu.triggerNode;Q==null||Q.focus(),G.preventDefault()}}const x=R(()=>v.parentMenu.root.getAttr("sub-content")),y=R(()=>Ge(h,v.props,{side:f(),onkeydown:b,[p(x)]:""}));function S(G){d()(G),!G.defaultPrevented&&(G.preventDefault(),v.parentMenu.root.isUsingKeyboard&&v.parentMenu.contentNode&&W6(v.parentMenu.contentNode))}function I(G){u()(G),!G.defaultPrevented&&G.preventDefault()}function C(G){a()(G),!G.defaultPrevented&&v.parentMenu.onClose()}function D(G){o()(G),!G.defaultPrevented&&v.parentMenu.onClose()}function E(G){var K;g()(G),!G.defaultPrevented&&Oa(G.target)&&G.target.id!==((K=v.parentMenu.triggerNode)==null?void 0:K.id)&&v.parentMenu.onClose()}var O=F(),A=P(O);{var k=G=>{Bu(G,Be(()=>p(y),{get interactOutsideBehavior(){return l()},get escapeKeydownBehavior(){return c()},onCloseAutoFocus:I,onOpenAutoFocus:S,get enabled(){return v.parentMenu.open.current},onInteractOutside:C,onEscapeKeydown:D,onFocusOutside:E,preventScroll:!1,get loop(){return i()},trapFocus:!1,popper:(j,Q)=>{let te=()=>Q==null?void 0:Q().props,q=()=>Q==null?void 0:Q().wrapperProps;var Z=jB();const ee=R(()=>Ge(te(),p(y),{style:Hi("menu")}));var de=P(Z);{var J=ke=>{var pe=F(),B=P(pe),X=fr(()=>({props:p(ee),wrapperProps:q(),...v.snippetProps}));ge(B,()=>e.child,()=>p(X)),w(ke,pe)},ie=ke=>{var pe=VB();let B;var X=re(pe);let oe;var me=re(X);ge(me,()=>e.children??Ve),ne(X),ne(pe),Ee(()=>{B=Fe(pe,B,{...q()}),oe=Fe(X,oe,{...p(ee)})}),w(ke,pe)};fe(de,ke=>{e.child?ke(J):ke(ie,!1)})}var xe=Y(de,2);$a(xe,{get isMounted(){return p(m)},set isMounted(ke){U(m,ke,!0)}}),w(j,Z)},$$slots:{popper:!0}}))},V=(G,K)=>{{var j=Q=>{Vu(Q,Be(()=>p(y),{get interactOutsideBehavior(){return l()},get escapeKeydownBehavior(){return c()},onCloseAutoFocus:I,onOpenAutoFocus:S,get present(){return v.parentMenu.open.current},onInteractOutside:C,onEscapeKeydown:D,onFocusOutside:E,preventScroll:!1,get loop(){return i()},trapFocus:!1,popper:(q,Z)=>{let ee=()=>Z==null?void 0:Z().props,de=()=>Z==null?void 0:Z().wrapperProps;var J=UB();const ie=R(()=>Ge(ee(),p(y),{style:Hi("menu")}));var xe=P(J);{var ke=X=>{var oe=F(),me=P(oe),he=fr(()=>({props:p(ie),wrapperProps:de(),...v.snippetProps}));ge(me,()=>e.child,()=>p(he)),w(X,oe)},pe=X=>{var oe=zB();let me;var he=re(oe);let we;var be=re(he);ge(be,()=>e.children??Ve),ne(he),ne(oe),Ee(()=>{me=Fe(oe,me,{...de()}),we=Fe(he,we,{...p(ie)})}),w(X,oe)};fe(xe,X=>{e.child?X(ke):X(pe,!1)})}var B=Y(xe,2);$a(B,{get isMounted(){return p(m)},set isMounted(X){U(m,X,!0)}}),w(q,J)},$$slots:{popper:!0}}))};fe(G,Q=>{s()||Q(j)},K)}};fe(A,G=>{s()?G(k):G(V,!1)})}w(t,O),ce()}var HB=H("<div><!></div>");function WB(t,e){le(e,!0);let r=T(e,"id",19,et),n=T(e,"disabled",3,!1),i=T(e,"ref",15,null),a=Ce(e,["$$slots","$$events","$$legacy","id","disabled","ref","children","child"]);const s=q6({disabled:W.with(()=>n()),id:W.with(()=>r()),ref:W.with(()=>i(),l=>i(l))}),o=R(()=>Ge(a,s.props));eg(t,{get id(){return r()},children:(l,c)=>{var d=F(),u=P(d);{var g=h=>{var m=F(),v=P(m);ge(v,()=>e.child,()=>({props:p(o)})),w(h,m)},f=h=>{var m=HB();let v;var b=re(m);ge(b,()=>e.children??Ve),ne(m),Ee(()=>v=Fe(m,v,{...p(o)})),w(h,m)};fe(u,h=>{e.child?h(g):h(f,!1)})}w(l,d)},$$slots:{default:!0}}),ce()}var KB=H("<div><!></div>");function qB(t,e){le(e,!0);let r=T(e,"ref",15,null),n=T(e,"checked",15,!1),i=T(e,"id",19,et),a=T(e,"onCheckedChange",3,xt),s=T(e,"disabled",3,!1),o=T(e,"onSelect",3,xt),l=T(e,"controlledChecked",3,!1),c=T(e,"closeOnSelect",3,!0),d=T(e,"indeterminate",15,!1),u=T(e,"controlledIndeterminate",3,!1),g=T(e,"onIndeterminateChange",3,xt),f=Ce(e,["$$slots","$$events","$$legacy","child","children","ref","checked","id","onCheckedChange","disabled","onSelect","controlledChecked","closeOnSelect","indeterminate","controlledIndeterminate","onIndeterminateChange"]);const h=Y6({checked:W.with(()=>n(),I=>{l()||n(I),a()(I)}),id:W.with(()=>i()),disabled:W.with(()=>s()),onSelect:W.with(()=>m),ref:W.with(()=>r(),I=>r(I)),closeOnSelect:W.with(()=>c()),indeterminate:W.with(()=>d(),I=>{u()||d(I),g()(I)})});function m(I){o()(I),!I.defaultPrevented&&h.toggleChecked()}const v=R(()=>Ge(f,h.props));var b=F(),x=P(b);{var y=I=>{var C=F(),D=P(C),E=fr(()=>({props:p(v),...h.snippetProps}));ge(D,()=>e.child,()=>p(E)),w(I,C)},S=I=>{var C=KB();let D;var E=re(C);ge(E,()=>e.children??Ve,()=>h.snippetProps),ne(C),Ee(()=>D=Fe(C,D,{...p(v)})),w(I,C)};fe(x,I=>{e.child?I(y):I(S,!1)})}w(t,b),ce()}var td,rd,nd;class YB{constructor(e){z(this,"open");L(this,td,Me(null));L(this,rd,Me(void 0));L(this,nd,Me(null));this.open=e.open}get contentNode(){return p(_(this,td))}set contentNode(e){U(_(this,td),e,!0)}get contentId(){return p(_(this,rd))}set contentId(e){U(_(this,rd),e,!0)}get triggerNode(){return p(_(this,nd))}set triggerNode(e){U(_(this,nd),e,!0)}toggleOpen(){this.open.current=!this.open.current}handleClose(){this.open.current&&(this.open.current=!1)}}td=new WeakMap,rd=new WeakMap,nd=new WeakMap;var Ns,id,Di,dn,$h,c4,ad;class XB{constructor(e,r){L(this,$h);L(this,Ns);L(this,id);L(this,Di);L(this,dn);L(this,ad,R(()=>({id:_(this,Ns).current,"aria-haspopup":"dialog","aria-expanded":F_(_(this,dn).open.current),"data-state":Lu(_(this,dn).open.current),"aria-controls":Nt(this,$h,c4).call(this),"data-popover-trigger":"",disabled:_(this,Di).current,onpointerdown:this.onpointerdown,onkeydown:this.onkeydown,onclick:this.onclick})));De(this,Ns,e.id),De(this,dn,r),De(this,id,e.ref),De(this,Di,e.disabled),dt({id:_(this,Ns),ref:_(this,id),onRefChange:n=>{_(this,dn).triggerNode=n}}),this.onclick=this.onclick.bind(this),this.onpointerdown=this.onpointerdown.bind(this),this.onkeydown=this.onkeydown.bind(this)}onclick(e){_(this,Di).current||e.button===0&&_(this,dn).toggleOpen()}onpointerdown(e){_(this,Di).current||e.button===0&&e.preventDefault()}onkeydown(e){_(this,Di).current||(e.key===Na||e.key===Fa)&&(e.preventDefault(),_(this,dn).toggleOpen())}get props(){return p(_(this,ad))}set props(e){U(_(this,ad),e)}}Ns=new WeakMap,id=new WeakMap,Di=new WeakMap,dn=new WeakMap,$h=new WeakSet,c4=function(){if(_(this,dn).open.current&&_(this,dn).contentId)return _(this,dn).contentId},ad=new WeakMap;var Fs,sd,od,ld;class QB{constructor(e,r){L(this,Fs);L(this,sd);z(this,"root");L(this,od,R(()=>({open:this.root.open.current})));L(this,ld,R(()=>({id:_(this,Fs).current,tabindex:-1,"data-state":Lu(this.root.open.current),"data-popover-content":"",style:{pointerEvents:"auto"}})));De(this,Fs,e.id),this.root=r,De(this,sd,e.ref),dt({id:_(this,Fs),ref:_(this,sd),deps:()=>this.root.open.current,onRefChange:n=>{this.root.contentNode=n,this.root.contentId=n==null?void 0:n.id}})}get snippetProps(){return p(_(this,od))}set snippetProps(e){U(_(this,od),e)}get props(){return p(_(this,ld))}set props(e){U(_(this,ld),e)}}Fs=new WeakMap,sd=new WeakMap,od=new WeakMap,ld=new WeakMap;const[ZB,d4]=Jn("Popover.Root");function JB(t){return ZB(new YB(t))}function eV(t){return new XB(t,d4())}function tV(t){return new QB(t,d4())}var rV=H("<div><div><!></div></div>"),nV=H("<div><div><!></div></div>");function iV(t,e){le(e,!0);let r=T(e,"ref",15,null),n=T(e,"id",19,et),i=T(e,"forceMount",3,!1),a=T(e,"onCloseAutoFocus",3,xt),s=T(e,"onEscapeKeydown",3,xt),o=T(e,"onInteractOutside",3,xt),l=T(e,"trapFocus",3,!0),c=T(e,"preventScroll",3,!1),d=Ce(e,["$$slots","$$events","$$legacy","child","children","ref","id","forceMount","onCloseAutoFocus","onEscapeKeydown","onInteractOutside","trapFocus","preventScroll"]);const u=tV({id:W.with(()=>n()),ref:W.with(()=>r(),S=>r(S))}),g=R(()=>Ge(d,u.props));function f(S){o()(S),!S.defaultPrevented&&(Oa(S.target)&&S.target.closest("[data-popover-trigger")||u.root.handleClose())}function h(S){s()(S),!S.defaultPrevented&&u.root.handleClose()}function m(S){var I;a()(S),!S.defaultPrevented&&(S.preventDefault(),(I=u.root.triggerNode)==null||I.focus())}var v=F(),b=P(v);{var x=S=>{Bu(S,Be(()=>p(g),{get enabled(){return u.root.open.current},get id(){return n()},onInteractOutside:f,onEscapeKeydown:h,onCloseAutoFocus:m,get trapFocus(){return l()},get preventScroll(){return c()},loop:!0,forceMount:!0,popper:(C,D)=>{let E=()=>D==null?void 0:D().props,O=()=>D==null?void 0:D().wrapperProps;var A=F();const k=R(()=>Ge(E(),{style:Hi("popover")}));var V=P(A);{var G=j=>{var Q=F(),te=P(Q),q=fr(()=>({props:p(k),wrapperProps:O(),...u.snippetProps}));ge(te,()=>e.child,()=>p(q)),w(j,Q)},K=j=>{var Q=rV();let te;var q=re(Q);let Z;var ee=re(q);ge(ee,()=>e.children??Ve),ne(q),ne(Q),Ee(()=>{te=Fe(Q,te,{...O()}),Z=Fe(q,Z,{...p(k)})}),w(j,Q)};fe(V,j=>{e.child?j(G):j(K,!1)})}w(C,A)},$$slots:{popper:!0}}))},y=(S,I)=>{{var C=D=>{Vu(D,Be(()=>p(g),{get present(){return u.root.open.current},get id(){return n()},onInteractOutside:f,onEscapeKeydown:h,onCloseAutoFocus:m,get trapFocus(){return l()},get preventScroll(){return c()},loop:!0,forceMount:!1,popper:(O,A)=>{let k=()=>A==null?void 0:A().props,V=()=>A==null?void 0:A().wrapperProps;var G=F();const K=R(()=>Ge(k(),{style:Hi("popover")}));var j=P(G);{var Q=q=>{var Z=F(),ee=P(Z),de=fr(()=>({props:p(K),wrapperProps:V(),...u.snippetProps}));ge(ee,()=>e.child,()=>p(de)),w(q,Z)},te=q=>{var Z=nV();let ee;var de=re(Z);let J;var ie=re(de);ge(ie,()=>e.children??Ve),ne(de),ne(Z),Ee(()=>{ee=Fe(Z,ee,{...V()}),J=Fe(de,J,{...p(K)})}),w(q,Z)};fe(j,q=>{e.child?q(Q):q(te,!1)})}w(O,G)},$$slots:{popper:!0}}))};fe(S,D=>{i()||D(C)},I)}};fe(b,S=>{i()?S(x):S(y,!1)})}w(t,v),ce()}var aV=H("<button><!></button>");function sV(t,e){le(e,!0);let r=T(e,"id",19,et),n=T(e,"ref",15,null),i=T(e,"type",3,"button"),a=T(e,"disabled",3,!1),s=Ce(e,["$$slots","$$events","$$legacy","children","child","id","ref","type","disabled"]);const o=eV({id:W.with(()=>r()),ref:W.with(()=>n(),c=>n(c)),disabled:W.with(()=>!!a())}),l=R(()=>Ge(s,o.props,{type:i()}));eg(t,{get id(){return r()},children:(c,d)=>{var u=F(),g=P(u);{var f=m=>{var v=F(),b=P(v);ge(b,()=>e.child,()=>({props:p(l)})),w(m,v)},h=m=>{var v=aV();let b;var x=re(v);ge(x,()=>e.children??Ve),ne(v),Ee(()=>b=Fe(v,b,{...p(l)})),w(m,v)};fe(g,m=>{e.child?m(f):m(h,!1)})}w(c,u)},$$slots:{default:!0}}),ce()}const oV="data-label-root";var cd,dd,ud;class lV{constructor(e){L(this,cd);L(this,dd);L(this,ud,R(()=>({[oV]:"",onmousedown:this.onmousedown})));De(this,cd,e.id),De(this,dd,e.ref),this.onmousedown=this.onmousedown.bind(this),dt({id:_(this,cd),ref:_(this,dd)})}onmousedown(e){e.detail>1&&e.preventDefault()}get props(){return p(_(this,ud))}set props(e){U(_(this,ud),e)}}cd=new WeakMap,dd=new WeakMap,ud=new WeakMap;function cV(t){return new lV(t)}var dV=H("<label><!></label>");function uV(t,e){le(e,!0);let r=T(e,"id",19,et),n=T(e,"ref",15,null),i=Ce(e,["$$slots","$$events","$$legacy","children","child","id","ref","for"]);const a=cV({id:W.with(()=>r()),ref:W.with(()=>n(),u=>n(u))}),s=R(()=>Ge(i,a.props,{for:e.for}));var o=F(),l=P(o);{var c=u=>{var g=F(),f=P(g);ge(f,()=>e.child,()=>({props:p(s)})),w(u,g)},d=u=>{var g=dV();let f;var h=re(g);ge(h,()=>e.children??Ve),ne(g),Ee(()=>f=Fe(g,f,{...p(s),for:e.for})),w(u,g)};fe(l,u=>{e.child?u(c):u(d,!1)})}w(t,o),ce()}const fV="data-menubar-root",O1="data-menubar-trigger";var fd,hd,gd;class hV{constructor(e){z(this,"id");z(this,"ref");z(this,"value");z(this,"dir");z(this,"loop");z(this,"rovingFocusGroup");z(this,"currentTabStopId",W(null));L(this,fd,Me(!1));L(this,hd,Me(vr([])));z(this,"valueToContentId",new Map);L(this,gd,R(()=>({id:this.id.current,role:"menubar",[fV]:""})));this.value=e.value,this.dir=e.dir,this.loop=e.loop,this.id=e.id,this.ref=e.ref,this.onMenuClose=this.onMenuClose.bind(this),this.onMenuOpen=this.onMenuOpen.bind(this),this.onMenuToggle=this.onMenuToggle.bind(this),this.registerTrigger=this.registerTrigger.bind(this),this.deRegisterTrigger=this.deRegisterTrigger.bind(this),dt({id:this.id,ref:this.ref}),this.rovingFocusGroup=U_({rootNodeId:this.id,candidateAttr:O1,loop:this.loop,orientation:W.with(()=>"horizontal"),currentTabStopId:this.currentTabStopId})}get wasOpenedByKeyboard(){return p(_(this,fd))}set wasOpenedByKeyboard(e){U(_(this,fd),e,!0)}get triggerIds(){return p(_(this,hd))}set triggerIds(e){U(_(this,hd),e,!0)}registerTrigger(e){this.triggerIds.push(e)}deRegisterTrigger(e){this.triggerIds=this.triggerIds.filter(r=>r!==e)}getTriggers(){const e=this.ref.current;return e?Array.from(e.querySelectorAll(`[${O1}]`)):[]}onMenuOpen(e){this.value.current=e,this.currentTabStopId.current=e}onMenuClose(){this.value.current=""}onMenuToggle(e){this.value.current=this.value.current?"":e}get props(){return p(_(this,gd))}set props(e){U(_(this,gd),e)}}fd=new WeakMap,hd=new WeakMap,gd=new WeakMap;var pd,md,vd,yd;class gV{constructor(e,r){z(this,"root");z(this,"value");L(this,pd,R(()=>this.root.value.current===this.value.current));L(this,md,Me(!1));L(this,vd,Me(null));L(this,yd,Me(null));this.value=e.value,this.root=r,qe(()=>{this.open||$e(()=>{this.wasOpenedByKeyboard=!1})}),qe(()=>($e(()=>{this.root.valueToContentId.set(this.value.current,W.with(()=>{var n;return((n=this.contentNode)==null?void 0:n.id)??""}))}),()=>{this.root.valueToContentId.delete(this.value.current)}))}get open(){return p(_(this,pd))}set open(e){U(_(this,pd),e)}get wasOpenedByKeyboard(){return p(_(this,md))}set wasOpenedByKeyboard(e){U(_(this,md),e,!0)}get triggerNode(){return p(_(this,vd))}set triggerNode(e){U(_(this,vd),e,!0)}get contentNode(){return p(_(this,yd))}set contentNode(e){U(_(this,yd),e,!0)}getTriggerNode(){return nv?this.triggerNode:null}}pd=new WeakMap,md=new WeakMap,vd=new WeakMap,yd=new WeakMap;var bd,_d,wd;class pV{constructor(e,r){z(this,"id");z(this,"ref");z(this,"disabled");z(this,"menu");z(this,"root");L(this,bd,Me(!1));L(this,_d,Me(0));L(this,wd,R(()=>{var e;return{type:"button",role:"menuitem",id:this.id.current,"aria-haspopup":"menu","aria-expanded":F_(this.menu.open),"aria-controls":this.menu.open?(e=this.menu.contentNode)==null?void 0:e.id:void 0,"data-highlighted":this.isFocused?"":void 0,"data-state":Lu(this.menu.open),"data-disabled":nr(this.disabled.current),"data-menu-value":this.menu.value.current,disabled:this.disabled.current?!0:void 0,tabIndex:p(_(this,_d)),[O1]:"",onpointerdown:this.onpointerdown,onpointerenter:this.onpointerenter,onkeydown:this.onkeydown,onfocus:this.onfocus,onblur:this.onblur}}));this.disabled=e.disabled,this.menu=r,this.id=e.id,this.ref=e.ref,this.root=r.root,this.onpointerdown=this.onpointerdown.bind(this),this.onpointerenter=this.onpointerenter.bind(this),this.onkeydown=this.onkeydown.bind(this),this.onfocus=this.onfocus.bind(this),this.onblur=this.onblur.bind(this),dt({id:this.id,ref:this.ref,onRefChange:n=>{this.menu.triggerNode=n}}),qe(()=>($e(()=>{this.root.registerTrigger(e.id.current)}),()=>{this.root.deRegisterTrigger(e.id.current)})),qe(()=>{this.root.triggerIds.length&&U(_(this,_d),this.root.rovingFocusGroup.getTabIndex(this.menu.getTriggerNode()),!0)})}get isFocused(){return p(_(this,bd))}set isFocused(e){U(_(this,bd),e,!0)}onpointerdown(e){!this.disabled.current&&e.button===0&&e.ctrlKey===!1&&(this.menu.open||e.preventDefault(),this.root.onMenuOpen(this.menu.value.current))}onpointerenter(e){var n;!!this.root.value.current&&!this.menu.open&&(this.root.onMenuOpen(this.menu.value.current),(n=this.menu.getTriggerNode())==null||n.focus())}onkeydown(e){this.disabled.current||((e.key===Na||e.key===Fa)&&this.root.onMenuToggle(this.menu.value.current),e.key===In&&this.root.onMenuOpen(this.menu.value.current),(e.key===Na||e.key===Fa||e.key===In)&&(this.menu.wasOpenedByKeyboard=!0,e.preventDefault()),this.root.rovingFocusGroup.handleKeydown(this.menu.getTriggerNode(),e))}onfocus(e){this.isFocused=!0}onblur(e){this.isFocused=!1}get props(){return p(_(this,wd))}set props(e){U(_(this,wd),e)}}bd=new WeakMap,_d=new WeakMap,wd=new WeakMap;var Sd,xd;class mV{constructor(e,r){z(this,"id");z(this,"ref");z(this,"menu");z(this,"root");L(this,Sd,Me(!1));z(this,"interactOutsideBehavior");L(this,xd,R(()=>{var e;return{id:this.id.current,"aria-labelledby":(e=this.menu.triggerNode)==null?void 0:e.id,style:{"--bits-menubar-content-transform-origin":"var(--bits-floating-transform-origin)","--bits-menubar-content-available-width":"var(--bits-floating-available-width)","--bits-menubar-content-available-height":"var(--bits-floating-available-height)","--bits-menubar-anchor-width":"var(--bits-floating-anchor-width)","--bits-menubar-anchor-height":"var(--bits-floating-anchor-height)"},onkeydown:this.onkeydown,"data-menu-content":""}}));this.interactOutsideBehavior=e.interactOutsideBehavior,this.menu=r,this.id=e.id,this.ref=e.ref,this.root=r.root,this.onCloseAutoFocus=this.onCloseAutoFocus.bind(this),this.onFocusOutside=this.onFocusOutside.bind(this),this.onInteractOutside=this.onInteractOutside.bind(this),this.onOpenAutoFocus=this.onOpenAutoFocus.bind(this),this.onkeydown=this.onkeydown.bind(this),dt({id:this.id,ref:this.ref,onRefChange:n=>{this.menu.contentNode=n},deps:()=>this.menu.open})}get hasInteractedOutside(){return p(_(this,Sd))}set hasInteractedOutside(e){U(_(this,Sd),e,!0)}onCloseAutoFocus(e){var n;!!!this.root.value.current&&!this.hasInteractedOutside&&((n=this.menu.getTriggerNode())==null||n.focus()),this.hasInteractedOutside=!1,e.preventDefault()}onFocusOutside(e){const r=e.target;this.root.getTriggers().some(i=>i.contains(r))&&e.preventDefault()}onInteractOutside(){this.hasInteractedOutside=!0}onOpenAutoFocus(){yi(()=>{var e;return(e=this.ref.current)==null?void 0:e.focus()})}onkeydown(e){if(e.key!==ro&&e.key!==no)return;const r=e.target,n=r.hasAttribute("data-menu-sub-trigger"),i=r.closest("[data-menu-content]")!==e.currentTarget,s=(this.root.dir.current==="rtl"?no:ro)===e.key;if(!s&&n||i&&s)return;let c=this.root.getTriggers().filter(g=>!g.disabled).map(g=>g.getAttribute("data-menu-value"));s&&c.reverse();const d=c.indexOf(this.menu.value.current);c=this.root.loop.current?X6(c,d+1):c.slice(d+1);const[u]=c;u&&this.root.onMenuOpen(u)}get props(){return p(_(this,xd))}set props(e){U(_(this,xd),e)}}Sd=new WeakMap,xd=new WeakMap;const[vV,yV]=Jn("Menubar.Root"),[bV,u4]=Jn("Menubar.Menu");function _V(t){return vV(new hV(t))}function wV(t){return bV(new gV(t,yV()))}function SV(t){return new pV(t,u4())}function xV(t){return new mV(t,u4())}var IV=H("<div><!></div>");function CV(t,e){le(e,!0);let r=T(e,"id",19,et),n=T(e,"ref",15,null),i=T(e,"value",7,""),a=T(e,"dir",3,"ltr"),s=T(e,"loop",3,!0),o=T(e,"onValueChange",3,xt),l=T(e,"controlledValue",3,!1),c=Ce(e,["$$slots","$$events","$$legacy","id","children","child","ref","value","dir","loop","onValueChange","controlledValue"]);const d=_V({id:W.with(()=>r()),value:W.with(()=>i(),v=>{var b;l()?o()(v):(i(v),(b=o())==null||b(v))}),dir:W.with(()=>a()),loop:W.with(()=>s()),ref:W.with(()=>n(),v=>n(v))}),u=R(()=>Ge(c,d.props));var g=F(),f=P(g);{var h=v=>{var b=F(),x=P(b);ge(x,()=>e.child,()=>({props:p(u)})),w(v,b)},m=v=>{var b=IV();let x;var y=re(b);ge(y,()=>e.children??Ve),ne(b),Ee(()=>x=Fe(b,x,{...p(u)})),w(v,b)};fe(f,v=>{e.child?v(h):v(m,!1)})}w(t,g),ce()}function PV(t,e){le(e,!0);let r=T(e,"value",19,et),n=Ce(e,["$$slots","$$events","$$legacy","value"]);const i=wV({value:W.with(()=>r())});Q6(t,Be({get open(){return i.open},onOpenChange:a=>{a||i.root.onMenuClose()},get dir(){return i.root.dir.current},_internal_variant:"menubar"},()=>n)),ce()}var EV=H("<div><div><!></div></div>"),AV=H("<!> <!>",1),TV=H("<div><div><!></div></div>"),OV=H("<!> <!>",1);function kV(t,e){le(e,!0);let r=T(e,"id",19,et),n=T(e,"ref",15,null),i=T(e,"loop",3,!0),a=T(e,"onInteractOutside",3,xt),s=T(e,"onEscapeKeydown",3,xt),o=T(e,"forceMount",3,!1),l=Ce(e,["$$slots","$$events","$$legacy","id","child","children","ref","loop","onInteractOutside","onEscapeKeydown","forceMount"]),c=Me(!1);const d=z_({id:W.with(()=>r()),loop:W.with(()=>i()),ref:W.with(()=>n(),x=>n(x)),isMounted:W.with(()=>p(c))}),u=R(()=>Ge(l,d.props,{style:{outline:"none"}}));function g(x){a()(x),!x.defaultPrevented&&d.parentMenu.onClose()}function f(x){s()(x),!x.defaultPrevented&&d.parentMenu.onClose()}var h=F(),m=P(h);{var v=x=>{Bu(x,Be(()=>p(u),{get enabled(){return d.parentMenu.open.current},onInteractOutside:g,onEscapeKeydown:f,trapFocus:!0,get loop(){return i()},forceMount:!0,get id(){return r()},popper:(S,I)=>{let C=()=>I==null?void 0:I().props,D=()=>I==null?void 0:I().wrapperProps;var E=AV();const O=R(()=>Ge(C(),{style:{outline:"none",...Hi("menu")}}));var A=P(E);{var k=K=>{var j=F(),Q=P(j),te=fr(()=>({props:p(O),wrapperProps:D(),...d.snippetProps}));ge(Q,()=>e.child,()=>p(te)),w(K,j)},V=K=>{var j=EV();let Q;var te=re(j);let q;var Z=re(te);ge(Z,()=>e.children??Ve),ne(te),ne(j),Ee(()=>{Q=Fe(j,Q,{...D()}),q=Fe(te,q,{...p(O)})}),w(K,j)};fe(A,K=>{e.child?K(k):K(V,!1)})}var G=Y(A,2);$a(G,{get isMounted(){return p(c)},set isMounted(K){U(c,K,!0)}}),w(S,E)},$$slots:{popper:!0}}))},b=(x,y)=>{{var S=I=>{Vu(I,Be(()=>p(u),{get present(){return d.parentMenu.open.current},onInteractOutside:g,onEscapeKeydown:f,trapFocus:!0,get loop(){return i()},forceMount:!1,get id(){return r()},popper:(D,E)=>{let O=()=>E==null?void 0:E().props,A=()=>E==null?void 0:E().wrapperProps;var k=OV();const V=R(()=>Ge(O(),{style:{outline:"none",...Hi("menu")}}));var G=P(k);{var K=te=>{var q=F(),Z=P(q),ee=fr(()=>({props:p(V),wrapperProps:A(),...d.snippetProps}));ge(Z,()=>e.child,()=>p(ee)),w(te,q)},j=te=>{var q=TV();let Z;var ee=re(q);let de;var J=re(ee);ge(J,()=>e.children??Ve),ne(ee),ne(q),Ee(()=>{Z=Fe(q,Z,{...A()}),de=Fe(ee,de,{...p(V)})}),w(te,q)};fe(G,te=>{e.child?te(K):te(j,!1)})}var Q=Y(G,2);$a(Q,{get isMounted(){return p(c)},set isMounted(te){U(c,te,!0)}}),w(D,k)},$$slots:{popper:!0}}))};fe(x,I=>{o()||I(S)},y)}};fe(m,x=>{o()?x(v):x(b,!1)})}w(t,h),ce()}function RV(t,e){le(e,!0);let r=T(e,"ref",15,null),n=T(e,"interactOutsideBehavior",3,"close"),i=T(e,"id",19,et),a=Ce(e,["$$slots","$$events","$$legacy","ref","interactOutsideBehavior","id"]);const s=xV({id:W.with(()=>i()),interactOutsideBehavior:W.with(()=>n()),ref:W.with(()=>r(),l=>r(l))}),o=R(()=>Ge(a,s.props));kV(t,Be(()=>p(o),{preventScroll:!1,get onInteractOutside(){return s.onInteractOutside},get onFocusOutside(){return s.onFocusOutside},get onCloseAutoFocus(){return s.onCloseAutoFocus},get onOpenAutoFocus(){return s.onOpenAutoFocus},get ref(){return r()},set ref(l){r(l)}})),ce()}var MV=H("<button><!></button>");function DV(t,e){le(e,!0);let r=T(e,"id",19,et),n=T(e,"disabled",3,!1),i=T(e,"ref",15,null),a=Ce(e,["$$slots","$$events","$$legacy","id","disabled","children","child","ref"]);const s=SV({id:W.with(()=>r()),disabled:W.with(()=>n()??!1),ref:W.with(()=>i(),l=>i(l))});Z6({id:W.with(()=>r()),disabled:W.with(()=>n()??!1),ref:W.with(()=>i(),l=>i(l))});const o=R(()=>Ge(a,s.props));eg(t,{get id(){return r()},children:(l,c)=>{var d=F(),u=P(d);{var g=h=>{var m=F(),v=P(m);ge(v,()=>e.child,()=>({props:p(o)})),w(h,m)},f=h=>{var m=MV();let v;var b=re(m);ge(b,()=>e.children??Ve),ne(m),Ee(()=>v=Fe(m,v,{...p(o)})),w(h,m)};fe(u,h=>{e.child?h(g):h(f,!1)})}w(l,d)},$$slots:{default:!0}}),ce()}function NV(t,e){le(e,!0);let r=T(e,"open",15,!1),n=T(e,"onOpenChange",3,xt),i=T(e,"controlledOpen",3,!1);JB({open:W.with(()=>r(),a=>{i()||r(a),n()(a)})}),sv(t,{children:(a,s)=>{var o=F(),l=P(o);ge(l,()=>e.children??Ve),w(a,o)},$$slots:{default:!0}}),ce()}var FV=H("<!> <!>",1);function $V(t,e){le(e,!0);let r=T(e,"value",15),n=T(e,"onValueChange",3,xt),i=T(e,"name",3,""),a=T(e,"disabled",3,!1),s=T(e,"open",15,!1),o=T(e,"onOpenChange",3,xt),l=T(e,"loop",3,!1),c=T(e,"scrollAlignment",3,"nearest"),d=T(e,"required",3,!1),u=T(e,"controlledOpen",3,!1),g=T(e,"controlledValue",3,!1),f=T(e,"items",19,()=>[]),h=T(e,"allowDeselect",3,!0);if(r()===void 0){const I=e.type==="single"?"":[];g()?n()(I):r(I)}const m=eB({type:e.type,value:W.with(()=>r(),I=>{g()||r(I),n()(I)}),disabled:W.with(()=>a()),required:W.with(()=>d()),open:W.with(()=>s(),I=>{u()||s(I),o()(I)}),loop:W.with(()=>l()),scrollAlignment:W.with(()=>c()),name:W.with(()=>i()),isCombobox:!1,items:W.with(()=>f()),allowDeselect:W.with(()=>h())});var v=FV(),b=P(v);sv(b,{children:(I,C)=>{var D=F(),E=P(D);ge(E,()=>e.children??Ve),w(I,D)},$$slots:{default:!0}});var x=Y(b,2);{var y=I=>{var C=F(),D=P(C);{var E=O=>{var A=F(),k=P(A);Kt(k,17,()=>m.value.current,rr,(V,G)=>{a2(V,{get value(){return p(G)}})}),w(O,A)};fe(D,O=>{m.value.current.length&&O(E)})}w(I,C)},S=I=>{a2(I,{get value(){return m.value.current},set value(C){m.value.current=C}})};fe(x,I=>{Array.isArray(m.value.current)?I(y):I(S,!1)})}w(t,v),ce()}var LV=H("<button><!></button>");function BV(t,e){le(e,!0);let r=T(e,"id",19,et),n=T(e,"ref",15,null),i=T(e,"type",3,"button"),a=Ce(e,["$$slots","$$events","$$legacy","id","ref","child","children","type"]);const s=rB({id:W.with(()=>r()),ref:W.with(()=>n(),d=>n(d))}),o=R(()=>Ge(a,s.props,{type:i()}));var l=F(),c=P(l);M(c,()=>eg,(d,u)=>{u(d,{get id(){return r()},children:(g,f)=>{var h=F(),m=P(h);{var v=x=>{var y=F(),S=P(y);ge(S,()=>e.child,()=>({props:p(o)})),w(x,y)},b=x=>{var y=LV();let S;var I=re(y);ge(I,()=>e.children??Ve),ne(y),Ee(()=>S=Fe(y,S,{...p(o)})),w(x,y)};fe(m,x=>{e.child?x(v):x(b,!1)})}w(g,h)},$$slots:{default:!0}})}),w(t,l),ce()}function VV(t,e,r){const n={position:"absolute"};return t==="lr"?(n.left=`${e}%`,n.right=`${r}%`):t==="rl"?(n.right=`${e}%`,n.left=`${r}%`):t==="bt"?(n.bottom=`${e}%`,n.top=`${r}%`):(n.top=`${e}%`,n.bottom=`${r}%`),n}function jV(t,e){const r={position:"absolute"};return t==="lr"?(r.left=`${e}%`,r.translate="-50% 0"):t==="rl"?(r.right=`${e}%`,r.translate="50% 0"):t==="bt"?(r.bottom=`${e}%`,r.translate="0 50%"):(r.top=`${e}%`,r.translate="0 -50%"),r}function zV(t,e,r){const n={position:"absolute"};return t==="lr"?(n.left=`${e}%`,n.translate=`${r}% 0`):t==="rl"?(n.right=`${e}%`,n.translate=`${-r}% 0`):t==="bt"?(n.bottom=`${e}%`,n.translate=`0 ${-r}%`):(n.top=`${e}%`,n.translate=`0 ${r}%`),n}function _m(t,e,r,n){const i=(t-(Number.isNaN(e)?0:e))%n;let a=Math.abs(i)*2>=n?t+Math.sign(i)*(n-Math.abs(i)):t-i;Number.isNaN(e)?!Number.isNaN(r)&&a>r&&(a=Math.floor(r/n)*n):a<e?a=e:!Number.isNaN(r)&&a>r&&(a=e+Math.floor((r-e)/n)*n);const s=n.toString(),o=s.indexOf("."),l=o>=0?s.length-o:0;if(l>0){const c=10**l;a=Math.round(a*c)/c}return a}const UV="data-slider-root",s2="data-slider-thumb",GV="data-slider-range",HV="data-slider-tick";var Id,Cd,Pd,Ed,Lh,Ad,Td,Od,kd,Rd,Bh,Md;class WV{constructor(e){z(this,"id");z(this,"ref");z(this,"value");z(this,"disabled");z(this,"orientation");z(this,"min");z(this,"max");z(this,"step");z(this,"dir");z(this,"autoSort");L(this,Id,Me(null));L(this,Cd,Me(!1));L(this,Pd,Me(0));L(this,Ed,R(()=>this.orientation.current==="horizontal"?this.dir.current==="rtl"?"rl":"lr":this.dir.current==="rtl"?"tb":"bt"));z(this,"onValueCommit");L(this,Lh,e=>{const r=this.getAllThumbs();if(!r.length)return;for(const s of r)s.blur();const n=r.map(s=>{if(this.orientation.current==="horizontal"){const{left:o,right:l}=s.getBoundingClientRect();return Math.abs(e.clientX-(o+l)/2)}else{const{top:o,bottom:l}=s.getBoundingClientRect();return Math.abs(e.clientY-(o+l)/2)}}),i=r[n.indexOf(Math.min(...n))],a=r.indexOf(i);return{node:i,idx:a}});z(this,"handlePointerMove",e=>{if(!this.isActive||this.disabled.current)return;e.preventDefault(),e.stopPropagation();const r=this.ref.current,n=this.activeThumb;if(!r||!n)return;n.node.focus();const{left:i,right:a,top:s,bottom:o}=r.getBoundingClientRect(),l=this.direction;l==="lr"?this.applyPosition({clientXY:e.clientX,activeThumbIdx:n.idx,start:i,end:a}):l==="rl"?this.applyPosition({clientXY:e.clientX,activeThumbIdx:n.idx,start:a,end:i}):l==="bt"?this.applyPosition({clientXY:e.clientY,activeThumbIdx:n.idx,start:o,end:s}):l==="tb"&&this.applyPosition({clientXY:e.clientY,activeThumbIdx:n.idx,start:s,end:o})});z(this,"handlePointerDown",e=>{if(e.button!==0||this.disabled.current)return;const r=this.ref.current,n=_(this,Lh).call(this,e);if(!n||!r)return;const i=e.target;!k6(i)||!r.contains(i)||(e.preventDefault(),this.activeThumb=n,n.node.focus(),this.isActive=!0,this.handlePointerMove(e))});z(this,"handlePointerUp",()=>{this.disabled.current||(this.isActive&&this.onValueCommit.current($e(()=>this.value.current)),this.isActive=!1)});z(this,"getPositionFromValue",e=>{const r=this.min.current,n=this.max.current;return(e-r)/(n-r)*100});z(this,"getAllThumbs",()=>{const e=this.ref.current;return e?Array.from(e.querySelectorAll(`[${s2}]`)):[]});z(this,"updateValue",(e,r)=>{const n=this.value.current;if(!n.length){this.value.current.push(e);return}if(n[r]===e)return;const a=[...n];if(!Gf(r,a))return;const s=a[r]>e?-1:1,o=()=>{var f;const u=r+s;a[r]=a[u],a[u]=e;const g=this.getAllThumbs();g.length&&((f=g[u])==null||f.focus(),this.activeThumb={node:g[u],idx:u})};if(this.autoSort.current&&(s===-1&&e<a[r-1]||s===1&&e>a[r+1])){o(),this.value.current=a;return}const l=this.min.current,c=this.max.current,d=this.step.current;a[r]=_m(e,l,c,d),this.value.current=a});L(this,Ad,R(()=>{const e=this.value.current;return Array.from({length:e.length||1},(r,n)=>{const i=$e(()=>this.currentThumbIdx);i<e.length&&$e(()=>{this.currentThumbIdx=i+1});const a=e[n],s=this.getPositionFromValue(a??0),o=jV(this.direction,s);return{role:"slider","aria-valuemin":this.min.current,"aria-valuemax":this.max.current,"aria-valuenow":a,"aria-disabled":mo(this.disabled.current),"aria-orientation":av(this.orientation.current),"data-value":a,tabindex:this.disabled.current?-1:0,style:o,[s2]:""}})}));L(this,Td,R(()=>this.thumbsPropsArr.map((e,r)=>r)));L(this,Od,R(()=>{const e=this.max.current,r=this.min.current,n=this.step.current,i=e-r;let a=Math.ceil(i/n);i%n==0&&a++;const s=this.value.current;return Array.from({length:a},(o,l)=>{const c=l*(n/i)*100,d=l===0,u=l===a-1,g=d?0:u?-100:-50,f=zV(this.direction,c,g),h=r+l*n,m=s.length===1?h<=s[0]:s[0]<=h&&h<=s[s.length-1];return{"data-disabled":nr(this.disabled.current),"data-orientation":Da(this.orientation.current),"data-bounded":m?"":void 0,"data-value":h,style:f,[HV]:""}})}));L(this,kd,R(()=>this.ticksPropsArr.map((e,r)=>r)));L(this,Rd,R(()=>({ticks:this.ticksRenderArr,thumbs:this.thumbsRenderArr})));L(this,Bh,R(()=>{if(!this.disabled.current)return this.orientation.current==="horizontal"?"pan-y":"pan-x"}));L(this,Md,R(()=>({id:this.id.current,"data-orientation":Da(this.orientation.current),"data-disabled":nr(this.disabled.current),style:{touchAction:p(_(this,Bh))},[UV]:""})));this.id=e.id,this.ref=e.ref,this.disabled=e.disabled,this.orientation=e.orientation,this.min=e.min,this.max=e.max,this.step=e.step,this.dir=e.dir,this.autoSort=e.autoSort,this.value=e.value,this.onValueCommit=e.onValueCommit,dt({id:this.id,ref:this.ref}),qe(()=>$_(fs(document,"pointerdown",this.handlePointerDown),fs(document,"pointerup",this.handlePointerUp),fs(document,"pointermove",this.handlePointerMove),fs(document,"pointerleave",this.handlePointerUp))),qe(()=>{const r=this.step.current,n=this.min.current,i=this.max.current,a=this.value.current,s=l=>_m(l,n,i,r)===l,o=l=>_m(l,n,i,r);a.some(l=>!s(l))&&(this.value.current=a.map(o))})}get activeThumb(){return p(_(this,Id))}set activeThumb(e){U(_(this,Id),e,!0)}get isActive(){return p(_(this,Cd))}set isActive(e){U(_(this,Cd),e,!0)}get currentThumbIdx(){return p(_(this,Pd))}set currentThumbIdx(e){U(_(this,Pd),e,!0)}get direction(){return p(_(this,Ed))}set direction(e){U(_(this,Ed),e)}applyPosition({clientXY:e,activeThumbIdx:r,start:n,end:i}){const a=this.min.current,s=this.max.current,l=(e-n)/(i-n)*(s-a)+a;if(l<a)this.updateValue(a,r);else if(l>s)this.updateValue(s,r);else{const c=this.step.current,d=Math.floor((l-a)/c),u=a+d*c+c/2,g=a+(d+1)*c+c/2,f=l>=u&&l<g?(d+1)*c+a:d*c+a;f<=s&&this.updateValue(f,r)}}get thumbsPropsArr(){return p(_(this,Ad))}set thumbsPropsArr(e){U(_(this,Ad),e)}get thumbsRenderArr(){return p(_(this,Td))}set thumbsRenderArr(e){U(_(this,Td),e)}get ticksPropsArr(){return p(_(this,Od))}set ticksPropsArr(e){U(_(this,Od),e)}get ticksRenderArr(){return p(_(this,kd))}set ticksRenderArr(e){U(_(this,kd),e)}get snippetProps(){return p(_(this,Rd))}set snippetProps(e){U(_(this,Rd),e)}get props(){return p(_(this,Md))}set props(e){U(_(this,Md),e)}}Id=new WeakMap,Cd=new WeakMap,Pd=new WeakMap,Ed=new WeakMap,Lh=new WeakMap,Ad=new WeakMap,Td=new WeakMap,Od=new WeakMap,kd=new WeakMap,Rd=new WeakMap,Bh=new WeakMap,Md=new WeakMap;const KV=[ro,no,Un,In,tg,rg];var $s,Dd,Bn,Nd,Fd;class qV{constructor(e,r){L(this,$s);L(this,Dd);L(this,Bn);L(this,Nd,R(()=>{const e=_(this,Bn).value.current,r=e.length>1?_(this,Bn).getPositionFromValue(Math.min(...e)??0):0,n=100-_(this,Bn).getPositionFromValue(Math.max(...e)??0);return{position:"absolute",...VV(_(this,Bn).direction,r,n)}}));L(this,Fd,R(()=>({id:_(this,$s).current,"data-orientation":Da(_(this,Bn).orientation.current),"data-disabled":nr(_(this,Bn).disabled.current),style:this.rangeStyles,[GV]:""})));De(this,$s,e.id),De(this,Dd,e.ref),De(this,Bn,r),dt({id:_(this,$s),ref:_(this,Dd)})}get rangeStyles(){return p(_(this,Nd))}set rangeStyles(e){U(_(this,Nd),e)}get props(){return p(_(this,Fd))}set props(e){U(_(this,Fd),e)}}$s=new WeakMap,Dd=new WeakMap,Bn=new WeakMap,Nd=new WeakMap,Fd=new WeakMap;var Ls,Bs,Vs,cr,Vh,mr,Ar,$d;class YV{constructor(e,r){L(this,mr);L(this,Ls);L(this,Bs);L(this,Vs);L(this,cr);L(this,Vh,R(()=>_(this,cr).disabled.current||_(this,cr).disabled.current));L(this,$d,R(()=>({..._(this,cr).thumbsPropsArr[_(this,Vs).current],id:_(this,Ls).current,onkeydown:this.onkeydown})));De(this,Ls,e.id),De(this,Bs,e.ref),De(this,cr,r),De(this,Vs,e.index),dt({id:_(this,Ls),ref:_(this,Bs)}),this.onkeydown=this.onkeydown.bind(this)}onkeydown(e){if(p(_(this,Vh)))return;const r=_(this,Bs).current;if(!r)return;const n=_(this,cr).getAllThumbs();if(!n.length)return;const i=n.indexOf(r);if(_(this,cr).currentThumbIdx=i,!KV.includes(e.key))return;e.preventDefault();const a=_(this,cr).min.current,s=_(this,cr).max.current,l=_(this,cr).value.current[i],c=_(this,cr).orientation.current,d=_(this,cr).direction,u=_(this,cr).step.current;switch(e.key){case tg:Nt(this,mr,Ar).call(this,a);break;case rg:Nt(this,mr,Ar).call(this,s);break;case ro:if(c!=="horizontal")break;if(e.metaKey){const g=d==="rl"?s:a;Nt(this,mr,Ar).call(this,g)}else d==="rl"&&l<s?Nt(this,mr,Ar).call(this,l+u):d==="lr"&&l>a&&Nt(this,mr,Ar).call(this,l-u);break;case no:if(c!=="horizontal")break;if(e.metaKey){const g=d==="rl"?a:s;Nt(this,mr,Ar).call(this,g)}else d==="rl"&&l>a?Nt(this,mr,Ar).call(this,l-u):d==="lr"&&l<s&&Nt(this,mr,Ar).call(this,l+u);break;case Un:if(e.metaKey){const g=d==="tb"?a:s;Nt(this,mr,Ar).call(this,g)}else d==="tb"&&l>a?Nt(this,mr,Ar).call(this,l-u):d!=="tb"&&l<s&&Nt(this,mr,Ar).call(this,l+u);break;case In:if(e.metaKey){const g=d==="tb"?s:a;Nt(this,mr,Ar).call(this,g)}else d==="tb"&&l<s?Nt(this,mr,Ar).call(this,l+u):d!=="tb"&&l>a&&Nt(this,mr,Ar).call(this,l-u);break}_(this,cr).onValueCommit.current(_(this,cr).value.current)}get props(){return p(_(this,$d))}set props(e){U(_(this,$d),e)}}Ls=new WeakMap,Bs=new WeakMap,Vs=new WeakMap,cr=new WeakMap,Vh=new WeakMap,mr=new WeakSet,Ar=function(e){_(this,cr).updateValue(e,_(this,Vs).current)},$d=new WeakMap;var js,Ld,Bd,Vd,jd;class XV{constructor(e,r){L(this,js);L(this,Ld);L(this,Bd);L(this,Vd);L(this,jd,R(()=>({..._(this,Vd).ticksPropsArr[_(this,Bd).current],id:_(this,js).current})));De(this,js,e.id),De(this,Ld,e.ref),De(this,Vd,r),De(this,Bd,e.index),dt({id:_(this,js),ref:_(this,Ld)})}get props(){return p(_(this,jd))}set props(e){U(_(this,jd),e)}}js=new WeakMap,Ld=new WeakMap,Bd=new WeakMap,Vd=new WeakMap,jd=new WeakMap;const[QV,d0]=Jn("Slider.Root");function ZV(t){return QV(new WV(t))}function JV(t){return new qV(t,d0())}function ej(t){return new YV(t,d0())}function tj(t){return new XV(t,d0())}var rj=H("<span><!></span>");function nj(t,e){le(e,!0);let r=T(e,"id",19,et),n=T(e,"ref",15,null),i=T(e,"value",31,()=>vr([])),a=T(e,"onValueChange",3,xt),s=T(e,"onValueCommit",3,xt),o=T(e,"disabled",3,!1),l=T(e,"min",3,0),c=T(e,"max",3,100),d=T(e,"step",3,1),u=T(e,"dir",3,"ltr"),g=T(e,"autoSort",3,!0),f=T(e,"orientation",3,"horizontal"),h=T(e,"controlledValue",3,!1),m=Ce(e,["$$slots","$$events","$$legacy","children","child","id","ref","value","onValueChange","onValueCommit","disabled","min","max","step","dir","autoSort","orientation","controlledValue"]);const v=ZV({id:W.with(()=>r()),ref:W.with(()=>n(),C=>n(C)),value:W.with(()=>i(),C=>{h()||i(C),a()(C)}),onValueCommit:W.with(()=>s()),disabled:W.with(()=>o()),min:W.with(()=>l()),max:W.with(()=>c()),step:W.with(()=>d()),dir:W.with(()=>u()),autoSort:W.with(()=>g()),orientation:W.with(()=>f())}),b=R(()=>Ge(m,v.props));var x=F(),y=P(x);{var S=C=>{var D=F(),E=P(D),O=fr(()=>({props:p(b),...v.snippetProps}));ge(E,()=>e.child,()=>p(O)),w(C,D)},I=C=>{var D=rj();let E;var O=re(D);ge(O,()=>e.children??Ve,()=>v.snippetProps),ne(D),Ee(()=>E=Fe(D,E,{...p(b)})),w(C,D)};fe(y,C=>{e.child?C(S):C(I,!1)})}w(t,x),ce()}var ij=H("<span><!></span>");function aj(t,e){le(e,!0);let r=T(e,"ref",15,null),n=T(e,"id",19,et),i=Ce(e,["$$slots","$$events","$$legacy","children","child","ref","id"]);const a=JV({id:W.with(()=>n()),ref:W.with(()=>r(),u=>r(u))}),s=R(()=>Ge(i,a.props));var o=F(),l=P(o);{var c=u=>{var g=F(),f=P(g);ge(f,()=>e.child,()=>({props:p(s)})),w(u,g)},d=u=>{var g=ij();let f;var h=re(g);ge(h,()=>e.children??Ve),ne(g),Ee(()=>f=Fe(g,f,{...p(s)})),w(u,g)};fe(l,u=>{e.child?u(c):u(d,!1)})}w(t,o),ce()}var sj=H("<span><!></span>");function oj(t,e){le(e,!0);let r=T(e,"ref",15,null),n=T(e,"id",19,et),i=T(e,"disabled",3,!1),a=Ce(e,["$$slots","$$events","$$legacy","children","child","ref","id","index","disabled"]);const s=ej({id:W.with(()=>n()),ref:W.with(()=>r(),g=>r(g)),index:W.with(()=>e.index),disabled:W.with(()=>i())}),o=R(()=>Ge(a,s.props));var l=F(),c=P(l);{var d=g=>{var f=F(),h=P(f);ge(h,()=>e.child,()=>({props:p(o)})),w(g,f)},u=g=>{var f=sj();let h;var m=re(f);ge(m,()=>e.children??Ve),ne(f),Ee(()=>h=Fe(f,h,{...p(o)})),w(g,f)};fe(c,g=>{e.child?g(d):g(u,!1)})}w(t,l),ce()}var lj=H("<span><!></span>");function Ef(t,e){le(e,!0);let r=T(e,"ref",15,null),n=T(e,"id",19,et),i=Ce(e,["$$slots","$$events","$$legacy","children","child","ref","id","index"]);const a=tj({id:W.with(()=>n()),ref:W.with(()=>r(),u=>r(u)),index:W.with(()=>e.index)}),s=R(()=>Ge(i,a.props));var o=F(),l=P(o);{var c=u=>{var g=F(),f=P(g);ge(f,()=>e.child,()=>({props:p(s)})),w(u,g)},d=u=>{var g=lj();let f;var h=re(g);ge(h,()=>e.children??Ve),ne(g),Ee(()=>f=Fe(g,f,{...p(s)})),w(u,g)};fe(l,u=>{e.child?u(c):u(d,!1)})}w(t,o),ce()}const cj="data-tabs-root",dj="data-tabs-list",f4="data-tabs-trigger",uj="data-tabs-content";var Ia,zd,Ud;class fj{constructor(e){L(this,Ia);z(this,"ref");z(this,"orientation");z(this,"loop");z(this,"activationMode");z(this,"value");z(this,"disabled");z(this,"rovingFocusGroup");L(this,zd,Me(vr([])));z(this,"valueToTriggerId",new H0);z(this,"valueToContentId",new H0);L(this,Ud,R(()=>({id:_(this,Ia).current,"data-orientation":Da(this.orientation.current),[cj]:""})));De(this,Ia,e.id),this.ref=e.ref,this.orientation=e.orientation,this.loop=e.loop,this.activationMode=e.activationMode,this.value=e.value,this.disabled=e.disabled,dt({id:_(this,Ia),ref:this.ref}),this.rovingFocusGroup=U_({candidateAttr:f4,rootNodeId:_(this,Ia),loop:this.loop,orientation:this.orientation})}get triggerIds(){return p(_(this,zd))}set triggerIds(e){U(_(this,zd),e,!0)}registerTrigger(e,r){return this.triggerIds.push(e),this.valueToTriggerId.set(r,e),()=>{this.triggerIds=this.triggerIds.filter(n=>n!==e),this.valueToTriggerId.delete(r)}}registerContent(e,r){return this.valueToContentId.set(r,e),()=>{this.valueToContentId.delete(r)}}setValue(e){this.value.current=e}get props(){return p(_(this,Ud))}set props(e){U(_(this,Ud),e)}}Ia=new WeakMap,zd=new WeakMap,Ud=new WeakMap;var zs,Gd,Ca,jh,Hd;class hj{constructor(e,r){L(this,zs);L(this,Gd);L(this,Ca);L(this,jh,R(()=>_(this,Ca).disabled.current));L(this,Hd,R(()=>({id:_(this,zs).current,role:"tablist","aria-orientation":av(_(this,Ca).orientation.current),"data-orientation":Da(_(this,Ca).orientation.current),[dj]:"","data-disabled":nr(p(_(this,jh)))})));De(this,Ca,r),De(this,zs,e.id),De(this,Gd,e.ref),dt({id:_(this,zs),ref:_(this,Gd)})}get props(){return p(_(this,Hd))}set props(e){U(_(this,Hd),e)}}zs=new WeakMap,Gd=new WeakMap,Ca=new WeakMap,jh=new WeakMap,Hd=new WeakMap;var Tr,Pa,Us,Wd,Vn,Gs,Ni,Hs,zh,Ws,th,Kd;class gj{constructor(e,r){L(this,Ws);L(this,Tr);L(this,Pa);L(this,Us);L(this,Wd);L(this,Vn);L(this,Gs,R(()=>_(this,Tr).value.current===_(this,Vn).current));L(this,Ni,R(()=>_(this,Wd).current||_(this,Tr).disabled.current));L(this,Hs,Me(0));L(this,zh,R(()=>_(this,Tr).valueToContentId.get(_(this,Vn).current)));z(this,"onfocus",e=>{_(this,Tr).activationMode.current!=="automatic"||p(_(this,Ni))||Nt(this,Ws,th).call(this)});z(this,"onclick",e=>{p(_(this,Ni))||Nt(this,Ws,th).call(this)});z(this,"onkeydown",e=>{if(!p(_(this,Ni))){if(e.key===Fa||e.key===Na){e.preventDefault(),Nt(this,Ws,th).call(this);return}_(this,Tr).rovingFocusGroup.handleKeydown(_(this,Us).current,e)}});L(this,Kd,R(()=>({id:_(this,Pa).current,role:"tab","data-state":h4(p(_(this,Gs))),"data-value":_(this,Vn).current,"data-orientation":Da(_(this,Tr).orientation.current),"data-disabled":nr(p(_(this,Ni))),"aria-selected":D_(p(_(this,Gs))),"aria-controls":p(_(this,zh)),[f4]:"",disabled:N_(p(_(this,Ni))),tabindex:p(_(this,Hs)),onclick:this.onclick,onfocus:this.onfocus,onkeydown:this.onkeydown})));De(this,Tr,r),De(this,Pa,e.id),De(this,Us,e.ref),De(this,Vn,e.value),De(this,Wd,e.disabled),dt({id:_(this,Pa),ref:_(this,Us)}),qe(()=>{const n=_(this,Pa).current,i=_(this,Vn).current;return $e(()=>{const a=_(this,Tr).registerTrigger(n,i);return()=>{a()}})}),qe(()=>{_(this,Tr).triggerIds.length,p(_(this,Gs))||!_(this,Tr).value.current?U(_(this,Hs),0):U(_(this,Hs),-1)}),this.onfocus=this.onfocus.bind(this),this.onclick=this.onclick.bind(this),this.onkeydown=this.onkeydown.bind(this)}get props(){return p(_(this,Kd))}set props(e){U(_(this,Kd),e)}}Tr=new WeakMap,Pa=new WeakMap,Us=new WeakMap,Wd=new WeakMap,Vn=new WeakMap,Gs=new WeakMap,Ni=new WeakMap,Hs=new WeakMap,zh=new WeakMap,Ws=new WeakSet,th=function(){_(this,Tr).value.current!==_(this,Vn).current&&_(this,Tr).setValue(_(this,Vn).current)},Kd=new WeakMap;var Ea,Aa,qd,Fi,Yd,Uh,Xd;class pj{constructor(e,r){L(this,Ea);L(this,Aa);L(this,qd);L(this,Fi);L(this,Yd,R(()=>_(this,Ea).value.current===_(this,Fi).current));L(this,Uh,R(()=>_(this,Ea).valueToTriggerId.get(_(this,Fi).current)));L(this,Xd,R(()=>({id:_(this,Aa).current,role:"tabpanel",hidden:R6(!p(_(this,Yd))),tabindex:0,"data-value":_(this,Fi).current,"data-state":h4(p(_(this,Yd))),"aria-labelledby":p(_(this,Uh)),[uj]:""})));De(this,Ea,r),De(this,Fi,e.value),De(this,Aa,e.id),De(this,qd,e.ref),dt({id:_(this,Aa),ref:_(this,qd)}),qe(()=>{const n=_(this,Aa).current,i=_(this,Fi).current;$e(()=>{const a=_(this,Ea).registerContent(n,i);return()=>{a()}})})}get props(){return p(_(this,Xd))}set props(e){U(_(this,Xd),e)}}Ea=new WeakMap,Aa=new WeakMap,qd=new WeakMap,Fi=new WeakMap,Yd=new WeakMap,Uh=new WeakMap,Xd=new WeakMap;const[mj,u0]=Jn("Tabs.Root");function vj(t){return mj(new fj(t))}function yj(t){return new gj(t,u0())}function bj(t){return new hj(t,u0())}function _j(t){return new pj(t,u0())}function h4(t){return t?"active":"inactive"}var wj=H("<div><!></div>");function Sj(t,e){le(e,!0);let r=T(e,"id",19,et),n=T(e,"ref",15,null),i=T(e,"value",15,""),a=T(e,"onValueChange",3,xt),s=T(e,"orientation",3,"horizontal"),o=T(e,"loop",3,!0),l=T(e,"activationMode",3,"automatic"),c=T(e,"disabled",3,!1),d=T(e,"controlledValue",3,!1),u=Ce(e,["$$slots","$$events","$$legacy","id","ref","value","onValueChange","orientation","loop","activationMode","disabled","controlledValue","children","child"]);const g=vj({id:W.with(()=>r()),value:W.with(()=>i(),x=>{d()||i(x),a()(x)}),orientation:W.with(()=>s()),loop:W.with(()=>o()),activationMode:W.with(()=>l()),disabled:W.with(()=>c()),ref:W.with(()=>n(),x=>n(x))}),f=R(()=>Ge(u,g.props));var h=F(),m=P(h);{var v=x=>{var y=F(),S=P(y);ge(S,()=>e.child,()=>({props:p(f)})),w(x,y)},b=x=>{var y=wj();let S;var I=re(y);ge(I,()=>e.children??Ve),ne(y),Ee(()=>S=Fe(y,S,{...p(f)})),w(x,y)};fe(m,x=>{e.child?x(v):x(b,!1)})}w(t,h),ce()}var xj=H("<div><!></div>");function Ij(t,e){le(e,!0);let r=T(e,"id",19,et),n=T(e,"ref",15,null),i=Ce(e,["$$slots","$$events","$$legacy","children","child","id","ref","value"]);const a=_j({value:W.with(()=>e.value),id:W.with(()=>r()),ref:W.with(()=>n(),u=>n(u))}),s=R(()=>Ge(i,a.props));var o=F(),l=P(o);{var c=u=>{var g=F(),f=P(g);ge(f,()=>e.child,()=>({props:p(s)})),w(u,g)},d=u=>{var g=xj();let f;var h=re(g);ge(h,()=>e.children??Ve),ne(g),Ee(()=>f=Fe(g,f,{...p(s)})),w(u,g)};fe(l,u=>{e.child?u(c):u(d,!1)})}w(t,o),ce()}var Cj=H("<div><!></div>");function Pj(t,e){le(e,!0);let r=T(e,"id",19,et),n=T(e,"ref",15,null),i=Ce(e,["$$slots","$$events","$$legacy","child","children","id","ref"]);const a=bj({id:W.with(()=>r()),ref:W.with(()=>n(),u=>n(u))}),s=R(()=>Ge(i,a.props));var o=F(),l=P(o);{var c=u=>{var g=F(),f=P(g);ge(f,()=>e.child,()=>({props:p(s)})),w(u,g)},d=u=>{var g=Cj();let f;var h=re(g);ge(h,()=>e.children??Ve),ne(g),Ee(()=>f=Fe(g,f,{...p(s)})),w(u,g)};fe(l,u=>{e.child?u(c):u(d,!1)})}w(t,o),ce()}var Ej=H("<button><!></button>");function Aj(t,e){le(e,!0);let r=T(e,"disabled",3,!1),n=T(e,"id",19,et),i=T(e,"type",3,"button"),a=T(e,"ref",15,null),s=Ce(e,["$$slots","$$events","$$legacy","child","children","disabled","id","type","value","ref"]);const o=yj({id:W.with(()=>n()),disabled:W.with(()=>r()??!1),value:W.with(()=>e.value),ref:W.with(()=>a(),f=>a(f))}),l=R(()=>Ge(s,o.props,{type:i()}));var c=F(),d=P(c);{var u=f=>{var h=F(),m=P(h);ge(m,()=>e.child,()=>({props:p(l)})),w(f,h)},g=f=>{var h=Ej();let m;var v=re(h);ge(v,()=>e.children??Ve),ne(h),Ee(()=>m=Fe(h,m,{...p(l)})),w(f,h)};fe(d,f=>{e.child?f(u):f(g,!1)})}w(t,c),ce()}var Tj=H("<div><div><!></div></div>"),Oj=H("<div><div><!></div></div>");function kj(t,e){le(e,!0);let r=T(e,"id",19,et),n=T(e,"ref",15,null),i=T(e,"side",3,"top"),a=T(e,"sideOffset",3,0),s=T(e,"align",3,"center"),o=T(e,"avoidCollisions",3,!0),l=T(e,"arrowPadding",3,0),c=T(e,"sticky",3,"partial"),d=T(e,"hideWhenDetached",3,!1),u=T(e,"collisionPadding",3,0),g=T(e,"forceMount",3,!1),f=Ce(e,["$$slots","$$events","$$legacy","children","child","id","ref","side","sideOffset","align","avoidCollisions","arrowPadding","sticky","hideWhenDetached","collisionPadding","onInteractOutside","onEscapeKeydown","forceMount"]);const h=P9({id:W.with(()=>r()),ref:W.with(()=>n(),D=>n(D))}),m=R(()=>({side:i(),sideOffset:a(),align:s(),avoidCollisions:o(),arrowPadding:l(),sticky:c(),hideWhenDetached:d(),collisionPadding:u()})),v=R(()=>Ge(f,p(m),h.props));function b(D){var E;(E=e.onInteractOutside)==null||E.call(e,D),!D.defaultPrevented&&h.root.handleClose()}function x(D){var E;(E=e.onEscapeKeydown)==null||E.call(e,D),!D.defaultPrevented&&h.root.handleClose()}var y=F(),S=P(y);{var I=D=>{Bu(D,Be(()=>p(v),{get enabled(){return h.root.open.current},get id(){return r()},onInteractOutside:b,onEscapeKeydown:x,onOpenAutoFocus:O=>O.preventDefault(),onCloseAutoFocus:O=>O.preventDefault(),trapFocus:!1,loop:!1,preventScroll:!1,forceMount:!0,popper:(O,A)=>{let k=()=>A==null?void 0:A().props,V=()=>A==null?void 0:A().wrapperProps;var G=F();const K=R(()=>Ge(k(),{style:Hi("tooltip")}));var j=P(G);{var Q=q=>{var Z=F(),ee=P(Z),de=fr(()=>({props:p(K),wrapperProps:V(),...h.snippetProps}));ge(ee,()=>e.child,()=>p(de)),w(q,Z)},te=q=>{var Z=Tj();let ee;var de=re(Z);let J;var ie=re(de);ge(ie,()=>e.children??Ve),ne(de),ne(Z),Ee(()=>{ee=Fe(Z,ee,{...V()}),J=Fe(de,J,{...p(K)})}),w(q,Z)};fe(j,q=>{e.child?q(Q):q(te,!1)})}w(O,G)},$$slots:{popper:!0}}))},C=(D,E)=>{{var O=A=>{Vu(A,Be(()=>p(v),{get present(){return h.root.open.current},get id(){return r()},onInteractOutside:b,onEscapeKeydown:x,onOpenAutoFocus:V=>V.preventDefault(),onCloseAutoFocus:V=>V.preventDefault(),trapFocus:!1,loop:!1,preventScroll:!1,forceMount:!1,popper:(V,G)=>{let K=()=>G==null?void 0:G().props,j=()=>G==null?void 0:G().wrapperProps;var Q=F();const te=R(()=>Ge(K(),{style:Hi("tooltip")}));var q=P(Q);{var Z=de=>{var J=F(),ie=P(J),xe=fr(()=>({props:p(te),wrapperProps:j(),...h.snippetProps}));ge(ie,()=>e.child,()=>p(xe)),w(de,J)},ee=de=>{var J=Oj();let ie;var xe=re(J);let ke;var pe=re(xe);ge(pe,()=>e.children??Ve),ne(xe),ne(J),Ee(()=>{ie=Fe(J,ie,{...j()}),ke=Fe(xe,ke,{...p(te)})}),w(de,J)};fe(q,de=>{e.child?de(Z):de(ee,!1)})}w(V,Q)},$$slots:{popper:!0}}))};fe(D,A=>{g()||A(O)},E)}};fe(S,D=>{g()?D(I):D(C,!1)})}w(t,y),ce()}function Dr(t,e){le(e,!0);let r=T(e,"ref",15,null),n=T(e,"sideOffset",3,4),i=Ce(e,["$$slots","$$events","$$legacy","ref","class","sideOffset"]);var a=F(),s=P(a);const o=R(()=>Ue("bg-neutral-2 text-neutral-11 animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 overflow-hidden rounded-md border px-3 py-1.5 text-sm shadow-md",e.class));M(s,()=>kj,(l,c)=>{c(l,Be({get sideOffset(){return n()},get class(){return p(o)}},()=>i,{get ref(){return r()},set ref(d){r(d)}}))}),w(t,a),ce()}var Rj=H("<!> <!>",1),Mj=H('<span class="bg-neutral-1 text-neutral-11 border-neutral-6 flex h-6 w-auto items-center justify-center border-b border-t px-1 py-0.5 text-sm"> </span>'),Dj=H("<!> <!>",1),Nj=H("<!> <!>",1),Fj=H("<!> <!>",1),$j=H("<!> <!>",1),Lj=H("<!> <!>",1),Bj=H("<!> <!>",1),Vj=H("<!> <!>",1),jj=H("<!> <!>",1),zj=H("<!> <!>",1),Uj=H('<div><div class="flex items-center"><!> <!> <!></div> <div><div><!></div> <div><!></div> <div><!></div> <div><!></div></div> <div><!></div> <div><!></div> <div><!></div></div>'),Gj=H("<!> <!> <!>",1),Hj=H("<div><!></div>");function Wj(t,e){le(e,!0);let r=yr(e.canvasId);const n=400;let i=R(()=>r.container.width<n?"vertical":"horizontal"),a=R(()=>{switch(r.transform.config.buttonsPosition){case"bl":return"justify-start items-end";case"br":return"justify-end items-end";case"tl":return"justify-start items-start";case"tr":return"justify-end items-start"}}),s=R(()=>{switch(p(i)){case"horizontal":switch(r.transform.config.buttonsPosition){case"bl":return"flex-row";case"br":return"flex-row-reverse";case"tl":return"flex-row";case"tr":return"flex-row-reverse"}break;case"vertical":switch(r.transform.config.buttonsPosition){case"bl":return"flex-col-reverse";case"br":return"flex-col-reverse";case"tl":return"flex-col";case"tr":return"flex-col"}break}}),o=R(()=>{switch(p(i)){case"horizontal":switch(r.transform.config.buttonsPosition){case"bl":return"items-end";case"br":return"items-end";case"tl":return"items-start";case"tr":return"items-start"}break;case"vertical":switch(r.transform.config.buttonsPosition){case"bl":return"items-start";case"br":return"items-end";case"tl":return"items-start";case"tr":return"items-end"}break}}),l=R(()=>{switch(p(i)){case"horizontal":switch(r.transform.config.buttonsPosition){case"bl":return r.transform.config.buttonsExpanded?"rotate-180":"rotate-10";case"br":return r.transform.config.buttonsExpanded?"rotate-0":"rotate-180";case"tl":return r.transform.config.buttonsExpanded?"rotate-180":"rotate-0";case"tr":return r.transform.config.buttonsExpanded?"rotate-0":"rotate-180"}break;case"vertical":switch(r.transform.config.buttonsPosition){case"bl":return r.transform.config.buttonsExpanded?"-rotate-90":"rotate-90";case"br":return r.transform.config.buttonsExpanded?"-rotate-90":"rotate-90";case"tl":return r.transform.config.buttonsExpanded?"rotate-90":"-rotate-90";case"tr":return r.transform.config.buttonsExpanded?"rotate-90":"-rotate-90"}break}});var c=Hj(),d=re(c);M(d,()=>Mr,(u,g)=>{g(u,{delayDuration:800,children:(f,h)=>{var m=F(),v=P(m);M(v,()=>x9,(b,x)=>{x(b,{get class(){return`z-50 flex ${p(s)??""} ${p(o)??""} justify-start gap-2`},get open(){return r.transform.config.buttonsExpanded},set open(y){r.transform.config.buttonsExpanded=y},children:(y,S)=>{var I=Gj(),C=P(I);M(C,()=>Rr,(O,A)=>{A(O,{class:"order-last",children:(k,V)=>{var G=F(),K=P(G);M(K,()=>I9,(j,Q)=>{Q(j,{children:(te,q)=>{er(te,{variant:"outline",size:"xsm",class:"hover:bg-secondary-5 bg-neutral-1 hover:text-secondary-12 pointer-events-auto flex items-center justify-center",children:(Z,ee)=>{Je(Z,{icon:"material-symbols:double-arrow",width:"3rem",get class(){return`${p(l)??""} text-neutral-11 transition-transform`}})},$$slots:{default:!0}})},$$slots:{default:!0}})}),w(k,G)},$$slots:{default:!0}})});var D=Y(C,2);M(D,()=>Dr,(O,A)=>{A(O,{children:(k,V)=>{He();var G=Ke("Toggle Layout Controls");w(k,G)},$$slots:{default:!0}})});var E=Y(D,2);M(E,()=>C9,(O,A)=>{A(O,{children:(k,V)=>{var G=Uj(),K=re(G),j=re(K);M(j,()=>Mr,(be,ye)=>{ye(be,{children:(ue,Le)=>{var Se=Rj(),Ie=P(Se);M(Ie,()=>Rr,(Pe,Te)=>{Te(Pe,{children:(Oe,ze)=>{er(Oe,{onclick:()=>{r.transform.addScale(-.1)},variant:"outline",size:"xsm",class:"hover:bg-secondary-5 bg-neutral-1 hover:text-secondary-12 border-r-neutral-4 pointer-events-auto flex items-center justify-center rounded-r-none",children:(Re,tt)=>{Je(Re,{icon:"material-symbols:zoom-out",width:"3rem",class:"text-neutral-11"})},$$slots:{default:!0}})},$$slots:{default:!0}})});var Ne=Y(Ie,2);M(Ne,()=>Dr,(Pe,Te)=>{Te(Pe,{children:(Oe,ze)=>{He();var Re=Ke("Zoom out");w(Oe,Re)},$$slots:{default:!0}})}),w(ue,Se)},$$slots:{default:!0}})});var Q=Y(j,2);M(Q,()=>Mr,(be,ye)=>{ye(be,{children:(ue,Le)=>{var Se=Dj(),Ie=P(Se);M(Ie,()=>Rr,(Pe,Te)=>{Te(Pe,{children:(Oe,ze)=>{var Re=Mj(),tt=re(Re);ne(Re),Ee(Dt=>pt(tt,`${Dt??""}
									%`),[()=>Math.trunc(r.transform.scaleFactor.x*100)]),w(Oe,Re)},$$slots:{default:!0}})});var Ne=Y(Ie,2);M(Ne,()=>Dr,(Pe,Te)=>{Te(Pe,{children:(Oe,ze)=>{He();var Re=Ke("Current zoom percentage");w(Oe,Re)},$$slots:{default:!0}})}),w(ue,Se)},$$slots:{default:!0}})});var te=Y(Q,2);M(te,()=>Mr,(be,ye)=>{ye(be,{children:(ue,Le)=>{var Se=Nj(),Ie=P(Se);M(Ie,()=>Rr,(Pe,Te)=>{Te(Pe,{children:(Oe,ze)=>{er(Oe,{onclick:()=>{r.transform.addScale(.1)},variant:"outline",size:"xsm",class:"hover:bg-secondary-5 bg-neutral-1 hover:text-secondary-12 border-l-neutral-4 pointer-events-auto flex items-center justify-center rounded-l-none",children:(Re,tt)=>{Je(Re,{icon:"material-symbols:zoom-in",width:"3rem",class:"text-neutral-11"})},$$slots:{default:!0}})},$$slots:{default:!0}})});var Ne=Y(Ie,2);M(Ne,()=>Dr,(Pe,Te)=>{Te(Pe,{children:(Oe,ze)=>{He();var Re=Ke("Zoom in");w(Oe,Re)},$$slots:{default:!0}})}),w(ue,Se)},$$slots:{default:!0}})}),ne(K);var q=Y(K,2),Z=re(q),ee=re(Z);M(ee,()=>Mr,(be,ye)=>{ye(be,{children:(ue,Le)=>{var Se=Fj(),Ie=P(Se);M(Ie,()=>Rr,(Pe,Te)=>{Te(Pe,{children:(Oe,ze)=>{er(Oe,{onclick:()=>{r.transform.translate({x:120,y:0})},variant:"outline",size:"xsm",class:"hover:bg-secondary-5 bg-neutral-1 hover:text-secondary-12 pointer-events-auto flex items-center justify-center",children:(Re,tt)=>{Je(Re,{icon:"material-symbols:arrow-back-2",width:"3rem",class:"text-neutral-11"})},$$slots:{default:!0}})},$$slots:{default:!0}})});var Ne=Y(Ie,2);M(Ne,()=>Dr,(Pe,Te)=>{Te(Pe,{children:(Oe,ze)=>{He();var Re=Ke("Move Left");w(Oe,Re)},$$slots:{default:!0}})}),w(ue,Se)},$$slots:{default:!0}})}),ne(Z);var de=Y(Z,2),J=re(de);M(J,()=>Mr,(be,ye)=>{ye(be,{children:(ue,Le)=>{var Se=$j(),Ie=P(Se);M(Ie,()=>Rr,(Pe,Te)=>{Te(Pe,{children:(Oe,ze)=>{er(Oe,{onclick:()=>{r.transform.translate({x:0,y:120})},variant:"outline",size:"xsm",class:"hover:bg-secondary-5 bg-neutral-1 hover:text-secondary-12 pointer-events-auto flex items-center justify-center",children:(Re,tt)=>{Je(Re,{icon:"material-symbols:arrow-back-2",width:"3rem",class:"text-neutral-11 rotate-90"})},$$slots:{default:!0}})},$$slots:{default:!0}})});var Ne=Y(Ie,2);M(Ne,()=>Dr,(Pe,Te)=>{Te(Pe,{children:(Oe,ze)=>{He();var Re=Ke("Move up");w(Oe,Re)},$$slots:{default:!0}})}),w(ue,Se)},$$slots:{default:!0}})}),ne(de);var ie=Y(de,2),xe=re(ie);M(xe,()=>Mr,(be,ye)=>{ye(be,{children:(ue,Le)=>{var Se=Lj(),Ie=P(Se);M(Ie,()=>Rr,(Pe,Te)=>{Te(Pe,{children:(Oe,ze)=>{er(Oe,{onclick:()=>{r.transform.translate({x:-120,y:0})},variant:"outline",size:"xsm",class:"hover:bg-secondary-5 bg-neutral-1 hover:text-secondary-12 pointer-events-auto flex items-center justify-center",children:(Re,tt)=>{Je(Re,{icon:"material-symbols:arrow-back-2",width:"3rem",class:"text-neutral-11 rotate-180"})},$$slots:{default:!0}})},$$slots:{default:!0}})});var Ne=Y(Ie,2);M(Ne,()=>Dr,(Pe,Te)=>{Te(Pe,{children:(Oe,ze)=>{He();var Re=Ke("Move right");w(Oe,Re)},$$slots:{default:!0}})}),w(ue,Se)},$$slots:{default:!0}})}),ne(ie);var ke=Y(ie,2),pe=re(ke);M(pe,()=>Mr,(be,ye)=>{ye(be,{children:(ue,Le)=>{var Se=Bj(),Ie=P(Se);M(Ie,()=>Rr,(Pe,Te)=>{Te(Pe,{children:(Oe,ze)=>{er(Oe,{onclick:()=>{r.transform.translate({x:0,y:-120})},variant:"outline",size:"xsm",class:"hover:bg-secondary-5 bg-neutral-1 hover:text-secondary-12 pointer-events-auto flex items-center justify-center",children:(Re,tt)=>{Je(Re,{icon:"material-symbols:arrow-back-2",width:"3rem",class:"text-neutral-11 -rotate-90"})},$$slots:{default:!0}})},$$slots:{default:!0}})});var Ne=Y(Ie,2);M(Ne,()=>Dr,(Pe,Te)=>{Te(Pe,{children:(Oe,ze)=>{He();var Re=Ke("Move down");w(Oe,Re)},$$slots:{default:!0}})}),w(ue,Se)},$$slots:{default:!0}})}),ne(ke),ne(q);var B=Y(q,2),X=re(B);M(X,()=>Mr,(be,ye)=>{ye(be,{children:(ue,Le)=>{var Se=Vj(),Ie=P(Se);M(Ie,()=>Rr,(Pe,Te)=>{Te(Pe,{children:(Oe,ze)=>{er(Oe,{get onclick(){return r.transform.reset},variant:"outline",size:"xsm",class:"hover:bg-secondary-5 bg-neutral-1 hover:text-secondary-12 pointer-events-auto flex items-center justify-center",children:(Re,tt)=>{Je(Re,{icon:"material-symbols:home",width:"3rem",class:"text-neutral-11"})},$$slots:{default:!0}})},$$slots:{default:!0}})});var Ne=Y(Ie,2);M(Ne,()=>Dr,(Pe,Te)=>{Te(Pe,{children:(Oe,ze)=>{He();var Re=Ke("Reset layout position");w(Oe,Re)},$$slots:{default:!0}})}),w(ue,Se)},$$slots:{default:!0}})}),ne(B);var oe=Y(B,2),me=re(oe);M(me,()=>Mr,(be,ye)=>{ye(be,{children:(ue,Le)=>{var Se=jj(),Ie=P(Se);M(Ie,()=>Rr,(Pe,Te)=>{Te(Pe,{children:(Oe,ze)=>{const Re=R(()=>r.gridManager.config.snapToGrid?"bg-secondary-5 border-secondary-6 hover:bg-neutral-3 hover:border-neutral-8":"bg-neutral-1 hover:bg-secondary-5");er(Oe,{onclick:()=>{r.gridManager.config.snapToGrid=!r.gridManager.config.snapToGrid},variant:"outline",size:"xsm",get class(){return`${p(Re)??""} hover:text-secondary-12 pointer-events-auto flex rotate-180 items-center justify-center transition-colors`},children:(tt,Dt)=>{Je(tt,{icon:"iconoir:magnet-solid",width:"3rem",class:"text-neutral-11"})},$$slots:{default:!0}})},$$slots:{default:!0}})});var Ne=Y(Ie,2);M(Ne,()=>Dr,(Pe,Te)=>{Te(Pe,{children:(Oe,ze)=>{He();var Re=Ke("Toggle snap to grid");w(Oe,Re)},$$slots:{default:!0}})}),w(ue,Se)},$$slots:{default:!0}})}),ne(oe);var he=Y(oe,2),we=re(he);M(we,()=>Mr,(be,ye)=>{ye(be,{children:(ue,Le)=>{var Se=zj(),Ie=P(Se);M(Ie,()=>Rr,(Pe,Te)=>{Te(Pe,{children:(Oe,ze)=>{const Re=R(()=>r.gridManager.config.rightAngleConstraint?"bg-secondary-5 border-secondary-6 hover:bg-neutral-3 hover:border-neutral-8":"bg-neutral-1 hover:bg-secondary-5");er(Oe,{onclick:()=>{r.gridManager.config.rightAngleConstraint=!r.gridManager.config.rightAngleConstraint},variant:"outline",size:"xsm",get class(){return`${p(Re)??""} hover:text-secondary-12 pointer-events-auto flex items-center justify-center transition-colors`},children:(tt,Dt)=>{Je(tt,{icon:"mdi:parallel",width:"3rem",class:"text-neutral-11"})},$$slots:{default:!0}})},$$slots:{default:!0}})});var Ne=Y(Ie,2);M(Ne,()=>Dr,(Pe,Te)=>{Te(Pe,{children:(Oe,ze)=>{He();var Re=Ke("Toggle right angle constraint");w(Oe,Re)},$$slots:{default:!0}})}),w(ue,Se)},$$slots:{default:!0}})}),ne(he),ne(G),Ee(()=>{Wt(G,1,`flex ${p(s)??""} ${p(o)??""} gap-2`),Wt(q,1,`grid gap-1 ${p(i)==="horizontal"?"grid-cols-3 grid-rows-2":"grid-cols-2 grid-rows-3"}`),Wt(Z,1,fn(p(i)==="horizontal"?"order-1 row-span-2 self-center":"order-2")),Wt(de,1,fn(p(i)==="horizontal"?"order-2":"order-1 col-span-2 justify-self-center")),Wt(ie,1,fn(p(i)==="horizontal"?"order-3 row-span-2 self-center":"order-3")),Wt(ke,1,fn(p(i)==="horizontal"?"order-4":"order-4 col-span-2 justify-self-center"))}),w(k,G)},$$slots:{default:!0}})}),w(y,I)},$$slots:{default:!0}})}),w(f,m)},$$slots:{default:!0}})}),ne(c),Ee(()=>Wt(c,1,`flex h-full w-full p-2 ${p(a)??""}`)),w(t,c),ce()}var f0={exports:{}},yg={},g4={},lt={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t._registerNode=t.Konva=t.glob=void 0;const e=Math.PI/180;function r(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}t.glob=typeof Bi<"u"?Bi:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},t.Konva={_global:t.glob,version:"9.3.20",isBrowser:r(),isUnminified:/param/.test((function(i){}).toString()),dblClickWindow:400,getAngle(i){return t.Konva.angleDeg?i*e:i},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return t.Konva.DD.isDragging},isTransforming(){var i;return(i=t.Konva.Transformer)===null||i===void 0?void 0:i.isTransforming()},isDragReady(){return!!t.Konva.DD.node},releaseCanvasOnDestroy:!0,document:t.glob.document,_injectGlobal(i){t.glob.Konva=i}};const n=i=>{t.Konva[i.prototype.getClassName()]=i};t._registerNode=n,t.Konva._injectGlobal(t.Konva)})(lt);var $t={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Util=t.Transform=void 0;const e=lt;class r{constructor(S=[1,0,0,1,0,0]){this.dirty=!1,this.m=S&&S.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new r(this.m)}copyInto(S){S.m[0]=this.m[0],S.m[1]=this.m[1],S.m[2]=this.m[2],S.m[3]=this.m[3],S.m[4]=this.m[4],S.m[5]=this.m[5]}point(S){const I=this.m;return{x:I[0]*S.x+I[2]*S.y+I[4],y:I[1]*S.x+I[3]*S.y+I[5]}}translate(S,I){return this.m[4]+=this.m[0]*S+this.m[2]*I,this.m[5]+=this.m[1]*S+this.m[3]*I,this}scale(S,I){return this.m[0]*=S,this.m[1]*=S,this.m[2]*=I,this.m[3]*=I,this}rotate(S){const I=Math.cos(S),C=Math.sin(S),D=this.m[0]*I+this.m[2]*C,E=this.m[1]*I+this.m[3]*C,O=this.m[0]*-C+this.m[2]*I,A=this.m[1]*-C+this.m[3]*I;return this.m[0]=D,this.m[1]=E,this.m[2]=O,this.m[3]=A,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(S,I){const C=this.m[0]+this.m[2]*I,D=this.m[1]+this.m[3]*I,E=this.m[2]+this.m[0]*S,O=this.m[3]+this.m[1]*S;return this.m[0]=C,this.m[1]=D,this.m[2]=E,this.m[3]=O,this}multiply(S){const I=this.m[0]*S.m[0]+this.m[2]*S.m[1],C=this.m[1]*S.m[0]+this.m[3]*S.m[1],D=this.m[0]*S.m[2]+this.m[2]*S.m[3],E=this.m[1]*S.m[2]+this.m[3]*S.m[3],O=this.m[0]*S.m[4]+this.m[2]*S.m[5]+this.m[4],A=this.m[1]*S.m[4]+this.m[3]*S.m[5]+this.m[5];return this.m[0]=I,this.m[1]=C,this.m[2]=D,this.m[3]=E,this.m[4]=O,this.m[5]=A,this}invert(){const S=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),I=this.m[3]*S,C=-this.m[1]*S,D=-this.m[2]*S,E=this.m[0]*S,O=S*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),A=S*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=I,this.m[1]=C,this.m[2]=D,this.m[3]=E,this.m[4]=O,this.m[5]=A,this}getMatrix(){return this.m}decompose(){const S=this.m[0],I=this.m[1],C=this.m[2],D=this.m[3],E=this.m[4],O=this.m[5],A=S*D-I*C,k={x:E,y:O,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(S!=0||I!=0){const V=Math.sqrt(S*S+I*I);k.rotation=I>0?Math.acos(S/V):-Math.acos(S/V),k.scaleX=V,k.scaleY=A/V,k.skewX=(S*C+I*D)/A,k.skewY=0}else if(C!=0||D!=0){const V=Math.sqrt(C*C+D*D);k.rotation=Math.PI/2-(D>0?Math.acos(-C/V):-Math.acos(C/V)),k.scaleX=A/V,k.scaleY=V,k.skewX=0,k.skewY=(S*C+I*D)/A}return k.rotation=t.Util._getRotation(k.rotation),k}}t.Transform=r;const n="[object Array]",i="[object Number]",a="[object String]",s="[object Boolean]",o=Math.PI/180,l=180/Math.PI,c="#",d="",u="0",g="Konva warning: ",f="Konva error: ",h="rgb(",m={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},v=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let b=[];const x=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(y){setTimeout(y,60)};t.Util={_isElement(y){return!!(y&&y.nodeType==1)},_isFunction(y){return!!(y&&y.constructor&&y.call&&y.apply)},_isPlainObject(y){return!!y&&y.constructor===Object},_isArray(y){return Object.prototype.toString.call(y)===n},_isNumber(y){return Object.prototype.toString.call(y)===i&&!isNaN(y)&&isFinite(y)},_isString(y){return Object.prototype.toString.call(y)===a},_isBoolean(y){return Object.prototype.toString.call(y)===s},isObject(y){return y instanceof Object},isValidSelector(y){if(typeof y!="string")return!1;const S=y[0];return S==="#"||S==="."||S===S.toUpperCase()},_sign(y){return y===0||y>0?1:-1},requestAnimFrame(y){b.push(y),b.length===1&&x(function(){const S=b;b=[],S.forEach(function(I){I()})})},createCanvasElement(){const y=document.createElement("canvas");try{y.style=y.style||{}}catch{}return y},createImageElement(){return document.createElement("img")},_isInDocument(y){for(;y=y.parentNode;)if(y==document)return!0;return!1},_urlToImage(y,S){const I=t.Util.createImageElement();I.onload=function(){S(I)},I.src=y},_rgbToHex(y,S,I){return((1<<24)+(y<<16)+(S<<8)+I).toString(16).slice(1)},_hexToRgb(y){y=y.replace(c,d);const S=parseInt(y,16);return{r:S>>16&255,g:S>>8&255,b:S&255}},getRandomColor(){let y=(Math.random()*16777215<<0).toString(16);for(;y.length<6;)y=u+y;return c+y},getRGB(y){let S;return y in m?(S=m[y],{r:S[0],g:S[1],b:S[2]}):y[0]===c?this._hexToRgb(y.substring(1)):y.substr(0,4)===h?(S=v.exec(y.replace(/ /g,"")),{r:parseInt(S[1],10),g:parseInt(S[2],10),b:parseInt(S[3],10)}):{r:0,g:0,b:0}},colorToRGBA(y){return y=y||"black",t.Util._namedColorToRBA(y)||t.Util._hex3ColorToRGBA(y)||t.Util._hex4ColorToRGBA(y)||t.Util._hex6ColorToRGBA(y)||t.Util._hex8ColorToRGBA(y)||t.Util._rgbColorToRGBA(y)||t.Util._rgbaColorToRGBA(y)||t.Util._hslColorToRGBA(y)},_namedColorToRBA(y){const S=m[y.toLowerCase()];return S?{r:S[0],g:S[1],b:S[2],a:1}:null},_rgbColorToRGBA(y){if(y.indexOf("rgb(")===0){y=y.match(/rgb\(([^)]+)\)/)[1];const S=y.split(/ *, */).map(Number);return{r:S[0],g:S[1],b:S[2],a:1}}},_rgbaColorToRGBA(y){if(y.indexOf("rgba(")===0){y=y.match(/rgba\(([^)]+)\)/)[1];const S=y.split(/ *, */).map((I,C)=>I.slice(-1)==="%"?C===3?parseInt(I)/100:parseInt(I)/100*255:Number(I));return{r:S[0],g:S[1],b:S[2],a:S[3]}}},_hex8ColorToRGBA(y){if(y[0]==="#"&&y.length===9)return{r:parseInt(y.slice(1,3),16),g:parseInt(y.slice(3,5),16),b:parseInt(y.slice(5,7),16),a:parseInt(y.slice(7,9),16)/255}},_hex6ColorToRGBA(y){if(y[0]==="#"&&y.length===7)return{r:parseInt(y.slice(1,3),16),g:parseInt(y.slice(3,5),16),b:parseInt(y.slice(5,7),16),a:1}},_hex4ColorToRGBA(y){if(y[0]==="#"&&y.length===5)return{r:parseInt(y[1]+y[1],16),g:parseInt(y[2]+y[2],16),b:parseInt(y[3]+y[3],16),a:parseInt(y[4]+y[4],16)/255}},_hex3ColorToRGBA(y){if(y[0]==="#"&&y.length===4)return{r:parseInt(y[1]+y[1],16),g:parseInt(y[2]+y[2],16),b:parseInt(y[3]+y[3],16),a:1}},_hslColorToRGBA(y){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(y)){const[S,...I]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(y),C=Number(I[0])/360,D=Number(I[1])/100,E=Number(I[2])/100;let O,A,k;if(D===0)return k=E*255,{r:Math.round(k),g:Math.round(k),b:Math.round(k),a:1};E<.5?O=E*(1+D):O=E+D-E*D;const V=2*E-O,G=[0,0,0];for(let K=0;K<3;K++)A=C+1/3*-(K-1),A<0&&A++,A>1&&A--,6*A<1?k=V+(O-V)*6*A:2*A<1?k=O:3*A<2?k=V+(O-V)*(2/3-A)*6:k=V,G[K]=k*255;return{r:Math.round(G[0]),g:Math.round(G[1]),b:Math.round(G[2]),a:1}}},haveIntersection(y,S){return!(S.x>y.x+y.width||S.x+S.width<y.x||S.y>y.y+y.height||S.y+S.height<y.y)},cloneObject(y){const S={};for(const I in y)this._isPlainObject(y[I])?S[I]=this.cloneObject(y[I]):this._isArray(y[I])?S[I]=this.cloneArray(y[I]):S[I]=y[I];return S},cloneArray(y){return y.slice(0)},degToRad(y){return y*o},radToDeg(y){return y*l},_degToRad(y){return t.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),t.Util.degToRad(y)},_radToDeg(y){return t.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),t.Util.radToDeg(y)},_getRotation(y){return e.Konva.angleDeg?t.Util.radToDeg(y):y},_capitalize(y){return y.charAt(0).toUpperCase()+y.slice(1)},throw(y){throw new Error(f+y)},error(y){console.error(f+y)},warn(y){e.Konva.showWarnings&&console.warn(g+y)},each(y,S){for(const I in y)S(I,y[I])},_inRange(y,S,I){return S<=y&&y<I},_getProjectionToSegment(y,S,I,C,D,E){let O,A,k;const V=(y-I)*(y-I)+(S-C)*(S-C);if(V==0)O=y,A=S,k=(D-I)*(D-I)+(E-C)*(E-C);else{const G=((D-y)*(I-y)+(E-S)*(C-S))/V;G<0?(O=y,A=S,k=(y-D)*(y-D)+(S-E)*(S-E)):G>1?(O=I,A=C,k=(I-D)*(I-D)+(C-E)*(C-E)):(O=y+G*(I-y),A=S+G*(C-S),k=(O-D)*(O-D)+(A-E)*(A-E))}return[O,A,k]},_getProjectionToLine(y,S,I){const C=t.Util.cloneObject(y);let D=Number.MAX_VALUE;return S.forEach(function(E,O){if(!I&&O===S.length-1)return;const A=S[(O+1)%S.length],k=t.Util._getProjectionToSegment(E.x,E.y,A.x,A.y,y.x,y.y),V=k[0],G=k[1],K=k[2];K<D&&(C.x=V,C.y=G,D=K)}),C},_prepareArrayForTween(y,S,I){const C=[],D=[];if(y.length>S.length){const O=S;S=y,y=O}for(let O=0;O<y.length;O+=2)C.push({x:y[O],y:y[O+1]});for(let O=0;O<S.length;O+=2)D.push({x:S[O],y:S[O+1]});const E=[];return D.forEach(function(O){const A=t.Util._getProjectionToLine(O,C,I);E.push(A.x),E.push(A.y)}),E},_prepareToStringify(y){let S;y.visitedByCircularReferenceRemoval=!0;for(const I in y)if(y.hasOwnProperty(I)&&y[I]&&typeof y[I]=="object"){if(S=Object.getOwnPropertyDescriptor(y,I),y[I].visitedByCircularReferenceRemoval||t.Util._isElement(y[I]))if(S.configurable)delete y[I];else return null;else if(t.Util._prepareToStringify(y[I])===null)if(S.configurable)delete y[I];else return null}return delete y.visitedByCircularReferenceRemoval,y},_assign(y,S){for(const I in S)y[I]=S[I];return y},_getFirstPointerId(y){return y.touches?y.changedTouches[0].identifier:y.pointerId||999},releaseCanvas(...y){e.Konva.releaseCanvasOnDestroy&&y.forEach(S=>{S.width=0,S.height=0})},drawRoundedRectPath(y,S,I,C){let D=0,E=0,O=0,A=0;typeof C=="number"?D=E=O=A=Math.min(C,S/2,I/2):(D=Math.min(C[0]||0,S/2,I/2),E=Math.min(C[1]||0,S/2,I/2),A=Math.min(C[2]||0,S/2,I/2),O=Math.min(C[3]||0,S/2,I/2)),y.moveTo(D,0),y.lineTo(S-E,0),y.arc(S-E,E,E,Math.PI*3/2,0,!1),y.lineTo(S,I-A),y.arc(S-A,I-A,A,0,Math.PI/2,!1),y.lineTo(O,I),y.arc(O,I-O,O,Math.PI/2,Math.PI,!1),y.lineTo(0,D),y.arc(D,D,D,Math.PI,Math.PI*3/2,!1)}}})($t);var Mt={},ut={},Xe={};Object.defineProperty(Xe,"__esModule",{value:!0});Xe.RGBComponent=Kj;Xe.alphaComponent=qj;Xe.getNumberValidator=Yj;Xe.getNumberOrArrayOfNumbersValidator=Xj;Xe.getNumberOrAutoValidator=Qj;Xe.getStringValidator=Zj;Xe.getStringOrGradientValidator=Jj;Xe.getFunctionValidator=ez;Xe.getNumberArrayValidator=tz;Xe.getBooleanValidator=rz;Xe.getComponentValidator=nz;const wi=lt,Vt=$t;function Si(t){return Vt.Util._isString(t)?'"'+t+'"':Object.prototype.toString.call(t)==="[object Number]"||Vt.Util._isBoolean(t)?t:Object.prototype.toString.call(t)}function Kj(t){return t>255?255:t<0?0:Math.round(t)}function qj(t){return t>1?1:t<1e-4?1e-4:t}function Yj(){if(wi.Konva.isUnminified)return function(t,e){return Vt.Util._isNumber(t)||Vt.Util.warn(Si(t)+' is a not valid value for "'+e+'" attribute. The value should be a number.'),t}}function Xj(t){if(wi.Konva.isUnminified)return function(e,r){let n=Vt.Util._isNumber(e),i=Vt.Util._isArray(e)&&e.length==t;return!n&&!i&&Vt.Util.warn(Si(e)+' is a not valid value for "'+r+'" attribute. The value should be a number or Array<number>('+t+")"),e}}function Qj(){if(wi.Konva.isUnminified)return function(t,e){var r=Vt.Util._isNumber(t),n=t==="auto";return r||n||Vt.Util.warn(Si(t)+' is a not valid value for "'+e+'" attribute. The value should be a number or "auto".'),t}}function Zj(){if(wi.Konva.isUnminified)return function(t,e){return Vt.Util._isString(t)||Vt.Util.warn(Si(t)+' is a not valid value for "'+e+'" attribute. The value should be a string.'),t}}function Jj(){if(wi.Konva.isUnminified)return function(t,e){const r=Vt.Util._isString(t),n=Object.prototype.toString.call(t)==="[object CanvasGradient]"||t&&t.addColorStop;return r||n||Vt.Util.warn(Si(t)+' is a not valid value for "'+e+'" attribute. The value should be a string or a native gradient.'),t}}function ez(){if(wi.Konva.isUnminified)return function(t,e){return Vt.Util._isFunction(t)||Vt.Util.warn(Si(t)+' is a not valid value for "'+e+'" attribute. The value should be a function.'),t}}function tz(){if(wi.Konva.isUnminified)return function(t,e){const r=Int8Array?Object.getPrototypeOf(Int8Array):null;return r&&t instanceof r||(Vt.Util._isArray(t)?t.forEach(function(n){Vt.Util._isNumber(n)||Vt.Util.warn('"'+e+'" attribute has non numeric element '+n+". Make sure that all elements are numbers.")}):Vt.Util.warn(Si(t)+' is a not valid value for "'+e+'" attribute. The value should be a array of numbers.')),t}}function rz(){if(wi.Konva.isUnminified)return function(t,e){var r=t===!0||t===!1;return r||Vt.Util.warn(Si(t)+' is a not valid value for "'+e+'" attribute. The value should be a boolean.'),t}}function nz(t){if(wi.Konva.isUnminified)return function(e,r){return e==null||Vt.Util.isObject(e)||Vt.Util.warn(Si(e)+' is a not valid value for "'+r+'" attribute. The value should be an object with properties '+t),e}}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Factory=void 0;const e=$t,r=Xe,n="get",i="set";t.Factory={addGetterSetter(a,s,o,l,c){t.Factory.addGetter(a,s,o),t.Factory.addSetter(a,s,l,c),t.Factory.addOverloadedGetterSetter(a,s)},addGetter(a,s,o){var l=n+e.Util._capitalize(s);a.prototype[l]=a.prototype[l]||function(){const c=this.attrs[s];return c===void 0?o:c}},addSetter(a,s,o,l){var c=i+e.Util._capitalize(s);a.prototype[c]||t.Factory.overWriteSetter(a,s,o,l)},overWriteSetter(a,s,o,l){var c=i+e.Util._capitalize(s);a.prototype[c]=function(d){return o&&d!==void 0&&d!==null&&(d=o.call(this,d,s)),this._setAttr(s,d),l&&l.call(this),this}},addComponentsGetterSetter(a,s,o,l,c){const d=o.length,u=e.Util._capitalize,g=n+u(s),f=i+u(s);a.prototype[g]=function(){const m={};for(let v=0;v<d;v++){const b=o[v];m[b]=this.getAttr(s+u(b))}return m};const h=(0,r.getComponentValidator)(o);a.prototype[f]=function(m){const v=this.attrs[s];l&&(m=l.call(this,m,s)),h&&h.call(this,m,s);for(const b in m)m.hasOwnProperty(b)&&this._setAttr(s+u(b),m[b]);return m||o.forEach(b=>{this._setAttr(s+u(b),void 0)}),this._fireChangeEvent(s,v,m),c&&c.call(this),this},t.Factory.addOverloadedGetterSetter(a,s)},addOverloadedGetterSetter(a,s){var o=e.Util._capitalize(s),l=i+o,c=n+o;a.prototype[s]=function(){return arguments.length?(this[l](arguments[0]),this):this[c]()}},addDeprecatedGetterSetter(a,s,o,l){e.Util.error("Adding deprecated "+s);const c=n+e.Util._capitalize(s),d=s+" property is deprecated and will be removed soon. Look at Konva change log for more information.";a.prototype[c]=function(){e.Util.error(d);const u=this.attrs[s];return u===void 0?o:u},t.Factory.addSetter(a,s,l,function(){e.Util.error(d)}),t.Factory.addOverloadedGetterSetter(a,s)},backCompat(a,s){e.Util.each(s,function(o,l){const c=a.prototype[l],d=n+e.Util._capitalize(o),u=i+e.Util._capitalize(o);function g(){c.apply(this,arguments),e.Util.error('"'+o+'" method is deprecated and will be removed soon. Use ""'+l+'" instead.')}a.prototype[o]=g,a.prototype[d]=g,a.prototype[u]=g})},afterSetFilter(){this._filterUpToDate=!1}}})(ut);var Pn={},vi={};Object.defineProperty(vi,"__esModule",{value:!0});vi.HitContext=vi.SceneContext=vi.Context=void 0;const p4=$t,iz=lt;function az(t){const e=[],r=t.length,n=p4.Util;for(let i=0;i<r;i++){let a=t[i];n._isNumber(a)?a=Math.round(a*1e3)/1e3:n._isString(a)||(a=a+""),e.push(a)}return e}const o2=",",sz="(",oz=")",lz="([",cz="])",dz=";",uz="()",fz="=",l2=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],hz=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"],gz=100;class bg{constructor(e){this.canvas=e,iz.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(e){e.fillEnabled()&&this._fill(e)}_fill(e){}strokeShape(e){e.hasStroke()&&this._stroke(e)}_stroke(e){}fillStrokeShape(e){e.attrs.fillAfterStrokeEnabled?(this.strokeShape(e),this.fillShape(e)):(this.fillShape(e),this.strokeShape(e))}getTrace(e,r){let n=this.traceArr,i=n.length,a="",s,o,l,c;for(s=0;s<i;s++)o=n[s],l=o.method,l?(c=o.args,a+=l,e?a+=uz:p4.Util._isArray(c[0])?a+=lz+c.join(o2)+cz:(r&&(c=c.map(d=>typeof d=="number"?Math.floor(d):d)),a+=sz+c.join(o2)+oz)):(a+=o.property,e||(a+=fz+o.val)),a+=dz;return a}clearTrace(){this.traceArr=[]}_trace(e){let r=this.traceArr,n;r.push(e),n=r.length,n>=gz&&r.shift()}reset(){const e=this.getCanvas().getPixelRatio();this.setTransform(1*e,0,0,1*e,0,0)}getCanvas(){return this.canvas}clear(e){const r=this.getCanvas();e?this.clearRect(e.x||0,e.y||0,e.width||0,e.height||0):this.clearRect(0,0,r.getWidth()/r.pixelRatio,r.getHeight()/r.pixelRatio)}_applyLineCap(e){const r=e.attrs.lineCap;r&&this.setAttr("lineCap",r)}_applyOpacity(e){const r=e.getAbsoluteOpacity();r!==1&&this.setAttr("globalAlpha",r)}_applyLineJoin(e){const r=e.attrs.lineJoin;r&&this.setAttr("lineJoin",r)}setAttr(e,r){this._context[e]=r}arc(e,r,n,i,a,s){this._context.arc(e,r,n,i,a,s)}arcTo(e,r,n,i,a){this._context.arcTo(e,r,n,i,a)}beginPath(){this._context.beginPath()}bezierCurveTo(e,r,n,i,a,s){this._context.bezierCurveTo(e,r,n,i,a,s)}clearRect(e,r,n,i){this._context.clearRect(e,r,n,i)}clip(...e){this._context.clip.apply(this._context,e)}closePath(){this._context.closePath()}createImageData(e,r){const n=arguments;if(n.length===2)return this._context.createImageData(e,r);if(n.length===1)return this._context.createImageData(e)}createLinearGradient(e,r,n,i){return this._context.createLinearGradient(e,r,n,i)}createPattern(e,r){return this._context.createPattern(e,r)}createRadialGradient(e,r,n,i,a,s){return this._context.createRadialGradient(e,r,n,i,a,s)}drawImage(e,r,n,i,a,s,o,l,c){const d=arguments,u=this._context;d.length===3?u.drawImage(e,r,n):d.length===5?u.drawImage(e,r,n,i,a):d.length===9&&u.drawImage(e,r,n,i,a,s,o,l,c)}ellipse(e,r,n,i,a,s,o,l){this._context.ellipse(e,r,n,i,a,s,o,l)}isPointInPath(e,r,n,i){return n?this._context.isPointInPath(n,e,r,i):this._context.isPointInPath(e,r,i)}fill(...e){this._context.fill.apply(this._context,e)}fillRect(e,r,n,i){this._context.fillRect(e,r,n,i)}strokeRect(e,r,n,i){this._context.strokeRect(e,r,n,i)}fillText(e,r,n,i){i?this._context.fillText(e,r,n,i):this._context.fillText(e,r,n)}measureText(e){return this._context.measureText(e)}getImageData(e,r,n,i){return this._context.getImageData(e,r,n,i)}lineTo(e,r){this._context.lineTo(e,r)}moveTo(e,r){this._context.moveTo(e,r)}rect(e,r,n,i){this._context.rect(e,r,n,i)}roundRect(e,r,n,i,a){this._context.roundRect(e,r,n,i,a)}putImageData(e,r,n){this._context.putImageData(e,r,n)}quadraticCurveTo(e,r,n,i){this._context.quadraticCurveTo(e,r,n,i)}restore(){this._context.restore()}rotate(e){this._context.rotate(e)}save(){this._context.save()}scale(e,r){this._context.scale(e,r)}setLineDash(e){this._context.setLineDash?this._context.setLineDash(e):"mozDash"in this._context?this._context.mozDash=e:"webkitLineDash"in this._context&&(this._context.webkitLineDash=e)}getLineDash(){return this._context.getLineDash()}setTransform(e,r,n,i,a,s){this._context.setTransform(e,r,n,i,a,s)}stroke(e){e?this._context.stroke(e):this._context.stroke()}strokeText(e,r,n,i){this._context.strokeText(e,r,n,i)}transform(e,r,n,i,a,s){this._context.transform(e,r,n,i,a,s)}translate(e,r){this._context.translate(e,r)}_enableTrace(){let e=this,r=l2.length,n=this.setAttr,i,a;const s=function(o){let l=e[o],c;e[o]=function(){return a=az(Array.prototype.slice.call(arguments,0)),c=l.apply(e,arguments),e._trace({method:o,args:a}),c}};for(i=0;i<r;i++)s(l2[i]);e.setAttr=function(){n.apply(e,arguments);const o=arguments[0];let l=arguments[1];(o==="shadowOffsetX"||o==="shadowOffsetY"||o==="shadowBlur")&&(l=l/this.canvas.getPixelRatio()),e._trace({property:o,val:l})}}_applyGlobalCompositeOperation(e){const r=e.attrs.globalCompositeOperation;!r||r==="source-over"||this.setAttr("globalCompositeOperation",r)}}vi.Context=bg;hz.forEach(function(t){Object.defineProperty(bg.prototype,t,{get(){return this._context[t]},set(e){this._context[t]=e}})});class pz extends bg{constructor(e,{willReadFrequently:r=!1}={}){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:r})}_fillColor(e){const r=e.fill();this.setAttr("fillStyle",r),e._fillFunc(this)}_fillPattern(e){this.setAttr("fillStyle",e._getFillPattern()),e._fillFunc(this)}_fillLinearGradient(e){const r=e._getLinearGradient();r&&(this.setAttr("fillStyle",r),e._fillFunc(this))}_fillRadialGradient(e){const r=e._getRadialGradient();r&&(this.setAttr("fillStyle",r),e._fillFunc(this))}_fill(e){const r=e.fill(),n=e.getFillPriority();if(r&&n==="color"){this._fillColor(e);return}const i=e.getFillPatternImage();if(i&&n==="pattern"){this._fillPattern(e);return}const a=e.getFillLinearGradientColorStops();if(a&&n==="linear-gradient"){this._fillLinearGradient(e);return}const s=e.getFillRadialGradientColorStops();if(s&&n==="radial-gradient"){this._fillRadialGradient(e);return}r?this._fillColor(e):i?this._fillPattern(e):a?this._fillLinearGradient(e):s&&this._fillRadialGradient(e)}_strokeLinearGradient(e){const r=e.getStrokeLinearGradientStartPoint(),n=e.getStrokeLinearGradientEndPoint(),i=e.getStrokeLinearGradientColorStops(),a=this.createLinearGradient(r.x,r.y,n.x,n.y);if(i){for(let s=0;s<i.length;s+=2)a.addColorStop(i[s],i[s+1]);this.setAttr("strokeStyle",a)}}_stroke(e){const r=e.dash(),n=e.getStrokeScaleEnabled();if(e.hasStroke()){if(!n){this.save();const a=this.getCanvas().getPixelRatio();this.setTransform(a,0,0,a,0,0)}this._applyLineCap(e),r&&e.dashEnabled()&&(this.setLineDash(r),this.setAttr("lineDashOffset",e.dashOffset())),this.setAttr("lineWidth",e.strokeWidth()),e.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),e.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(e):this.setAttr("strokeStyle",e.stroke()),e._strokeFunc(this),n||this.restore()}}_applyShadow(e){var r,n,i;const a=(r=e.getShadowRGBA())!==null&&r!==void 0?r:"black",s=(n=e.getShadowBlur())!==null&&n!==void 0?n:5,o=(i=e.getShadowOffset())!==null&&i!==void 0?i:{x:0,y:0},l=e.getAbsoluteScale(),c=this.canvas.getPixelRatio(),d=l.x*c,u=l.y*c;this.setAttr("shadowColor",a),this.setAttr("shadowBlur",s*Math.min(Math.abs(d),Math.abs(u))),this.setAttr("shadowOffsetX",o.x*d),this.setAttr("shadowOffsetY",o.y*u)}}vi.SceneContext=pz;class mz extends bg{constructor(e){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:!0})}_fill(e){this.save(),this.setAttr("fillStyle",e.colorKey),e._fillFuncHit(this),this.restore()}strokeShape(e){e.hasHitStroke()&&this._stroke(e)}_stroke(e){if(e.hasHitStroke()){const r=e.getStrokeScaleEnabled();if(!r){this.save();const a=this.getCanvas().getPixelRatio();this.setTransform(a,0,0,a,0,0)}this._applyLineCap(e);const n=e.hitStrokeWidth(),i=n==="auto"?e.strokeWidth():n;this.setAttr("lineWidth",i),this.setAttr("strokeStyle",e.colorKey),e._strokeFuncHit(this),r||this.restore()}}}vi.HitContext=mz;Object.defineProperty(Pn,"__esModule",{value:!0});Pn.HitCanvas=Pn.SceneCanvas=Pn.Canvas=void 0;const xh=$t,m4=vi,v4=lt;let Af;function vz(){if(Af)return Af;const t=xh.Util.createCanvasElement(),e=t.getContext("2d");return Af=function(){const r=v4.Konva._global.devicePixelRatio||1,n=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return r/n}(),xh.Util.releaseCanvas(t),Af}class h0{constructor(e){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const n=(e||{}).pixelRatio||v4.Konva.pixelRatio||vz();this.pixelRatio=n,this._canvas=xh.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(e){const r=this.pixelRatio;this.pixelRatio=e,this.setSize(this.getWidth()/r,this.getHeight()/r)}setWidth(e){this.width=this._canvas.width=e*this.pixelRatio,this._canvas.style.width=e+"px";const r=this.pixelRatio;this.getContext()._context.scale(r,r)}setHeight(e){this.height=this._canvas.height=e*this.pixelRatio,this._canvas.style.height=e+"px";const r=this.pixelRatio;this.getContext()._context.scale(r,r)}getWidth(){return this.width}getHeight(){return this.height}setSize(e,r){this.setWidth(e||0),this.setHeight(r||0)}toDataURL(e,r){try{return this._canvas.toDataURL(e,r)}catch{try{return this._canvas.toDataURL()}catch(i){return xh.Util.error("Unable to get data URL. "+i.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}Pn.Canvas=h0;class yz extends h0{constructor(e={width:0,height:0,willReadFrequently:!1}){super(e),this.context=new m4.SceneContext(this,{willReadFrequently:e.willReadFrequently}),this.setSize(e.width,e.height)}}Pn.SceneCanvas=yz;class bz extends h0{constructor(e={width:0,height:0}){super(e),this.hitCanvas=!0,this.context=new m4.HitContext(this),this.setSize(e.width,e.height)}}Pn.HitCanvas=bz;var _g={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DD=void 0;const e=lt,r=$t;t.DD={get isDragging(){let n=!1;return t.DD._dragElements.forEach(i=>{i.dragStatus==="dragging"&&(n=!0)}),n},justDragged:!1,get node(){let n;return t.DD._dragElements.forEach(i=>{n=i.node}),n},_dragElements:new Map,_drag(n){const i=[];t.DD._dragElements.forEach((a,s)=>{const{node:o}=a,l=o.getStage();l.setPointersPositions(n),a.pointerId===void 0&&(a.pointerId=r.Util._getFirstPointerId(n));const c=l._changedPointerPositions.find(d=>d.id===a.pointerId);if(c){if(a.dragStatus!=="dragging"){const d=o.dragDistance();if(Math.max(Math.abs(c.x-a.startPointerPos.x),Math.abs(c.y-a.startPointerPos.y))<d||(o.startDrag({evt:n}),!o.isDragging()))return}o._setDragPosition(n,a),i.push(o)}}),i.forEach(a=>{a.fire("dragmove",{type:"dragmove",target:a,evt:n},!0)})},_endDragBefore(n){const i=[];t.DD._dragElements.forEach(a=>{const{node:s}=a,o=s.getStage();if(n&&o.setPointersPositions(n),!o._changedPointerPositions.find(d=>d.id===a.pointerId))return;(a.dragStatus==="dragging"||a.dragStatus==="stopped")&&(t.DD.justDragged=!0,e.Konva._mouseListenClick=!1,e.Konva._touchListenClick=!1,e.Konva._pointerListenClick=!1,a.dragStatus="stopped");const c=a.node.getLayer()||a.node instanceof e.Konva.Stage&&a.node;c&&i.indexOf(c)===-1&&i.push(c)}),i.forEach(a=>{a.draw()})},_endDragAfter(n){t.DD._dragElements.forEach((i,a)=>{i.dragStatus==="stopped"&&i.node.fire("dragend",{type:"dragend",target:i.node,evt:n},!0),i.dragStatus!=="dragging"&&t.DD._dragElements.delete(a)})}},e.Konva.isBrowser&&(window.addEventListener("mouseup",t.DD._endDragBefore,!0),window.addEventListener("touchend",t.DD._endDragBefore,!0),window.addEventListener("touchcancel",t.DD._endDragBefore,!0),window.addEventListener("mousemove",t.DD._drag),window.addEventListener("touchmove",t.DD._drag),window.addEventListener("mouseup",t.DD._endDragAfter,!1),window.addEventListener("touchend",t.DD._endDragAfter,!1),window.addEventListener("touchcancel",t.DD._endDragAfter,!1))})(_g);Object.defineProperty(Mt,"__esModule",{value:!0});Mt.Node=void 0;const ft=$t,tf=ut,Uo=Pn,Ei=lt,sn=_g,Ut=Xe,rh="absoluteOpacity",Tf="allEventListeners",ci="absoluteTransform",c2="absoluteScale",pa="canvas",_z="Change",wz="children",Sz="konva",k1="listening",d2="mouseenter",u2="mouseleave",f2="set",h2="Shape",nh=" ",g2="stage",Ti="transform",xz="Stage",R1="visible",Iz=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(nh);let Cz=1;class Qe{constructor(e){this._id=Cz++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(e),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(e){(e===Ti||e===ci)&&this._cache.get(e)?this._cache.get(e).dirty=!0:e?this._cache.delete(e):this._cache.clear()}_getCache(e,r){let n=this._cache.get(e);return(n===void 0||(e===Ti||e===ci)&&n.dirty===!0)&&(n=r.call(this),this._cache.set(e,n)),n}_calculate(e,r,n){if(!this._attachedDepsListeners.get(e)){const i=r.map(a=>a+"Change.konva").join(nh);this.on(i,()=>{this._clearCache(e)}),this._attachedDepsListeners.set(e,!0)}return this._getCache(e,n)}_getCanvasCache(){return this._cache.get(pa)}_clearSelfAndDescendantCache(e){this._clearCache(e),e===ci&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(pa)){const{scene:e,filter:r,hit:n}=this._cache.get(pa);ft.Util.releaseCanvas(e,r,n),this._cache.delete(pa)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(e){const r=e||{};let n={};(r.x===void 0||r.y===void 0||r.width===void 0||r.height===void 0)&&(n=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let i=Math.ceil(r.width||n.width),a=Math.ceil(r.height||n.height),s=r.pixelRatio,o=r.x===void 0?Math.floor(n.x):r.x,l=r.y===void 0?Math.floor(n.y):r.y,c=r.offset||0,d=r.drawBorder||!1,u=r.hitCanvasPixelRatio||1;if(!i||!a){ft.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const g=Math.abs(Math.round(n.x)-o)>.5?1:0,f=Math.abs(Math.round(n.y)-l)>.5?1:0;i+=c*2+g,a+=c*2+f,o-=c,l-=c;const h=new Uo.SceneCanvas({pixelRatio:s,width:i,height:a}),m=new Uo.SceneCanvas({pixelRatio:s,width:0,height:0,willReadFrequently:!0}),v=new Uo.HitCanvas({pixelRatio:u,width:i,height:a}),b=h.getContext(),x=v.getContext();return v.isCache=!0,h.isCache=!0,this._cache.delete(pa),this._filterUpToDate=!1,r.imageSmoothingEnabled===!1&&(h.getContext()._context.imageSmoothingEnabled=!1,m.getContext()._context.imageSmoothingEnabled=!1),b.save(),x.save(),b.translate(-o,-l),x.translate(-o,-l),this._isUnderCache=!0,this._clearSelfAndDescendantCache(rh),this._clearSelfAndDescendantCache(c2),this.drawScene(h,this),this.drawHit(v,this),this._isUnderCache=!1,b.restore(),x.restore(),d&&(b.save(),b.beginPath(),b.rect(0,0,i,a),b.closePath(),b.setAttr("strokeStyle","red"),b.setAttr("lineWidth",5),b.stroke(),b.restore()),this._cache.set(pa,{scene:h,filter:m,hit:v,x:o,y:l}),this._requestDraw(),this}isCached(){return this._cache.has(pa)}getClientRect(e){throw new Error('abstract "getClientRect" method call')}_transformedRect(e,r){const n=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}];let i=1/0,a=1/0,s=-1/0,o=-1/0;const l=this.getAbsoluteTransform(r);return n.forEach(function(c){const d=l.point(c);i===void 0&&(i=s=d.x,a=o=d.y),i=Math.min(i,d.x),a=Math.min(a,d.y),s=Math.max(s,d.x),o=Math.max(o,d.y)}),{x:i,y:a,width:s-i,height:o-a}}_drawCachedSceneCanvas(e){e.save(),e._applyOpacity(this),e._applyGlobalCompositeOperation(this);const r=this._getCanvasCache();e.translate(r.x,r.y);const n=this._getCachedSceneCanvas(),i=n.pixelRatio;e.drawImage(n._canvas,0,0,n.width/i,n.height/i),e.restore()}_drawCachedHitCanvas(e){const r=this._getCanvasCache(),n=r.hit;e.save(),e.translate(r.x,r.y),e.drawImage(n._canvas,0,0,n.width/n.pixelRatio,n.height/n.pixelRatio),e.restore()}_getCachedSceneCanvas(){let e=this.filters(),r=this._getCanvasCache(),n=r.scene,i=r.filter,a=i.getContext(),s,o,l,c;if(e){if(!this._filterUpToDate){const d=n.pixelRatio;i.setSize(n.width/n.pixelRatio,n.height/n.pixelRatio);try{for(s=e.length,a.clear(),a.drawImage(n._canvas,0,0,n.getWidth()/d,n.getHeight()/d),o=a.getImageData(0,0,i.getWidth(),i.getHeight()),l=0;l<s;l++){if(c=e[l],typeof c!="function"){ft.Util.error("Filter should be type of function, but got "+typeof c+" instead. Please check correct filters");continue}c.call(this,o),a.putImageData(o,0,0)}}catch(u){ft.Util.error("Unable to apply filter. "+u.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return i}return n}on(e,r){if(this._cache&&this._cache.delete(Tf),arguments.length===3)return this._delegate.apply(this,arguments);let n=e.split(nh),i=n.length,a,s,o,l,c;for(a=0;a<i;a++)s=n[a],o=s.split("."),l=o[0],c=o[1]||"",this.eventListeners[l]||(this.eventListeners[l]=[]),this.eventListeners[l].push({name:c,handler:r});return this}off(e,r){let n=(e||"").split(nh),i=n.length,a,s,o,l,c,d;if(this._cache&&this._cache.delete(Tf),!e)for(s in this.eventListeners)this._off(s);for(a=0;a<i;a++)if(o=n[a],l=o.split("."),c=l[0],d=l[1],c)this.eventListeners[c]&&this._off(c,d,r);else for(s in this.eventListeners)this._off(s,d,r);return this}dispatchEvent(e){const r={target:this,type:e.type,evt:e};return this.fire(e.type,r),this}addEventListener(e,r){return this.on(e,function(n){r.call(this,n.evt)}),this}removeEventListener(e){return this.off(e),this}_delegate(e,r,n){const i=this;this.on(e,function(a){const s=a.target.findAncestors(r,!0,i);for(let o=0;o<s.length;o++)a=ft.Util.cloneObject(a),a.currentTarget=s[o],n.call(s[o],a)})}remove(){return this.isDragging()&&this.stopDrag(),sn.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(ci),this._clearSelfAndDescendantCache(rh),this._clearSelfAndDescendantCache(c2),this._clearSelfAndDescendantCache(g2),this._clearSelfAndDescendantCache(R1),this._clearSelfAndDescendantCache(k1)}_remove(){this._clearCaches();const e=this.getParent();e&&e.children&&(e.children.splice(this.index,1),e._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(e){const r="get"+ft.Util._capitalize(e);return ft.Util._isFunction(this[r])?this[r]():this.attrs[e]}getAncestors(){let e=this.getParent(),r=[];for(;e;)r.push(e),e=e.getParent();return r}getAttrs(){return this.attrs||{}}setAttrs(e){return this._batchTransformChanges(()=>{let r,n;if(!e)return this;for(r in e)r!==wz&&(n=f2+ft.Util._capitalize(r),ft.Util._isFunction(this[n])?this[n](e[r]):this._setAttr(r,e[r]))}),this}isListening(){return this._getCache(k1,this._isListening)}_isListening(e){if(!this.listening())return!1;const n=this.getParent();return n&&n!==e&&this!==e?n._isListening(e):!0}isVisible(){return this._getCache(R1,this._isVisible)}_isVisible(e){if(!this.visible())return!1;const n=this.getParent();return n&&n!==e&&this!==e?n._isVisible(e):!0}shouldDrawHit(e,r=!1){if(e)return this._isVisible(e)&&this._isListening(e);const n=this.getLayer();let i=!1;sn.DD._dragElements.forEach(s=>{s.dragStatus==="dragging"&&(s.node.nodeType==="Stage"||s.node.getLayer()===n)&&(i=!0)});const a=!r&&!Ei.Konva.hitOnDragEnabled&&(i||Ei.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!a}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let e=this.getDepth(),r=this,n=0,i,a,s,o;function l(d){for(i=[],a=d.length,s=0;s<a;s++)o=d[s],n++,o.nodeType!==h2&&(i=i.concat(o.getChildren().slice())),o._id===r._id&&(s=a);i.length>0&&i[0].getDepth()<=e&&l(i)}const c=this.getStage();return r.nodeType!==xz&&c&&l(c.getChildren()),n}getDepth(){let e=0,r=this.parent;for(;r;)e++,r=r.parent;return e}_batchTransformChanges(e){this._batchingTransformChange=!0,e(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(Ti),this._clearSelfAndDescendantCache(ci)),this._needClearTransformCache=!1}setPosition(e){return this._batchTransformChanges(()=>{this.x(e.x),this.y(e.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const e=this.getStage();if(!e)return null;const r=e.getPointerPosition();if(!r)return null;const n=this.getAbsoluteTransform().copy();return n.invert(),n.point(r)}getAbsolutePosition(e){let r=!1,n=this.parent;for(;n;){if(n.isCached()){r=!0;break}n=n.parent}r&&!e&&(e=!0);const i=this.getAbsoluteTransform(e).getMatrix(),a=new ft.Transform,s=this.offset();return a.m=i.slice(),a.translate(s.x,s.y),a.getTranslation()}setAbsolutePosition(e){const{x:r,y:n,...i}=this._clearTransform();this.attrs.x=r,this.attrs.y=n,this._clearCache(Ti);const a=this._getAbsoluteTransform().copy();return a.invert(),a.translate(e.x,e.y),e={x:this.attrs.x+a.getTranslation().x,y:this.attrs.y+a.getTranslation().y},this._setTransform(i),this.setPosition({x:e.x,y:e.y}),this._clearCache(Ti),this._clearSelfAndDescendantCache(ci),this}_setTransform(e){let r;for(r in e)this.attrs[r]=e[r]}_clearTransform(){const e={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,e}move(e){let r=e.x,n=e.y,i=this.x(),a=this.y();return r!==void 0&&(i+=r),n!==void 0&&(a+=n),this.setPosition({x:i,y:a}),this}_eachAncestorReverse(e,r){let n=[],i=this.getParent(),a,s;if(!(r&&r._id===this._id)){for(n.unshift(this);i&&(!r||i._id!==r._id);)n.unshift(i),i=i.parent;for(a=n.length,s=0;s<a;s++)e(n[s])}}rotate(e){return this.rotation(this.rotation()+e),this}moveToTop(){if(!this.parent)return ft.Util.warn("Node has no parent. moveToTop function is ignored."),!1;const e=this.index,r=this.parent.getChildren().length;return e<r-1?(this.parent.children.splice(e,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return ft.Util.warn("Node has no parent. moveUp function is ignored."),!1;const e=this.index,r=this.parent.getChildren().length;return e<r-1?(this.parent.children.splice(e,1),this.parent.children.splice(e+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return ft.Util.warn("Node has no parent. moveDown function is ignored."),!1;const e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.splice(e-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return ft.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(e){if(!this.parent)return ft.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(e<0||e>=this.parent.children.length)&&ft.Util.warn("Unexpected value "+e+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const r=this.index;return this.parent.children.splice(r,1),this.parent.children.splice(e,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(rh,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let e=this.opacity();const r=this.getParent();return r&&!r._isUnderCache&&(e*=r.getAbsoluteOpacity()),e}moveTo(e){return this.getParent()!==e&&(this._remove(),e.add(this)),this}toObject(){let e=this.getAttrs(),r,n,i,a,s;const o={attrs:{},className:this.getClassName()};for(r in e)n=e[r],s=ft.Util.isObject(n)&&!ft.Util._isPlainObject(n)&&!ft.Util._isArray(n),!s&&(i=typeof this[r]=="function"&&this[r],delete e[r],a=i?i.call(this):null,e[r]=n,a!==n&&(o.attrs[r]=n));return ft.Util._prepareToStringify(o)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(e,r,n){const i=[];r&&this._isMatch(e)&&i.push(this);let a=this.parent;for(;a;){if(a===n)return i;a._isMatch(e)&&i.push(a),a=a.parent}return i}isAncestorOf(e){return!1}findAncestor(e,r,n){return this.findAncestors(e,r,n)[0]}_isMatch(e){if(!e)return!1;if(typeof e=="function")return e(this);let r=e.replace(/ /g,"").split(","),n=r.length,i,a;for(i=0;i<n;i++)if(a=r[i],ft.Util.isValidSelector(a)||(ft.Util.warn('Selector "'+a+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),ft.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),ft.Util.warn("Konva is awesome, right?")),a.charAt(0)==="#"){if(this.id()===a.slice(1))return!0}else if(a.charAt(0)==="."){if(this.hasName(a.slice(1)))return!0}else if(this.className===a||this.nodeType===a)return!0;return!1}getLayer(){const e=this.getParent();return e?e.getLayer():null}getStage(){return this._getCache(g2,this._getStage)}_getStage(){const e=this.getParent();return e?e.getStage():null}fire(e,r={},n){return r.target=r.target||this,n?this._fireAndBubble(e,r):this._fire(e,r),this}getAbsoluteTransform(e){return e?this._getAbsoluteTransform(e):this._getCache(ci,this._getAbsoluteTransform)}_getAbsoluteTransform(e){let r;if(e)return r=new ft.Transform,this._eachAncestorReverse(function(n){const i=n.transformsEnabled();i==="all"?r.multiply(n.getTransform()):i==="position"&&r.translate(n.x()-n.offsetX(),n.y()-n.offsetY())},e),r;{r=this._cache.get(ci)||new ft.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(r):r.reset();const n=this.transformsEnabled();if(n==="all")r.multiply(this.getTransform());else if(n==="position"){const i=this.attrs.x||0,a=this.attrs.y||0,s=this.attrs.offsetX||0,o=this.attrs.offsetY||0;r.translate(i-s,a-o)}return r.dirty=!1,r}}getAbsoluteScale(e){let r=this;for(;r;)r._isUnderCache&&(e=r),r=r.getParent();const i=this.getAbsoluteTransform(e).decompose();return{x:i.scaleX,y:i.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(Ti,this._getTransform)}_getTransform(){var e,r;const n=this._cache.get(Ti)||new ft.Transform;n.reset();const i=this.x(),a=this.y(),s=Ei.Konva.getAngle(this.rotation()),o=(e=this.attrs.scaleX)!==null&&e!==void 0?e:1,l=(r=this.attrs.scaleY)!==null&&r!==void 0?r:1,c=this.attrs.skewX||0,d=this.attrs.skewY||0,u=this.attrs.offsetX||0,g=this.attrs.offsetY||0;return(i!==0||a!==0)&&n.translate(i,a),s!==0&&n.rotate(s),(c!==0||d!==0)&&n.skew(c,d),(o!==1||l!==1)&&n.scale(o,l),(u!==0||g!==0)&&n.translate(-1*u,-1*g),n.dirty=!1,n}clone(e){let r=ft.Util.cloneObject(this.attrs),n,i,a,s,o;for(n in e)r[n]=e[n];const l=new this.constructor(r);for(n in this.eventListeners)for(i=this.eventListeners[n],a=i.length,s=0;s<a;s++)o=i[s],o.name.indexOf(Sz)<0&&(l.eventListeners[n]||(l.eventListeners[n]=[]),l.eventListeners[n].push(o));return l}_toKonvaCanvas(e){e=e||{};const r=this.getClientRect(),n=this.getStage(),i=e.x!==void 0?e.x:Math.floor(r.x),a=e.y!==void 0?e.y:Math.floor(r.y),s=e.pixelRatio||1,o=new Uo.SceneCanvas({width:e.width||Math.ceil(r.width)||(n?n.width():0),height:e.height||Math.ceil(r.height)||(n?n.height():0),pixelRatio:s}),l=o.getContext(),c=new Uo.SceneCanvas({width:o.width/o.pixelRatio+Math.abs(i),height:o.height/o.pixelRatio+Math.abs(a),pixelRatio:o.pixelRatio});return e.imageSmoothingEnabled===!1&&(l._context.imageSmoothingEnabled=!1),l.save(),(i||a)&&l.translate(-1*i,-1*a),this.drawScene(o,void 0,c),l.restore(),o}toCanvas(e){return this._toKonvaCanvas(e)._canvas}toDataURL(e){e=e||{};const r=e.mimeType||null,n=e.quality||null,i=this._toKonvaCanvas(e).toDataURL(r,n);return e.callback&&e.callback(i),i}toImage(e){return new Promise((r,n)=>{try{const i=e==null?void 0:e.callback;i&&delete e.callback,ft.Util._urlToImage(this.toDataURL(e),function(a){r(a),i==null||i(a)})}catch(i){n(i)}})}toBlob(e){return new Promise((r,n)=>{try{const i=e==null?void 0:e.callback;i&&delete e.callback,this.toCanvas(e).toBlob(a=>{r(a),i==null||i(a)},e==null?void 0:e.mimeType,e==null?void 0:e.quality)}catch(i){n(i)}})}setSize(e){return this.width(e.width),this.height(e.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():Ei.Konva.dragDistance}_off(e,r,n){let i=this.eventListeners[e],a,s,o;for(a=0;a<i.length;a++)if(s=i[a].name,o=i[a].handler,(s!=="konva"||r==="konva")&&(!r||s===r)&&(!n||n===o)){if(i.splice(a,1),i.length===0){delete this.eventListeners[e];break}a--}}_fireChangeEvent(e,r,n){this._fire(e+_z,{oldVal:r,newVal:n})}addName(e){if(!this.hasName(e)){const r=this.name(),n=r?r+" "+e:e;this.name(n)}return this}hasName(e){if(!e)return!1;const r=this.name();return r?(r||"").split(/\s/g).indexOf(e)!==-1:!1}removeName(e){const r=(this.name()||"").split(/\s/g),n=r.indexOf(e);return n!==-1&&(r.splice(n,1),this.name(r.join(" "))),this}setAttr(e,r){const n=this[f2+ft.Util._capitalize(e)];return ft.Util._isFunction(n)?n.call(this,r):this._setAttr(e,r),this}_requestDraw(){if(Ei.Konva.autoDrawEnabled){const e=this.getLayer()||this.getStage();e==null||e.batchDraw()}}_setAttr(e,r){const n=this.attrs[e];n===r&&!ft.Util.isObject(r)||(r==null?delete this.attrs[e]:this.attrs[e]=r,this._shouldFireChangeEvents&&this._fireChangeEvent(e,n,r),this._requestDraw())}_setComponentAttr(e,r,n){let i;n!==void 0&&(i=this.attrs[e],i||(this.attrs[e]=this.getAttr(e)),this.attrs[e][r]=n,this._fireChangeEvent(e,i,n))}_fireAndBubble(e,r,n){if(r&&this.nodeType===h2&&(r.target=this),!((e===d2||e===u2)&&(n&&(this===n||this.isAncestorOf&&this.isAncestorOf(n))||this.nodeType==="Stage"&&!n))){this._fire(e,r);const a=(e===d2||e===u2)&&n&&n.isAncestorOf&&n.isAncestorOf(this)&&!n.isAncestorOf(this.parent);(r&&!r.cancelBubble||!r)&&this.parent&&this.parent.isListening()&&!a&&(n&&n.parent?this._fireAndBubble.call(this.parent,e,r,n):this._fireAndBubble.call(this.parent,e,r))}}_getProtoListeners(e){var r,n,i;const a=(r=this._cache.get(Tf))!==null&&r!==void 0?r:{};let s=a==null?void 0:a[e];if(s===void 0){s=[];let o=Object.getPrototypeOf(this);for(;o;){const l=(i=(n=o.eventListeners)===null||n===void 0?void 0:n[e])!==null&&i!==void 0?i:[];s.push(...l),o=Object.getPrototypeOf(o)}a[e]=s,this._cache.set(Tf,a)}return s}_fire(e,r){r=r||{},r.currentTarget=this,r.type=e;const n=this._getProtoListeners(e);if(n)for(var i=0;i<n.length;i++)n[i].handler.call(this,r);const a=this.eventListeners[e];if(a)for(var i=0;i<a.length;i++)a[i].handler.call(this,r)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(e){const r=e?e.pointerId:void 0,n=this.getStage(),i=this.getAbsolutePosition();if(!n)return;const a=n._getPointerById(r)||n._changedPointerPositions[0]||i;sn.DD._dragElements.set(this._id,{node:this,startPointerPos:a,offset:{x:a.x-i.x,y:a.y-i.y},dragStatus:"ready",pointerId:r})}startDrag(e,r=!0){sn.DD._dragElements.has(this._id)||this._createDragElement(e);const n=sn.DD._dragElements.get(this._id);n.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:e&&e.evt},r)}_setDragPosition(e,r){const n=this.getStage()._getPointerById(r.pointerId);if(!n)return;let i={x:n.x-r.offset.x,y:n.y-r.offset.y};const a=this.dragBoundFunc();if(a!==void 0){const s=a.call(this,i,e);s?i=s:ft.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==i.x||this._lastPos.y!==i.y)&&(this.setAbsolutePosition(i),this._requestDraw()),this._lastPos=i}stopDrag(e){const r=sn.DD._dragElements.get(this._id);r&&(r.dragStatus="stopped"),sn.DD._endDragBefore(e),sn.DD._endDragAfter(e)}setDraggable(e){this._setAttr("draggable",e),this._dragChange()}isDragging(){const e=sn.DD._dragElements.get(this._id);return e?e.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(e){if(!(!(e.evt.button!==void 0)||Ei.Konva.dragButtons.indexOf(e.evt.button)>=0)||this.isDragging())return;let i=!1;sn.DD._dragElements.forEach(a=>{this.isAncestorOf(a.node)&&(i=!0)}),i||this._createDragElement(e)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const r=sn.DD._dragElements.get(this._id),n=r&&r.dragStatus==="dragging",i=r&&r.dragStatus==="ready";n?this.stopDrag():i&&sn.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(e={x:0,y:0}){const r=this.getStage();if(!r)return!1;const n={x:-e.x,y:-e.y,width:r.width()+2*e.x,height:r.height()+2*e.y};return ft.Util.haveIntersection(n,this.getClientRect())}static create(e,r){return ft.Util._isString(e)&&(e=JSON.parse(e)),this._createNode(e,r)}static _createNode(e,r){let n=Qe.prototype.getClassName.call(e),i=e.children,a,s,o;r&&(e.attrs.container=r),Ei.Konva[n]||(ft.Util.warn('Can not find a node with class name "'+n+'". Fallback to "Shape".'),n="Shape");const l=Ei.Konva[n];if(a=new l(e.attrs),i)for(s=i.length,o=0;o<s;o++)a.add(Qe._createNode(i[o]));return a}}Mt.Node=Qe;Qe.prototype.nodeType="Node";Qe.prototype._attrsAffectingSize=[];Qe.prototype.eventListeners={};Qe.prototype.on.call(Qe.prototype,Iz,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(Ti),this._clearSelfAndDescendantCache(ci)});Qe.prototype.on.call(Qe.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(R1)});Qe.prototype.on.call(Qe.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(k1)});Qe.prototype.on.call(Qe.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(rh)});const Ot=tf.Factory.addGetterSetter;Ot(Qe,"zIndex");Ot(Qe,"absolutePosition");Ot(Qe,"position");Ot(Qe,"x",0,(0,Ut.getNumberValidator)());Ot(Qe,"y",0,(0,Ut.getNumberValidator)());Ot(Qe,"globalCompositeOperation","source-over",(0,Ut.getStringValidator)());Ot(Qe,"opacity",1,(0,Ut.getNumberValidator)());Ot(Qe,"name","",(0,Ut.getStringValidator)());Ot(Qe,"id","",(0,Ut.getStringValidator)());Ot(Qe,"rotation",0,(0,Ut.getNumberValidator)());tf.Factory.addComponentsGetterSetter(Qe,"scale",["x","y"]);Ot(Qe,"scaleX",1,(0,Ut.getNumberValidator)());Ot(Qe,"scaleY",1,(0,Ut.getNumberValidator)());tf.Factory.addComponentsGetterSetter(Qe,"skew",["x","y"]);Ot(Qe,"skewX",0,(0,Ut.getNumberValidator)());Ot(Qe,"skewY",0,(0,Ut.getNumberValidator)());tf.Factory.addComponentsGetterSetter(Qe,"offset",["x","y"]);Ot(Qe,"offsetX",0,(0,Ut.getNumberValidator)());Ot(Qe,"offsetY",0,(0,Ut.getNumberValidator)());Ot(Qe,"dragDistance",void 0,(0,Ut.getNumberValidator)());Ot(Qe,"width",0,(0,Ut.getNumberValidator)());Ot(Qe,"height",0,(0,Ut.getNumberValidator)());Ot(Qe,"listening",!0,(0,Ut.getBooleanValidator)());Ot(Qe,"preventDefault",!0,(0,Ut.getBooleanValidator)());Ot(Qe,"filters",void 0,function(t){return this._filterUpToDate=!1,t});Ot(Qe,"visible",!0,(0,Ut.getBooleanValidator)());Ot(Qe,"transformsEnabled","all",(0,Ut.getStringValidator)());Ot(Qe,"size");Ot(Qe,"dragBoundFunc");Ot(Qe,"draggable",!1,(0,Ut.getBooleanValidator)());tf.Factory.backCompat(Qe,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});var Ka={};Object.defineProperty(Ka,"__esModule",{value:!0});Ka.Container=void 0;const Eo=ut,wm=Mt,wg=Xe;class qa extends wm.Node{constructor(){super(...arguments),this.children=[]}getChildren(e){if(!e)return this.children||[];const r=this.children||[],n=[];return r.forEach(function(i){e(i)&&n.push(i)}),n}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.destroy()}),this.children=[],this._requestDraw(),this}add(...e){if(e.length===0)return this;if(e.length>1){for(let n=0;n<e.length;n++)this.add(e[n]);return this}const r=e[0];return r.getParent()?(r.moveTo(this),this):(this._validateAdd(r),r.index=this.getChildren().length,r.parent=this,r._clearCaches(),this.getChildren().push(r),this._fire("add",{child:r}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(e){return this._generalFind(e,!1)}findOne(e){const r=this._generalFind(e,!0);return r.length>0?r[0]:void 0}_generalFind(e,r){const n=[];return this._descendants(i=>{const a=i._isMatch(e);return a&&n.push(i),!!(a&&r)}),n}_descendants(e){let r=!1;const n=this.getChildren();for(const i of n){if(r=e(i),r)return!0;if(i.hasChildren()&&(r=i._descendants(e),r))return!0}return!1}toObject(){const e=wm.Node.prototype.toObject.call(this);return e.children=[],this.getChildren().forEach(r=>{e.children.push(r.toObject())}),e}isAncestorOf(e){let r=e.getParent();for(;r;){if(r._id===this._id)return!0;r=r.getParent()}return!1}clone(e){const r=wm.Node.prototype.clone.call(this,e);return this.getChildren().forEach(function(n){r.add(n.clone())}),r}getAllIntersections(e){const r=[];return this.find("Shape").forEach(n=>{n.isVisible()&&n.intersects(e)&&r.push(n)}),r}_clearSelfAndDescendantCache(e){var r;super._clearSelfAndDescendantCache(e),!this.isCached()&&((r=this.children)===null||r===void 0||r.forEach(function(n){n._clearSelfAndDescendantCache(e)}))}_setChildrenIndices(){var e;(e=this.children)===null||e===void 0||e.forEach(function(r,n){r.index=n}),this._requestDraw()}drawScene(e,r,n){const i=this.getLayer(),a=e||i&&i.getCanvas(),s=a&&a.getContext(),o=this._getCanvasCache(),l=o&&o.scene,c=a&&a.isCache;if(!this.isVisible()&&!c)return this;if(l){s.save();const d=this.getAbsoluteTransform(r).getMatrix();s.transform(d[0],d[1],d[2],d[3],d[4],d[5]),this._drawCachedSceneCanvas(s),s.restore()}else this._drawChildren("drawScene",a,r,n);return this}drawHit(e,r){if(!this.shouldDrawHit(r))return this;const n=this.getLayer(),i=e||n&&n.hitCanvas,a=i&&i.getContext(),s=this._getCanvasCache();if(s&&s.hit){a.save();const l=this.getAbsoluteTransform(r).getMatrix();a.transform(l[0],l[1],l[2],l[3],l[4],l[5]),this._drawCachedHitCanvas(a),a.restore()}else this._drawChildren("drawHit",i,r);return this}_drawChildren(e,r,n,i){var a;const s=r&&r.getContext(),o=this.clipWidth(),l=this.clipHeight(),c=this.clipFunc(),d=typeof o=="number"&&typeof l=="number"||c,u=n===this;if(d){s.save();const f=this.getAbsoluteTransform(n);let h=f.getMatrix();s.transform(h[0],h[1],h[2],h[3],h[4],h[5]),s.beginPath();let m;if(c)m=c.call(this,s,this);else{const v=this.clipX(),b=this.clipY();s.rect(v||0,b||0,o,l)}s.clip.apply(s,m),h=f.copy().invert().getMatrix(),s.transform(h[0],h[1],h[2],h[3],h[4],h[5])}const g=!u&&this.globalCompositeOperation()!=="source-over"&&e==="drawScene";g&&(s.save(),s._applyGlobalCompositeOperation(this)),(a=this.children)===null||a===void 0||a.forEach(function(f){f[e](r,n,i)}),g&&s.restore(),d&&s.restore()}getClientRect(e={}){var r;const n=e.skipTransform,i=e.relativeTo;let a,s,o,l,c={x:1/0,y:1/0,width:0,height:0};const d=this;(r=this.children)===null||r===void 0||r.forEach(function(f){if(!f.visible())return;const h=f.getClientRect({relativeTo:d,skipShadow:e.skipShadow,skipStroke:e.skipStroke});h.width===0&&h.height===0||(a===void 0?(a=h.x,s=h.y,o=h.x+h.width,l=h.y+h.height):(a=Math.min(a,h.x),s=Math.min(s,h.y),o=Math.max(o,h.x+h.width),l=Math.max(l,h.y+h.height)))});const u=this.find("Shape");let g=!1;for(let f=0;f<u.length;f++)if(u[f]._isVisible(this)){g=!0;break}return g&&a!==void 0?c={x:a,y:s,width:o-a,height:l-s}:c={x:0,y:0,width:0,height:0},n?c:this._transformedRect(c,i)}}Ka.Container=qa;Eo.Factory.addComponentsGetterSetter(qa,"clip",["x","y","width","height"]);Eo.Factory.addGetterSetter(qa,"clipX",void 0,(0,wg.getNumberValidator)());Eo.Factory.addGetterSetter(qa,"clipY",void 0,(0,wg.getNumberValidator)());Eo.Factory.addGetterSetter(qa,"clipWidth",void 0,(0,wg.getNumberValidator)());Eo.Factory.addGetterSetter(qa,"clipHeight",void 0,(0,wg.getNumberValidator)());Eo.Factory.addGetterSetter(qa,"clipFunc");var y4={},na={};Object.defineProperty(na,"__esModule",{value:!0});na.getCapturedShape=Ez;na.createEvent=g0;na.hasPointerCapture=Az;na.setPointerCapture=Tz;na.releaseCapture=_4;const Pz=lt,_l=new Map,b4=Pz.Konva._global.PointerEvent!==void 0;function Ez(t){return _l.get(t)}function g0(t){return{evt:t,pointerId:t.pointerId}}function Az(t,e){return _l.get(t)===e}function Tz(t,e){_4(t),e.getStage()&&(_l.set(t,e),b4&&e._fire("gotpointercapture",g0(new PointerEvent("gotpointercapture"))))}function _4(t,e){const r=_l.get(t);if(!r)return;const n=r.getStage();n&&n.content,_l.delete(t),b4&&r._fire("lostpointercapture",g0(new PointerEvent("lostpointercapture")))}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Stage=t.stages=void 0;const e=$t,r=ut,n=Ka,i=lt,a=Pn,s=_g,o=lt,l=na,c="Stage",d="string",u="px",g="mouseout",f="mouseleave",h="mouseover",m="mouseenter",v="mousemove",b="mousedown",x="mouseup",y="pointermove",S="pointerdown",I="pointerup",C="pointercancel",D="lostpointercapture",E="pointerout",O="pointerleave",A="pointerover",k="pointerenter",V="contextmenu",G="touchstart",K="touchend",j="touchmove",Q="touchcancel",te="wheel",q=5,Z=[[m,"_pointerenter"],[b,"_pointerdown"],[v,"_pointermove"],[x,"_pointerup"],[f,"_pointerleave"],[G,"_pointerdown"],[j,"_pointermove"],[K,"_pointerup"],[Q,"_pointercancel"],[h,"_pointerover"],[te,"_wheel"],[V,"_contextmenu"],[S,"_pointerdown"],[y,"_pointermove"],[I,"_pointerup"],[C,"_pointercancel"],[D,"_lostpointercapture"]],ee={mouse:{[E]:g,[O]:f,[A]:h,[k]:m,[y]:v,[S]:b,[I]:x,[C]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[E]:"touchout",[O]:"touchleave",[A]:"touchover",[k]:"touchenter",[y]:j,[S]:G,[I]:K,[C]:Q,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[E]:E,[O]:O,[A]:A,[k]:k,[y]:y,[S]:S,[I]:I,[C]:C,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},de=pe=>pe.indexOf("pointer")>=0?"pointer":pe.indexOf("touch")>=0?"touch":"mouse",J=pe=>{const B=de(pe);if(B==="pointer")return i.Konva.pointerEventsEnabled&&ee.pointer;if(B==="touch")return ee.touch;if(B==="mouse")return ee.mouse};function ie(pe={}){return(pe.clipFunc||pe.clipWidth||pe.clipHeight)&&e.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),pe}const xe="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";t.stages=[];class ke extends n.Container{constructor(B){super(ie(B)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),t.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{ie(this.attrs)}),this._checkVisibility()}_validateAdd(B){const X=B.getType()==="Layer",oe=B.getType()==="FastLayer";X||oe||e.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const B=this.visible()?"":"none";this.content.style.display=B}setContainer(B){if(typeof B===d){if(B.charAt(0)==="."){const oe=B.slice(1);B=document.getElementsByClassName(oe)[0]}else{var X;B.charAt(0)!=="#"?X=B:X=B.slice(1),B=document.getElementById(X)}if(!B)throw"Can not find container in document with id "+X}return this._setAttr("container",B),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),B.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const B=this.children,X=B.length;for(let oe=0;oe<X;oe++)B[oe].clear();return this}clone(B){return B||(B={}),B.container=typeof document<"u"&&document.createElement("div"),n.Container.prototype.clone.call(this,B)}destroy(){super.destroy();const B=this.content;B&&e.Util._isInDocument(B)&&this.container().removeChild(B);const X=t.stages.indexOf(this);return X>-1&&t.stages.splice(X,1),e.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const B=this._pointerPositions[0]||this._changedPointerPositions[0];return B?{x:B.x,y:B.y}:(e.Util.warn(xe),null)}_getPointerById(B){return this._pointerPositions.find(X=>X.id===B)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(B){B=B||{},B.x=B.x||0,B.y=B.y||0,B.width=B.width||this.width(),B.height=B.height||this.height();const X=new a.SceneCanvas({width:B.width,height:B.height,pixelRatio:B.pixelRatio||1}),oe=X.getContext()._context,me=this.children;return(B.x||B.y)&&oe.translate(-1*B.x,-1*B.y),me.forEach(function(he){if(!he.isVisible())return;const we=he._toKonvaCanvas(B);oe.drawImage(we._canvas,B.x,B.y,we.getWidth()/we.getPixelRatio(),we.getHeight()/we.getPixelRatio())}),X}getIntersection(B){if(!B)return null;const X=this.children,oe=X.length,me=oe-1;for(let he=me;he>=0;he--){const we=X[he].getIntersection(B);if(we)return we}return null}_resizeDOM(){const B=this.width(),X=this.height();this.content&&(this.content.style.width=B+u,this.content.style.height=X+u),this.bufferCanvas.setSize(B,X),this.bufferHitCanvas.setSize(B,X),this.children.forEach(oe=>{oe.setSize({width:B,height:X}),oe.draw()})}add(B,...X){if(arguments.length>1){for(let me=0;me<arguments.length;me++)this.add(arguments[me]);return this}super.add(B);const oe=this.children.length;return oe>q&&e.Util.warn("The stage has "+oe+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),B.setSize({width:this.width(),height:this.height()}),B.draw(),i.Konva.isBrowser&&this.content.appendChild(B.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(B){return l.hasPointerCapture(B,this)}setPointerCapture(B){l.setPointerCapture(B,this)}releaseCapture(B){l.releaseCapture(B,this)}getLayers(){return this.children}_bindContentEvents(){i.Konva.isBrowser&&Z.forEach(([B,X])=>{this.content.addEventListener(B,oe=>{this[X](oe)},{passive:!1})})}_pointerenter(B){this.setPointersPositions(B);const X=J(B.type);X&&this._fire(X.pointerenter,{evt:B,target:this,currentTarget:this})}_pointerover(B){this.setPointersPositions(B);const X=J(B.type);X&&this._fire(X.pointerover,{evt:B,target:this,currentTarget:this})}_getTargetShape(B){let X=this[B+"targetShape"];return X&&!X.getStage()&&(X=null),X}_pointerleave(B){const X=J(B.type),oe=de(B.type);if(!X)return;this.setPointersPositions(B);const me=this._getTargetShape(oe),he=!(i.Konva.isDragging()||i.Konva.isTransforming())||i.Konva.hitOnDragEnabled;me&&he?(me._fireAndBubble(X.pointerout,{evt:B}),me._fireAndBubble(X.pointerleave,{evt:B}),this._fire(X.pointerleave,{evt:B,target:this,currentTarget:this}),this[oe+"targetShape"]=null):he&&(this._fire(X.pointerleave,{evt:B,target:this,currentTarget:this}),this._fire(X.pointerout,{evt:B,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(B){const X=J(B.type),oe=de(B.type);if(!X)return;this.setPointersPositions(B);let me=!1;this._changedPointerPositions.forEach(he=>{const we=this.getIntersection(he);if(s.DD.justDragged=!1,i.Konva["_"+oe+"ListenClick"]=!0,!we||!we.isListening()){this[oe+"ClickStartShape"]=void 0;return}i.Konva.capturePointerEventsEnabled&&we.setPointerCapture(he.id),this[oe+"ClickStartShape"]=we,we._fireAndBubble(X.pointerdown,{evt:B,pointerId:he.id}),me=!0;const be=B.type.indexOf("touch")>=0;we.preventDefault()&&B.cancelable&&be&&B.preventDefault()}),me||this._fire(X.pointerdown,{evt:B,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(B){const X=J(B.type),oe=de(B.type);if(!X||(i.Konva.isDragging()&&s.DD.node.preventDefault()&&B.cancelable&&B.preventDefault(),this.setPointersPositions(B),!(!(i.Konva.isDragging()||i.Konva.isTransforming())||i.Konva.hitOnDragEnabled)))return;const he={};let we=!1;const be=this._getTargetShape(oe);this._changedPointerPositions.forEach(ye=>{const ue=l.getCapturedShape(ye.id)||this.getIntersection(ye),Le=ye.id,Se={evt:B,pointerId:Le},Ie=be!==ue;if(Ie&&be&&(be._fireAndBubble(X.pointerout,{...Se},ue),be._fireAndBubble(X.pointerleave,{...Se},ue)),ue){if(he[ue._id])return;he[ue._id]=!0}ue&&ue.isListening()?(we=!0,Ie&&(ue._fireAndBubble(X.pointerover,{...Se},be),ue._fireAndBubble(X.pointerenter,{...Se},be),this[oe+"targetShape"]=ue),ue._fireAndBubble(X.pointermove,{...Se})):be&&(this._fire(X.pointerover,{evt:B,target:this,currentTarget:this,pointerId:Le}),this[oe+"targetShape"]=null)}),we||this._fire(X.pointermove,{evt:B,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(B){const X=J(B.type),oe=de(B.type);if(!X)return;this.setPointersPositions(B);const me=this[oe+"ClickStartShape"],he=this[oe+"ClickEndShape"],we={};let be=!1;this._changedPointerPositions.forEach(ye=>{const ue=l.getCapturedShape(ye.id)||this.getIntersection(ye);if(ue){if(ue.releaseCapture(ye.id),we[ue._id])return;we[ue._id]=!0}const Le=ye.id,Se={evt:B,pointerId:Le};let Ie=!1;i.Konva["_"+oe+"InDblClickWindow"]?(Ie=!0,clearTimeout(this[oe+"DblTimeout"])):s.DD.justDragged||(i.Konva["_"+oe+"InDblClickWindow"]=!0,clearTimeout(this[oe+"DblTimeout"])),this[oe+"DblTimeout"]=setTimeout(function(){i.Konva["_"+oe+"InDblClickWindow"]=!1},i.Konva.dblClickWindow),ue&&ue.isListening()?(be=!0,this[oe+"ClickEndShape"]=ue,ue._fireAndBubble(X.pointerup,{...Se}),i.Konva["_"+oe+"ListenClick"]&&me&&me===ue&&(ue._fireAndBubble(X.pointerclick,{...Se}),Ie&&he&&he===ue&&ue._fireAndBubble(X.pointerdblclick,{...Se}))):(this[oe+"ClickEndShape"]=null,i.Konva["_"+oe+"ListenClick"]&&this._fire(X.pointerclick,{evt:B,target:this,currentTarget:this,pointerId:Le}),Ie&&this._fire(X.pointerdblclick,{evt:B,target:this,currentTarget:this,pointerId:Le}))}),be||this._fire(X.pointerup,{evt:B,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),i.Konva["_"+oe+"ListenClick"]=!1,B.cancelable&&oe!=="touch"&&oe!=="pointer"&&B.preventDefault()}_contextmenu(B){this.setPointersPositions(B);const X=this.getIntersection(this.getPointerPosition());X&&X.isListening()?X._fireAndBubble(V,{evt:B}):this._fire(V,{evt:B,target:this,currentTarget:this})}_wheel(B){this.setPointersPositions(B);const X=this.getIntersection(this.getPointerPosition());X&&X.isListening()?X._fireAndBubble(te,{evt:B}):this._fire(te,{evt:B,target:this,currentTarget:this})}_pointercancel(B){this.setPointersPositions(B);const X=l.getCapturedShape(B.pointerId)||this.getIntersection(this.getPointerPosition());X&&X._fireAndBubble(I,l.createEvent(B)),l.releaseCapture(B.pointerId)}_lostpointercapture(B){l.releaseCapture(B.pointerId)}setPointersPositions(B){const X=this._getContentPosition();let oe=null,me=null;B=B||window.event,B.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(B.touches,he=>{this._pointerPositions.push({id:he.identifier,x:(he.clientX-X.left)/X.scaleX,y:(he.clientY-X.top)/X.scaleY})}),Array.prototype.forEach.call(B.changedTouches||B.touches,he=>{this._changedPointerPositions.push({id:he.identifier,x:(he.clientX-X.left)/X.scaleX,y:(he.clientY-X.top)/X.scaleY})})):(oe=(B.clientX-X.left)/X.scaleX,me=(B.clientY-X.top)/X.scaleY,this.pointerPos={x:oe,y:me},this._pointerPositions=[{x:oe,y:me,id:e.Util._getFirstPointerId(B)}],this._changedPointerPositions=[{x:oe,y:me,id:e.Util._getFirstPointerId(B)}])}_setPointerPosition(B){e.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(B)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const B=this.content.getBoundingClientRect();return{top:B.top,left:B.left,scaleX:B.width/this.content.clientWidth||1,scaleY:B.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new a.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new a.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!i.Konva.isBrowser)return;const B=this.container();if(!B)throw"Stage has no container. A container is required.";B.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),B.appendChild(this.content),this._resizeDOM()}cache(){return e.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(B){B.batchDraw()}),this}}t.Stage=ke,ke.prototype.nodeType=c,(0,o._registerNode)(ke),r.Factory.addGetterSetter(ke,"container"),i.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{t.stages.forEach(pe=>{pe.batchDraw()})})})(y4);var rf={},ar={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Shape=t.shapes=void 0;const e=lt,r=$t,n=ut,i=Mt,a=Xe,s=lt,o=na,l="hasShadow",c="shadowRGBA",d="patternImage",u="linearGradient",g="radialGradient";let f;function h(){return f||(f=r.Util.createCanvasElement().getContext("2d"),f)}t.shapes={};function m(O){const A=this.attrs.fillRule;A?O.fill(A):O.fill()}function v(O){O.stroke()}function b(O){const A=this.attrs.fillRule;A?O.fill(A):O.fill()}function x(O){O.stroke()}function y(){this._clearCache(l)}function S(){this._clearCache(c)}function I(){this._clearCache(d)}function C(){this._clearCache(u)}function D(){this._clearCache(g)}class E extends i.Node{constructor(A){super(A);let k;for(;k=r.Util.getRandomColor(),!(k&&!(k in t.shapes)););this.colorKey=k,t.shapes[k]=this}getContext(){return r.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return r.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(l,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(d,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const k=h().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(k&&k.setTransform){const V=new r.Transform;V.translate(this.fillPatternX(),this.fillPatternY()),V.rotate(e.Konva.getAngle(this.fillPatternRotation())),V.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),V.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const G=V.getMatrix(),K=typeof DOMMatrix>"u"?{a:G[0],b:G[1],c:G[2],d:G[3],e:G[4],f:G[5]}:new DOMMatrix(G);k.setTransform(K)}return k}}_getLinearGradient(){return this._getCache(u,this.__getLinearGradient)}__getLinearGradient(){const A=this.fillLinearGradientColorStops();if(A){const k=h(),V=this.fillLinearGradientStartPoint(),G=this.fillLinearGradientEndPoint(),K=k.createLinearGradient(V.x,V.y,G.x,G.y);for(let j=0;j<A.length;j+=2)K.addColorStop(A[j],A[j+1]);return K}}_getRadialGradient(){return this._getCache(g,this.__getRadialGradient)}__getRadialGradient(){const A=this.fillRadialGradientColorStops();if(A){const k=h(),V=this.fillRadialGradientStartPoint(),G=this.fillRadialGradientEndPoint(),K=k.createRadialGradient(V.x,V.y,this.fillRadialGradientStartRadius(),G.x,G.y,this.fillRadialGradientEndRadius());for(let j=0;j<A.length;j+=2)K.addColorStop(A[j],A[j+1]);return K}}getShadowRGBA(){return this._getCache(c,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const A=r.Util.colorToRGBA(this.shadowColor());if(A)return"rgba("+A.r+","+A.g+","+A.b+","+A.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const A=this.hitStrokeWidth();return A==="auto"?this.hasStroke():this.strokeEnabled()&&!!A}intersects(A){const k=this.getStage();if(!k)return!1;const V=k.bufferHitCanvas;return V.getContext().clear(),this.drawHit(V,void 0,!0),V.context.getImageData(Math.round(A.x),Math.round(A.y),1,1).data[3]>0}destroy(){return i.Node.prototype.destroy.call(this),delete t.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(A){var k;if(!((k=this.attrs.perfectDrawEnabled)!==null&&k!==void 0?k:!0))return!1;const G=A||this.hasFill(),K=this.hasStroke(),j=this.getAbsoluteOpacity()!==1;if(G&&K&&j)return!0;const Q=this.hasShadow(),te=this.shadowForStrokeEnabled();return!!(G&&K&&Q&&te)}setStrokeHitEnabled(A){r.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),A?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const A=this.size();return{x:this._centroid?-A.width/2:0,y:this._centroid?-A.height/2:0,width:A.width,height:A.height}}getClientRect(A={}){let k=!1,V=this.getParent();for(;V;){if(V.isCached()){k=!0;break}V=V.getParent()}const G=A.skipTransform,K=A.relativeTo||k&&this.getStage()||void 0,j=this.getSelfRect(),te=!A.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,q=j.width+te,Z=j.height+te,ee=!A.skipShadow&&this.hasShadow(),de=ee?this.shadowOffsetX():0,J=ee?this.shadowOffsetY():0,ie=q+Math.abs(de),xe=Z+Math.abs(J),ke=ee&&this.shadowBlur()||0,pe=ie+ke*2,B=xe+ke*2,X={width:pe,height:B,x:-(te/2+ke)+Math.min(de,0)+j.x,y:-(te/2+ke)+Math.min(J,0)+j.y};return G?X:this._transformedRect(X,K)}drawScene(A,k,V){const G=this.getLayer();let K=A||G.getCanvas(),j=K.getContext(),Q=this._getCanvasCache(),te=this.getSceneFunc(),q=this.hasShadow(),Z,ee;const de=K.isCache,J=k===this;if(!this.isVisible()&&!J)return this;if(Q){j.save();const xe=this.getAbsoluteTransform(k).getMatrix();return j.transform(xe[0],xe[1],xe[2],xe[3],xe[4],xe[5]),this._drawCachedSceneCanvas(j),j.restore(),this}if(!te)return this;if(j.save(),this._useBufferCanvas()&&!de){Z=this.getStage();const xe=V||Z.bufferCanvas;ee=xe.getContext(),ee.clear(),ee.save(),ee._applyLineJoin(this);var ie=this.getAbsoluteTransform(k).getMatrix();ee.transform(ie[0],ie[1],ie[2],ie[3],ie[4],ie[5]),te.call(this,ee,this),ee.restore();const ke=xe.pixelRatio;q&&j._applyShadow(this),j._applyOpacity(this),j._applyGlobalCompositeOperation(this),j.drawImage(xe._canvas,0,0,xe.width/ke,xe.height/ke)}else{if(j._applyLineJoin(this),!J){var ie=this.getAbsoluteTransform(k).getMatrix();j.transform(ie[0],ie[1],ie[2],ie[3],ie[4],ie[5]),j._applyOpacity(this),j._applyGlobalCompositeOperation(this)}q&&j._applyShadow(this),te.call(this,j,this)}return j.restore(),this}drawHit(A,k,V=!1){if(!this.shouldDrawHit(k,V))return this;const G=this.getLayer(),K=A||G.hitCanvas,j=K&&K.getContext(),Q=this.hitFunc()||this.sceneFunc(),te=this._getCanvasCache(),q=te&&te.hit;if(this.colorKey||r.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),q){j.save();const ee=this.getAbsoluteTransform(k).getMatrix();return j.transform(ee[0],ee[1],ee[2],ee[3],ee[4],ee[5]),this._drawCachedHitCanvas(j),j.restore(),this}if(!Q)return this;if(j.save(),j._applyLineJoin(this),!(this===k)){const ee=this.getAbsoluteTransform(k).getMatrix();j.transform(ee[0],ee[1],ee[2],ee[3],ee[4],ee[5])}return Q.call(this,j,this),j.restore(),this}drawHitFromCache(A=0){const k=this._getCanvasCache(),V=this._getCachedSceneCanvas(),G=k.hit,K=G.getContext(),j=G.getWidth(),Q=G.getHeight();K.clear(),K.drawImage(V._canvas,0,0,j,Q);try{const te=K.getImageData(0,0,j,Q),q=te.data,Z=q.length,ee=r.Util._hexToRgb(this.colorKey);for(let de=0;de<Z;de+=4)q[de+3]>A?(q[de]=ee.r,q[de+1]=ee.g,q[de+2]=ee.b,q[de+3]=255):q[de+3]=0;K.putImageData(te,0,0)}catch(te){r.Util.error("Unable to draw hit graph from cached scene canvas. "+te.message)}return this}hasPointerCapture(A){return o.hasPointerCapture(A,this)}setPointerCapture(A){o.setPointerCapture(A,this)}releaseCapture(A){o.releaseCapture(A,this)}}t.Shape=E,E.prototype._fillFunc=m,E.prototype._strokeFunc=v,E.prototype._fillFuncHit=b,E.prototype._strokeFuncHit=x,E.prototype._centroid=!1,E.prototype.nodeType="Shape",(0,s._registerNode)(E),E.prototype.eventListeners={},E.prototype.on.call(E.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",y),E.prototype.on.call(E.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",S),E.prototype.on.call(E.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",I),E.prototype.on.call(E.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",C),E.prototype.on.call(E.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",D),n.Factory.addGetterSetter(E,"stroke",void 0,(0,a.getStringOrGradientValidator)()),n.Factory.addGetterSetter(E,"strokeWidth",2,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(E,"fillAfterStrokeEnabled",!1),n.Factory.addGetterSetter(E,"hitStrokeWidth","auto",(0,a.getNumberOrAutoValidator)()),n.Factory.addGetterSetter(E,"strokeHitEnabled",!0,(0,a.getBooleanValidator)()),n.Factory.addGetterSetter(E,"perfectDrawEnabled",!0,(0,a.getBooleanValidator)()),n.Factory.addGetterSetter(E,"shadowForStrokeEnabled",!0,(0,a.getBooleanValidator)()),n.Factory.addGetterSetter(E,"lineJoin"),n.Factory.addGetterSetter(E,"lineCap"),n.Factory.addGetterSetter(E,"sceneFunc"),n.Factory.addGetterSetter(E,"hitFunc"),n.Factory.addGetterSetter(E,"dash"),n.Factory.addGetterSetter(E,"dashOffset",0,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(E,"shadowColor",void 0,(0,a.getStringValidator)()),n.Factory.addGetterSetter(E,"shadowBlur",0,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(E,"shadowOpacity",1,(0,a.getNumberValidator)()),n.Factory.addComponentsGetterSetter(E,"shadowOffset",["x","y"]),n.Factory.addGetterSetter(E,"shadowOffsetX",0,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(E,"shadowOffsetY",0,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(E,"fillPatternImage"),n.Factory.addGetterSetter(E,"fill",void 0,(0,a.getStringOrGradientValidator)()),n.Factory.addGetterSetter(E,"fillPatternX",0,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(E,"fillPatternY",0,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(E,"fillLinearGradientColorStops"),n.Factory.addGetterSetter(E,"strokeLinearGradientColorStops"),n.Factory.addGetterSetter(E,"fillRadialGradientStartRadius",0),n.Factory.addGetterSetter(E,"fillRadialGradientEndRadius",0),n.Factory.addGetterSetter(E,"fillRadialGradientColorStops"),n.Factory.addGetterSetter(E,"fillPatternRepeat","repeat"),n.Factory.addGetterSetter(E,"fillEnabled",!0),n.Factory.addGetterSetter(E,"strokeEnabled",!0),n.Factory.addGetterSetter(E,"shadowEnabled",!0),n.Factory.addGetterSetter(E,"dashEnabled",!0),n.Factory.addGetterSetter(E,"strokeScaleEnabled",!0),n.Factory.addGetterSetter(E,"fillPriority","color"),n.Factory.addComponentsGetterSetter(E,"fillPatternOffset",["x","y"]),n.Factory.addGetterSetter(E,"fillPatternOffsetX",0,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(E,"fillPatternOffsetY",0,(0,a.getNumberValidator)()),n.Factory.addComponentsGetterSetter(E,"fillPatternScale",["x","y"]),n.Factory.addGetterSetter(E,"fillPatternScaleX",1,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(E,"fillPatternScaleY",1,(0,a.getNumberValidator)()),n.Factory.addComponentsGetterSetter(E,"fillLinearGradientStartPoint",["x","y"]),n.Factory.addComponentsGetterSetter(E,"strokeLinearGradientStartPoint",["x","y"]),n.Factory.addGetterSetter(E,"fillLinearGradientStartPointX",0),n.Factory.addGetterSetter(E,"strokeLinearGradientStartPointX",0),n.Factory.addGetterSetter(E,"fillLinearGradientStartPointY",0),n.Factory.addGetterSetter(E,"strokeLinearGradientStartPointY",0),n.Factory.addComponentsGetterSetter(E,"fillLinearGradientEndPoint",["x","y"]),n.Factory.addComponentsGetterSetter(E,"strokeLinearGradientEndPoint",["x","y"]),n.Factory.addGetterSetter(E,"fillLinearGradientEndPointX",0),n.Factory.addGetterSetter(E,"strokeLinearGradientEndPointX",0),n.Factory.addGetterSetter(E,"fillLinearGradientEndPointY",0),n.Factory.addGetterSetter(E,"strokeLinearGradientEndPointY",0),n.Factory.addComponentsGetterSetter(E,"fillRadialGradientStartPoint",["x","y"]),n.Factory.addGetterSetter(E,"fillRadialGradientStartPointX",0),n.Factory.addGetterSetter(E,"fillRadialGradientStartPointY",0),n.Factory.addComponentsGetterSetter(E,"fillRadialGradientEndPoint",["x","y"]),n.Factory.addGetterSetter(E,"fillRadialGradientEndPointX",0),n.Factory.addGetterSetter(E,"fillRadialGradientEndPointY",0),n.Factory.addGetterSetter(E,"fillPatternRotation",0),n.Factory.addGetterSetter(E,"fillRule",void 0,(0,a.getStringValidator)()),n.Factory.backCompat(E,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})})(ar);Object.defineProperty(rf,"__esModule",{value:!0});rf.Layer=void 0;const oi=$t,Sm=Ka,is=Mt,p0=ut,p2=Pn,Oz=Xe,kz=ar,Rz=lt,Mz="#",Dz="beforeDraw",Nz="draw",w4=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],Fz=w4.length;class Ao extends Sm.Container{constructor(e){super(e),this.canvas=new p2.SceneCanvas,this.hitCanvas=new p2.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(e){return this.getContext().clear(e),this.getHitCanvas().getContext().clear(e),this}setZIndex(e){super.setZIndex(e);const r=this.getStage();return r&&r.content&&(r.content.removeChild(this.getNativeCanvasElement()),e<r.children.length-1?r.content.insertBefore(this.getNativeCanvasElement(),r.children[e+1].getCanvas()._canvas):r.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){is.Node.prototype.moveToTop.call(this);const e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!is.Node.prototype.moveUp.call(this))return!1;const r=this.getStage();return!r||!r.content?!1:(r.content.removeChild(this.getNativeCanvasElement()),this.index<r.children.length-1?r.content.insertBefore(this.getNativeCanvasElement(),r.children[this.index+1].getCanvas()._canvas):r.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(is.Node.prototype.moveDown.call(this)){const e=this.getStage();if(e){const r=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),r[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(is.Node.prototype.moveToBottom.call(this)){const e=this.getStage();if(e){const r=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),r[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const e=this.getNativeCanvasElement();return is.Node.prototype.remove.call(this),e&&e.parentNode&&oi.Util._isInDocument(e)&&e.parentNode.removeChild(e),this}getStage(){return this.parent}setSize({width:e,height:r}){return this.canvas.setSize(e,r),this.hitCanvas.setSize(e,r),this._setSmoothEnabled(),this}_validateAdd(e){const r=e.getType();r!=="Group"&&r!=="Shape"&&oi.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(e){return e=e||{},e.width=e.width||this.getWidth(),e.height=e.height||this.getHeight(),e.x=e.x!==void 0?e.x:this.x(),e.y=e.y!==void 0?e.y:this.y(),is.Node.prototype._toKonvaCanvas.call(this,e)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){oi.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){oi.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,oi.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(e){if(!this.isListening()||!this.isVisible())return null;let r=1,n=!1;for(;;){for(let i=0;i<Fz;i++){const a=w4[i],s=this._getIntersection({x:e.x+a.x*r,y:e.y+a.y*r}),o=s.shape;if(o)return o;if(n=!!s.antialiased,!s.antialiased)break}if(n)r+=1;else return null}}_getIntersection(e){const r=this.hitCanvas.pixelRatio,n=this.hitCanvas.context.getImageData(Math.round(e.x*r),Math.round(e.y*r),1,1).data,i=n[3];if(i===255){const a=oi.Util._rgbToHex(n[0],n[1],n[2]),s=kz.shapes[Mz+a];return s?{shape:s}:{antialiased:!0}}else if(i>0)return{antialiased:!0};return{}}drawScene(e,r){const n=this.getLayer(),i=e||n&&n.getCanvas();return this._fire(Dz,{node:this}),this.clearBeforeDraw()&&i.getContext().clear(),Sm.Container.prototype.drawScene.call(this,i,r),this._fire(Nz,{node:this}),this}drawHit(e,r){const n=this.getLayer(),i=e||n&&n.hitCanvas;return n&&n.clearBeforeDraw()&&n.getHitCanvas().getContext().clear(),Sm.Container.prototype.drawHit.call(this,i,r),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(e){oi.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(e)}getHitGraphEnabled(e){return oi.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const e=this.parent;!!this.hitCanvas._canvas.parentNode?e.content.removeChild(this.hitCanvas._canvas):e.content.appendChild(this.hitCanvas._canvas)}destroy(){return oi.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}}rf.Layer=Ao;Ao.prototype.nodeType="Layer";(0,Rz._registerNode)(Ao);p0.Factory.addGetterSetter(Ao,"imageSmoothingEnabled",!0);p0.Factory.addGetterSetter(Ao,"clearBeforeDraw",!0);p0.Factory.addGetterSetter(Ao,"hitGraphEnabled",!0,(0,Oz.getBooleanValidator)());var Sg={};Object.defineProperty(Sg,"__esModule",{value:!0});Sg.FastLayer=void 0;const $z=$t,Lz=rf,Bz=lt;class m0 extends Lz.Layer{constructor(e){super(e),this.listening(!1),$z.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}Sg.FastLayer=m0;m0.prototype.nodeType="FastLayer";(0,Bz._registerNode)(m0);var To={};Object.defineProperty(To,"__esModule",{value:!0});To.Group=void 0;const Vz=$t,jz=Ka,zz=lt;let v0=class extends jz.Container{_validateAdd(e){const r=e.getType();r!=="Group"&&r!=="Shape"&&Vz.Util.throw("You may only add groups and shapes to groups.")}};To.Group=v0;v0.prototype.nodeType="Group";(0,zz._registerNode)(v0);var Oo={};Object.defineProperty(Oo,"__esModule",{value:!0});Oo.Animation=void 0;const xm=lt,m2=$t,Im=function(){return xm.glob.performance&&xm.glob.performance.now?function(){return xm.glob.performance.now()}:function(){return new Date().getTime()}}();class Hn{constructor(e,r){this.id=Hn.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:Im(),frameRate:0},this.func=e,this.setLayers(r)}setLayers(e){let r=[];return e&&(r=Array.isArray(e)?e:[e]),this.layers=r,this}getLayers(){return this.layers}addLayer(e){const r=this.layers,n=r.length;for(let i=0;i<n;i++)if(r[i]._id===e._id)return!1;return this.layers.push(e),!0}isRunning(){const r=Hn.animations,n=r.length;for(let i=0;i<n;i++)if(r[i].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=Im(),Hn._addAnimation(this),this}stop(){return Hn._removeAnimation(this),this}_updateFrameObject(e){this.frame.timeDiff=e-this.frame.lastTime,this.frame.lastTime=e,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(e){this.animations.push(e),this._handleAnimation()}static _removeAnimation(e){const r=e.id,n=this.animations,i=n.length;for(let a=0;a<i;a++)if(n[a].id===r){this.animations.splice(a,1);break}}static _runFrames(){const e={},r=this.animations;for(let n=0;n<r.length;n++){const i=r[n],a=i.layers,s=i.func;i._updateFrameObject(Im());const o=a.length;let l;if(s?l=s.call(i,i.frame)!==!1:l=!0,!!l)for(let c=0;c<o;c++){const d=a[c];d._id!==void 0&&(e[d._id]=d)}}for(const n in e)e.hasOwnProperty(n)&&e[n].batchDraw()}static _animationLoop(){const e=Hn;e.animations.length?(e._runFrames(),m2.Util.requestAnimFrame(e._animationLoop)):e.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,m2.Util.requestAnimFrame(this._animationLoop))}}Oo.Animation=Hn;Hn.animations=[];Hn.animIdCounter=0;Hn.animRunning=!1;var S4={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Easings=t.Tween=void 0;const e=$t,r=Oo,n=Mt,i=lt,a={node:1,duration:1,easing:1,onFinish:1,yoyo:1},s=1,o=2,l=3,c=["fill","stroke","shadowColor"];let d=0;class u{constructor(h,m,v,b,x,y,S){this.prop=h,this.propFunc=m,this.begin=b,this._pos=b,this.duration=y,this._change=0,this.prevPos=0,this.yoyo=S,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=v,this._change=x-this.begin,this.pause()}fire(h){const m=this[h];m&&m()}setTime(h){h>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():h<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=h,this.update())}getTime(){return this._time}setPosition(h){this.prevPos=this._pos,this.propFunc(h),this._pos=h}getPosition(h){return h===void 0&&(h=this._time),this.func(h,this.begin,this._change,this.duration)}play(){this.state=o,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=l,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(h){this.pause(),this._time=h,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const h=this.getTimer()-this._startTime;this.state===o?this.setTime(h):this.state===l&&this.setTime(this.duration-h)}pause(){this.state=s,this.fire("onPause")}getTimer(){return new Date().getTime()}}class g{constructor(h){const m=this,v=h.node,b=v._id,x=h.easing||t.Easings.Linear,y=!!h.yoyo;let S,I;typeof h.duration>"u"?S=.3:h.duration===0?S=.001:S=h.duration,this.node=v,this._id=d++;const C=v.getLayer()||(v instanceof i.Konva.Stage?v.getLayers():null);C||e.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new r.Animation(function(){m.tween.onEnterFrame()},C),this.tween=new u(I,function(D){m._tweenFunc(D)},x,0,1,S*1e3,y),this._addListeners(),g.attrs[b]||(g.attrs[b]={}),g.attrs[b][this._id]||(g.attrs[b][this._id]={}),g.tweens[b]||(g.tweens[b]={});for(I in h)a[I]===void 0&&this._addAttr(I,h[I]);this.reset(),this.onFinish=h.onFinish,this.onReset=h.onReset,this.onUpdate=h.onUpdate}_addAttr(h,m){const v=this.node,b=v._id;let x,y,S,I,C;const D=g.tweens[b][h];D&&delete g.attrs[b][D][h];let E=v.getAttr(h);if(e.Util._isArray(m))if(x=[],y=Math.max(m.length,E.length),h==="points"&&m.length!==E.length&&(m.length>E.length?(I=E,E=e.Util._prepareArrayForTween(E,m,v.closed())):(S=m,m=e.Util._prepareArrayForTween(m,E,v.closed()))),h.indexOf("fill")===0)for(let O=0;O<y;O++)if(O%2===0)x.push(m[O]-E[O]);else{const A=e.Util.colorToRGBA(E[O]);C=e.Util.colorToRGBA(m[O]),E[O]=A,x.push({r:C.r-A.r,g:C.g-A.g,b:C.b-A.b,a:C.a-A.a})}else for(let O=0;O<y;O++)x.push(m[O]-E[O]);else c.indexOf(h)!==-1?(E=e.Util.colorToRGBA(E),C=e.Util.colorToRGBA(m),x={r:C.r-E.r,g:C.g-E.g,b:C.b-E.b,a:C.a-E.a}):x=m-E;g.attrs[b][this._id][h]={start:E,diff:x,end:m,trueEnd:S,trueStart:I},g.tweens[b][h]=this._id}_tweenFunc(h){const m=this.node,v=g.attrs[m._id][this._id];let b,x,y,S,I,C,D,E;for(b in v){if(x=v[b],y=x.start,S=x.diff,E=x.end,e.Util._isArray(y))if(I=[],D=Math.max(y.length,E.length),b.indexOf("fill")===0)for(C=0;C<D;C++)C%2===0?I.push((y[C]||0)+S[C]*h):I.push("rgba("+Math.round(y[C].r+S[C].r*h)+","+Math.round(y[C].g+S[C].g*h)+","+Math.round(y[C].b+S[C].b*h)+","+(y[C].a+S[C].a*h)+")");else for(C=0;C<D;C++)I.push((y[C]||0)+S[C]*h);else c.indexOf(b)!==-1?I="rgba("+Math.round(y.r+S.r*h)+","+Math.round(y.g+S.g*h)+","+Math.round(y.b+S.b*h)+","+(y.a+S.a*h)+")":I=y+S*h;m.setAttr(b,I)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const h=this.node,m=g.attrs[h._id][this._id];m.points&&m.points.trueEnd&&h.setAttr("points",m.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const h=this.node,m=g.attrs[h._id][this._id];m.points&&m.points.trueStart&&h.points(m.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(h){return this.tween.seek(h*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const h=this.node._id,m=this._id,v=g.tweens[h];this.pause();for(const b in v)delete g.tweens[h][b];delete g.attrs[h][m]}}t.Tween=g,g.attrs={},g.tweens={},n.Node.prototype.to=function(f){const h=f.onFinish;f.node=this,f.onFinish=function(){this.destroy(),h&&h()},new g(f).play()},t.Easings={BackEaseIn(f,h,m,v){return m*(f/=v)*f*((1.70158+1)*f-1.70158)+h},BackEaseOut(f,h,m,v){return m*((f=f/v-1)*f*((1.70158+1)*f+1.70158)+1)+h},BackEaseInOut(f,h,m,v){let b=1.70158;return(f/=v/2)<1?m/2*(f*f*(((b*=1.525)+1)*f-b))+h:m/2*((f-=2)*f*(((b*=1.525)+1)*f+b)+2)+h},ElasticEaseIn(f,h,m,v,b,x){let y=0;return f===0?h:(f/=v)===1?h+m:(x||(x=v*.3),!b||b<Math.abs(m)?(b=m,y=x/4):y=x/(2*Math.PI)*Math.asin(m/b),-(b*Math.pow(2,10*(f-=1))*Math.sin((f*v-y)*(2*Math.PI)/x))+h)},ElasticEaseOut(f,h,m,v,b,x){let y=0;return f===0?h:(f/=v)===1?h+m:(x||(x=v*.3),!b||b<Math.abs(m)?(b=m,y=x/4):y=x/(2*Math.PI)*Math.asin(m/b),b*Math.pow(2,-10*f)*Math.sin((f*v-y)*(2*Math.PI)/x)+m+h)},ElasticEaseInOut(f,h,m,v,b,x){let y=0;return f===0?h:(f/=v/2)===2?h+m:(x||(x=v*(.3*1.5)),!b||b<Math.abs(m)?(b=m,y=x/4):y=x/(2*Math.PI)*Math.asin(m/b),f<1?-.5*(b*Math.pow(2,10*(f-=1))*Math.sin((f*v-y)*(2*Math.PI)/x))+h:b*Math.pow(2,-10*(f-=1))*Math.sin((f*v-y)*(2*Math.PI)/x)*.5+m+h)},BounceEaseOut(f,h,m,v){return(f/=v)<1/2.75?m*(7.5625*f*f)+h:f<2/2.75?m*(7.5625*(f-=1.5/2.75)*f+.75)+h:f<2.5/2.75?m*(7.5625*(f-=2.25/2.75)*f+.9375)+h:m*(7.5625*(f-=2.625/2.75)*f+.984375)+h},BounceEaseIn(f,h,m,v){return m-t.Easings.BounceEaseOut(v-f,0,m,v)+h},BounceEaseInOut(f,h,m,v){return f<v/2?t.Easings.BounceEaseIn(f*2,0,m,v)*.5+h:t.Easings.BounceEaseOut(f*2-v,0,m,v)*.5+m*.5+h},EaseIn(f,h,m,v){return m*(f/=v)*f+h},EaseOut(f,h,m,v){return-m*(f/=v)*(f-2)+h},EaseInOut(f,h,m,v){return(f/=v/2)<1?m/2*f*f+h:-m/2*(--f*(f-2)-1)+h},StrongEaseIn(f,h,m,v){return m*(f/=v)*f*f*f*f+h},StrongEaseOut(f,h,m,v){return m*((f=f/v-1)*f*f*f*f+1)+h},StrongEaseInOut(f,h,m,v){return(f/=v/2)<1?m/2*f*f*f*f*f+h:m/2*((f-=2)*f*f*f*f+2)+h},Linear(f,h,m,v){return m*f/v+h}}})(S4);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Konva=void 0;const e=lt,r=$t,n=Mt,i=Ka,a=y4,s=rf,o=Sg,l=To,c=_g,d=ar,u=Oo,g=S4,f=vi,h=Pn;t.Konva=r.Util._assign(e.Konva,{Util:r.Util,Transform:r.Transform,Node:n.Node,Container:i.Container,Stage:a.Stage,stages:a.stages,Layer:s.Layer,FastLayer:o.FastLayer,Group:l.Group,DD:c.DD,Shape:d.Shape,shapes:d.shapes,Animation:u.Animation,Tween:g.Tween,Easings:g.Easings,Context:f.Context,Canvas:h.Canvas}),t.default=t.Konva})(g4);var xg={};Object.defineProperty(xg,"__esModule",{value:!0});xg.Arc=void 0;const Ig=ut,Uz=ar,v2=lt,Cg=Xe,Gz=lt;class xi extends Uz.Shape{_sceneFunc(e){const r=v2.Konva.getAngle(this.angle()),n=this.clockwise();e.beginPath(),e.arc(0,0,this.outerRadius(),0,r,n),e.arc(0,0,this.innerRadius(),r,0,!n),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}getSelfRect(){const e=this.innerRadius(),r=this.outerRadius(),n=this.clockwise(),i=v2.Konva.getAngle(n?360-this.angle():this.angle()),a=Math.cos(Math.min(i,Math.PI)),s=1,o=Math.sin(Math.min(Math.max(Math.PI,i),3*Math.PI/2)),l=Math.sin(Math.min(i,Math.PI/2)),c=a*(a>0?e:r),d=s*r,u=o*(o>0?e:r),g=l*(l>0?r:e);return{x:c,y:n?-1*g:u,width:d-c,height:g-u}}}xg.Arc=xi;xi.prototype._centroid=!0;xi.prototype.className="Arc";xi.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"];(0,Gz._registerNode)(xi);Ig.Factory.addGetterSetter(xi,"innerRadius",0,(0,Cg.getNumberValidator)());Ig.Factory.addGetterSetter(xi,"outerRadius",0,(0,Cg.getNumberValidator)());Ig.Factory.addGetterSetter(xi,"angle",0,(0,Cg.getNumberValidator)());Ig.Factory.addGetterSetter(xi,"clockwise",!1,(0,Cg.getBooleanValidator)());var Pg={},nf={};Object.defineProperty(nf,"__esModule",{value:!0});nf.Line=void 0;const Eg=ut,Hz=lt,Wz=ar,x4=Xe;function M1(t,e,r,n,i,a,s){const o=Math.sqrt(Math.pow(r-t,2)+Math.pow(n-e,2)),l=Math.sqrt(Math.pow(i-r,2)+Math.pow(a-n,2)),c=s*o/(o+l),d=s*l/(o+l),u=r-c*(i-t),g=n-c*(a-e),f=r+d*(i-t),h=n+d*(a-e);return[u,g,f,h]}function y2(t,e){const r=t.length,n=[];for(let i=2;i<r-2;i+=2){const a=M1(t[i-2],t[i-1],t[i],t[i+1],t[i+2],t[i+3],e);isNaN(a[0])||(n.push(a[0]),n.push(a[1]),n.push(t[i]),n.push(t[i+1]),n.push(a[2]),n.push(a[3]))}return n}class ia extends Wz.Shape{constructor(e){super(e),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(e){let r=this.points(),n=r.length,i=this.tension(),a=this.closed(),s=this.bezier(),o,l,c;if(n){if(e.beginPath(),e.moveTo(r[0],r[1]),i!==0&&n>4){for(o=this.getTensionPoints(),l=o.length,c=a?0:4,a||e.quadraticCurveTo(o[0],o[1],o[2],o[3]);c<l-2;)e.bezierCurveTo(o[c++],o[c++],o[c++],o[c++],o[c++],o[c++]);a||e.quadraticCurveTo(o[l-2],o[l-1],r[n-2],r[n-1])}else if(s)for(c=2;c<n;)e.bezierCurveTo(r[c++],r[c++],r[c++],r[c++],r[c++],r[c++]);else for(c=2;c<n;c+=2)e.lineTo(r[c],r[c+1]);a?(e.closePath(),e.fillStrokeShape(this)):e.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():y2(this.points(),this.tension())}_getTensionPointsClosed(){const e=this.points(),r=e.length,n=this.tension(),i=M1(e[r-2],e[r-1],e[0],e[1],e[2],e[3],n),a=M1(e[r-4],e[r-3],e[r-2],e[r-1],e[0],e[1],n),s=y2(e,n);return[i[2],i[3]].concat(s).concat([a[0],a[1],e[r-2],e[r-1],a[2],a[3],i[0],i[1],e[0],e[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let e=this.points();if(e.length<4)return{x:e[0]||0,y:e[1]||0,width:0,height:0};this.tension()!==0?e=[e[0],e[1],...this._getTensionPoints(),e[e.length-2],e[e.length-1]]:e=this.points();let r=e[0],n=e[0],i=e[1],a=e[1],s,o;for(let l=0;l<e.length/2;l++)s=e[l*2],o=e[l*2+1],r=Math.min(r,s),n=Math.max(n,s),i=Math.min(i,o),a=Math.max(a,o);return{x:r,y:i,width:n-r,height:a-i}}}nf.Line=ia;ia.prototype.className="Line";ia.prototype._attrsAffectingSize=["points","bezier","tension"];(0,Hz._registerNode)(ia);Eg.Factory.addGetterSetter(ia,"closed",!1);Eg.Factory.addGetterSetter(ia,"bezier",!1);Eg.Factory.addGetterSetter(ia,"tension",0,(0,x4.getNumberValidator)());Eg.Factory.addGetterSetter(ia,"points",[],(0,x4.getNumberArrayValidator)());var ko={},I4={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.t2length=t.getQuadraticArcLength=t.getCubicArcLength=t.binomialCoefficients=t.cValues=t.tValues=void 0,t.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],t.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],t.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const e=(s,o,l)=>{let c,d;const g=l/2;c=0;for(let f=0;f<20;f++)d=g*t.tValues[20][f]+g,c+=t.cValues[20][f]*n(s,o,d);return g*c};t.getCubicArcLength=e;const r=(s,o,l)=>{l===void 0&&(l=1);const c=s[0]-2*s[1]+s[2],d=o[0]-2*o[1]+o[2],u=2*s[1]-2*s[0],g=2*o[1]-2*o[0],f=4*(c*c+d*d),h=4*(c*u+d*g),m=u*u+g*g;if(f===0)return l*Math.sqrt(Math.pow(s[2]-s[0],2)+Math.pow(o[2]-o[0],2));const v=h/(2*f),b=m/f,x=l+v,y=b-v*v,S=x*x+y>0?Math.sqrt(x*x+y):0,I=v*v+y>0?Math.sqrt(v*v+y):0,C=v+Math.sqrt(v*v+y)!==0?y*Math.log(Math.abs((x+S)/(v+I))):0;return Math.sqrt(f)/2*(x*S-v*I+C)};t.getQuadraticArcLength=r;function n(s,o,l){const c=i(1,l,s),d=i(1,l,o),u=c*c+d*d;return Math.sqrt(u)}const i=(s,o,l)=>{const c=l.length-1;let d,u;if(c===0)return 0;if(s===0){u=0;for(let g=0;g<=c;g++)u+=t.binomialCoefficients[c][g]*Math.pow(1-o,c-g)*Math.pow(o,g)*l[g];return u}else{d=new Array(c);for(let g=0;g<c;g++)d[g]=c*(l[g+1]-l[g]);return i(s-1,o,d)}},a=(s,o,l)=>{let c=1,d=s/o,u=(s-l(d))/o,g=0;for(;c>.001;){const f=l(d+u),h=Math.abs(s-f)/o;if(h<c)c=h,d+=u;else{const m=l(d-u),v=Math.abs(s-m)/o;v<c?(c=v,d-=u):u/=2}if(g++,g>500)break}return d};t.t2length=a})(I4);Object.defineProperty(ko,"__esModule",{value:!0});ko.Path=void 0;const Kz=ut,qz=ar,Yz=lt,as=I4;class Zt extends qz.Shape{constructor(e){super(e),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=Zt.parsePathData(this.data()),this.pathLength=Zt.getPathLength(this.dataArray)}_sceneFunc(e){const r=this.dataArray;e.beginPath();let n=!1;for(let m=0;m<r.length;m++){const v=r[m].command,b=r[m].points;switch(v){case"L":e.lineTo(b[0],b[1]);break;case"M":e.moveTo(b[0],b[1]);break;case"C":e.bezierCurveTo(b[0],b[1],b[2],b[3],b[4],b[5]);break;case"Q":e.quadraticCurveTo(b[0],b[1],b[2],b[3]);break;case"A":var i=b[0],a=b[1],s=b[2],o=b[3],l=b[4],c=b[5],d=b[6],u=b[7],g=s>o?s:o,f=s>o?1:s/o,h=s>o?o/s:1;e.translate(i,a),e.rotate(d),e.scale(f,h),e.arc(0,0,g,l,l+c,1-u),e.scale(1/f,1/h),e.rotate(-d),e.translate(-i,-a);break;case"z":n=!0,e.closePath();break}}!n&&!this.hasFill()?e.strokeShape(this):e.fillStrokeShape(this)}getSelfRect(){let e=[];this.dataArray.forEach(function(l){if(l.command==="A"){const c=l.points[4],d=l.points[5],u=l.points[4]+d;let g=Math.PI/180;if(Math.abs(c-u)<g&&(g=Math.abs(c-u)),d<0)for(let f=c-g;f>u;f-=g){const h=Zt.getPointOnEllipticalArc(l.points[0],l.points[1],l.points[2],l.points[3],f,0);e.push(h.x,h.y)}else for(let f=c+g;f<u;f+=g){const h=Zt.getPointOnEllipticalArc(l.points[0],l.points[1],l.points[2],l.points[3],f,0);e.push(h.x,h.y)}}else if(l.command==="C")for(let c=0;c<=1;c+=.01){const d=Zt.getPointOnCubicBezier(c,l.start.x,l.start.y,l.points[0],l.points[1],l.points[2],l.points[3],l.points[4],l.points[5]);e.push(d.x,d.y)}else e=e.concat(l.points)});let r=e[0],n=e[0],i=e[1],a=e[1],s,o;for(let l=0;l<e.length/2;l++)s=e[l*2],o=e[l*2+1],isNaN(s)||(r=Math.min(r,s),n=Math.max(n,s)),isNaN(o)||(i=Math.min(i,o),a=Math.max(a,o));return{x:r,y:i,width:n-r,height:a-i}}getLength(){return this.pathLength}getPointAtLength(e){return Zt.getPointAtLengthOfDataArray(e,this.dataArray)}static getLineLength(e,r,n,i){return Math.sqrt((n-e)*(n-e)+(i-r)*(i-r))}static getPathLength(e){let r=0;for(let n=0;n<e.length;++n)r+=e[n].pathLength;return r}static getPointAtLengthOfDataArray(e,r){let n,i=0,a=r.length;if(!a)return null;for(;i<a&&e>r[i].pathLength;)e-=r[i].pathLength,++i;if(i===a)return n=r[i-1].points.slice(-2),{x:n[0],y:n[1]};if(e<.01)return n=r[i].points.slice(0,2),{x:n[0],y:n[1]};const s=r[i],o=s.points;switch(s.command){case"L":return Zt.getPointOnLine(e,s.start.x,s.start.y,o[0],o[1]);case"C":return Zt.getPointOnCubicBezier((0,as.t2length)(e,Zt.getPathLength(r),m=>(0,as.getCubicArcLength)([s.start.x,o[0],o[2],o[4]],[s.start.y,o[1],o[3],o[5]],m)),s.start.x,s.start.y,o[0],o[1],o[2],o[3],o[4],o[5]);case"Q":return Zt.getPointOnQuadraticBezier((0,as.t2length)(e,Zt.getPathLength(r),m=>(0,as.getQuadraticArcLength)([s.start.x,o[0],o[2]],[s.start.y,o[1],o[3]],m)),s.start.x,s.start.y,o[0],o[1],o[2],o[3]);case"A":var l=o[0],c=o[1],d=o[2],u=o[3],g=o[4],f=o[5],h=o[6];return g+=f*e/s.pathLength,Zt.getPointOnEllipticalArc(l,c,d,u,g,h)}return null}static getPointOnLine(e,r,n,i,a,s,o){s=s??r,o=o??n;const l=this.getLineLength(r,n,i,a);if(l<1e-10)return{x:r,y:n};if(i===r)return{x:s,y:o+(a>n?e:-e)};const c=(a-n)/(i-r),d=Math.sqrt(e*e/(1+c*c))*(i<r?-1:1),u=c*d;if(Math.abs(o-n-c*(s-r))<1e-10)return{x:s+d,y:o+u};const g=((s-r)*(i-r)+(o-n)*(a-n))/(l*l),f=r+g*(i-r),h=n+g*(a-n),m=this.getLineLength(s,o,f,h),v=Math.sqrt(e*e-m*m),b=Math.sqrt(v*v/(1+c*c))*(i<r?-1:1),x=c*b;return{x:f+b,y:h+x}}static getPointOnCubicBezier(e,r,n,i,a,s,o,l,c){function d(v){return v*v*v}function u(v){return 3*v*v*(1-v)}function g(v){return 3*v*(1-v)*(1-v)}function f(v){return(1-v)*(1-v)*(1-v)}const h=l*d(e)+s*u(e)+i*g(e)+r*f(e),m=c*d(e)+o*u(e)+a*g(e)+n*f(e);return{x:h,y:m}}static getPointOnQuadraticBezier(e,r,n,i,a,s,o){function l(f){return f*f}function c(f){return 2*f*(1-f)}function d(f){return(1-f)*(1-f)}const u=s*l(e)+i*c(e)+r*d(e),g=o*l(e)+a*c(e)+n*d(e);return{x:u,y:g}}static getPointOnEllipticalArc(e,r,n,i,a,s){const o=Math.cos(s),l=Math.sin(s),c={x:n*Math.cos(a),y:i*Math.sin(a)};return{x:e+(c.x*o-c.y*l),y:r+(c.x*l+c.y*o)}}static parsePathData(e){if(!e)return[];let r=e;const n=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];r=r.replace(new RegExp(" ","g"),",");for(var i=0;i<n.length;i++)r=r.replace(new RegExp(n[i],"g"),"|"+n[i]);const a=r.split("|"),s=[],o=[];let l=0,c=0;const d=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let u;for(i=1;i<a.length;i++){let E=a[i],O=E.charAt(0);for(E=E.slice(1),o.length=0;u=d.exec(E);)o.push(u[0]);const A=[];for(let k=0,V=o.length;k<V;k++){if(o[k]==="00"){A.push(0,0);continue}const G=parseFloat(o[k]);isNaN(G)?A.push(0):A.push(G)}for(;A.length>0&&!isNaN(A[0]);){let k="",V=[];const G=l,K=c;var g,f,h,m,v,b,x,y,S,I;switch(O){case"l":l+=A.shift(),c+=A.shift(),k="L",V.push(l,c);break;case"L":l=A.shift(),c=A.shift(),V.push(l,c);break;case"m":var C=A.shift(),D=A.shift();if(l+=C,c+=D,k="M",s.length>2&&s[s.length-1].command==="z"){for(let j=s.length-2;j>=0;j--)if(s[j].command==="M"){l=s[j].points[0]+C,c=s[j].points[1]+D;break}}V.push(l,c),O="l";break;case"M":l=A.shift(),c=A.shift(),k="M",V.push(l,c),O="L";break;case"h":l+=A.shift(),k="L",V.push(l,c);break;case"H":l=A.shift(),k="L",V.push(l,c);break;case"v":c+=A.shift(),k="L",V.push(l,c);break;case"V":c=A.shift(),k="L",V.push(l,c);break;case"C":V.push(A.shift(),A.shift(),A.shift(),A.shift()),l=A.shift(),c=A.shift(),V.push(l,c);break;case"c":V.push(l+A.shift(),c+A.shift(),l+A.shift(),c+A.shift()),l+=A.shift(),c+=A.shift(),k="C",V.push(l,c);break;case"S":f=l,h=c,g=s[s.length-1],g.command==="C"&&(f=l+(l-g.points[2]),h=c+(c-g.points[3])),V.push(f,h,A.shift(),A.shift()),l=A.shift(),c=A.shift(),k="C",V.push(l,c);break;case"s":f=l,h=c,g=s[s.length-1],g.command==="C"&&(f=l+(l-g.points[2]),h=c+(c-g.points[3])),V.push(f,h,l+A.shift(),c+A.shift()),l+=A.shift(),c+=A.shift(),k="C",V.push(l,c);break;case"Q":V.push(A.shift(),A.shift()),l=A.shift(),c=A.shift(),V.push(l,c);break;case"q":V.push(l+A.shift(),c+A.shift()),l+=A.shift(),c+=A.shift(),k="Q",V.push(l,c);break;case"T":f=l,h=c,g=s[s.length-1],g.command==="Q"&&(f=l+(l-g.points[0]),h=c+(c-g.points[1])),l=A.shift(),c=A.shift(),k="Q",V.push(f,h,l,c);break;case"t":f=l,h=c,g=s[s.length-1],g.command==="Q"&&(f=l+(l-g.points[0]),h=c+(c-g.points[1])),l+=A.shift(),c+=A.shift(),k="Q",V.push(f,h,l,c);break;case"A":m=A.shift(),v=A.shift(),b=A.shift(),x=A.shift(),y=A.shift(),S=l,I=c,l=A.shift(),c=A.shift(),k="A",V=this.convertEndpointToCenterParameterization(S,I,l,c,x,y,m,v,b);break;case"a":m=A.shift(),v=A.shift(),b=A.shift(),x=A.shift(),y=A.shift(),S=l,I=c,l+=A.shift(),c+=A.shift(),k="A",V=this.convertEndpointToCenterParameterization(S,I,l,c,x,y,m,v,b);break}s.push({command:k||O,points:V,start:{x:G,y:K},pathLength:this.calcLength(G,K,k||O,V)})}(O==="z"||O==="Z")&&s.push({command:"z",points:[],start:void 0,pathLength:0})}return s}static calcLength(e,r,n,i){let a,s,o,l;const c=Zt;switch(n){case"L":return c.getLineLength(e,r,i[0],i[1]);case"C":return(0,as.getCubicArcLength)([e,i[0],i[2],i[4]],[r,i[1],i[3],i[5]],1);case"Q":return(0,as.getQuadraticArcLength)([e,i[0],i[2]],[r,i[1],i[3]],1);case"A":a=0;var d=i[4],u=i[5],g=i[4]+u,f=Math.PI/180;if(Math.abs(d-g)<f&&(f=Math.abs(d-g)),s=c.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],d,0),u<0)for(l=d-f;l>g;l-=f)o=c.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],l,0),a+=c.getLineLength(s.x,s.y,o.x,o.y),s=o;else for(l=d+f;l<g;l+=f)o=c.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],l,0),a+=c.getLineLength(s.x,s.y,o.x,o.y),s=o;return o=c.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],g,0),a+=c.getLineLength(s.x,s.y,o.x,o.y),a}return 0}static convertEndpointToCenterParameterization(e,r,n,i,a,s,o,l,c){const d=c*(Math.PI/180),u=Math.cos(d)*(e-n)/2+Math.sin(d)*(r-i)/2,g=-1*Math.sin(d)*(e-n)/2+Math.cos(d)*(r-i)/2,f=u*u/(o*o)+g*g/(l*l);f>1&&(o*=Math.sqrt(f),l*=Math.sqrt(f));let h=Math.sqrt((o*o*(l*l)-o*o*(g*g)-l*l*(u*u))/(o*o*(g*g)+l*l*(u*u)));a===s&&(h*=-1),isNaN(h)&&(h=0);const m=h*o*g/l,v=h*-l*u/o,b=(e+n)/2+Math.cos(d)*m-Math.sin(d)*v,x=(r+i)/2+Math.sin(d)*m+Math.cos(d)*v,y=function(A){return Math.sqrt(A[0]*A[0]+A[1]*A[1])},S=function(A,k){return(A[0]*k[0]+A[1]*k[1])/(y(A)*y(k))},I=function(A,k){return(A[0]*k[1]<A[1]*k[0]?-1:1)*Math.acos(S(A,k))},C=I([1,0],[(u-m)/o,(g-v)/l]),D=[(u-m)/o,(g-v)/l],E=[(-1*u-m)/o,(-1*g-v)/l];let O=I(D,E);return S(D,E)<=-1&&(O=Math.PI),S(D,E)>=1&&(O=0),s===0&&O>0&&(O=O-2*Math.PI),s===1&&O<0&&(O=O+2*Math.PI),[b,x,o,l,C,O,d,s]}}ko.Path=Zt;Zt.prototype.className="Path";Zt.prototype._attrsAffectingSize=["data"];(0,Yz._registerNode)(Zt);Kz.Factory.addGetterSetter(Zt,"data");Object.defineProperty(Pg,"__esModule",{value:!0});Pg.Arrow=void 0;const Ag=ut,Xz=nf,C4=Xe,Qz=lt,b2=ko;class Ya extends Xz.Line{_sceneFunc(e){super._sceneFunc(e);const r=Math.PI*2,n=this.points();let i=n;const a=this.tension()!==0&&n.length>4;a&&(i=this.getTensionPoints());const s=this.pointerLength(),o=n.length;let l,c;if(a){const g=[i[i.length-4],i[i.length-3],i[i.length-2],i[i.length-1],n[o-2],n[o-1]],f=b2.Path.calcLength(i[i.length-4],i[i.length-3],"C",g),h=b2.Path.getPointOnQuadraticBezier(Math.min(1,1-s/f),g[0],g[1],g[2],g[3],g[4],g[5]);l=n[o-2]-h.x,c=n[o-1]-h.y}else l=n[o-2]-n[o-4],c=n[o-1]-n[o-3];const d=(Math.atan2(c,l)+r)%r,u=this.pointerWidth();this.pointerAtEnding()&&(e.save(),e.beginPath(),e.translate(n[o-2],n[o-1]),e.rotate(d),e.moveTo(0,0),e.lineTo(-s,u/2),e.lineTo(-s,-u/2),e.closePath(),e.restore(),this.__fillStroke(e)),this.pointerAtBeginning()&&(e.save(),e.beginPath(),e.translate(n[0],n[1]),a?(l=(i[0]+i[2])/2-n[0],c=(i[1]+i[3])/2-n[1]):(l=n[2]-n[0],c=n[3]-n[1]),e.rotate((Math.atan2(-c,-l)+r)%r),e.moveTo(0,0),e.lineTo(-s,u/2),e.lineTo(-s,-u/2),e.closePath(),e.restore(),this.__fillStroke(e))}__fillStroke(e){const r=this.dashEnabled();r&&(this.attrs.dashEnabled=!1,e.setLineDash([])),e.fillStrokeShape(this),r&&(this.attrs.dashEnabled=!0)}getSelfRect(){const e=super.getSelfRect(),r=this.pointerWidth()/2;return{x:e.x,y:e.y-r,width:e.width,height:e.height+r*2}}}Pg.Arrow=Ya;Ya.prototype.className="Arrow";(0,Qz._registerNode)(Ya);Ag.Factory.addGetterSetter(Ya,"pointerLength",10,(0,C4.getNumberValidator)());Ag.Factory.addGetterSetter(Ya,"pointerWidth",10,(0,C4.getNumberValidator)());Ag.Factory.addGetterSetter(Ya,"pointerAtBeginning",!1);Ag.Factory.addGetterSetter(Ya,"pointerAtEnding",!0);var Tg={};Object.defineProperty(Tg,"__esModule",{value:!0});Tg.Circle=void 0;const Zz=ut,Jz=ar,eU=Xe,tU=lt;class Ro extends Jz.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius()!==e/2&&this.radius(e/2)}setHeight(e){this.radius()!==e/2&&this.radius(e/2)}}Tg.Circle=Ro;Ro.prototype._centroid=!0;Ro.prototype.className="Circle";Ro.prototype._attrsAffectingSize=["radius"];(0,tU._registerNode)(Ro);Zz.Factory.addGetterSetter(Ro,"radius",0,(0,eU.getNumberValidator)());var Og={};Object.defineProperty(Og,"__esModule",{value:!0});Og.Ellipse=void 0;const y0=ut,rU=ar,P4=Xe,nU=lt;class aa extends rU.Shape{_sceneFunc(e){const r=this.radiusX(),n=this.radiusY();e.beginPath(),e.save(),r!==n&&e.scale(1,n/r),e.arc(0,0,r,0,Math.PI*2,!1),e.restore(),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(e){this.radiusX(e/2)}setHeight(e){this.radiusY(e/2)}}Og.Ellipse=aa;aa.prototype.className="Ellipse";aa.prototype._centroid=!0;aa.prototype._attrsAffectingSize=["radiusX","radiusY"];(0,nU._registerNode)(aa);y0.Factory.addComponentsGetterSetter(aa,"radius",["x","y"]);y0.Factory.addGetterSetter(aa,"radiusX",0,(0,P4.getNumberValidator)());y0.Factory.addGetterSetter(aa,"radiusY",0,(0,P4.getNumberValidator)());var kg={};Object.defineProperty(kg,"__esModule",{value:!0});kg.Image=void 0;const Cm=$t,Xa=ut,iU=ar,aU=lt,af=Xe;class pn extends iU.Shape{constructor(e){super(e),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",r=>{this._removeImageLoad(r.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const e=this.image();e&&e.complete||e&&e.readyState===4||e&&e.addEventListener&&e.addEventListener("load",this._loadListener)}_removeImageLoad(e){e&&e.removeEventListener&&e.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const e=!!this.cornerRadius(),r=this.hasShadow();return e&&r?!0:super._useBufferCanvas(!0)}_sceneFunc(e){const r=this.getWidth(),n=this.getHeight(),i=this.cornerRadius(),a=this.attrs.image;let s;if(a){const o=this.attrs.cropWidth,l=this.attrs.cropHeight;o&&l?s=[a,this.cropX(),this.cropY(),o,l,0,0,r,n]:s=[a,0,0,r,n]}(this.hasFill()||this.hasStroke()||i)&&(e.beginPath(),i?Cm.Util.drawRoundedRectPath(e,r,n,i):e.rect(0,0,r,n),e.closePath(),e.fillStrokeShape(this)),a&&(i&&e.clip(),e.drawImage.apply(e,s))}_hitFunc(e){const r=this.width(),n=this.height(),i=this.cornerRadius();e.beginPath(),i?Cm.Util.drawRoundedRectPath(e,r,n,i):e.rect(0,0,r,n),e.closePath(),e.fillStrokeShape(this)}getWidth(){var e,r;return(e=this.attrs.width)!==null&&e!==void 0?e:(r=this.image())===null||r===void 0?void 0:r.width}getHeight(){var e,r;return(e=this.attrs.height)!==null&&e!==void 0?e:(r=this.image())===null||r===void 0?void 0:r.height}static fromURL(e,r,n=null){const i=Cm.Util.createImageElement();i.onload=function(){const a=new pn({image:i});r(a)},i.onerror=n,i.crossOrigin="Anonymous",i.src=e}}kg.Image=pn;pn.prototype.className="Image";(0,aU._registerNode)(pn);Xa.Factory.addGetterSetter(pn,"cornerRadius",0,(0,af.getNumberOrArrayOfNumbersValidator)(4));Xa.Factory.addGetterSetter(pn,"image");Xa.Factory.addComponentsGetterSetter(pn,"crop",["x","y","width","height"]);Xa.Factory.addGetterSetter(pn,"cropX",0,(0,af.getNumberValidator)());Xa.Factory.addGetterSetter(pn,"cropY",0,(0,af.getNumberValidator)());Xa.Factory.addGetterSetter(pn,"cropWidth",0,(0,af.getNumberValidator)());Xa.Factory.addGetterSetter(pn,"cropHeight",0,(0,af.getNumberValidator)());var co={};Object.defineProperty(co,"__esModule",{value:!0});co.Tag=co.Label=void 0;const Rg=ut,sU=ar,oU=To,b0=Xe,E4=lt,A4=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],lU="Change.konva",cU="none",D1="up",N1="right",F1="down",$1="left",dU=A4.length;let _0=class extends oU.Group{constructor(e){super(e),this.on("add.konva",function(r){this._addListeners(r.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(e){let r=this,n;const i=function(){r._sync()};for(n=0;n<dU;n++)e.on(A4[n]+lU,i)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let e=this.getText(),r=this.getTag(),n,i,a,s,o,l,c;if(e&&r){switch(n=e.width(),i=e.height(),a=r.pointerDirection(),s=r.pointerWidth(),c=r.pointerHeight(),o=0,l=0,a){case D1:o=n/2,l=-1*c;break;case N1:o=n+s,l=i/2;break;case F1:o=n/2,l=i+c;break;case $1:o=-1*s,l=i/2;break}r.setAttrs({x:-1*o,y:-1*l,width:n,height:i}),e.setAttrs({x:-1*o,y:-1*l})}}};co.Label=_0;_0.prototype.className="Label";(0,E4._registerNode)(_0);class Qa extends sU.Shape{_sceneFunc(e){const r=this.width(),n=this.height(),i=this.pointerDirection(),a=this.pointerWidth(),s=this.pointerHeight(),o=this.cornerRadius();let l=0,c=0,d=0,u=0;typeof o=="number"?l=c=d=u=Math.min(o,r/2,n/2):(l=Math.min(o[0]||0,r/2,n/2),c=Math.min(o[1]||0,r/2,n/2),u=Math.min(o[2]||0,r/2,n/2),d=Math.min(o[3]||0,r/2,n/2)),e.beginPath(),e.moveTo(l,0),i===D1&&(e.lineTo((r-a)/2,0),e.lineTo(r/2,-1*s),e.lineTo((r+a)/2,0)),e.lineTo(r-c,0),e.arc(r-c,c,c,Math.PI*3/2,0,!1),i===N1&&(e.lineTo(r,(n-s)/2),e.lineTo(r+a,n/2),e.lineTo(r,(n+s)/2)),e.lineTo(r,n-u),e.arc(r-u,n-u,u,0,Math.PI/2,!1),i===F1&&(e.lineTo((r+a)/2,n),e.lineTo(r/2,n+s),e.lineTo((r-a)/2,n)),e.lineTo(d,n),e.arc(d,n-d,d,Math.PI/2,Math.PI,!1),i===$1&&(e.lineTo(0,(n+s)/2),e.lineTo(-1*a,n/2),e.lineTo(0,(n-s)/2)),e.lineTo(0,l),e.arc(l,l,l,Math.PI,Math.PI*3/2,!1),e.closePath(),e.fillStrokeShape(this)}getSelfRect(){let e=0,r=0,n=this.pointerWidth(),i=this.pointerHeight(),a=this.pointerDirection(),s=this.width(),o=this.height();return a===D1?(r-=i,o+=i):a===F1?o+=i:a===$1?(e-=n*1.5,s+=n):a===N1&&(s+=n*1.5),{x:e,y:r,width:s,height:o}}}co.Tag=Qa;Qa.prototype.className="Tag";(0,E4._registerNode)(Qa);Rg.Factory.addGetterSetter(Qa,"pointerDirection",cU);Rg.Factory.addGetterSetter(Qa,"pointerWidth",0,(0,b0.getNumberValidator)());Rg.Factory.addGetterSetter(Qa,"pointerHeight",0,(0,b0.getNumberValidator)());Rg.Factory.addGetterSetter(Qa,"cornerRadius",0,(0,b0.getNumberOrArrayOfNumbersValidator)(4));var sf={};Object.defineProperty(sf,"__esModule",{value:!0});sf.Rect=void 0;const uU=ut,fU=ar,hU=lt,gU=$t,pU=Xe;class Mg extends fU.Shape{_sceneFunc(e){const r=this.cornerRadius(),n=this.width(),i=this.height();e.beginPath(),r?gU.Util.drawRoundedRectPath(e,n,i,r):e.rect(0,0,n,i),e.closePath(),e.fillStrokeShape(this)}}sf.Rect=Mg;Mg.prototype.className="Rect";(0,hU._registerNode)(Mg);uU.Factory.addGetterSetter(Mg,"cornerRadius",0,(0,pU.getNumberOrArrayOfNumbersValidator)(4));var Dg={};Object.defineProperty(Dg,"__esModule",{value:!0});Dg.RegularPolygon=void 0;const T4=ut,mU=ar,O4=Xe,vU=lt;class Za extends mU.Shape{_sceneFunc(e){const r=this._getPoints();e.beginPath(),e.moveTo(r[0].x,r[0].y);for(let n=1;n<r.length;n++)e.lineTo(r[n].x,r[n].y);e.closePath(),e.fillStrokeShape(this)}_getPoints(){const e=this.attrs.sides,r=this.attrs.radius||0,n=[];for(let i=0;i<e;i++)n.push({x:r*Math.sin(i*2*Math.PI/e),y:-1*r*Math.cos(i*2*Math.PI/e)});return n}getSelfRect(){const e=this._getPoints();let r=e[0].x,n=e[0].y,i=e[0].x,a=e[0].y;return e.forEach(s=>{r=Math.min(r,s.x),n=Math.max(n,s.x),i=Math.min(i,s.y),a=Math.max(a,s.y)}),{x:r,y:i,width:n-r,height:a-i}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}Dg.RegularPolygon=Za;Za.prototype.className="RegularPolygon";Za.prototype._centroid=!0;Za.prototype._attrsAffectingSize=["radius"];(0,vU._registerNode)(Za);T4.Factory.addGetterSetter(Za,"radius",0,(0,O4.getNumberValidator)());T4.Factory.addGetterSetter(Za,"sides",0,(0,O4.getNumberValidator)());var Ng={};Object.defineProperty(Ng,"__esModule",{value:!0});Ng.Ring=void 0;const k4=ut,yU=ar,R4=Xe,bU=lt,_2=Math.PI*2;class Ja extends yU.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.innerRadius(),0,_2,!1),e.moveTo(this.outerRadius(),0),e.arc(0,0,this.outerRadius(),_2,0,!0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}Ng.Ring=Ja;Ja.prototype.className="Ring";Ja.prototype._centroid=!0;Ja.prototype._attrsAffectingSize=["innerRadius","outerRadius"];(0,bU._registerNode)(Ja);k4.Factory.addGetterSetter(Ja,"innerRadius",0,(0,R4.getNumberValidator)());k4.Factory.addGetterSetter(Ja,"outerRadius",0,(0,R4.getNumberValidator)());var Fg={};Object.defineProperty(Fg,"__esModule",{value:!0});Fg.Sprite=void 0;const es=ut,_U=ar,wU=Oo,M4=Xe,SU=lt;class ii extends _U.Shape{constructor(e){super(e),this._updated=!0,this.anim=new wU.Animation(()=>{const r=this._updated;return this._updated=!1,r}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(e){const r=this.animation(),n=this.frameIndex(),i=n*4,a=this.animations()[r],s=this.frameOffsets(),o=a[i+0],l=a[i+1],c=a[i+2],d=a[i+3],u=this.image();if((this.hasFill()||this.hasStroke())&&(e.beginPath(),e.rect(0,0,c,d),e.closePath(),e.fillStrokeShape(this)),u)if(s){const g=s[r],f=n*2;e.drawImage(u,o,l,c,d,g[f+0],g[f+1],c,d)}else e.drawImage(u,o,l,c,d,0,0,c,d)}_hitFunc(e){const r=this.animation(),n=this.frameIndex(),i=n*4,a=this.animations()[r],s=this.frameOffsets(),o=a[i+2],l=a[i+3];if(e.beginPath(),s){const c=s[r],d=n*2;e.rect(c[d+0],c[d+1],o,l)}else e.rect(0,0,o,l);e.closePath(),e.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const e=this;this.interval=setInterval(function(){e._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const e=this.getLayer();this.anim.setLayers(e),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const e=this.frameIndex(),r=this.animation(),n=this.animations(),i=n[r],a=i.length/4;e<a-1?this.frameIndex(e+1):this.frameIndex(0)}}Fg.Sprite=ii;ii.prototype.className="Sprite";(0,SU._registerNode)(ii);es.Factory.addGetterSetter(ii,"animation");es.Factory.addGetterSetter(ii,"animations");es.Factory.addGetterSetter(ii,"frameOffsets");es.Factory.addGetterSetter(ii,"image");es.Factory.addGetterSetter(ii,"frameIndex",0,(0,M4.getNumberValidator)());es.Factory.addGetterSetter(ii,"frameRate",17,(0,M4.getNumberValidator)());es.Factory.backCompat(ii,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});var $g={};Object.defineProperty($g,"__esModule",{value:!0});$g.Star=void 0;const w0=ut,xU=ar,S0=Xe,IU=lt;class sa extends xU.Shape{_sceneFunc(e){const r=this.innerRadius(),n=this.outerRadius(),i=this.numPoints();e.beginPath(),e.moveTo(0,0-n);for(let a=1;a<i*2;a++){const s=a%2===0?n:r,o=s*Math.sin(a*Math.PI/i),l=-1*s*Math.cos(a*Math.PI/i);e.lineTo(o,l)}e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}$g.Star=sa;sa.prototype.className="Star";sa.prototype._centroid=!0;sa.prototype._attrsAffectingSize=["innerRadius","outerRadius"];(0,IU._registerNode)(sa);w0.Factory.addGetterSetter(sa,"numPoints",5,(0,S0.getNumberValidator)());w0.Factory.addGetterSetter(sa,"innerRadius",0,(0,S0.getNumberValidator)());w0.Factory.addGetterSetter(sa,"outerRadius",0,(0,S0.getNumberValidator)());var Mo={};Object.defineProperty(Mo,"__esModule",{value:!0});Mo.Text=void 0;Mo.stringToArray=va;const L1=$t,Pr=ut,CU=ar,Pm=lt,oa=Xe,PU=lt;function va(t){return[...t].reduce((e,r,n,i)=>{if(new RegExp("\\p{Emoji}","u").test(r)){const a=i[n+1];a&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(a)?(e.push(r+a),i[n+1]=""):e.push(r)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(r+(i[n+1]||""))?e.push(r+i[n+1]):n>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(r)?e[e.length-1]+=r:r&&e.push(r);return e},[])}const ss="auto",EU="center",D4="inherit",Go="justify",AU="Change.konva",TU="2d",w2="-",N4="left",OU="text",kU="Text",RU="top",MU="bottom",S2="middle",F4="normal",DU="px ",Of=" ",NU="right",x2="rtl",FU="word",$U="char",I2="none",Em="â¦",$4=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],LU=$4.length;function BU(t){return t.split(",").map(e=>{e=e.trim();const r=e.indexOf(" ")>=0,n=e.indexOf('"')>=0||e.indexOf("'")>=0;return r&&!n&&(e=`"${e}"`),e}).join(", ")}let kf;function Am(){return kf||(kf=L1.Util.createCanvasElement().getContext(TU),kf)}function VU(t){t.fillText(this._partialText,this._partialTextX,this._partialTextY)}function jU(t){t.setAttr("miterLimit",2),t.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function zU(t){return t=t||{},!t.fillLinearGradientColorStops&&!t.fillRadialGradientColorStops&&!t.fillPatternImage&&(t.fill=t.fill||"black"),t}class jt extends CU.Shape{constructor(e){super(zU(e)),this._partialTextX=0,this._partialTextY=0;for(let r=0;r<LU;r++)this.on($4[r]+AU,this._setTextData);this._setTextData()}_sceneFunc(e){const r=this.textArr,n=r.length;if(!this.text())return;let i=this.padding(),a=this.fontSize(),s=this.lineHeight()*a,o=this.verticalAlign(),l=this.direction(),c=0,d=this.align(),u=this.getWidth(),g=this.letterSpacing(),f=this.fill(),h=this.textDecoration(),m=h.indexOf("underline")!==-1,v=h.indexOf("line-through")!==-1,b;l=l===D4?e.direction:l;let x=s/2,y=S2;if(Pm.Konva._fixTextRendering){const V=this.measureSize("M");y="alphabetic",x=(V.fontBoundingBoxAscent-V.fontBoundingBoxDescent)/2+s/2}var S=0,I=0;for(l===x2&&e.setAttr("direction",l),e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",y),e.setAttr("textAlign",N4),o===S2?c=(this.getHeight()-n*s-i*2)/2:o===MU&&(c=this.getHeight()-n*s-i*2),e.translate(i,c+i),b=0;b<n;b++){var S=0,I=0,C=r[b],D=C.text,E=C.width,O=C.lastInParagraph,A,k;if(e.save(),d===NU?S+=u-E-i*2:d===EU&&(S+=(u-E-i*2)/2),m){e.save(),e.beginPath();const K=Pm.Konva._fixTextRendering?Math.round(a/4):Math.round(a/2),j=S,Q=x+I+K;e.moveTo(j,Q),A=D.split(" ").length-1,k=d===Go&&!O?u-i*2:E,e.lineTo(j+Math.round(k),Q),e.lineWidth=a/15;const te=this._getLinearGradient();e.strokeStyle=te||f,e.stroke(),e.restore()}if(v){e.save(),e.beginPath();const K=Pm.Konva._fixTextRendering?-Math.round(a/4):0;e.moveTo(S,x+I+K),A=D.split(" ").length-1,k=d===Go&&!O?u-i*2:E,e.lineTo(S+Math.round(k),x+I+K),e.lineWidth=a/15;const j=this._getLinearGradient();e.strokeStyle=j||f,e.stroke(),e.restore()}if(l!==x2&&(g!==0||d===Go)){A=D.split(" ").length-1;const K=va(D);for(let j=0;j<K.length;j++){const Q=K[j];Q===" "&&!O&&d===Go&&(S+=(u-i*2-E)/A),this._partialTextX=S,this._partialTextY=x+I,this._partialText=Q,e.fillStrokeShape(this),S+=this.measureSize(Q).width+g}}else g!==0&&e.setAttr("letterSpacing",`${g}px`),this._partialTextX=S,this._partialTextY=x+I,this._partialText=D,e.fillStrokeShape(this);e.restore(),n>1&&(x+=s)}}_hitFunc(e){const r=this.getWidth(),n=this.getHeight();e.beginPath(),e.rect(0,0,r,n),e.closePath(),e.fillStrokeShape(this)}setText(e){const r=L1.Util._isString(e)?e:e==null?"":e+"";return this._setAttr(OU,r),this}getWidth(){return this.attrs.width===ss||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===ss||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return L1.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(e){var r,n,i,a,s,o,l,c,d,u,g;let f=Am(),h=this.fontSize(),m;f.save(),f.font=this._getContextFont(),m=f.measureText(e),f.restore();const v=h/100;return{actualBoundingBoxAscent:(r=m.actualBoundingBoxAscent)!==null&&r!==void 0?r:71.58203125*v,actualBoundingBoxDescent:(n=m.actualBoundingBoxDescent)!==null&&n!==void 0?n:0,actualBoundingBoxLeft:(i=m.actualBoundingBoxLeft)!==null&&i!==void 0?i:-7.421875*v,actualBoundingBoxRight:(a=m.actualBoundingBoxRight)!==null&&a!==void 0?a:75.732421875*v,alphabeticBaseline:(s=m.alphabeticBaseline)!==null&&s!==void 0?s:0,emHeightAscent:(o=m.emHeightAscent)!==null&&o!==void 0?o:100*v,emHeightDescent:(l=m.emHeightDescent)!==null&&l!==void 0?l:-20*v,fontBoundingBoxAscent:(c=m.fontBoundingBoxAscent)!==null&&c!==void 0?c:91*v,fontBoundingBoxDescent:(d=m.fontBoundingBoxDescent)!==null&&d!==void 0?d:21*v,hangingBaseline:(u=m.hangingBaseline)!==null&&u!==void 0?u:72.80000305175781*v,ideographicBaseline:(g=m.ideographicBaseline)!==null&&g!==void 0?g:-21*v,width:m.width,height:h}}_getContextFont(){return this.fontStyle()+Of+this.fontVariant()+Of+(this.fontSize()+DU)+BU(this.fontFamily())}_addTextLine(e){this.align()===Go&&(e=e.trim());const n=this._getTextWidth(e);return this.textArr.push({text:e,width:n,lastInParagraph:!1})}_getTextWidth(e){const r=this.letterSpacing(),n=e.length;return Am().measureText(e).width+r*n}_setTextData(){let e=this.text().split(`
`),r=+this.fontSize(),n=0,i=this.lineHeight()*r,a=this.attrs.width,s=this.attrs.height,o=a!==ss&&a!==void 0,l=s!==ss&&s!==void 0,c=this.padding(),d=a-c*2,u=s-c*2,g=0,f=this.wrap(),h=f!==I2,m=f!==$U&&h,v=this.ellipsis();this.textArr=[],Am().font=this._getContextFont();const b=v?this._getTextWidth(Em):0;for(let x=0,y=e.length;x<y;++x){let S=e[x],I=this._getTextWidth(S);if(o&&I>d)for(;S.length>0;){let C=0,D=va(S).length,E="",O=0;for(;C<D;){const A=C+D>>>1,k=va(S),V=k.slice(0,A+1).join(""),G=this._getTextWidth(V);(v&&l&&g+i>u?G+b:G)<=d?(C=A+1,E=V,O=G):D=A}if(E){if(m){const V=va(S),G=va(E),K=V[G.length],j=K===Of||K===w2;let Q;if(j&&O<=d)Q=G.length;else{const te=G.lastIndexOf(Of),q=G.lastIndexOf(w2);Q=Math.max(te,q)+1}Q>0&&(C=Q,E=V.slice(0,C).join(""),O=this._getTextWidth(E))}if(E=E.trimRight(),this._addTextLine(E),n=Math.max(n,O),g+=i,this._shouldHandleEllipsis(g)){this._tryToAddEllipsisToLastLine();break}if(S=va(S).slice(C).join("").trimLeft(),S.length>0&&(I=this._getTextWidth(S),I<=d)){this._addTextLine(S),g+=i,n=Math.max(n,I);break}}else break}else this._addTextLine(S),g+=i,n=Math.max(n,I),this._shouldHandleEllipsis(g)&&x<y-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),l&&g+i>u)break}this.textHeight=r,this.textWidth=n}_shouldHandleEllipsis(e){const r=+this.fontSize(),n=this.lineHeight()*r,i=this.attrs.height,a=i!==ss&&i!==void 0,s=this.padding(),o=i-s*2;return!(this.wrap()!==I2)||a&&e+n>o}_tryToAddEllipsisToLastLine(){const e=this.attrs.width,r=e!==ss&&e!==void 0,n=this.padding(),i=e-n*2,a=this.ellipsis(),s=this.textArr[this.textArr.length-1];!s||!a||(r&&(this._getTextWidth(s.text+Em)<i||(s.text=s.text.slice(0,s.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(s.text+Em))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const e=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,r=this.hasShadow();return e&&r?!0:super._useBufferCanvas()}}Mo.Text=jt;jt.prototype._fillFunc=VU;jt.prototype._strokeFunc=jU;jt.prototype.className=kU;jt.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];(0,PU._registerNode)(jt);Pr.Factory.overWriteSetter(jt,"width",(0,oa.getNumberOrAutoValidator)());Pr.Factory.overWriteSetter(jt,"height",(0,oa.getNumberOrAutoValidator)());Pr.Factory.addGetterSetter(jt,"direction",D4);Pr.Factory.addGetterSetter(jt,"fontFamily","Arial");Pr.Factory.addGetterSetter(jt,"fontSize",12,(0,oa.getNumberValidator)());Pr.Factory.addGetterSetter(jt,"fontStyle",F4);Pr.Factory.addGetterSetter(jt,"fontVariant",F4);Pr.Factory.addGetterSetter(jt,"padding",0,(0,oa.getNumberValidator)());Pr.Factory.addGetterSetter(jt,"align",N4);Pr.Factory.addGetterSetter(jt,"verticalAlign",RU);Pr.Factory.addGetterSetter(jt,"lineHeight",1,(0,oa.getNumberValidator)());Pr.Factory.addGetterSetter(jt,"wrap",FU);Pr.Factory.addGetterSetter(jt,"ellipsis",!1,(0,oa.getBooleanValidator)());Pr.Factory.addGetterSetter(jt,"letterSpacing",0,(0,oa.getNumberValidator)());Pr.Factory.addGetterSetter(jt,"text","",(0,oa.getStringValidator)());Pr.Factory.addGetterSetter(jt,"textDecoration","");var Lg={};Object.defineProperty(Lg,"__esModule",{value:!0});Lg.TextPath=void 0;const Tm=$t,kn=ut,UU=ar,Ho=ko,Om=Mo,L4=Xe,GU=lt,HU="",B4="normal";function V4(t){t.fillText(this.partialText,0,0)}function j4(t){t.strokeText(this.partialText,0,0)}class sr extends UU.Shape{constructor(e){super(e),this.dummyCanvas=Tm.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return Ho.Path.getPathLength(this.dataArray)}_getPointAtLength(e){if(!this.attrs.data)return null;const r=this.pathLength;return e-1>r?null:Ho.Path.getPointAtLengthOfDataArray(e,this.dataArray)}_readDataAttribute(){this.dataArray=Ho.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(e){e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",this.textBaseline()),e.setAttr("textAlign","left"),e.save();const r=this.textDecoration(),n=this.fill(),i=this.fontSize(),a=this.glyphInfo;r==="underline"&&e.beginPath();for(let s=0;s<a.length;s++){e.save();const o=a[s].p0;e.translate(o.x,o.y),e.rotate(a[s].rotation),this.partialText=a[s].text,e.fillStrokeShape(this),r==="underline"&&(s===0&&e.moveTo(0,i/2+1),e.lineTo(i,i/2+1)),e.restore()}r==="underline"&&(e.strokeStyle=n,e.lineWidth=i/20,e.stroke()),e.restore()}_hitFunc(e){e.beginPath();const r=this.glyphInfo;if(r.length>=1){const n=r[0].p0;e.moveTo(n.x,n.y)}for(let n=0;n<r.length;n++){const i=r[n].p1;e.lineTo(i.x,i.y)}e.setAttr("lineWidth",this.fontSize()),e.setAttr("strokeStyle",this.colorKey),e.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return Tm.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(e){return Om.Text.prototype.setText.call(this,e)}_getContextFont(){return Om.Text.prototype._getContextFont.call(this)}_getTextSize(e){const n=this.dummyCanvas.getContext("2d");n.save(),n.font=this._getContextFont();const i=n.measureText(e);return n.restore(),{width:i.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:e,height:r}=this._getTextSize(this.attrs.text);if(this.textWidth=e,this.textHeight=r,this.glyphInfo=[],!this.attrs.data)return null;const n=this.letterSpacing(),i=this.align(),a=this.kerningFunc(),s=Math.max(this.textWidth+((this.attrs.text||"").length-1)*n,0);let o=0;i==="center"&&(o=Math.max(0,this.pathLength/2-s/2)),i==="right"&&(o=Math.max(0,this.pathLength-s));const l=(0,Om.stringToArray)(this.text());let c=o;for(let d=0;d<l.length;d++){const u=this._getPointAtLength(c);if(!u)return;let g=this._getTextSize(l[d]).width+n;if(l[d]===" "&&i==="justify"){const x=this.text().split(" ").length-1;g+=(this.pathLength-s)/x}const f=this._getPointAtLength(c+g);if(!f)return;const h=Ho.Path.getLineLength(u.x,u.y,f.x,f.y);let m=0;if(a)try{m=a(l[d-1],l[d])*this.fontSize()}catch{m=0}u.x+=m,f.x+=m,this.textWidth+=m;const v=Ho.Path.getPointOnLine(m+h/2,u.x,u.y,f.x,f.y),b=Math.atan2(f.y-u.y,f.x-u.x);this.glyphInfo.push({transposeX:v.x,transposeY:v.y,text:l[d],rotation:b,p0:u,p1:f}),c+=g}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const e=[];this.glyphInfo.forEach(function(c){e.push(c.p0.x),e.push(c.p0.y),e.push(c.p1.x),e.push(c.p1.y)});let r=e[0]||0,n=e[0]||0,i=e[1]||0,a=e[1]||0,s,o;for(let c=0;c<e.length/2;c++)s=e[c*2],o=e[c*2+1],r=Math.min(r,s),n=Math.max(n,s),i=Math.min(i,o),a=Math.max(a,o);const l=this.fontSize();return{x:r-l/2,y:i-l/2,width:n-r+l,height:a-i+l}}destroy(){return Tm.Util.releaseCanvas(this.dummyCanvas),super.destroy()}}Lg.TextPath=sr;sr.prototype._fillFunc=V4;sr.prototype._strokeFunc=j4;sr.prototype._fillFuncHit=V4;sr.prototype._strokeFuncHit=j4;sr.prototype.className="TextPath";sr.prototype._attrsAffectingSize=["text","fontSize","data"];(0,GU._registerNode)(sr);kn.Factory.addGetterSetter(sr,"data");kn.Factory.addGetterSetter(sr,"fontFamily","Arial");kn.Factory.addGetterSetter(sr,"fontSize",12,(0,L4.getNumberValidator)());kn.Factory.addGetterSetter(sr,"fontStyle",B4);kn.Factory.addGetterSetter(sr,"align","left");kn.Factory.addGetterSetter(sr,"letterSpacing",0,(0,L4.getNumberValidator)());kn.Factory.addGetterSetter(sr,"textBaseline","middle");kn.Factory.addGetterSetter(sr,"fontVariant",B4);kn.Factory.addGetterSetter(sr,"text",HU);kn.Factory.addGetterSetter(sr,"textDecoration","");kn.Factory.addGetterSetter(sr,"kerningFunc",void 0);var Bg={};Object.defineProperty(Bg,"__esModule",{value:!0});Bg.Transformer=void 0;const At=$t,Ct=ut,C2=Mt,WU=ar,KU=sf,P2=To,wn=lt,la=Xe,qU=lt,z4="tr-konva",YU=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(t=>t+`.${z4}`).join(" "),E2="nodesRect",XU=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],QU={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},ZU="ontouchstart"in wn.Konva._global;function JU(t,e,r){if(t==="rotater")return r;e+=At.Util.degToRad(QU[t]||0);const n=(At.Util.radToDeg(e)%360+360)%360;return At.Util._inRange(n,315+22.5,360)||At.Util._inRange(n,0,22.5)?"ns-resize":At.Util._inRange(n,45-22.5,45+22.5)?"nesw-resize":At.Util._inRange(n,90-22.5,90+22.5)?"ew-resize":At.Util._inRange(n,135-22.5,135+22.5)?"nwse-resize":At.Util._inRange(n,180-22.5,180+22.5)?"ns-resize":At.Util._inRange(n,225-22.5,225+22.5)?"nesw-resize":At.Util._inRange(n,270-22.5,270+22.5)?"ew-resize":At.Util._inRange(n,315-22.5,315+22.5)?"nwse-resize":(At.Util.error("Transformer has unknown angle for cursor detection: "+n),"pointer")}const Ih=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function eG(t){return{x:t.x+t.width/2*Math.cos(t.rotation)+t.height/2*Math.sin(-t.rotation),y:t.y+t.height/2*Math.cos(t.rotation)+t.width/2*Math.sin(t.rotation)}}function U4(t,e,r){const n=r.x+(t.x-r.x)*Math.cos(e)-(t.y-r.y)*Math.sin(e),i=r.y+(t.x-r.x)*Math.sin(e)+(t.y-r.y)*Math.cos(e);return{...t,rotation:t.rotation+e,x:n,y:i}}function tG(t,e){const r=eG(t);return U4(t,e,r)}function rG(t,e,r){let n=e;for(let i=0;i<t.length;i++){const a=wn.Konva.getAngle(t[i]),s=Math.abs(a-e)%(Math.PI*2);Math.min(s,Math.PI*2-s)<r&&(n=a)}return n}let B1=0;class mt extends P2.Group{constructor(e){super(e),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(YU,this.update),this.getNode()&&this.update()}attachTo(e){return this.setNode(e),this}setNode(e){return At.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([e])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return z4+this._id}setNodes(e=[]){this._nodes&&this._nodes.length&&this.detach();const r=e.filter(i=>i.isAncestorOf(this)?(At.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=e=r,e.length===1&&this.useSingleNodeRotation()?this.rotation(e[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(i=>{const a=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(i._attrsAffectingSize.length){const s=i._attrsAffectingSize.map(o=>o+"Change."+this._getEventNamespace()).join(" ");i.on(s,a)}i.on(XU.map(s=>s+`.${this._getEventNamespace()}`).join(" "),a),i.on(`absoluteTransformChange.${this._getEventNamespace()}`,a),this._proxyDrag(i)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(e){let r;e.on(`dragstart.${this._getEventNamespace()}`,n=>{r=e.getAbsolutePosition(),!this.isDragging()&&e!==this.findOne(".back")&&this.startDrag(n,!1)}),e.on(`dragmove.${this._getEventNamespace()}`,n=>{if(!r)return;const i=e.getAbsolutePosition(),a=i.x-r.x,s=i.y-r.y;this.nodes().forEach(o=>{if(o===e||o.isDragging())return;const l=o.getAbsolutePosition();o.setAbsolutePosition({x:l.x+a,y:l.y+s}),o.startDrag(n)}),r=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(e=>{e.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(E2),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(E2,this.__getNodeRect)}__getNodeShape(e,r=this.rotation(),n){const i=e.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),a=e.getAbsoluteScale(n),s=e.getAbsolutePosition(n),o=i.x*a.x-e.offsetX()*a.x,l=i.y*a.y-e.offsetY()*a.y,c=(wn.Konva.getAngle(e.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),d={x:s.x+o*Math.cos(c)+l*Math.sin(-c),y:s.y+l*Math.cos(c)+o*Math.sin(c),width:i.width*a.x,height:i.height*a.y,rotation:c};return U4(d,-wn.Konva.getAngle(r),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const r=[];this.nodes().map(c=>{const d=c.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),u=[{x:d.x,y:d.y},{x:d.x+d.width,y:d.y},{x:d.x+d.width,y:d.y+d.height},{x:d.x,y:d.y+d.height}],g=c.getAbsoluteTransform();u.forEach(function(f){const h=g.point(f);r.push(h)})});const n=new At.Transform;n.rotate(-wn.Konva.getAngle(this.rotation()));let i=1/0,a=1/0,s=-1/0,o=-1/0;r.forEach(function(c){const d=n.point(c);i===void 0&&(i=s=d.x,a=o=d.y),i=Math.min(i,d.x),a=Math.min(a,d.y),s=Math.max(s,d.x),o=Math.max(o,d.y)}),n.invert();const l=n.point({x:i,y:a});return{x:l.x,y:l.y,width:s-i,height:o-a,rotation:wn.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),Ih.forEach(e=>{this._createAnchor(e)}),this._createAnchor("rotater")}_createAnchor(e){const r=new KU.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:e+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:ZU?10:"auto"}),n=this;r.on("mousedown touchstart",function(i){n._handleMouseDown(i)}),r.on("dragstart",i=>{r.stopDrag(),i.cancelBubble=!0}),r.on("dragend",i=>{i.cancelBubble=!0}),r.on("mouseenter",()=>{const i=wn.Konva.getAngle(this.rotation()),a=this.rotateAnchorCursor(),s=JU(e,i,a);r.getStage().content&&(r.getStage().content.style.cursor=s),this._cursorChange=!0}),r.on("mouseout",()=>{r.getStage().content&&(r.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(r)}_createBack(){const e=new WU.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(r,n){const i=n.getParent(),a=i.padding();r.beginPath(),r.rect(-a,-a,n.width()+a*2,n.height()+a*2),r.moveTo(n.width()/2,-a),i.rotateEnabled()&&i.rotateLineVisible()&&r.lineTo(n.width()/2,-i.rotateAnchorOffset()*At.Util._sign(n.height())-a),r.fillStrokeShape(n)},hitFunc:(r,n)=>{if(!this.shouldOverdrawWholeArea())return;const i=this.padding();r.beginPath(),r.rect(-i,-i,n.width()+i*2,n.height()+i*2),r.fillStrokeShape(n)}});this.add(e),this._proxyDrag(e),e.on("dragstart",r=>{r.cancelBubble=!0}),e.on("dragmove",r=>{r.cancelBubble=!0}),e.on("dragend",r=>{r.cancelBubble=!0}),this.on("dragmove",r=>{this.update()})}_handleMouseDown(e){if(this._transforming)return;this._movingAnchorName=e.target.name().split(" ")[0];const r=this._getNodeRect(),n=r.width,i=r.height,a=Math.sqrt(Math.pow(n,2)+Math.pow(i,2));this.sin=Math.abs(i/a),this.cos=Math.abs(n/a),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const s=e.target.getAbsolutePosition(),o=e.target.getStage().getPointerPosition();this._anchorDragOffset={x:o.x-s.x,y:o.y-s.y},B1++,this._fire("transformstart",{evt:e.evt,target:this.getNode()}),this._nodes.forEach(l=>{l._fire("transformstart",{evt:e.evt,target:l})})}_handleMouseMove(e){let r,n,i;const a=this.findOne("."+this._movingAnchorName),s=a.getStage();s.setPointersPositions(e);const o=s.getPointerPosition();let l={x:o.x-this._anchorDragOffset.x,y:o.y-this._anchorDragOffset.y};const c=a.getAbsolutePosition();this.anchorDragBoundFunc()&&(l=this.anchorDragBoundFunc()(c,l,e)),a.setAbsolutePosition(l);const d=a.getAbsolutePosition();if(c.x===d.x&&c.y===d.y)return;if(this._movingAnchorName==="rotater"){const I=this._getNodeRect();r=a.x()-I.width/2,n=-a.y()+I.height/2;let C=Math.atan2(-n,r)+Math.PI/2;I.height<0&&(C-=Math.PI);const E=wn.Konva.getAngle(this.rotation())+C,O=wn.Konva.getAngle(this.rotationSnapTolerance()),k=rG(this.rotationSnaps(),E,O)-I.rotation,V=tG(I,k);this._fitNodesInto(V,e);return}const u=this.shiftBehavior();let g;u==="inverted"?g=this.keepRatio()&&!e.shiftKey:u==="none"?g=this.keepRatio():g=this.keepRatio()||e.shiftKey;var b=this.centeredScaling()||e.altKey;if(this._movingAnchorName==="top-left"){if(g){var f=b?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};i=Math.sqrt(Math.pow(f.x-a.x(),2)+Math.pow(f.y-a.y(),2));var h=this.findOne(".top-left").x()>f.x?-1:1,m=this.findOne(".top-left").y()>f.y?-1:1;r=i*this.cos*h,n=i*this.sin*m,this.findOne(".top-left").x(f.x-r),this.findOne(".top-left").y(f.y-n)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(a.y());else if(this._movingAnchorName==="top-right"){if(g){var f=b?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};i=Math.sqrt(Math.pow(a.x()-f.x,2)+Math.pow(f.y-a.y(),2));var h=this.findOne(".top-right").x()<f.x?-1:1,m=this.findOne(".top-right").y()>f.y?-1:1;r=i*this.cos*h,n=i*this.sin*m,this.findOne(".top-right").x(f.x+r),this.findOne(".top-right").y(f.y-n)}var v=a.position();this.findOne(".top-left").y(v.y),this.findOne(".bottom-right").x(v.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(a.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(a.x());else if(this._movingAnchorName==="bottom-left"){if(g){var f=b?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};i=Math.sqrt(Math.pow(f.x-a.x(),2)+Math.pow(a.y()-f.y,2));var h=f.x<a.x()?-1:1,m=a.y()<f.y?-1:1;r=i*this.cos*h,n=i*this.sin*m,a.x(f.x-r),a.y(f.y+n)}v=a.position(),this.findOne(".top-left").x(v.x),this.findOne(".bottom-right").y(v.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(a.y());else if(this._movingAnchorName==="bottom-right"){if(g){var f=b?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};i=Math.sqrt(Math.pow(a.x()-f.x,2)+Math.pow(a.y()-f.y,2));var h=this.findOne(".bottom-right").x()<f.x?-1:1,m=this.findOne(".bottom-right").y()<f.y?-1:1;r=i*this.cos*h,n=i*this.sin*m,this.findOne(".bottom-right").x(f.x+r),this.findOne(".bottom-right").y(f.y+n)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));var b=this.centeredScaling()||e.altKey;if(b){const I=this.findOne(".top-left"),C=this.findOne(".bottom-right"),D=I.x(),E=I.y(),O=this.getWidth()-C.x(),A=this.getHeight()-C.y();C.move({x:-D,y:-E}),I.move({x:O,y:A})}const x=this.findOne(".top-left").getAbsolutePosition();r=x.x,n=x.y;const y=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),S=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:r,y:n,width:y,height:S,rotation:wn.Konva.getAngle(this.rotation())},e)}_handleMouseUp(e){this._removeEvents(e)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(e){var r;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const n=this.getNode();B1--,this._fire("transformend",{evt:e,target:n}),(r=this.getLayer())===null||r===void 0||r.batchDraw(),n&&this._nodes.forEach(i=>{var a;i._fire("transformend",{evt:e,target:i}),(a=i.getLayer())===null||a===void 0||a.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(e,r){const n=this._getNodeRect(),i=1;if(At.Util._inRange(e.width,-this.padding()*2-i,i)){this.update();return}if(At.Util._inRange(e.height,-this.padding()*2-i,i)){this.update();return}const a=new At.Transform;if(a.rotate(wn.Konva.getAngle(this.rotation())),this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("left")>=0){const g=a.point({x:-this.padding()*2,y:0});e.x+=g.x,e.y+=g.y,e.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=g.x,this._anchorDragOffset.y-=g.y}else if(this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("right")>=0){const g=a.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=g.x,this._anchorDragOffset.y-=g.y,e.width+=this.padding()*2}if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("top")>=0){const g=a.point({x:0,y:-this.padding()*2});e.x+=g.x,e.y+=g.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=g.x,this._anchorDragOffset.y-=g.y,e.height+=this.padding()*2}else if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const g=a.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=g.x,this._anchorDragOffset.y-=g.y,e.height+=this.padding()*2}if(this.boundBoxFunc()){const g=this.boundBoxFunc()(n,e);g?e=g:At.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const s=1e7,o=new At.Transform;o.translate(n.x,n.y),o.rotate(n.rotation),o.scale(n.width/s,n.height/s);const l=new At.Transform,c=e.width/s,d=e.height/s;this.flipEnabled()===!1?(l.translate(e.x,e.y),l.rotate(e.rotation),l.translate(e.width<0?e.width:0,e.height<0?e.height:0),l.scale(Math.abs(c),Math.abs(d))):(l.translate(e.x,e.y),l.rotate(e.rotation),l.scale(c,d));const u=l.multiply(o.invert());this._nodes.forEach(g=>{var f;const h=g.getParent().getAbsoluteTransform(),m=g.getTransform().copy();m.translate(g.offsetX(),g.offsetY());const v=new At.Transform;v.multiply(h.copy().invert()).multiply(u).multiply(h).multiply(m);const b=v.decompose();g.setAttrs(b),(f=g.getLayer())===null||f===void 0||f.batchDraw()}),this.rotation(At.Util._getRotation(e.rotation)),this._nodes.forEach(g=>{this._fire("transform",{evt:r,target:g}),g._fire("transform",{evt:r,target:g})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(e,r){this.findOne(e).setAttrs(r)}update(){var e;const r=this._getNodeRect();this.rotation(At.Util._getRotation(r.rotation));const n=r.width,i=r.height,a=this.enabledAnchors(),s=this.resizeEnabled(),o=this.padding(),l=this.anchorSize(),c=this.find("._anchor");c.forEach(u=>{u.setAttrs({width:l,height:l,offsetX:l/2,offsetY:l/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:l/2+o,offsetY:l/2+o,visible:s&&a.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:n/2,y:0,offsetY:l/2+o,visible:s&&a.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:n,y:0,offsetX:l/2-o,offsetY:l/2+o,visible:s&&a.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:i/2,offsetX:l/2+o,visible:s&&a.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:n,y:i/2,offsetX:l/2-o,visible:s&&a.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:i,offsetX:l/2+o,offsetY:l/2-o,visible:s&&a.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:n/2,y:i,offsetY:l/2-o,visible:s&&a.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:n,y:i,offsetX:l/2-o,offsetY:l/2-o,visible:s&&a.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:n/2,y:-this.rotateAnchorOffset()*At.Util._sign(i)-o,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:n,height:i,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const d=this.anchorStyleFunc();d&&c.forEach(u=>{d(u)}),(e=this.getLayer())===null||e===void 0||e.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const e=this.findOne("."+this._movingAnchorName);e&&e.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),P2.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return C2.Node.prototype.toObject.call(this)}clone(e){return C2.Node.prototype.clone.call(this,e)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}Bg.Transformer=mt;mt.isTransforming=()=>B1>0;function nG(t){return t instanceof Array||At.Util.warn("enabledAnchors value should be an array"),t instanceof Array&&t.forEach(function(e){Ih.indexOf(e)===-1&&At.Util.warn("Unknown anchor name: "+e+". Available names are: "+Ih.join(", "))}),t||[]}mt.prototype.className="Transformer";(0,qU._registerNode)(mt);Ct.Factory.addGetterSetter(mt,"enabledAnchors",Ih,nG);Ct.Factory.addGetterSetter(mt,"flipEnabled",!0,(0,la.getBooleanValidator)());Ct.Factory.addGetterSetter(mt,"resizeEnabled",!0);Ct.Factory.addGetterSetter(mt,"anchorSize",10,(0,la.getNumberValidator)());Ct.Factory.addGetterSetter(mt,"rotateEnabled",!0);Ct.Factory.addGetterSetter(mt,"rotateLineVisible",!0);Ct.Factory.addGetterSetter(mt,"rotationSnaps",[]);Ct.Factory.addGetterSetter(mt,"rotateAnchorOffset",50,(0,la.getNumberValidator)());Ct.Factory.addGetterSetter(mt,"rotateAnchorCursor","crosshair");Ct.Factory.addGetterSetter(mt,"rotationSnapTolerance",5,(0,la.getNumberValidator)());Ct.Factory.addGetterSetter(mt,"borderEnabled",!0);Ct.Factory.addGetterSetter(mt,"anchorStroke","rgb(0, 161, 255)");Ct.Factory.addGetterSetter(mt,"anchorStrokeWidth",1,(0,la.getNumberValidator)());Ct.Factory.addGetterSetter(mt,"anchorFill","white");Ct.Factory.addGetterSetter(mt,"anchorCornerRadius",0,(0,la.getNumberValidator)());Ct.Factory.addGetterSetter(mt,"borderStroke","rgb(0, 161, 255)");Ct.Factory.addGetterSetter(mt,"borderStrokeWidth",1,(0,la.getNumberValidator)());Ct.Factory.addGetterSetter(mt,"borderDash");Ct.Factory.addGetterSetter(mt,"keepRatio",!0);Ct.Factory.addGetterSetter(mt,"shiftBehavior","default");Ct.Factory.addGetterSetter(mt,"centeredScaling",!1);Ct.Factory.addGetterSetter(mt,"ignoreStroke",!1);Ct.Factory.addGetterSetter(mt,"padding",0,(0,la.getNumberValidator)());Ct.Factory.addGetterSetter(mt,"nodes");Ct.Factory.addGetterSetter(mt,"node");Ct.Factory.addGetterSetter(mt,"boundBoxFunc");Ct.Factory.addGetterSetter(mt,"anchorDragBoundFunc");Ct.Factory.addGetterSetter(mt,"anchorStyleFunc");Ct.Factory.addGetterSetter(mt,"shouldOverdrawWholeArea",!1);Ct.Factory.addGetterSetter(mt,"useSingleNodeRotation",!0);Ct.Factory.backCompat(mt,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});var Vg={};Object.defineProperty(Vg,"__esModule",{value:!0});Vg.Wedge=void 0;const jg=ut,iG=ar,aG=lt,G4=Xe,sG=lt;class Ii extends iG.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.radius(),0,aG.Konva.getAngle(this.angle()),this.clockwise()),e.lineTo(0,0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}Vg.Wedge=Ii;Ii.prototype.className="Wedge";Ii.prototype._centroid=!0;Ii.prototype._attrsAffectingSize=["radius"];(0,sG._registerNode)(Ii);jg.Factory.addGetterSetter(Ii,"radius",0,(0,G4.getNumberValidator)());jg.Factory.addGetterSetter(Ii,"angle",0,(0,G4.getNumberValidator)());jg.Factory.addGetterSetter(Ii,"clockwise",!1);jg.Factory.backCompat(Ii,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});var zg={};Object.defineProperty(zg,"__esModule",{value:!0});zg.Blur=void 0;const A2=ut,oG=Mt,lG=Xe;function T2(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const cG=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],dG=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function uG(t,e){const r=t.data,n=t.width,i=t.height;let a,s,o,l,c,d,u,g,f,h,m,v,b,x,y,S,I,C,D,E,O,A,k,V;const G=e+e+1,K=n-1,j=i-1,Q=e+1,te=Q*(Q+1)/2,q=new T2,Z=cG[e],ee=dG[e];let de=null,J=q,ie=null,xe=null;for(o=1;o<G;o++)J=J.next=new T2,o===Q&&(de=J);for(J.next=q,u=d=0,s=0;s<i;s++){for(S=I=C=D=g=f=h=m=0,v=Q*(E=r[d]),b=Q*(O=r[d+1]),x=Q*(A=r[d+2]),y=Q*(k=r[d+3]),g+=te*E,f+=te*O,h+=te*A,m+=te*k,J=q,o=0;o<Q;o++)J.r=E,J.g=O,J.b=A,J.a=k,J=J.next;for(o=1;o<Q;o++)l=d+((K<o?K:o)<<2),g+=(J.r=E=r[l])*(V=Q-o),f+=(J.g=O=r[l+1])*V,h+=(J.b=A=r[l+2])*V,m+=(J.a=k=r[l+3])*V,S+=E,I+=O,C+=A,D+=k,J=J.next;for(ie=q,xe=de,a=0;a<n;a++)r[d+3]=k=m*Z>>ee,k!==0?(k=255/k,r[d]=(g*Z>>ee)*k,r[d+1]=(f*Z>>ee)*k,r[d+2]=(h*Z>>ee)*k):r[d]=r[d+1]=r[d+2]=0,g-=v,f-=b,h-=x,m-=y,v-=ie.r,b-=ie.g,x-=ie.b,y-=ie.a,l=u+((l=a+e+1)<K?l:K)<<2,S+=ie.r=r[l],I+=ie.g=r[l+1],C+=ie.b=r[l+2],D+=ie.a=r[l+3],g+=S,f+=I,h+=C,m+=D,ie=ie.next,v+=E=xe.r,b+=O=xe.g,x+=A=xe.b,y+=k=xe.a,S-=E,I-=O,C-=A,D-=k,xe=xe.next,d+=4;u+=n}for(a=0;a<n;a++){for(I=C=D=S=f=h=m=g=0,d=a<<2,v=Q*(E=r[d]),b=Q*(O=r[d+1]),x=Q*(A=r[d+2]),y=Q*(k=r[d+3]),g+=te*E,f+=te*O,h+=te*A,m+=te*k,J=q,o=0;o<Q;o++)J.r=E,J.g=O,J.b=A,J.a=k,J=J.next;for(c=n,o=1;o<=e;o++)d=c+a<<2,g+=(J.r=E=r[d])*(V=Q-o),f+=(J.g=O=r[d+1])*V,h+=(J.b=A=r[d+2])*V,m+=(J.a=k=r[d+3])*V,S+=E,I+=O,C+=A,D+=k,J=J.next,o<j&&(c+=n);for(d=a,ie=q,xe=de,s=0;s<i;s++)l=d<<2,r[l+3]=k=m*Z>>ee,k>0?(k=255/k,r[l]=(g*Z>>ee)*k,r[l+1]=(f*Z>>ee)*k,r[l+2]=(h*Z>>ee)*k):r[l]=r[l+1]=r[l+2]=0,g-=v,f-=b,h-=x,m-=y,v-=ie.r,b-=ie.g,x-=ie.b,y-=ie.a,l=a+((l=s+Q)<j?l:j)*n<<2,g+=S+=ie.r=r[l],f+=I+=ie.g=r[l+1],h+=C+=ie.b=r[l+2],m+=D+=ie.a=r[l+3],ie=ie.next,v+=E=xe.r,b+=O=xe.g,x+=A=xe.b,y+=k=xe.a,S-=E,I-=O,C-=A,D-=k,xe=xe.next,d+=n}}const fG=function(e){const r=Math.round(this.blurRadius());r>0&&uG(e,r)};zg.Blur=fG;A2.Factory.addGetterSetter(oG.Node,"blurRadius",0,(0,lG.getNumberValidator)(),A2.Factory.afterSetFilter);var Ug={};Object.defineProperty(Ug,"__esModule",{value:!0});Ug.Brighten=void 0;const O2=ut,hG=Mt,gG=Xe,pG=function(t){const e=this.brightness()*255,r=t.data,n=r.length;for(let i=0;i<n;i+=4)r[i]+=e,r[i+1]+=e,r[i+2]+=e};Ug.Brighten=pG;O2.Factory.addGetterSetter(hG.Node,"brightness",0,(0,gG.getNumberValidator)(),O2.Factory.afterSetFilter);var Gg={};Object.defineProperty(Gg,"__esModule",{value:!0});Gg.Contrast=void 0;const k2=ut,mG=Mt,vG=Xe,yG=function(t){const e=Math.pow((this.contrast()+100)/100,2),r=t.data,n=r.length;let i=150,a=150,s=150;for(let o=0;o<n;o+=4)i=r[o],a=r[o+1],s=r[o+2],i/=255,i-=.5,i*=e,i+=.5,i*=255,a/=255,a-=.5,a*=e,a+=.5,a*=255,s/=255,s-=.5,s*=e,s+=.5,s*=255,i=i<0?0:i>255?255:i,a=a<0?0:a>255?255:a,s=s<0?0:s>255?255:s,r[o]=i,r[o+1]=a,r[o+2]=s};Gg.Contrast=yG;k2.Factory.addGetterSetter(mG.Node,"contrast",0,(0,vG.getNumberValidator)(),k2.Factory.afterSetFilter);var Hg={};Object.defineProperty(Hg,"__esModule",{value:!0});Hg.Emboss=void 0;const Qi=ut,Wg=Mt,bG=$t,H4=Xe,_G=function(t){const e=this.embossStrength()*10,r=this.embossWhiteLevel()*255,n=this.embossDirection(),i=this.embossBlend(),a=t.data,s=t.width,o=t.height,l=s*4;let c=0,d=0,u=o;switch(n){case"top-left":c=-1,d=-1;break;case"top":c=-1,d=0;break;case"top-right":c=-1,d=1;break;case"right":c=0,d=1;break;case"bottom-right":c=1,d=1;break;case"bottom":c=1,d=0;break;case"bottom-left":c=1,d=-1;break;case"left":c=0,d=-1;break;default:bG.Util.error("Unknown emboss direction: "+n)}do{const g=(u-1)*l;let f=c;u+f<1&&(f=0),u+f>o&&(f=0);const h=(u-1+f)*s*4;let m=s;do{const v=g+(m-1)*4;let b=d;m+b<1&&(b=0),m+b>s&&(b=0);const x=h+(m-1+b)*4,y=a[v]-a[x],S=a[v+1]-a[x+1],I=a[v+2]-a[x+2];let C=y;const D=C>0?C:-C,E=S>0?S:-S,O=I>0?I:-I;if(E>D&&(C=S),O>D&&(C=I),C*=e,i){const A=a[v]+C,k=a[v+1]+C,V=a[v+2]+C;a[v]=A>255?255:A<0?0:A,a[v+1]=k>255?255:k<0?0:k,a[v+2]=V>255?255:V<0?0:V}else{let A=r-C;A<0?A=0:A>255&&(A=255),a[v]=a[v+1]=a[v+2]=A}}while(--m)}while(--u)};Hg.Emboss=_G;Qi.Factory.addGetterSetter(Wg.Node,"embossStrength",.5,(0,H4.getNumberValidator)(),Qi.Factory.afterSetFilter);Qi.Factory.addGetterSetter(Wg.Node,"embossWhiteLevel",.5,(0,H4.getNumberValidator)(),Qi.Factory.afterSetFilter);Qi.Factory.addGetterSetter(Wg.Node,"embossDirection","top-left",void 0,Qi.Factory.afterSetFilter);Qi.Factory.addGetterSetter(Wg.Node,"embossBlend",!1,void 0,Qi.Factory.afterSetFilter);var Kg={};Object.defineProperty(Kg,"__esModule",{value:!0});Kg.Enhance=void 0;const R2=ut,wG=Mt,SG=Xe;function km(t,e,r,n,i){const a=r-e,s=i-n;if(a===0)return n+s/2;if(s===0)return n;let o=(t-e)/a;return o=s*o+n,o}const xG=function(t){const e=t.data,r=e.length;let n=e[0],i=n,a,s=e[1],o=s,l,c=e[2],d=c,u;const g=this.enhance();if(g===0)return;for(let C=0;C<r;C+=4)a=e[C+0],a<n?n=a:a>i&&(i=a),l=e[C+1],l<s?s=l:l>o&&(o=l),u=e[C+2],u<c?c=u:u>d&&(d=u);i===n&&(i=255,n=0),o===s&&(o=255,s=0),d===c&&(d=255,c=0);let f,h,m,v,b,x,y,S,I;g>0?(h=i+g*(255-i),m=n-g*(n-0),b=o+g*(255-o),x=s-g*(s-0),S=d+g*(255-d),I=c-g*(c-0)):(f=(i+n)*.5,h=i+g*(i-f),m=n+g*(n-f),v=(o+s)*.5,b=o+g*(o-v),x=s+g*(s-v),y=(d+c)*.5,S=d+g*(d-y),I=c+g*(c-y));for(let C=0;C<r;C+=4)e[C+0]=km(e[C+0],n,i,m,h),e[C+1]=km(e[C+1],s,o,x,b),e[C+2]=km(e[C+2],c,d,I,S)};Kg.Enhance=xG;R2.Factory.addGetterSetter(wG.Node,"enhance",0,(0,SG.getNumberValidator)(),R2.Factory.afterSetFilter);var qg={};Object.defineProperty(qg,"__esModule",{value:!0});qg.Grayscale=void 0;const IG=function(t){const e=t.data,r=e.length;for(let n=0;n<r;n+=4){const i=.34*e[n]+.5*e[n+1]+.16*e[n+2];e[n]=i,e[n+1]=i,e[n+2]=i}};qg.Grayscale=IG;var Yg={};Object.defineProperty(Yg,"__esModule",{value:!0});Yg.HSL=void 0;const uo=ut,x0=Mt,I0=Xe;uo.Factory.addGetterSetter(x0.Node,"hue",0,(0,I0.getNumberValidator)(),uo.Factory.afterSetFilter);uo.Factory.addGetterSetter(x0.Node,"saturation",0,(0,I0.getNumberValidator)(),uo.Factory.afterSetFilter);uo.Factory.addGetterSetter(x0.Node,"luminance",0,(0,I0.getNumberValidator)(),uo.Factory.afterSetFilter);const CG=function(t){const e=t.data,r=e.length,n=1,i=Math.pow(2,this.saturation()),a=Math.abs(this.hue()+360)%360,s=this.luminance()*127,o=n*i*Math.cos(a*Math.PI/180),l=n*i*Math.sin(a*Math.PI/180),c=.299*n+.701*o+.167*l,d=.587*n-.587*o+.33*l,u=.114*n-.114*o-.497*l,g=.299*n-.299*o-.328*l,f=.587*n+.413*o+.035*l,h=.114*n-.114*o+.293*l,m=.299*n-.3*o+1.25*l,v=.587*n-.586*o-1.05*l,b=.114*n+.886*o-.2*l;let x,y,S,I;for(let C=0;C<r;C+=4)x=e[C+0],y=e[C+1],S=e[C+2],I=e[C+3],e[C+0]=c*x+d*y+u*S+s,e[C+1]=g*x+f*y+h*S+s,e[C+2]=m*x+v*y+b*S+s,e[C+3]=I};Yg.HSL=CG;var Xg={};Object.defineProperty(Xg,"__esModule",{value:!0});Xg.HSV=void 0;const fo=ut,C0=Mt,P0=Xe,PG=function(t){const e=t.data,r=e.length,n=Math.pow(2,this.value()),i=Math.pow(2,this.saturation()),a=Math.abs(this.hue()+360)%360,s=n*i*Math.cos(a*Math.PI/180),o=n*i*Math.sin(a*Math.PI/180),l=.299*n+.701*s+.167*o,c=.587*n-.587*s+.33*o,d=.114*n-.114*s-.497*o,u=.299*n-.299*s-.328*o,g=.587*n+.413*s+.035*o,f=.114*n-.114*s+.293*o,h=.299*n-.3*s+1.25*o,m=.587*n-.586*s-1.05*o,v=.114*n+.886*s-.2*o;let b,x,y,S;for(let I=0;I<r;I+=4)b=e[I+0],x=e[I+1],y=e[I+2],S=e[I+3],e[I+0]=l*b+c*x+d*y,e[I+1]=u*b+g*x+f*y,e[I+2]=h*b+m*x+v*y,e[I+3]=S};Xg.HSV=PG;fo.Factory.addGetterSetter(C0.Node,"hue",0,(0,P0.getNumberValidator)(),fo.Factory.afterSetFilter);fo.Factory.addGetterSetter(C0.Node,"saturation",0,(0,P0.getNumberValidator)(),fo.Factory.afterSetFilter);fo.Factory.addGetterSetter(C0.Node,"value",0,(0,P0.getNumberValidator)(),fo.Factory.afterSetFilter);var Qg={};Object.defineProperty(Qg,"__esModule",{value:!0});Qg.Invert=void 0;const EG=function(t){const e=t.data,r=e.length;for(let n=0;n<r;n+=4)e[n]=255-e[n],e[n+1]=255-e[n+1],e[n+2]=255-e[n+2]};Qg.Invert=EG;var Zg={};Object.defineProperty(Zg,"__esModule",{value:!0});Zg.Kaleidoscope=void 0;const Ch=ut,W4=Mt,M2=$t,K4=Xe,AG=function(t,e,r){const n=t.data,i=e.data,a=t.width,s=t.height,o=r.polarCenterX||a/2,l=r.polarCenterY||s/2;let c=Math.sqrt(o*o+l*l),d=a-o,u=s-l;const g=Math.sqrt(d*d+u*u);c=g>c?g:c;const f=s,h=a,m=360/h*Math.PI/180;for(let v=0;v<h;v+=1){const b=Math.sin(v*m),x=Math.cos(v*m);for(let y=0;y<f;y+=1){d=Math.floor(o+c*y/f*x),u=Math.floor(l+c*y/f*b);let S=(u*a+d)*4;const I=n[S+0],C=n[S+1],D=n[S+2],E=n[S+3];S=(v+y*a)*4,i[S+0]=I,i[S+1]=C,i[S+2]=D,i[S+3]=E}}},TG=function(t,e,r){const n=t.data,i=e.data,a=t.width,s=t.height,o=r.polarCenterX||a/2,l=r.polarCenterY||s/2;let c=Math.sqrt(o*o+l*l),d=a-o,u=s-l;const g=Math.sqrt(d*d+u*u);c=g>c?g:c;const f=s,h=a,m=0;let v,b;for(d=0;d<a;d+=1)for(u=0;u<s;u+=1){const x=d-o,y=u-l,S=Math.sqrt(x*x+y*y)*f/c;let I=(Math.atan2(y,x)*180/Math.PI+360+m)%360;I=I*h/360,v=Math.floor(I),b=Math.floor(S);let C=(b*a+v)*4;const D=n[C+0],E=n[C+1],O=n[C+2],A=n[C+3];C=(u*a+d)*4,i[C+0]=D,i[C+1]=E,i[C+2]=O,i[C+3]=A}},OG=function(t){const e=t.width,r=t.height;let n,i,a,s,o,l,c,d,u,g,f=Math.round(this.kaleidoscopePower());const h=Math.round(this.kaleidoscopeAngle()),m=Math.floor(e*(h%360)/360);if(f<1)return;const v=M2.Util.createCanvasElement();v.width=e,v.height=r;const b=v.getContext("2d").getImageData(0,0,e,r);M2.Util.releaseCanvas(v),AG(t,b,{polarCenterX:e/2,polarCenterY:r/2});let x=e/Math.pow(2,f);for(;x<=8;)x=x*2,f-=1;x=Math.ceil(x);let y=x,S=0,I=y,C=1;for(m+x>e&&(S=y,I=0,C=-1),i=0;i<r;i+=1)for(n=S;n!==I;n+=C)a=Math.round(n+m)%e,u=(e*i+a)*4,o=b.data[u+0],l=b.data[u+1],c=b.data[u+2],d=b.data[u+3],g=(e*i+n)*4,b.data[g+0]=o,b.data[g+1]=l,b.data[g+2]=c,b.data[g+3]=d;for(i=0;i<r;i+=1)for(y=Math.floor(x),s=0;s<f;s+=1){for(n=0;n<y+1;n+=1)u=(e*i+n)*4,o=b.data[u+0],l=b.data[u+1],c=b.data[u+2],d=b.data[u+3],g=(e*i+y*2-n-1)*4,b.data[g+0]=o,b.data[g+1]=l,b.data[g+2]=c,b.data[g+3]=d;y*=2}TG(b,t,{})};Zg.Kaleidoscope=OG;Ch.Factory.addGetterSetter(W4.Node,"kaleidoscopePower",2,(0,K4.getNumberValidator)(),Ch.Factory.afterSetFilter);Ch.Factory.addGetterSetter(W4.Node,"kaleidoscopeAngle",0,(0,K4.getNumberValidator)(),Ch.Factory.afterSetFilter);var Jg={};Object.defineProperty(Jg,"__esModule",{value:!0});Jg.Mask=void 0;const D2=ut,kG=Mt,RG=Xe;function Rf(t,e,r){let n=(r*t.width+e)*4;const i=[];return i.push(t.data[n++],t.data[n++],t.data[n++],t.data[n++]),i}function Wo(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)+Math.pow(t[2]-e[2],2))}function MG(t){const e=[0,0,0];for(let r=0;r<t.length;r++)e[0]+=t[r][0],e[1]+=t[r][1],e[2]+=t[r][2];return e[0]/=t.length,e[1]/=t.length,e[2]/=t.length,e}function DG(t,e){const r=Rf(t,0,0),n=Rf(t,t.width-1,0),i=Rf(t,0,t.height-1),a=Rf(t,t.width-1,t.height-1),s=e||10;if(Wo(r,n)<s&&Wo(n,a)<s&&Wo(a,i)<s&&Wo(i,r)<s){const o=MG([n,r,a,i]),l=[];for(let c=0;c<t.width*t.height;c++){const d=Wo(o,[t.data[c*4],t.data[c*4+1],t.data[c*4+2]]);l[c]=d<s?0:255}return l}}function NG(t,e){for(let r=0;r<t.width*t.height;r++)t.data[4*r+3]=e[r]}function FG(t,e,r){const n=[1,1,1,1,0,1,1,1,1],i=Math.round(Math.sqrt(n.length)),a=Math.floor(i/2),s=[];for(let o=0;o<r;o++)for(let l=0;l<e;l++){const c=o*e+l;let d=0;for(let u=0;u<i;u++)for(let g=0;g<i;g++){const f=o+u-a,h=l+g-a;if(f>=0&&f<r&&h>=0&&h<e){const m=f*e+h,v=n[u*i+g];d+=t[m]*v}}s[c]=d===255*8?255:0}return s}function $G(t,e,r){const n=[1,1,1,1,1,1,1,1,1],i=Math.round(Math.sqrt(n.length)),a=Math.floor(i/2),s=[];for(let o=0;o<r;o++)for(let l=0;l<e;l++){const c=o*e+l;let d=0;for(let u=0;u<i;u++)for(let g=0;g<i;g++){const f=o+u-a,h=l+g-a;if(f>=0&&f<r&&h>=0&&h<e){const m=f*e+h,v=n[u*i+g];d+=t[m]*v}}s[c]=d>=255*4?255:0}return s}function LG(t,e,r){const n=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],i=Math.round(Math.sqrt(n.length)),a=Math.floor(i/2),s=[];for(let o=0;o<r;o++)for(let l=0;l<e;l++){const c=o*e+l;let d=0;for(let u=0;u<i;u++)for(let g=0;g<i;g++){const f=o+u-a,h=l+g-a;if(f>=0&&f<r&&h>=0&&h<e){const m=f*e+h,v=n[u*i+g];d+=t[m]*v}}s[c]=d}return s}const BG=function(t){const e=this.threshold();let r=DG(t,e);return r&&(r=FG(r,t.width,t.height),r=$G(r,t.width,t.height),r=LG(r,t.width,t.height),NG(t,r)),t};Jg.Mask=BG;D2.Factory.addGetterSetter(kG.Node,"threshold",0,(0,RG.getNumberValidator)(),D2.Factory.afterSetFilter);var ep={};Object.defineProperty(ep,"__esModule",{value:!0});ep.Noise=void 0;const N2=ut,VG=Mt,jG=Xe,zG=function(t){const e=this.noise()*255,r=t.data,n=r.length,i=e/2;for(let a=0;a<n;a+=4)r[a+0]+=i-2*i*Math.random(),r[a+1]+=i-2*i*Math.random(),r[a+2]+=i-2*i*Math.random()};ep.Noise=zG;N2.Factory.addGetterSetter(VG.Node,"noise",.2,(0,jG.getNumberValidator)(),N2.Factory.afterSetFilter);var tp={};Object.defineProperty(tp,"__esModule",{value:!0});tp.Pixelate=void 0;const F2=ut,UG=$t,GG=Mt,HG=Xe,WG=function(t){let e=Math.ceil(this.pixelSize()),r=t.width,n=t.height,i,a,s,o,l,c,d,u=Math.ceil(r/e),g=Math.ceil(n/e),f,h,m,v,b,x,y,S=t.data;if(e<=0){UG.Util.error("pixelSize value can not be <= 0");return}for(b=0;b<u;b+=1)for(x=0;x<g;x+=1){for(o=0,l=0,c=0,d=0,f=b*e,h=f+e,m=x*e,v=m+e,y=0,i=f;i<h;i+=1)if(!(i>=r))for(a=m;a<v;a+=1)a>=n||(s=(r*a+i)*4,o+=S[s+0],l+=S[s+1],c+=S[s+2],d+=S[s+3],y+=1);for(o=o/y,l=l/y,c=c/y,d=d/y,i=f;i<h;i+=1)if(!(i>=r))for(a=m;a<v;a+=1)a>=n||(s=(r*a+i)*4,S[s+0]=o,S[s+1]=l,S[s+2]=c,S[s+3]=d)}};tp.Pixelate=WG;F2.Factory.addGetterSetter(GG.Node,"pixelSize",8,(0,HG.getNumberValidator)(),F2.Factory.afterSetFilter);var rp={};Object.defineProperty(rp,"__esModule",{value:!0});rp.Posterize=void 0;const $2=ut,KG=Mt,qG=Xe,YG=function(t){const e=Math.round(this.levels()*254)+1,r=t.data,n=r.length,i=255/e;for(let a=0;a<n;a+=1)r[a]=Math.floor(r[a]/i)*i};rp.Posterize=YG;$2.Factory.addGetterSetter(KG.Node,"levels",.5,(0,qG.getNumberValidator)(),$2.Factory.afterSetFilter);var np={};Object.defineProperty(np,"__esModule",{value:!0});np.RGB=void 0;const Ph=ut,E0=Mt,XG=Xe,QG=function(t){const e=t.data,r=e.length,n=this.red(),i=this.green(),a=this.blue();for(let s=0;s<r;s+=4){const o=(.34*e[s]+.5*e[s+1]+.16*e[s+2])/255;e[s]=o*n,e[s+1]=o*i,e[s+2]=o*a,e[s+3]=e[s+3]}};np.RGB=QG;Ph.Factory.addGetterSetter(E0.Node,"red",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)});Ph.Factory.addGetterSetter(E0.Node,"green",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)});Ph.Factory.addGetterSetter(E0.Node,"blue",0,XG.RGBComponent,Ph.Factory.afterSetFilter);var ip={};Object.defineProperty(ip,"__esModule",{value:!0});ip.RGBA=void 0;const wl=ut,ap=Mt,ZG=Xe,JG=function(t){const e=t.data,r=e.length,n=this.red(),i=this.green(),a=this.blue(),s=this.alpha();for(let o=0;o<r;o+=4){const l=1-s;e[o]=n*s+e[o]*l,e[o+1]=i*s+e[o+1]*l,e[o+2]=a*s+e[o+2]*l}};ip.RGBA=JG;wl.Factory.addGetterSetter(ap.Node,"red",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)});wl.Factory.addGetterSetter(ap.Node,"green",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)});wl.Factory.addGetterSetter(ap.Node,"blue",0,ZG.RGBComponent,wl.Factory.afterSetFilter);wl.Factory.addGetterSetter(ap.Node,"alpha",1,function(t){return this._filterUpToDate=!1,t>1?1:t<0?0:t});var sp={};Object.defineProperty(sp,"__esModule",{value:!0});sp.Sepia=void 0;const eH=function(t){const e=t.data,r=e.length;for(let n=0;n<r;n+=4){const i=e[n+0],a=e[n+1],s=e[n+2];e[n+0]=Math.min(255,i*.393+a*.769+s*.189),e[n+1]=Math.min(255,i*.349+a*.686+s*.168),e[n+2]=Math.min(255,i*.272+a*.534+s*.131)}};sp.Sepia=eH;var op={};Object.defineProperty(op,"__esModule",{value:!0});op.Solarize=void 0;const tH=function(t){const e=t.data,r=t.width,n=t.height,i=r*4;let a=n;do{const s=(a-1)*i;let o=r;do{const l=s+(o-1)*4;let c=e[l],d=e[l+1],u=e[l+2];c>127&&(c=255-c),d>127&&(d=255-d),u>127&&(u=255-u),e[l]=c,e[l+1]=d,e[l+2]=u}while(--o)}while(--a)};op.Solarize=tH;var lp={};Object.defineProperty(lp,"__esModule",{value:!0});lp.Threshold=void 0;const L2=ut,rH=Mt,nH=Xe,iH=function(t){const e=this.threshold()*255,r=t.data,n=r.length;for(let i=0;i<n;i+=1)r[i]=r[i]<e?0:255};lp.Threshold=iH;L2.Factory.addGetterSetter(rH.Node,"threshold",.5,(0,nH.getNumberValidator)(),L2.Factory.afterSetFilter);Object.defineProperty(yg,"__esModule",{value:!0});yg.Konva=void 0;const B2=g4,aH=xg,sH=Pg,oH=Tg,lH=Og,cH=kg,V2=co,dH=nf,uH=ko,fH=sf,hH=Dg,gH=Ng,pH=Fg,mH=$g,vH=Mo,yH=Lg,bH=Bg,_H=Vg,wH=zg,SH=Ug,xH=Gg,IH=Hg,CH=Kg,PH=qg,EH=Yg,AH=Xg,TH=Qg,OH=Zg,kH=Jg,RH=ep,MH=tp,DH=rp,NH=np,FH=ip,$H=sp,LH=op,BH=lp;yg.Konva=B2.Konva.Util._assign(B2.Konva,{Arc:aH.Arc,Arrow:sH.Arrow,Circle:oH.Circle,Ellipse:lH.Ellipse,Image:cH.Image,Label:V2.Label,Tag:V2.Tag,Line:dH.Line,Path:uH.Path,Rect:fH.Rect,RegularPolygon:hH.RegularPolygon,Ring:gH.Ring,Sprite:pH.Sprite,Star:mH.Star,Text:vH.Text,TextPath:yH.TextPath,Transformer:bH.Transformer,Wedge:_H.Wedge,Filters:{Blur:wH.Blur,Brighten:SH.Brighten,Contrast:xH.Contrast,Emboss:IH.Emboss,Enhance:CH.Enhance,Grayscale:PH.Grayscale,HSL:EH.HSL,HSV:AH.HSV,Invert:TH.Invert,Kaleidoscope:OH.Kaleidoscope,Mask:kH.Mask,Noise:RH.Noise,Pixelate:MH.Pixelate,Posterize:DH.Posterize,RGB:NH.RGB,RGBA:FH.RGBA,Sepia:$H.Sepia,Solarize:LH.Solarize,Threshold:BH.Threshold}});var VH=f0.exports;Object.defineProperty(VH,"__esModule",{value:!0});const jH=yg;f0.exports=jH.Konva;var zH=f0.exports;const dr=L_(zH);function UH(t){switch(t.type){case"RECTANGLE":{const e=t.rectangleLength/2,r=t.rectangleWidth/2;return[{x:-e,y:r},{x:0,y:r},{x:e,y:r},{x:e,y:0},{x:e,y:-r},{x:0,y:-r},{x:-e,y:-r},{x:-e,y:0}]}case"POLYGON":return[{x:0,y:t.polygonRadius}];case"ELLIPSE":{const e=t.ellipseLength/2,r=t.ellipseWidth/2;return[{x:0,y:r},{x:e,y:0},{x:0,y:-r},{x:-e,y:0}]}case"LINES":return t.linesCoordinates.map(e=>({x:e.x,y:e.y}))}}function GH(t,e){le(e,!0);const r=2,n=yr(e.canvasId);let i=new dr.Group;e.geometryGroup.add(i),i.moveToTop();let a=[],s=e.geometry.type,o=0;function l(c){const d={};switch(e.geometry.type){case"RECTANGLE":{if(c%2===0){const u=Math.abs(a[c].x())*2,g=Math.abs(a[c].y())*2;d.rectangleLength=_n(n.transform.modelDistance(u),r),d.rectangleWidth=_n(n.transform.modelDistance(g),r)}else if(c===1||c===5){a[c].x(0);const u=Math.abs(a[c].y())*2;d.rectangleWidth=_n(n.transform.modelDistance(u),r)}else{a[c].y(0);const u=Math.abs(a[c].x())*2;d.rectangleLength=_n(n.transform.modelDistance(u),r)}break}case"POLYGON":{a[c].x(0);const u=Math.abs(a[c].y());d.polygonRadius=_n(n.transform.modelDistance(u),r);break}case"ELLIPSE":{if(c%2===0){a[c].x(0);const u=Math.abs(a[c].y())*2;d.ellipseWidth=_n(n.transform.modelDistance(u),r)}else{a[c].y(0);const u=Math.abs(a[c].x())*2;d.ellipseLength=_n(n.transform.modelDistance(u),r)}break}case"LINES":{d.linesCoordinates=a.map(u=>({x:_n(n.transform.modelXPos(u.x()),r),y:_n(n.transform.modelYPos(u.y()),r)}));break}}return d}qe(()=>{const c=UH(e.geometry);o===0||s!=e.geometry.type||o!=c.length?(a=[],i.destroyChildren(),c.forEach((d,u)=>{const g=new dr.Circle({radius:6,strokeWidth:3,x:n.transform.canvasXPos(d.x),y:n.transform.canvasYPos(d.y),draggable:!0,stroke:e.strokeColor,fill:e.fillColor});g.on("mouseover",f=>{document.body.style.cursor="grab",f.cancelBubble=!0}),g.on("mouseout",f=>{document.body.style.cursor="default",f.cancelBubble=!0}),g.on("dragmove",f=>{e.onTransform&&e.onTransform(l(u),!1),f.cancelBubble=!0}),g.on("dragend",f=>{e.onTransform&&e.onTransform(l(u),!0),f.cancelBubble=!0}),a.push(g),i.add(g)})):c.forEach((d,u)=>{if(a[u])a[u].x(n.transform.canvasXPos(d.x)),a[u].y(n.transform.canvasYPos(d.y));else throw new ur("Geometry resize points caught in an invalid state.")}),i.moveToTop(),s=e.geometry.type,o=c.length}),qe(()=>{a.forEach(c=>{c.stroke(e.strokeColor),c.fill(e.fillColor)})}),ws(()=>{i.destroy()}),ce()}function HH(t,e,r=!1,n,i){const a={x:t.transform.canvasXPos(0),y:t.transform.canvasYPos(0),strokeScaleEnabled:t.transform.strokeScale,...n};switch(e.type){case"RECTANGLE":return new dr.Rect({width:t.transform.canvasDistance(e.rectangleLength),height:t.transform.canvasDistance(e.rectangleWidth),offset:{x:t.transform.canvasDistance(e.rectangleLength)/2,y:t.transform.canvasDistance(e.rectangleWidth)/2},...a});case"POLYGON":return new dr.RegularPolygon({sides:e.polygonNumSides,radius:t.transform.canvasDistance(e.polygonRadius),...a});case"ELLIPSE":return new dr.Ellipse({radiusX:t.transform.canvasDistance(e.ellipseLength/2),radiusY:t.transform.canvasDistance(e.ellipseWidth/2),...a});case"LINES":return new dr.Line({points:e.linesCoordinates.reduce((s,o)=>(s.push(t.transform.canvasXPos(o.x),t.transform.canvasYPos(o.y)),s),[]),closed:e.linesClosed||r,...a})}throw new ur("Geometry type undefined.")}function WH(t,e,r,n){return HH(t,e,!0,r)}function j2(t,e,r){if(r instanceof dr.Rect)e.rectangleLength&&(r.width(t.transform.canvasDistance(e.rectangleLength)),r.offsetX(t.transform.canvasDistance(e.rectangleLength)/2)),e.rectangleWidth&&(r.height(t.transform.canvasDistance(e.rectangleWidth)),r.offsetY(t.transform.canvasDistance(e.rectangleWidth)/2));else if(r instanceof dr.RegularPolygon)e.polygonNumSides&&r.sides(e.polygonNumSides),e.polygonRadius&&r.radius(t.transform.canvasDistance(e.polygonRadius));else if(r instanceof dr.Ellipse)e.ellipseLength&&r.radiusX(t.transform.canvasDistance(e.ellipseLength/2)),e.ellipseWidth&&r.radiusY(t.transform.canvasDistance(e.ellipseWidth/2));else if(r instanceof dr.Line)e.linesCoordinates&&r.points(e.linesCoordinates.reduce((n,i)=>(n.push(t.transform.canvasXPos(i.x),t.transform.canvasYPos(i.y)),n),[])),e.linesClosed&&r.closed(e.linesClosed);else throw new ur("Geometry shape of an unsupported type.")}function q4(t,e){le(e,!0);let r=T(e,"showName",3,!0),n=T(e,"labelTranslate",19,()=>({x:0,y:0}));const i=10,a=yr(e.canvasId),s=a.container.getLayer(e.plantingAreaLayerId),o=new dr.Group({draggable:e.editable});s.add(o);let l=null,c=new dr.Text({fontFamily:"sans",fontSize:15,opacity:.7,text:e.name,visible:r()});o.add(c);let d=e.geometry.type,u=R(()=>e.selected?zn("accent",8,a.mode.current):zn("brown",10,a.mode.current)),g=R(()=>e.selected?zn("accent",5,a.mode.current):zn("brown",3,a.mode.current)),f=R(()=>e.selected?3:2),h=R(()=>e.selected?zn("accent",11,a.mode.current):zn("brown",11,a.mode.current));qe(()=>{e.geometry.type!==d||!l?(l==null||l.destroy(),l=WH(a,e.geometry,{stroke:p(u),fill:p(g),strokeWidth:p(f)}),l&&(o.add(l),o.rotation(e.geometry.rotation),c.y(a.transform.canvasYPos(Qb(e.geometry)+n().y)),c.x(a.transform.canvasXPos(n().x)))):(j2(a,e.geometry,l),c.y(a.transform.canvasYPos(Qb(e.geometry)+n().y)),c.x(a.transform.canvasXPos(n().x))),d=e.geometry.type}),qe(()=>{e.position?(o.position({x:a.transform.canvasXPos(e.position.x),y:a.transform.canvasYPos(e.position.y)}),o.visible(!0)):o.visible(!1)}),qe(()=>{l==null||l.fill(p(g)),l==null||l.stroke(p(u)),l==null||l.strokeWidth(p(f)),c.fill(p(h))}),qe(()=>{c.text(e.name),c.offsetX(c.width()/2),c.offsetY(c.height()+i)}),qe(()=>{e.editable?(o.draggable(!0),l==null||l.on("mouseover",()=>{document.body.style.cursor="move"}),l==null||l.on("mouseout",()=>{a.selectionGroup.setDocumentCursor()}),o.on("dragmove",()=>{e.onTranslate&&e.onTranslate({x:o.x(),y:o.y()},!1)}),o.on("dragend",()=>{o.position(a.gridManager.snapToGrid(o.position())),e.onTranslate&&e.onTranslate({x:o.x(),y:o.y()},!0)}),o.on("pointerclick",()=>{e.onClick&&e.onClick()})):(o.draggable(!1),o.off("mouseover mouseout dragmove dragend pointerclick"))});function m(y,S){l&&j2(a,y,l),e.onTransform&&e.onTransform(y,S)}ws(()=>{o.destroy()});var v=F(),b=P(v);{var x=y=>{GH(y,{get canvasId(){return e.canvasId},get geometry(){return e.geometry},get strokeColor(){return p(u)},get fillColor(){return p(g)},geometryGroup:o,onTransform:m})};fe(b,y=>{e.editable&&y(x)})}w(t,v),ce()}function KH(t,e){le(e,!0),yr(e.canvasId).container.addLayer(e.plantingAreaLayerId);var n=F(),i=P(n);ge(i,()=>e.children),w(t,n),ce()}function qH(t){const e=t;let r=Me(100),n=null;const i={};let a=Me(!1),s=Me(0),o=Me(0);const l=[()=>{n&&(n.width(p(o)),n.height(p(s)))}];function c(h){if(!n)throw new ur("Attempted to add a layer when the canvas is uninitialized.");return i[h]=new dr.Layer,n.add(i[h]),i[h]}function d(h){if(i[h])return i[h];throw new ur(`Attempted to retrieve layer '${h}' which does not exist.`)}function u(){l.forEach(h=>h())}function g(h){l.push(h)}function f(){n=new dr.Stage({container:e,width:p(o),height:p(s)}),U(a,!0)}return{get containerId(){return e},get stage(){return n},get pixelsPerMeter(){return p(r)},get initialized(){return p(a)},get width(){return p(o)},get height(){return p(s)},set width(h){U(o,h,!0)},set height(h){U(s,h,!0)},set pixelsPerMeter(h){U(r,h,!0)},initialize:f,addLayer:c,getLayer:d,onResize:u,addResizeFunction:g}}const Y4=768,cp=()=>window.innerWidth<Y4;var Qd;class YH{constructor(){L(this,Qd,Me(!1));qe(()=>$e(()=>{const e=window.matchMedia(`(max-width: ${Y4-1}px)`),r=()=>{U(_(this,Qd),cp(),!0)};return e.addEventListener("change",r),r(),()=>{e.removeEventListener("change",r)}}))}get current(){return p(_(this,Qd))}}Qd=new WeakMap;const XH=cp()?"br":"bl",Mf=.1,Df=10;function QH(t,e,r){let n=Me(vr({x:1,y:1})),i=Me(vr({x:0,y:0}));const a=new G_("layoutControls",{buttonsExpanded:!0,buttonsPosition:XH}),s=[];function o(){return{x:0,y:t.height}}function l(y){return y*t.pixelsPerMeter}function c(y){return y/t.pixelsPerMeter}function d(y){return-y*t.pixelsPerMeter}function u(y){return-y/t.pixelsPerMeter}function g(y){return y*t.pixelsPerMeter}function f(y){return y/t.pixelsPerMeter}function h(){U(n,{x:1,y:1},!0),U(i,o(),!0)}function m(y){p(i).x+=y.x,p(i).y+=y.y}function v(y){if(y===0||p(n).x<=Mf&&y<0||p(n).x>=Df&&y>0||p(n).y<=Mf&&y<0||p(n).y>=Df&&y>0)return;const S={x:t.width/2,y:t.width/2},I={x:(S.x-p(i).x)/p(n).x,y:(S.y-p(i).y)/p(n).y},C={x:y<0?Math.max(p(n).x+y,Mf):Math.min(p(n).x+y,Df),y:y<0?Math.max(p(n).y+y,Mf):Math.min(p(n).y+y,Df)};U(n,C,!0),U(i,{x:S.x-I.x*p(n).x,y:S.y-I.y*p(n).y},!0)}function b(y){s.push(y)}function x(){if(!t.stage)throw new ur("Attempted to initialize canvas transform with uninitialized stage.");U(i,o(),!0),t.stage.position(p(i)),t.stage.draggable(e),qe(()=>{t.stage&&(t.stage.scale(p(n)),t.stage.position(p(i)),s.forEach(y=>y()))}),t.stage.on("dragmove",()=>{t.stage&&U(i,t.stage.position(),!0)})}return{get config(){return a.value},get scaleFactor(){return p(n)},set scaleFactor(y){U(n,y,!0)},get position(){return p(i)},get strokeScale(){return r},set config(y){a.value=y},set position(y){U(i,y,!0)},canvasXPos:l,modelXPos:c,canvasYPos:d,modelYPos:u,canvasDistance:g,modelDistance:f,translate:m,addScale:v,reset:h,addTransformFunction:b,initialize:x}}function Nf(t,e){return Math.round(t/e)*e}function z2(t,e){return Math.floor(t/e)*e}function ZH(t,e){let r=null,n=null;const i=H_("layoutGridState",{snapToGrid:!0,rightAngleConstraint:!1,metersPerBackgroundGridline:.3048}),a=R(()=>t.pixelsPerMeter*i.value.metersPerBackgroundGridline);function s(){r=t.addLayer("gridlines"),n=new dr.Group,r.add(n),t.addResizeFunction(l),e.addTransformFunction(l),l()}function o(c){return i.value.snapToGrid?{x:Nf(c.x,p(a)/2),y:Nf(c.y,p(a)/2)}:c}function l(){if(!r||!n)return;const c={x:-e.position.x/e.scaleFactor.x,y:-e.position.y/e.scaleFactor.y},d={x:c.x+t.width/e.scaleFactor.x,y:c.y+t.height/e.scaleFactor.y},u={x:z2(c.x,p(a)),y:z2(c.y,p(a))},g={x:Nf(d.x+p(a),p(a)),y:Nf(d.y+p(a),p(a))},f={x:Math.round((g.y-u.y)/p(a)),y:Math.round((g.x-u.x)/p(a))},h={x:p(a),y:p(a)};n.destroyChildren();for(let m=0;m<=f.x;m++){const v=u.y+h.x*m;let b=zn("neutral",3,hs.current),x=1;v==0&&(b=zn("neutral",4,hs.current),x=2),n.add(new dr.Line({points:[u.x,v,g.x,v],stroke:b,strokeWidth:x,strokeScaleEnabled:!1}))}for(let m=0;m<=f.y;m++){const v=u.x+h.y*m;let b=zn("neutral",2,hs.current),x=1;v==0&&(b=zn("neutral",3,hs.current),x=2),n.add(new dr.Line({points:[v,u.y,v,g.y],stroke:b,strokeWidth:x,strokeScaleEnabled:!1}))}}return{get config(){return i.value},set config(c){i.value=c},initialize:s,snapToGrid:o}}function JH(t){var n,i;new dr.Group;const e="pointer";(n=t.stage)==null||n.on("mouseover",()=>{r()}),(i=t.stage)==null||i.on("mouseout",()=>{document.body.style.cursor="default"});function r(){switch(e){case"pointer":document.body.style.cursor="default";break;case"group":document.body.style.cursor="crosshair";break;case"union":document.body.style.cursor="crosshair";break;case"intersect":document.body.style.cursor="crosshair";break}}return{setDocumentCursor:r}}function X4(t,e,r,n={}){const i=t,a=e,s=qH(i),o=QH(s,n.draggable||!0,n.strokeScale||!0),l=JH(s),c=ZH(s,o);function d(){s.initialize(),o.initialize()}function u(){s.stage&&s.stage.destroy()}return{get canvasId(){return i},get workspaceId(){return a},transform:o,container:s,selectionGroup:l,gridManager:c,initialize:d,destroy:u,mode:r}}function eW(t,e,r,n={}){return Ji(t,X4(t,e,r,n))}function tW(t){return yr(t)}function rW(t,e,r,n={}){const i=yr(t);return i&&i.destroy(),Ji(t,X4(t,e,r,n))}function ho(t,e){le(e,!0);let r=T(e,"ref",15,null),n=T(e,"sideOffset",3,4),i=T(e,"align",3,"center"),a=Ce(e,["$$slots","$$events","$$legacy","ref","class","sideOffset","align"]);var s=F(),o=P(s);M(o,()=>W_,(l,c)=>{c(l,{children:(d,u)=>{var g=F(),f=P(g);const h=R(()=>Ue("bg-neutral-3 text-neutral-11 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 rounded-md border p-4 shadow-md outline-none",e.class));M(f,()=>iV,(m,v)=>{v(m,Be({get sideOffset(){return n()},get align(){return i()},get class(){return p(h)}},()=>a,{get ref(){return r()},set ref(b){r(b)}}))}),w(d,g)},$$slots:{default:!0}})}),w(t,s),ce()}const go=NV,po=sV;var nW=H("<!> <!>",1);function iW(t,e){le(e,!0);var r=F(),n=P(r);M(n,()=>go,(i,a)=>{a(i,{children:(s,o)=>{var l=nW(),c=P(l);M(c,()=>po,(u,g)=>{g(u,{class:"w-8",children:(f,h)=>{Je(f,{get icon(){return ot.formFieldDescriptionIcon},width:"1rem",class:"text-destructive-9 hover:text-destructive-10 ml-2"})},$$slots:{default:!0}})});var d=Y(c,2);M(d,()=>ho,(u,g)=>{g(u,{class:"max-w-2xl",children:(f,h)=>{He();var m=Ke();Ee(v=>pt(m,v),[()=>e.errors.join(" ")]),w(f,m)},$$slots:{default:!0}})}),w(s,l)},$$slots:{default:!0}})}),w(t,r),ce()}var aW=H("<!> <!>",1);function Q4(t,e){le(e,!0);var r=F(),n=P(r);M(n,()=>go,(i,a)=>{a(i,{children:(s,o)=>{var l=aW(),c=P(l);M(c,()=>po,(u,g)=>{g(u,{class:"w-8",children:(f,h)=>{Je(f,{get icon(){return ot.formFieldDescriptionIcon},width:"1rem",class:"text-neutral-11 hover:text-neutral-10 ml-2"})},$$slots:{default:!0}})});var d=Y(c,2);M(d,()=>ho,(u,g)=>{g(u,{class:"max-w-2xl",children:(f,h)=>{He();var m=Ke();Ee(()=>pt(m,e.description)),w(f,m)},$$slots:{default:!0}})}),w(s,l)},$$slots:{default:!0}})}),w(t,r),ce()}const A0="/~";function sW(t,e){return`${t}${A0}${e}`}function fi(t,e){return`${t}${A0}${e}`}function V1(t){const e=t.split(A0);if(e.length<2||e.length>3)throw new ur(`Invalid Tree ID format: ${t}`);return e[2]?{entityType:e[0],entityId:e[1],field:e[2]}:{entityType:e[0],entityId:e[1]}}function Nr(t,e,r,n){const i=TF(e,r);return i?(n[t]=i,!1):!0}var oW=(t,e,r)=>{t.stopPropagation(),!e(t)&&!t.shiftKey&&p(r).tree.clearSelection(),e(t)?p(r).toggleSelect():p(r).tree.select(p(r).id),t.shiftKey&&p(r).tree.selectUntil(p(r).id),p(r).focus()},lW=H('<span class="bg-accent-7 h-3 w-3 rounded-[4px]"></span>'),cW=H('<button aria-label="select" class="border-accent-8 mr-1 flex h-5 w-5 items-center justify-center rounded-[4px] border-2"><!></button>'),dW=H('<div class="flex grow items-center"><div class="bg-neutral-3 mx-3 h-[1px] w-full"></div> <!></div>'),uW=t=>t.stopPropagation(),fW=t=>t.stopPropagation(),hW=H('<div role="none" class="flex w-1/2 items-center"><div class="mr-1 flex items-center"><!></div> <!></div>'),gW=H('<ul><div class="bg-neutral-5 absolute bottom-4 top-4 w-[1px]"></div> <!></ul>'),pW=H('<li><div><div class="flex items-center gap-2 pl-2"><!> <!> <span> </span> <!></div>  <!></div> <!></li>'),mW=H("<ul><!></ul>");function vW(t,e){le(e,!0);const r=(l,c=Ve,d)=>{let u=fr(()=>y6(d==null?void 0:d(),0));var g=F(),f=P(g);Kt(f,17,c,h=>h.id,(h,m)=>{var v=pW(),b=q=>{q.stopPropagation(),p(m).tree.expandOnClick&&p(m).canExpand&&(!p(m).tree.multiple||!i(q)&&!q.shiftKey)&&p(m).toggleExpand(),p(m).focus()};let x;var y=re(v),S=re(y),I=re(S);{var C=q=>{var Z=cW();Z.__click=[oW,i,m];var ee=re(Z);{var de=J=>{var ie=lW();w(J,ie)};fe(ee,J=>{p(m).selected&&J(de)})}ne(Z),w(q,Z)};fe(I,q=>{V1(p(m).id).field||q(C)})}var D=Y(I,2);{var E=q=>{Je(q,{get icon(){return p(m).item.icon},width:"1.25rem"})};fe(D,q=>{p(m).item.icon&&q(E)})}var O=Y(D,2),A=re(O,!0);ne(O);var k=Y(O,2);{var V=q=>{Q4(q,{get description(){return p(m).item.description}})};fe(k,q=>{p(m).item.description&&q(V)})}ne(S);var G=Y(S,2);{var K=q=>{var Z=dW(),ee=Y(re(Z),2);const de=R(()=>p(m).expanded?"rotate-90":""),J=R(()=>p(m).selected?"hover:bg-accent-5":"hover:bg-neutral-3");Je(ee,{get icon(){return ot.chevronRight},width:"1rem",get class(){return`${p(de)??""} ml-2 h-6 w-8 rounded-md p-1  ${p(J)??""}`}}),ne(Z),w(q,Z)},j=(q,Z)=>{{var ee=de=>{var J=hW();J.__click=[uW],J.__keydown=[fW];var ie=re(J),xe=re(ie);{var ke=X=>{iW(X,{get errors(){return e.fieldErrors[p(m).id]}})};fe(xe,X=>{Object.keys(e.fieldErrors).includes(p(m).id)&&X(ke)})}ne(ie);var pe=Y(ie,2);const B=R(()=>Object.keys(e.fieldErrors).includes(p(m).id));M(pe,()=>p(m).item.valueComponent,(X,oe)=>{oe(X,{get value(){return p(m).item.value},get editing(){return e.editing},get onChange(){return p(m).item.onChange},get errors(){return p(B)}})}),ne(J),w(de,J)};fe(q,de=>{p(m).item.valueComponent&&p(m).item.onChange&&de(ee)},Z)}};fe(G,q=>{var Z;(Z=p(m).children)!=null&&Z.length?q(K):q(j,!1)})}ne(y);var Q=Y(y,2);{var te=q=>{var Z=gW();let ee;var de=re(Z),J=Y(de,2);r(J,()=>p(m).children,()=>p(u)+1),ne(Z),Ee(()=>{ee=Fe(Z,ee,{...e.editableTree.tree.group,class:`${p(m).expanded?"h-auto opacity-100":"pointer-events-none h-0 opacity-0"} relative origin-left`}),gs(de,`left: ${.5+p(u)*1}rem`)}),w(q,Z)};fe(Q,q=>{var Z;(Z=p(m).children)!=null&&Z.length&&!p(m).item.value&&q(te)})}ne(v),Ee(()=>{x=Fe(v,x,{...p(m).attrs,onclick:b,class:"cursor-pointer py-3"}),Wt(y,1,`flex justify-between gap-4 rounded-md py-2 pr-2 ${p(u)==0?"":"pl-2"}`),gs(y,`margin-left: ${p(u)*1}rem`),pt(A,p(m).item.label)}),w(h,v)}),w(l,g)};function n(){return/mac/i.test(navigator.platform)}function i(l){return n()?l.metaKey:l.ctrlKey}var a=mW();let s;var o=re(a);return r(o,()=>e.editableTree.tree.children),ne(a),Ee(()=>s=Fe(a,s,{...e.editableTree.tree.root,class:"px-2"})),w(t,a),ce({isMac:n,isControlOrMeta:i})}w9(["click","keydown"]);function Z4(t,e){le(e,!0);var r=F(),n=P(r);{var i=s=>{er(s,{class:"flex w-full select-none items-center justify-center",onclick:()=>{e.onChange(void 0)},children:(o,l)=>{Je(o,{get icon(){return ot.addIcon},width:"1.5rem",class:"text-neutral-11"})},$$slots:{default:!0}})},a=s=>{er(s,{class:"flex w-full select-none items-center justify-center",disabled:!0,children:(o,l)=>{Je(o,{get icon(){return ot.addIcon},width:"1.5rem",class:"text-neutral-11"})},$$slots:{default:!0}})};fe(n,s=>{e.editing?s(i):s(a,!1)})}w(t,r),ce()}function J4(t,e){const r=Wa(e,["children","$$slots","$$events","$$legacy"]);Ga(t,Be({name:"check"},()=>r,{iconNode:[["path",{d:"M20 6 9 17l-5-5"}]],children:(i,a)=>{var s=F(),o=P(s);Ha(o,e,"default",{}),w(i,s)},$$slots:{default:!0}}))}function yW(t,e){const r=Wa(e,["children","$$slots","$$events","$$legacy"]);Ga(t,Be({name:"minus"},()=>r,{iconNode:[["path",{d:"M5 12h14"}]],children:(i,a)=>{var s=F(),o=P(s);Ha(o,e,"default",{}),w(i,s)},$$slots:{default:!0}}))}const eS={distance:{symbols:{metric:"m",imperial:"ft"},conversions:{metric:t=>t*3.280839895,imperial:t=>t*.3048}},temperature:{symbols:{metric:"Â°C",imperial:"Â°F"},conversions:{metric:t=>t*(9/5)+32,imperial:t=>(t-32)*(5/9)}},mass:{symbols:{metric:"kgs",imperial:"lbs"},conversions:{metric:t=>t*2.20462262185,imperial:t=>t*.45359237}},volume:{symbols:{metric:"L",imperial:"gal(US)"},conversions:{metric:t=>t*.2641720524,imperial:t=>t*3.785411784}}};function bW(t,e){return eS[e].symbols[t]}function _W(t){return t==="metric"?"imperial":"metric"}function nl(t,e,r){return eS[r].conversions[e](t)}function wW(t,e,r){return e==="metric"?t:nl(t,e,r)}function T0(t,e,r="metric",n=2){let i=Me(vr(r)),a=Me(vr(r==="metric"?e:e.map(g=>nl(g,"metric",t))));const s=R(()=>p(a).map(g=>wW(g,p(i),t))),o=R(()=>bW(p(i),t));function l(g){const f=p(i)==="metric"?g:g.map(h=>_n(nl(h,"metric",t),n));f.forEach((h,m)=>{h!=p(a)[m]&&(p(a)[m]=f[m])})}function c(g,f){if(!(g.target instanceof HTMLInputElement)||!g.target.value)return;let h=parseFloat(g.target.value);h||(h=0),p(a)[f]=h}function d(){U(a,p(a).map(g=>_n(nl(g,p(i),t),n)),!0),U(i,_W(p(i)),!0)}function u(g){return p(i)==="metric"?g:nl(g,"metric",t)}return{get unitSystem(){return p(i)},get displayValues(){return p(a)},get metricValues(){return p(s)},get unitSymbol(){return p(o)},set displayValues(g){U(a,g,!0)},setDisplayValues:l,handleInput:c,swapUnits:d,metricToCurrentUnit:u}}var SW=H('<div><div class="@xs:flex-row flex w-full grid-cols-3 grid-rows-2 flex-col justify-between"><div class="flex w-full"><span class="bg-neutral-2 border-neutral-7 border-r-neutral-5 @xs:rounded-bl-md @xs:border-b flex h-10 w-8 items-center justify-center rounded-l-md rounded-bl-none border border-b-0 border-r-0 px-3 text-sm">X</span> <!></div> <div class="flex w-full"><span class="bg-neutral-2 border-neutral-7 @xs:border-x-neutral-5 @xs:border-b @xs:border-l-0 flex h-10 w-8 items-center justify-center rounded-none border border-b-0 border-r-0 px-3 text-sm">Y</span> <!></div> <span> </span> <!></div></div>');function j1(t,e){le(e,!0);let r=T(e,"x",15),n=T(e,"y",15),i=T(e,"decimalPlaces",3,2),a=T(e,"step",3,.01),s=Ce(e,["$$slots","$$events","$$legacy","x","y","initialUnitSystem","onValueChange","decimalPlaces","step","min","max"]);const o=T0("distance",[r(),n()],e.initialUnitSystem,i());qe(()=>{o.setDisplayValues([r(),n()])});let l=R(()=>e.min?o.metricToCurrentUnit(e.min):""),c=R(()=>e.max?o.metricToCurrentUnit(e.max):"");var d=SW();let u;var g=re(d),f=re(g),h=Y(re(f),2);zi(h,{get value(){return o.displayValues[0]},type:"number",get step(){return a()},get min(){return p(l)},get max(){return p(c)},oninput:S=>{o.handleInput(S,0),r(o.metricValues[0]),e.onValueChange&&e.onValueChange({x:o.metricValues[0],y:o.metricValues[1]})},class:"@xs:border-b @xs:rounded-tr-none w-full rounded-l-none rounded-r-none rounded-tr-md border-b-0"}),ne(f);var m=Y(f,2),v=Y(re(m),2);zi(v,{get value(){return o.displayValues[1]},type:"number",get step(){return a()},get min(){return p(l)},get max(){return p(c)},oninput:S=>{o.handleInput(S,1),n(o.metricValues[1]),e.onValueChange&&e.onValueChange({x:o.metricValues[0],y:o.metricValues[1]})},class:"@xs:border-b rounded-l-none rounded-r-none border-b-0"}),ne(m);var b=Y(m,2),x=re(b,!0);ne(b);var y=Y(b,2);M(y,()=>Qr,(S,I)=>{I(S,{get onclick(){return o.swapUnits},type:"button",class:"border-x-neutral-7 @xs:border-x-neutral-5 bg-neutral-2 hover:bg-neutral-3 @xs:h-10 @xs:w-8 @xs:rounded-none @xs:rounded-r-md flex h-8 w-full items-center justify-center rounded-b-md border px-2",children:(C,D)=>{Je(C,{icon:"material-symbols:swap-horiz-rounded",width:"1rem"})},$$slots:{default:!0}})}),ne(g),ne(d),Ee(()=>{u=Fe(d,u,{...s,class:"@container h-full w-full"}),Wt(b,1,`border-x-neutral-7 @xs:border-x-neutral-5 bg-neutral-2 border-neutral-7 @xs:h-10 @xs:w-8 @xs:border-b @xs:border-l-0 flex h-8 w-full min-w-10 items-center justify-center border-x border-y border-b-0 px-3 ${o.unitSystem==="metric"?"text-lg":"text-md"} text-neutral-11`),pt(x,o.unitSymbol)}),w(t,d),ce()}var xW=H('<div><div class="@xs:flex-row flex w-full grid-cols-3 grid-rows-2 flex-col justify-between"><div class="flex w-full"><span class="bg-neutral-2 border-neutral-7 border-r-neutral-5 @xs:rounded-bl-md @xs:border-b flex h-10 w-8 items-center justify-center rounded-l-md rounded-bl-none border border-b-0 border-r-0 px-3 text-sm">X</span> <span class="@xs:border-b @xs:rounded-tr-none border-neutral-7 bg-neutral-1 flex w-full items-center justify-center rounded-l-none rounded-r-none rounded-tr-md border border-b-0"> </span></div> <div class="flex w-full"><span class="bg-neutral-2 border-neutral-7 @xs:border-x-neutral-5 @xs:border-b @xs:border-l-0 flex h-10 w-8 items-center justify-center rounded-none border border-b-0 border-r-0 px-3 text-sm">Y</span> <span class="@xs:border-b border-neutral-7 bg-neutral-1 flex w-full items-center justify-center rounded-l-none rounded-r-none border border-b-0"> </span></div> <span> </span> <!></div></div>');function IW(t,e){le(e,!0);let r=T(e,"decimalPlaces",3,2),n=Ce(e,["$$slots","$$events","$$legacy","x","y","initialUnitSystem","decimalPlaces"]);const i=T0("distance",[e.x,e.y],e.initialUnitSystem,r());qe(()=>{i.setDisplayValues([e.x,e.y])});var a=xW();let s;var o=re(a),l=re(o),c=Y(re(l),2),d=re(c,!0);ne(c),ne(l);var u=Y(l,2),g=Y(re(u),2),f=re(g,!0);ne(g),ne(u);var h=Y(u,2),m=re(h,!0);ne(h);var v=Y(h,2);M(v,()=>Qr,(b,x)=>{x(b,{get onclick(){return i.swapUnits},type:"button",class:"border-x-neutral-7 @xs:border-x-neutral-5 bg-neutral-2 hover:bg-neutral-3 @xs:h-10 @xs:w-8 @xs:rounded-none @xs:rounded-r-md flex h-8 w-full items-center justify-center rounded-b-md border px-2",children:(y,S)=>{Je(y,{icon:"material-symbols:swap-horiz-rounded",width:"1rem"})},$$slots:{default:!0}})}),ne(o),ne(a),Ee(()=>{s=Fe(a,s,{...n,class:"@container h-full w-full"}),pt(d,e.x),pt(f,e.y),Wt(h,1,`border-x-neutral-7 @xs:border-x-neutral-5 bg-neutral-2 border-neutral-7 @xs:h-10 @xs:w-8 @xs:border-b @xs:border-l-0 flex h-8 w-full min-w-10 items-center justify-center border-x border-y border-b-0 px-3 ${i.unitSystem==="metric"?"text-lg":"text-md"} text-neutral-11`),pt(m,i.unitSymbol)}),w(t,a),ce()}var CW=H('<div class="flex w-full items-center justify-between gap-0"><!> <span> </span> <!></div>');function ya(t,e){le(e,!0);let r=T(e,"value",15),n=T(e,"decimalPlaces",3,2),i=T(e,"step",3,.01),a=Ce(e,["$$slots","$$events","$$legacy","value","quantityType","initialUnitSystem","oninput","decimalPlaces","step","min","max"]);const s=T0(e.quantityType,[r()],e.initialUnitSystem,n());qe(()=>{s.setDisplayValues([r()])});let o=R(()=>e.min?s.metricToCurrentUnit(e.min):""),l=R(()=>e.max?s.metricToCurrentUnit(e.max):"");var c=CW(),d=re(c);zi(d,Be({get value(){return s.displayValues[0]},type:"number",get step(){return i()},get min(){return p(o)},get max(){return p(l)}},()=>a,{oninput:h=>{s.handleInput(h,0),r(s.metricValues[0]),e.oninput&&e.oninput(r())},class:"rounded-r-none border-r-0 "}));var u=Y(d,2),g=re(u,!0);ne(u);var f=Y(u,2);M(f,()=>Qr,(h,m)=>{m(h,{get onclick(){return s.swapUnits},type:"button",class:"border-l-neutral-5 border-neutral-7 bg-neutral-2 hover:bg-neutral-3 h-10 rounded-r-md border px-2",children:(v,b)=>{Je(v,{icon:"material-symbols:swap-horiz-rounded",width:"1rem"})},$$slots:{default:!0}})}),ne(c),Ee(()=>{Wt(u,1,`border-x-neutral-5 bg-neutral-2 border-neutral-7 flex h-10 w-auto min-w-10 items-center justify-center border-y border-l px-3 ${s.unitSystem==="metric"&&e.quantityType==="distance"?"text-lg":"text-md"} text-neutral-11`),pt(g,s.unitSymbol)}),w(t,c),ce()}function tS(t,e){le(e,!0);var r=F(),n=P(r);{var i=s=>{j1(s,{get x(){return e.value.x},get y(){return e.value.y},onValueChange:o=>{e.onChange(o)}})},a=s=>{IW(s,{get x(){return e.value.x},get y(){return e.value.y}})};fe(n,s=>{e.editing?s(i):s(a,!1)})}w(t,r),ce()}function PW(t,e){const r=Wa(e,["children","$$slots","$$events","$$legacy"]);Ga(t,Be({name:"calendar"},()=>r,{iconNode:[["path",{d:"M8 2v4"}],["path",{d:"M16 2v4"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2"}],["path",{d:"M3 10h18"}]],children:(i,a)=>{var s=F(),o=P(s);Ha(o,e,"default",{}),w(i,s)},$$slots:{default:!0}}))}function EW(t,e){le(e,!0);let r=T(e,"ref",15,null),n=Ce(e,["$$slots","$$events","$$legacy","ref","class"]);var i=F(),a=P(i);const s=R(()=>Ue("[&:has([data-selected])]:bg-accent-5 [&:has([data-selected][data-outside-month])]:bg-accent-5/50 relative size-9 p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([data-selected])]:rounded-md",e.class));M(a,()=>_L,(o,l)=>{l(o,Be({get class(){return p(s)}},()=>n,{get ref(){return r()},set ref(c){r(c)}}))}),w(t,i),ce()}function AW(t,e){le(e,!0);let r=T(e,"ref",15,null),n=Ce(e,["$$slots","$$events","$$legacy","ref","class"]);var i=F(),a=P(i);const s=R(()=>Ue(ng({variant:"ghost"}),"size-9 p-0 font-normal","[&[data-today]:not([data-selected])]:bg-accent-5 [&[data-today]:not([data-selected])]:text-accent-12","data-[selected]:bg-primary-5 data-[selected]:text-primary-12 data-[selected]:hover:bg-primary-5 data-[selected]:hover:text-primary-12 data-[selected]:focus:bg-primary-5 data-[selected]:focus:text-primary-12 data-[selected]:opacity-100","data-[disabled]:text-neutral-11 data-[disabled]:opacity-50","data-[unavailable]:text-destructive-12 data-[unavailable]:line-through","data-[outside-month]:text-neutral-11 [&[data-outside-month][data-selected]]:bg-accent-5/50 [&[data-outside-month][data-selected]]:text-neutral-11 data-[outside-month]:pointer-events-none data-[outside-month]:opacity-50 [&[data-outside-month][data-selected]]:opacity-30",e.class));M(a,()=>gL,(o,l)=>{l(o,Be({get class(){return p(s)}},()=>n,{get ref(){return r()},set ref(c){r(c)}}))}),w(t,i),ce()}function TW(t,e){le(e,!0);let r=T(e,"ref",15,null),n=Ce(e,["$$slots","$$events","$$legacy","ref","class"]);var i=F(),a=P(i);const s=R(()=>Ue(e.class));M(a,()=>yL,(o,l)=>{l(o,Be({get class(){return p(s)}},()=>n,{get ref(){return r()},set ref(c){r(c)}}))}),w(t,i),ce()}function OW(t,e){le(e,!0);let r=T(e,"ref",15,null),n=Ce(e,["$$slots","$$events","$$legacy","ref","class"]);var i=F(),a=P(i);const s=R(()=>Ue(e.class));M(a,()=>SL,(o,l)=>{l(o,Be({get class(){return p(s)}},()=>n,{get ref(){return r()},set ref(c){r(c)}}))}),w(t,i),ce()}function U2(t,e){le(e,!0);let r=T(e,"ref",15,null),n=Ce(e,["$$slots","$$events","$$legacy","ref","class"]);var i=F(),a=P(i);const s=R(()=>Ue("flex",e.class));M(a,()=>PL,(o,l)=>{l(o,Be({get class(){return p(s)}},()=>n,{get ref(){return r()},set ref(c){r(c)}}))}),w(t,i),ce()}function kW(t,e){le(e,!0);let r=T(e,"ref",15,null),n=Ce(e,["$$slots","$$events","$$legacy","ref","class"]);var i=F(),a=P(i);const s=R(()=>Ue("w-full border-collapse space-y-1",e.class));M(a,()=>mL,(o,l)=>{l(o,Be({get class(){return p(s)}},()=>n,{get ref(){return r()},set ref(c){r(c)}}))}),w(t,i),ce()}function RW(t,e){le(e,!0);let r=T(e,"ref",15,null),n=Ce(e,["$$slots","$$events","$$legacy","ref","class"]);var i=F(),a=P(i);const s=R(()=>Ue("text-neutral-11 w-9 rounded-md text-[0.8rem] font-normal",e.class));M(a,()=>IL,(o,l)=>{l(o,Be({get class(){return p(s)}},()=>n,{get ref(){return r()},set ref(c){r(c)}}))}),w(t,i),ce()}function MW(t,e){le(e,!0);let r=T(e,"ref",15,null),n=Ce(e,["$$slots","$$events","$$legacy","ref","class"]);var i=F(),a=P(i);const s=R(()=>Ue("relative flex w-full items-center justify-between pt-1",e.class));M(a,()=>AL,(o,l)=>{l(o,Be({get class(){return p(s)}},()=>n,{get ref(){return r()},set ref(c){r(c)}}))}),w(t,i),ce()}function DW(t,e){le(e,!0);let r=T(e,"ref",15,null),n=Ce(e,["$$slots","$$events","$$legacy","ref","class"]);var i=F(),a=P(i);const s=R(()=>Ue("text-sm font-medium",e.class));M(a,()=>OL,(o,l)=>{l(o,Be({get class(){return p(s)}},()=>n,{get ref(){return r()},set ref(c){r(c)}}))}),w(t,i),ce()}var NW=H("<div><!></div>");function FW(t,e){le(e,!0);let r=T(e,"ref",15,null),n=Ce(e,["$$slots","$$events","$$legacy","ref","class","children"]);var i=NW();let a;var s=re(i);ge(s,()=>e.children??Ve),ne(i),vo(i,o=>r(o),()=>r()),Ee(o=>a=Fe(i,a,{class:o,...n}),[()=>Ue("mt-4 flex flex-col space-y-4 sm:flex-row sm:space-x-4 sm:space-y-0",e.class)]),w(t,i),ce()}const $W=t=>{Je(t,{get icon(){return ot.chevronRight},width:"1rem"})};function LW(t,e){le(e,!0);let r=T(e,"ref",15,null),n=Ce(e,["$$slots","$$events","$$legacy","ref","class","children"]);var i=F(),a=P(i);const s=R(()=>Ue(ng({variant:"outline"}),"size-7 bg-transparent p-0 opacity-50 hover:opacity-100",e.class)),o=R(()=>e.children||$W);M(a,()=>RL,(l,c)=>{c(l,Be({get class(){return p(s)},get children(){return p(o)}},()=>n,{get ref(){return r()},set ref(d){r(d)}}))}),w(t,i),ce()}const BW=t=>{Je(t,{get icon(){return ot.chevronLeft},width:"1rem"})};function VW(t,e){le(e,!0);let r=T(e,"ref",15,null),n=Ce(e,["$$slots","$$events","$$legacy","ref","class","children"]);var i=F(),a=P(i);const s=R(()=>Ue(ng({variant:"outline"}),"size-7 bg-transparent p-0 opacity-50 hover:opacity-100",e.class)),o=R(()=>e.children||BW);M(a,()=>DL,(l,c)=>{c(l,Be({get class(){return p(s)},get children(){return p(o)}},()=>n,{get ref(){return r()},set ref(d){r(d)}}))}),w(t,i),ce()}var jW=H("<!> <!> <!>",1),zW=H("<!> <!>",1),UW=H("<!> <!>",1);function GW(t,e){le(e,!0);let r=T(e,"ref",15,null),n=T(e,"value",15),i=T(e,"placeholder",15),a=T(e,"weekdayFormat",3,"short"),s=Ce(e,["$$slots","$$events","$$legacy","ref","value","placeholder","class","weekdayFormat"]);var o=F(),l=P(o);const c=R(()=>Ue("p-3",e.class));M(l,()=>fL,(d,u)=>{u(d,Be({get weekdayFormat(){return a()},get class(){return p(c)}},()=>s,{get value(){return n()},set value(f){n(f)},get ref(){return r()},set ref(f){r(f)},get placeholder(){return i()},set placeholder(f){i(f)},children:(f,h)=>{let m=()=>h==null?void 0:h().months,v=()=>h==null?void 0:h().weekdays;var b=UW(),x=P(b);M(x,()=>MW,(S,I)=>{I(S,{children:(C,D)=>{var E=jW(),O=P(E);M(O,()=>VW,(V,G)=>{G(V,{})});var A=Y(O,2);M(A,()=>DW,(V,G)=>{G(V,{})});var k=Y(A,2);M(k,()=>LW,(V,G)=>{G(V,{})}),w(C,E)},$$slots:{default:!0}})});var y=Y(x,2);M(y,()=>FW,(S,I)=>{I(S,{children:(C,D)=>{var E=F(),O=P(E);Kt(O,17,m,rr,(A,k)=>{var V=F(),G=P(V);M(G,()=>kW,(K,j)=>{j(K,{children:(Q,te)=>{var q=zW(),Z=P(q);M(Z,()=>OW,(de,J)=>{J(de,{children:(ie,xe)=>{var ke=F(),pe=P(ke);M(pe,()=>U2,(B,X)=>{X(B,{class:"flex",children:(oe,me)=>{var he=F(),we=P(he);Kt(we,17,v,rr,(be,ye)=>{var ue=F(),Le=P(ue);M(Le,()=>RW,(Se,Ie)=>{Ie(Se,{children:(Ne,Pe)=>{He();var Te=Ke();Ee(Oe=>pt(Te,Oe),[()=>p(ye).slice(0,2)]),w(Ne,Te)},$$slots:{default:!0}})}),w(be,ue)}),w(oe,he)},$$slots:{default:!0}})}),w(ie,ke)},$$slots:{default:!0}})});var ee=Y(Z,2);M(ee,()=>TW,(de,J)=>{J(de,{children:(ie,xe)=>{var ke=F(),pe=P(ke);Kt(pe,17,()=>p(k).weeks,rr,(B,X)=>{var oe=F(),me=P(oe);M(me,()=>U2,(he,we)=>{we(he,{class:"mt-2 w-full",children:(be,ye)=>{var ue=F(),Le=P(ue);Kt(Le,17,()=>p(X),rr,(Se,Ie)=>{var Ne=F(),Pe=P(Ne);M(Pe,()=>EW,(Te,Oe)=>{Oe(Te,{get date(){return p(Ie)},get month(){return p(k).value},children:(ze,Re)=>{var tt=F(),Dt=P(tt);M(Dt,()=>AW,(or,$)=>{$(or,{})}),w(ze,tt)},$$slots:{default:!0}})}),w(Se,Ne)}),w(be,ue)},$$slots:{default:!0}})}),w(B,oe)}),w(ie,ke)},$$slots:{default:!0}})}),w(Q,q)},$$slots:{default:!0}})}),w(A,V)}),w(C,E)},$$slots:{default:!0}})}),w(f,b)},$$slots:{default:!0}}))}),w(t,o),ce()}var HW=H("<!> ",1),WW=H("<!> <!>",1);function ul(t,e){le(e,!0);let r=T(e,"value",15),n=T(e,"compact",3,!1),i=T(e,"disabled",3,!1);const a=new li("en-US",{day:"2-digit",month:"short",year:"2-digit"});var s=F(),o=P(s);M(o,()=>go,(l,c)=>{c(l,{children:(d,u)=>{var g=WW(),f=P(g);const h=R(()=>Ue(ng({variant:"outline",class:"w-full justify-start text-left font-normal"}),!r()&&"text-muted-foreground",n()&&"px-2 text-xs"));M(f,()=>po,(v,b)=>{b(v,{get class(){return p(h)},children:(x,y)=>{var S=HW(),I=P(S);{var C=E=>{PW(E,{})};fe(I,E=>{n()||E(C)})}var D=Y(I);Ee(E=>pt(D,` ${E??""}`),[()=>r()?a.format(r().toDate(hn())):"Pick a date"]),w(x,S)},$$slots:{default:!0}})});var m=Y(f,2);M(m,()=>ho,(v,b)=>{b(v,{class:"w-auto p-0",children:(x,y)=>{GW(x,{type:"single",get onValueChange(){return e.onValueChange},get minValue(){return e.minValue},get maxValue(){return e.maxValue},get disabled(){return i()},get value(){return r()},set value(S){r(S)}})},$$slots:{default:!0}})}),w(d,g)},$$slots:{default:!0}})}),w(t,s),ce()}function KW(t,e){le(e,!0);var r=F(),n=P(r);{var i=s=>{ul(s,{get value(){return e.value},onValueChange:o=>{o&&e.onChange(o)}})},a=s=>{ul(s,{get value(){return e.value},disabled:!0})};fe(n,s=>{e.editing?s(i):s(a,!1)})}w(t,r),ce()}function rS(t,e){le(e,!0);var r=F(),n=P(r);{var i=s=>{er(s,{class:"bg-destructive-6 text-destructive-12 w-full select-none",onclick:()=>{e.onChange(void 0)},children:(o,l)=>{Je(o,{get icon(){return ot.deleteIcon},width:"1.5rem",class:"text-neutral-11"})},$$slots:{default:!0}})},a=s=>{er(s,{class:"bg-destructive-6 text-destructive-12 w-full select-none",disabled:!0,children:(o,l)=>{Je(o,{get icon(){return ot.deleteIcon},width:"1.5rem",class:"text-neutral-11"})},$$slots:{default:!0}})};fe(n,s=>{e.editing?s(i):s(a,!1)})}w(t,r),ce()}var qW=H("<span> </span>");function Do(t,e){var r=qW(),n=re(r,!0);ne(r),Ee(()=>{Wt(r,1,`${e.value?"":"italic"} border-neutral-7 bg-neutral-1 ring-offset-neutral-1 focus-visible:ring-neutral-7 flex w-full rounded-md border px-3 py-2 text-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2`),pt(n,e.value||"None")}),w(t,r)}function cs(t,e){le(e,!0);var r=F(),n=P(r);{var i=s=>{ya(s,{oninput:o=>{e.onChange(o)},get value(){return e.value},quantityType:"distance"})},a=s=>{Do(s,{get value(){return e.value}})};fe(n,s=>{e.editing?s(i):s(a,!1)})}w(t,r),ce()}function nS(t,e){const r=Wa(e,["children","$$slots","$$events","$$legacy"]);Ga(t,Be({name:"chevron-down"},()=>r,{iconNode:[["path",{d:"m6 9 6 6 6-6"}]],children:(i,a)=>{var s=F(),o=P(s);Ha(o,e,"default",{}),w(i,s)},$$slots:{default:!0}}))}function YW(t,e){le(e,!0);let r=T(e,"ref",15,null),n=Ce(e,["$$slots","$$events","$$legacy","ref","class"]);var i=F(),a=P(i);const s=R(()=>Ue("flex cursor-default items-center justify-center py-1",e.class));M(a,()=>TB,(o,l)=>{l(o,Be({get class(){return p(s)}},()=>n,{get ref(){return r()},set ref(c){r(c)},children:(c,d)=>{nS(c,{class:"size-4"})},$$slots:{default:!0}}))}),w(t,i),ce()}function XW(t,e){const r=Wa(e,["children","$$slots","$$events","$$legacy"]);Ga(t,Be({name:"chevron-up"},()=>r,{iconNode:[["path",{d:"m18 15-6-6-6 6"}]],children:(i,a)=>{var s=F(),o=P(s);Ha(o,e,"default",{}),w(i,s)},$$slots:{default:!0}}))}function QW(t,e){le(e,!0);let r=T(e,"ref",15,null),n=Ce(e,["$$slots","$$events","$$legacy","ref","class"]);var i=F(),a=P(i);const s=R(()=>Ue("flex cursor-default items-center justify-center py-1",e.class));M(a,()=>RB,(o,l)=>{l(o,Be({get class(){return p(s)}},()=>n,{get ref(){return r()},set ref(c){r(c)},children:(c,d)=>{XW(c,{class:"size-4"})},$$slots:{default:!0}}))}),w(t,i),ce()}var ZW=H("<!> <!> <!>",1);function O0(t,e){le(e,!0);let r=T(e,"ref",15,null),n=T(e,"sideOffset",3,4),i=Ce(e,["$$slots","$$events","$$legacy","ref","class","sideOffset","children"]);var a=F(),s=P(a);M(s,()=>W_,(o,l)=>{l(o,{children:(c,d)=>{var u=F(),g=P(u);const f=R(()=>Ue("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 bg-neutral-2 text-neutral-11 relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border shadow-md data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e.class));M(g,()=>bB,(h,m)=>{m(h,Be({get sideOffset(){return n()},get class(){return p(f)}},()=>i,{get ref(){return r()},set ref(v){r(v)},children:(v,b)=>{var x=ZW(),y=P(x);QW(y,{});var S=Y(y,2);const I=R(()=>Ue("h-[var(--bits-select-anchor-height)] w-full min-w-[var(--bits-select-anchor-width)] p-1"));M(S,()=>PB,(D,E)=>{E(D,{get class(){return p(I)},children:(O,A)=>{var k=F(),V=P(k);ge(V,()=>e.children??Ve),w(O,k)},$$slots:{default:!0}})});var C=Y(S,2);YW(C,{}),w(v,x)},$$slots:{default:!0}}))}),w(c,u)},$$slots:{default:!0}})}),w(t,a),ce()}var JW=H('<span class="absolute left-2 flex size-3.5 items-center justify-center"><!></span> <!>',1);function k0(t,e){le(e,!0);let r=T(e,"ref",15,null),n=Ce(e,["$$slots","$$events","$$legacy","ref","class","value","label","children"]);var i=F(),a=P(i);const s=R(()=>Ue("data-[highlighted]:bg-neutral-4 data-[highlighted]:text-neutral-10 relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e.class));M(a,()=>SB,(o,l)=>{l(o,Be({get value(){return e.value},get class(){return p(s)}},()=>n,{get ref(){return r()},set ref(d){r(d)},children:(d,u)=>{let g=()=>u==null?void 0:u().selected,f=()=>u==null?void 0:u().highlighted;var h=JW(),m=P(h),v=re(m);{var b=I=>{J4(I,{class:"size-4"})};fe(v,I=>{g()&&I(b)})}ne(m);var x=Y(m,2);{var y=I=>{var C=F(),D=P(C);ge(D,()=>e.children,()=>({selected:g(),highlighted:f()})),w(I,C)},S=I=>{var C=Ke();Ee(()=>pt(C,e.label||e.value)),w(I,C)};fe(x,I=>{e.children?I(y):I(S,!1)})}w(d,h)},$$slots:{default:!0}}))}),w(t,i),ce()}function G2(t,e){le(e,!0);let r=T(e,"ref",15,null),n=T(e,"orientation",3,"horizontal"),i=Ce(e,["$$slots","$$events","$$legacy","ref","class","orientation"]);var a=F(),s=P(a);const o=R(()=>Ue("bg-neutral-7 shrink-0",n()==="horizontal"?"h-[1px] w-full":"min-h-full w-[1px]",e.class));M(s,()=>mB,(l,c)=>{c(l,Be({get class(){return p(o)},get orientation(){return n()}},()=>i,{get ref(){return r()},set ref(d){r(d)}}))}),w(t,a),ce()}var eK=H("<!> <!>",1);function R0(t,e){le(e,!0);let r=T(e,"ref",15,null),n=Ce(e,["$$slots","$$events","$$legacy","ref","class","children"]);var i=F(),a=P(i);const s=R(()=>Ue("border-neutral-7 bg-neutral-1 ring-offset-neutral-1 data-[placeholder]:text-neutral-11 focus:ring-ring flex h-10 w-full items-center justify-between rounded-md border px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e.class));M(a,()=>BV,(o,l)=>{l(o,Be({get class(){return p(s)}},()=>n,{get ref(){return r()},set ref(c){r(c)},children:(c,d)=>{var u=eK(),g=P(u);ge(g,()=>e.children??Ve);var f=Y(g,2);nS(f,{class:"size-4 opacity-50"}),w(c,u)},$$slots:{default:!0}}))}),w(t,i),ce()}const M0=$V,iS=IB;var tK=H('<div class="item-center flex"><span> </span></div>'),rK=H('<div class="item-center flex"><span> </span></div>'),nK=H("<!> <!>",1);function iK(t,e){le(e,!0);const r=R(()=>e.value.options.find(o=>o.id===e.value.id)??{label:"Make a selection"});var n=F(),i=P(n);{var a=o=>{var l=F(),c=P(l);M(c,()=>M0,(d,u)=>{u(d,{type:"single",get value(){return e.value.id},onValueChange:g=>{e.onChange({id:g,options:e.value.options})},children:(g,f)=>{var h=nK(),m=P(h);M(m,()=>R0,(b,x)=>{x(b,{class:"w-full",children:(y,S)=>{var I=tK(),C=re(I),D=re(C,!0);ne(C),ne(I),Ee(()=>pt(D,p(r).label)),w(y,I)},$$slots:{default:!0}})});var v=Y(m,2);M(v,()=>O0,(b,x)=>{x(b,{children:(y,S)=>{var I=F(),C=P(I);M(C,()=>iS,(D,E)=>{E(D,{children:(O,A)=>{var k=F(),V=P(k);Kt(V,17,()=>e.value.options,rr,(G,K)=>{var j=F(),Q=P(j);M(Q,()=>k0,(te,q)=>{q(te,{get value(){return p(K).id},get label(){return p(K).label},children:(Z,ee)=>{var de=rK(),J=re(de),ie=re(J,!0);ne(J),ne(de),Ee(()=>pt(ie,p(K).label)),w(Z,de)},$$slots:{default:!0}})}),w(G,j)}),w(O,k)},$$slots:{default:!0}})}),w(y,I)},$$slots:{default:!0}})}),w(g,h)},$$slots:{default:!0}})}),w(o,l)},s=o=>{Do(o,{get value(){return p(r).label}})};fe(i,o=>{e.editing?o(a):o(s,!1)})}w(t,n),ce()}var aK=H('<div class="flex w-full items-center justify-between px-2"><span> </span> <!></div>'),sK=H('<div class="flex w-full items-center justify-between px-2"><span> </span> <!></div>'),oK=H("<!> <!>",1);function aS(t,e){le(e,!0);let r=T(e,"label",15);const n=[{value:"RECTANGLE",label:"Rectangle",icon:ot.rectangleIcon},{value:"POLYGON",label:"Polygon",icon:ot.polygonIcon},{value:"ELLIPSE",label:"Ellipse",icon:ot.ellipseIcon},{value:"LINES",label:"Lines",icon:ot.linesIcon}],i=R(()=>n.find(o=>o.value===e.value)??{label:"Select a type",icon:null});qe(()=>{r()&&r(p(i).label)});var a=F(),s=P(a);M(s,()=>M0,(o,l)=>{l(o,{type:"single",get value(){return e.value},items:n,onValueChange:c=>{e.onValueChange&&e.onValueChange(c)},children:(c,d)=>{var u=oK(),g=P(u);M(g,()=>R0,(h,m)=>{m(h,{class:"w-full",children:(v,b)=>{var x=aK(),y=re(x),S=re(y,!0);ne(y);var I=Y(y,2);{var C=D=>{Je(D,{get icon(){return p(i).icon},width:"1.5rem",class:"text-neutral-11 ml-4"})};fe(I,D=>{p(i).icon&&D(C)})}ne(x),Ee(()=>pt(S,p(i).label)),w(v,x)},$$slots:{default:!0}})});var f=Y(g,2);M(f,()=>O0,(h,m)=>{m(h,{children:(v,b)=>{var x=F(),y=P(x);M(y,()=>iS,(S,I)=>{I(S,{children:(C,D)=>{var E=F(),O=P(E);Kt(O,17,()=>n,rr,(A,k)=>{var V=F(),G=P(V);M(G,()=>k0,(K,j)=>{j(K,{get value(){return p(k).value},get label(){return p(k).label},children:(Q,te)=>{var q=sK(),Z=re(q),ee=re(Z,!0);ne(Z);var de=Y(Z,2);{var J=ie=>{Je(ie,{get icon(){return p(k).icon},width:"1rem",class:"text-neutral-11 ml-4"})};fe(de,ie=>{p(k).icon&&ie(J)})}ne(q),Ee(()=>pt(ee,p(k).label)),w(Q,q)},$$slots:{default:!0}})}),w(A,V)}),w(C,E)},$$slots:{default:!0}})}),w(v,x)},$$slots:{default:!0}})}),w(c,u)},$$slots:{default:!0}})}),w(t,a),ce()}function lK(t,e){let r=Me("");var n=F(),i=P(n);{var a=o=>{aS(o,{get value(){return e.value},get onValueChange(){return e.onChange},get label(){return p(r)},set label(l){U(r,l,!0)}})},s=o=>{Do(o,{get value(){return p(r)}})};fe(i,o=>{e.editing?o(a):o(s,!1)})}w(t,n)}function sS(t){return e=>{const r=e.target;r!=null&&r.value&&t(r.value)}}function cK(t){return e=>{const r=e.target;r!=null&&r.value&&t(Number(r.value))}}function Rm(t,e){le(e,!0);var r=F(),n=P(r);{var i=s=>{const o=R(()=>cK(e.onChange));zi(s,{get value(){return e.value},type:"number",class:"select-none",get oninput(){return p(o)}})},a=s=>{Do(s,{get value(){return e.value}})};fe(n,s=>{e.editing?s(i):s(a,!1)})}w(t,r),ce()}function dK(t,e){le(e,!0);var r=F(),n=P(r);{var i=s=>{const o=R(()=>sS(e.onChange));zi(s,{get value(){return e.value},class:"select-none",get oninput(){return p(o)}})},a=s=>{Do(s,{get value(){return e.value}})};fe(n,s=>{e.editing?s(i):s(a,!1)})}w(t,r),ce()}var uK=H("<textarea></textarea>");function oS(t,e){le(e,!0);let r=T(e,"ref",15,null),n=T(e,"value",15),i=Ce(e,["$$slots","$$events","$$legacy","ref","value","class"]);var a=uK();S9(a);let s;vo(a,o=>r(o),()=>r()),Ee(o=>s=Fe(a,s,{class:o,...i}),[()=>Ue("border-neutral-7 bg-neutral-1 ring-offset-neutral-1 placeholder:text-neutral-11 focus-visible:ring-primary-6 flex min-h-[80px] w-full rounded-md border px-3 py-2 text-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e.class)]),j_(a,n),w(t,a),ce()}function fK(t,e){le(e,!0);var r=F(),n=P(r);{var i=s=>{const o=R(()=>sS(e.onChange));oS(s,{get value(){return e.value},class:"select-none",get oninput(){return p(o)}})},a=s=>{Do(s,{get value(){return e.value}})};fe(n,s=>{e.editing?s(i):s(a,!1)})}w(t,r),ce()}function hK(t,e,r){let n=new Set;function i(s){const o=s.difference(n),l=n.difference(s);for(const c of o){const{entityType:d,entityId:u}=V1(c);e[d].add(u)}for(const c of l){const{entityType:d,entityId:u}=V1(c);e[d].remove(u)}n=new Set([...s])}return{tree:new J6({items:t,expandOnClick:!0,multiple:!0,onSelectedChange:i})}}function gK(t,e,r,n){const i=t+`${e.index}/`;if(!e.geometry)return{id:i,label:"Failed to resolve geometry."};const a=i+"type",s=i+"scaleFactor",o=i+"rotation";Ze.geometryDateSchema.description,X5(e.geometry.date,hn());const l={id:a,label:"Type",description:Ze.geometryTypeSchema.description,valueComponent:lK,value:e.geometry.type,onChange:h=>{!Nr(a,h,Ze.geometryTypeSchema,n.fieldErrors)||!e.geometry||n.updateHandler(e.geometry.id,{type:h})}},c={id:s,label:"Scale Factor",description:Ze.geometryScaleFactorSchema.description,valueComponent:Rm,value:e.geometry.scaleFactor,onChange:h=>{!Nr(s,h,Ze.geometryScaleFactorSchema,n.fieldErrors)||!e.geometry||n.updateHandler(e.geometry.id,{scaleFactor:h})}},d={id:o,label:"Rotation",description:Ze.geometryRotationSchema.description,valueComponent:Rm,value:e.geometry.rotation,onChange:h=>{!Nr(o,h,Ze.geometryRotationSchema,n.fieldErrors)||!e.geometry||n.updateHandler(e.geometry.id,{rotation:h})}};let u=[];switch(e.geometry.type){case"RECTANGLE":{const h=i+"rectangleLength",m=i+"rectangleWidth";u=[{id:h,label:"Length",description:Ze.geometryRectangleLengthSchema.description,valueComponent:cs,value:e.geometry.rectangleLength,onChange:v=>{!Nr(h,v,Ze.geometryRectangleLengthSchema,n.fieldErrors)||!e.geometry||n.updateHandler(e.geometry.id,{rectangleLength:v})}},{id:m,label:"Width",description:Ze.geometryRectangleWidthSchema.description,valueComponent:cs,value:e.geometry.rectangleWidth,onChange:v=>{!Nr(m,v,Ze.geometryRectangleWidthSchema,n.fieldErrors)||!e.geometry||n.updateHandler(e.geometry.id,{rectangleWidth:v})}}];break}case"POLYGON":{const h=i+"polygonNumSides",m=i+"polygonRadius";u=[{id:h,label:"Side Count",description:Ze.geometryPolygonNumSidesSchema.description,valueComponent:Rm,value:e.geometry.polygonNumSides,onChange:v=>{!Nr(h,v,Ze.geometryPolygonNumSidesSchema,n.fieldErrors)||!e.geometry||n.updateHandler(e.geometry.id,{polygonNumSides:v})}},{id:m,label:"Radius",description:Ze.geometryPolygonRadiusSchema.description,valueComponent:cs,value:e.geometry.polygonRadius,onChange:v=>{!Nr(m,v,Ze.geometryPolygonRadiusSchema,n.fieldErrors)||!e.geometry||n.updateHandler(e.geometry.id,{polygonRadius:v})}}];break}case"ELLIPSE":{const h=i+"ellipseLength",m=i+"ellipseWidth";u=[{id:h,label:"Length",description:Ze.geometryEllipseLengthSchema.description,valueComponent:cs,value:e.geometry.ellipseLength,onChange:v=>{!Nr(h,v,Ze.geometryEllipseLengthSchema,n.fieldErrors)||!e.geometry||n.updateHandler(e.geometry.id,{ellipseLength:v})}},{id:m,label:"Width",description:Ze.geometryEllipseWidthSchema.description,valueComponent:cs,value:e.geometry.ellipseWidth,onChange:v=>{!Nr(m,v,Ze.geometryEllipseWidthSchema,n.fieldErrors)||!e.geometry||n.updateHandler(e.geometry.id,{ellipseWidth:v})}}];break}case"LINES":{const h=i+"linesCoordinates",m=i+"linesAddCoordinate",v=e.geometry.linesCoordinates.map((x,y)=>{const S=i+`linesCoordinate${y}`,I=S+"/position",C=S+"/delete",D={id:I,label:"Position",description:Ze.coordinateSchema.description,valueComponent:tS,value:x,onChange:O=>{if(!Nr(I,O,Ze.coordinateSchema,n.fieldErrors)||!e.geometry)return;const A=e.geometry.linesCoordinates;A[y]=O,n.updateHandler(e.geometry.id,{linesCoordinates:A})}},E={id:C,label:"Delete",description:"Deletes the coordinate.",valueComponent:rS,value:void 0,onChange:()=>{if(!e.geometry)return;const O=e.geometry.linesCoordinates.filter(A=>A.id!=x.id);n.updateHandler(e.geometry.id,{linesCoordinates:O})}};return{id:S,label:`Coordinate ${y}`,children:[D,E]}}),b={id:m,label:"Add Coordinate",valueComponent:Z4,value:void 0,onChange:()=>{if(!e.geometry)return;const x=[...e.geometry.linesCoordinates],y={x:x[x.length-1].x+.1,y:x[x.length-1].y+.1};x.push(y),n.updateHandler(e.geometry.id,{linesCoordinates:x})}};Ze.geometryLinesClosedSchema.description,e.geometry.linesClosed,u=[{id:h,label:"Coordinates",children:[...v,b]}];break}}let g=[];g=[l,c,d,...u];const f=r.includeIndex?`Geometry ${e.index+1}`:"Geometry";return{id:i,label:f,children:g}}function pK(t,e,r,n){const i=t+`${e.index}/`;if(!e.location)return{id:i,label:"Failed to resolve location."};const a=i+"date",s=i+"coordinate",o=i+"workspace",l=i+"delete",c={id:a,label:"Date",description:Ze.locationDateSchema.description,valueComponent:KW,value:X5(e.location.date,hn()),onChange:h=>{Nr(a,h,Ze.locationDateSchema,n.fieldErrors)&&n.updateHandler(e.location.id,{date:h.toDate(hn())})}},d={id:s,label:"Position",description:Ze.coordinateSchema.description,valueComponent:tS,value:{x:e.location.x,y:e.location.y},onChange:h=>{Nr(s,h,Ze.coordinateSchema,n.fieldErrors)&&n.updateHandler(e.location.id,{coordinate:h})}},u={id:o,label:"Workspace",description:"The workspace the location is located in.",valueComponent:iK,value:{id:e.location.workspaceId,options:e.workspaces.map(h=>({id:h.id,label:h.name}))},onChange:h=>{n.updateHandler(e.location.id,{workspaceId:h.id})}},g={id:l,label:"Delete",description:"Deletes the geometry from the history.",valueComponent:rS,value:void 0,onChange:()=>{n.updateHandler(e.location.id,{delete:!0})}},f=[c,d,u];return r.includeDelete&&f.push(g),{id:i,label:`Location ${e.index+1}`,children:f}}function mK(t,e,r){const n=fi(t,"locations");if(!e.locationHistory)return{id:n,label:"Failed to resolve locations."};const i=fi(t,"locationAdd"),a=e.locationHistory.locations.map((o,l)=>{var u;const c=(u=e.locationHistory)==null?void 0:u.locations.length,d=!!(c&&c>1);return pK(n,{location:o,workspaces:e.workspaces,index:l},{includeDelete:d},{updateHandler:r.locationUpdateHandler,fieldErrors:r.fieldErrors})}),s={id:i,label:"Add",description:"Adds a new location to the history.",valueComponent:Z4,value:void 0,onChange:()=>{e.locationHistory&&r.onLocationHistoryExtend(e.locationHistory.id)}};return{id:n,label:"Locations",children:[...a,s]}}function vK(t,e){const r=sW("plantingArea",t.plantingArea.id),n=fi(r,"name"),i=fi(r,"description"),a=fi(r,"depth"),s=gK(fi(r,"geometry"),{geometry:t.plantingArea.geometry,index:0},{includeIndex:!1},{updateHandler:e.geometryUpdateHandler,fieldErrors:e.fieldErrors}),o=mK(r,{locationHistory:t.plantingArea.locationHistory,workspaces:t.workspaces},{locationUpdateHandler:e.locationUpdateHandler,onLocationHistoryExtend:e.locationHistoryExtendHandler,fieldErrors:e.fieldErrors}),l={id:n,label:"Name",description:Ze.plantingAreaNameSchema.description,valueComponent:dK,value:t.plantingArea.name,onChange:u=>{Nr(n,u,Ze.plantingAreaNameSchema,e.fieldErrors)&&e.plantingAreaUpdateHandler(t.plantingArea.id,{name:u})}},c={id:i,label:"Description",description:Ze.plantingAreaDescriptionSchema.description,valueComponent:fK,value:t.plantingArea.description,onChange:u=>{Nr(i,u,Ze.plantingAreaDescriptionSchema,e.fieldErrors)&&e.plantingAreaUpdateHandler(t.plantingArea.id,{description:u})}},d={id:a,label:"Depth",description:Ze.plantingAreaDepthSchema.description,valueComponent:cs,value:t.plantingArea.depth,onChange:u=>{Nr(a,u,Ze.plantingAreaDepthSchema,e.fieldErrors)&&e.plantingAreaUpdateHandler(t.plantingArea.id,{depth:u})}};return{id:r,label:t.plantingArea.name,children:[l,{id:fi(r,"details"),label:"Details",children:[c,d]},s,o]}}const yK=1e3*60*60*24,bK={1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"};function Mm(t){return t.toDate("UTC")}function Ko(t,e){return Math.round((t.toDate(hn()).getTime()-e.toDate(hn()).getTime())/yK)}function _K(t){return bK[t]}const wK=2,Ff=16,$f="self-end flex items-end h-[14px]",Lf="absolute text-[9px] text-neutral-9 w-[14px] text-center",Bf="bg-neutral-7 h-[12px] w-[2px] rounded-t-lg";function SK({layout:t,panesArray:e,pivotIndices:r}){let n=0,i=100,a=0,s=0;const o=r[0];for(let u=0;u<e.length;u++){const{constraints:g}=e[u],{maxSize:f=100,minSize:h=0}=g;u===o?(n=h,i=f):(a+=h,s+=f)}const l=Math.min(i,100-a),c=Math.max(n,100-s),d=t[o];return{valueMax:l,valueMin:c,valueNow:d}}function Rt(t,e="Assertion failed!"){if(!t)throw console.error(e),new Error(e)}const xK=100,D0=10;function Jr(t,e,r=D0){return Sl(t,e,r)===0}function Sl(t,e,r=D0){const n=H2(t,r),i=H2(e,r);return Math.sign(n-i)}function qo(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function H2(t,e){return Number.parseFloat(t.toFixed(e))}const dp=typeof document<"u";function IK(t){return t instanceof HTMLElement}function lS(t){return t.type==="keydown"}function cS(t){return t.type.startsWith("mouse")}function dS(t){return t.type.startsWith("touch")}function _s({paneConstraints:t,paneIndex:e,initialSize:r}){const n=t[e];Rt(n!=null,"Pane constraints should not be null.");const{collapsedSize:i=0,collapsible:a,maxSize:s=100,minSize:o=0}=n;let l=r;return Sl(l,o)<0&&(l=CK(l,a,i,o)),l=Math.min(s,l),Number.parseFloat(l.toFixed(D0))}function CK(t,e,r,n){if(!e)return n;const i=(r+n)/2;return Sl(t,i)<0?r:n}function Ra(){}function PK({groupId:t,layout:e,paneDataArray:r}){const n=of(t);for(let i=0;i<r.length-1;i++){const{valueMax:a,valueMin:s,valueNow:o}=SK({layout:e,panesArray:r,pivotIndices:[i,i+1]}),l=n[i];if(IK(l)){const c=r[i];l.setAttribute("aria-controls",c.id),l.setAttribute("aria-valuemax",`${Math.round(a)}`),l.setAttribute("aria-valuemin",`${Math.round(s)}`),l.setAttribute("aria-valuenow",o!=null?`${Math.round(o)}`:"")}}return()=>{n.forEach(i=>{i.removeAttribute("aria-controls"),i.removeAttribute("aria-valuemax"),i.removeAttribute("aria-valuemin"),i.removeAttribute("aria-valuenow")})}}function of(t){return dp?Array.from(document.querySelectorAll(`[data-pane-resizer-id][data-pane-group-id="${t}"]`)):[]}function uS(t,e){return dp?of(t).findIndex(i=>i.getAttribute("data-pane-resizer-id")===e)??null:null}function W2(t,e){const r=uS(t,e);return r!=null?[r,r+1]:[-1,-1]}function os(t,e,r){const n=t.map(c=>c.constraints),i=ds(t,e),a=n[i],o=i===t.length-1?[i-1,i]:[i,i+1],l=r[i];return{...a,paneSize:l,pivotIndices:o}}function ds(t,e){return t.findIndex(r=>r.id===e.id)}function Yo(t,e,r){for(let n=0;n<e.length-1;n++){const i=e[n],a=t[n];Rt(a);const{callbacks:s,constraints:o,id:l}=a,{collapsedSize:c=0,collapsible:d}=o,u=r[l];if(!(u==null||i!==u))return;r[l]=i;const{onCollapse:g,onExpand:f,onResize:h}=s;h==null||h(i,u),d&&(g||f)&&(f&&(u==null||u===c)&&i!==c&&f(),g&&(u==null||u!==c)&&i===c&&g())}}function EK({paneDataArray:t}){const e=Array(t.length),r=t.map(a=>a.constraints);let n=0,i=100;for(let a=0;a<t.length;a++){const s=r[a];Rt(s);const{defaultSize:o}=s;o!=null&&(n++,e[a]=o,i-=o)}for(let a=0;a<t.length;a++){const s=r[a];Rt(s);const{defaultSize:o}=s;if(o!=null)continue;const l=t.length-n,c=i/l;n++,e[a]=c,i-=c}return e}function AK({layout:t,paneConstraints:e}){const r=[...t],n=r.reduce((a,s)=>a+s,0);if(r.length!==e.length)throw new Error(`Invalid ${e.length} pane layout: ${r.map(a=>`${a}%`).join(", ")}`);if(!Jr(n,100))for(let a=0;a<e.length;a++){const s=r[a];Rt(s!=null);const o=100/n*s;r[a]=o}let i=0;for(let a=0;a<e.length;a++){const s=r[a];Rt(s!=null);const o=_s({paneConstraints:e,paneIndex:a,initialSize:s});s!==o&&(i+=s-o,r[a]=o)}if(!Jr(i,0))for(let a=0;a<e.length;a++){const s=r[a];Rt(s!=null);const o=s+i,l=_s({paneConstraints:e,paneIndex:a,initialSize:o});if(s!==l&&(i-=l-s,r[a]=l,Jr(i,0)))break}return r}function TK(t){if(!dp)return null;const e=document.querySelector(`[data-pane-group][data-pane-group-id="${t}"]`);return e||null}function N0(t){if(!dp)return null;const e=document.querySelector(`[data-pane-resizer-id="${t}"]`);return e||null}function OK(t,e,r,n){const i=r==="horizontal",a=N0(e);Rt(a);const s=a.getAttribute("data-pane-group-id");Rt(s);const{initialCursorPosition:o}=n,l=fS(r,t),c=TK(s);Rt(c);const d=c.getBoundingClientRect(),u=i?d.width:d.height;return(l-o)/u*100}function kK(t,e,r,n,i){if(lS(t)){const a=r==="horizontal";let s=0;t.shiftKey?s=100:i!=null?s=i:s=10;let o=0;switch(t.key){case"ArrowDown":o=a?0:s;break;case"ArrowLeft":o=a?-s:0;break;case"ArrowRight":o=a?s:0;break;case"ArrowUp":o=a?0:-s;break;case"End":o=100;break;case"Home":o=-100;break}return o}else return n==null?0:OK(t,e,r,n)}function fS(t,e){const r=t==="horizontal";if(cS(e))return r?e.clientX:e.clientY;if(dS(e)){const n=e.touches[0];return Rt(n),r?n.screenX:n.screenY}else throw new Error(`Unsupported event type "${e.type}"`)}function RK(t,e,r){var l,c;const n=N0(e),i=of(t),a=n?i.indexOf(n):-1,s=((l=r[a])==null?void 0:l.id)??null,o=((c=r[a+1])==null?void 0:c.id)??null;return[s,o]}let K2=0;function Eh(t="paneforge"){return K2++,`${t}-${K2}`}function q2(t,e){return Ji(t,e)}function MK(t,e){const r=t,n=typeof t=="symbol"?t.description:t;if(!b6(r)){if(e===void 0)throw new Error(`Missing context dependency: ${n} and no fallback was provided.`);return e}return yr(t)}function DK(t,e){return`${t}Context`}function NK(t,e,r=!0){const n=DK(t),i=Symbol(n),a=n;function s(l){const c=MK(r?i:a,l);if(c===void 0)throw new Error(`Context \`${n}\` not found. Component must be used within ${Array.isArray(t)?`one of the following components: ${t.join(", ")}`:`\`${t}\``}`);return c}function o(l){return q2(r?i:a,l)}return[o,s]}function Xo({delta:t,layout:e,paneConstraints:r,pivotIndices:n,trigger:i}){if(Jr(t,0))return e;const a=[...e],[s,o]=n;let l=0;if(i==="keyboard"){{const d=t<0?o:s,u=r[d];if(Rt(u),u.collapsible){const g=e[d];Rt(g!=null);const f=r[d];Rt(f);const{collapsedSize:h=0,minSize:m=0}=f;if(Jr(g,h)){const v=m-g;Sl(v,Math.abs(t))>0&&(t=t<0?0-v:v)}}}{const d=t<0?s:o,u=r[d];Rt(u);const{collapsible:g}=u;if(g){const f=e[d];Rt(f!=null);const h=r[d];Rt(h);const{collapsedSize:m=0,minSize:v=0}=h;if(Jr(f,v)){const b=f-m;Sl(b,Math.abs(t))>0&&(t=t<0?0-b:b)}}}}{const d=t<0?1:-1;let u=t<0?o:s,g=0;for(;;){const h=e[u];Rt(h!=null);const v=_s({paneConstraints:r,paneIndex:u,initialSize:100})-h;if(g+=v,u+=d,u<0||u>=r.length)break}const f=Math.min(Math.abs(t),Math.abs(g));t=t<0?0-f:f}{let u=t<0?s:o;for(;u>=0&&u<r.length;){const g=Math.abs(t)-Math.abs(l),f=e[u];Rt(f!=null);const h=f-g,m=_s({paneConstraints:r,paneIndex:u,initialSize:h});if(!Jr(f,m)&&(l+=f-m,a[u]=m,l.toPrecision(3).localeCompare(Math.abs(t).toPrecision(3),void 0,{numeric:!0})>=0))break;t<0?u--:u++}}if(Jr(l,0))return e;{const d=t<0?o:s,u=e[d];Rt(u!=null);const g=u+l,f=_s({paneConstraints:r,paneIndex:d,initialSize:g});if(a[d]=f,!Jr(f,g)){let h=g-f,v=t<0?o:s;for(;v>=0&&v<r.length;){const b=a[v];Rt(b!=null);const x=b+h,y=_s({paneConstraints:r,paneIndex:v,initialSize:x});if(Jr(b,y)||(h-=y-b,a[v]=y),Jr(h,0))break;t>0?v--:v++}}}const c=a.reduce((d,u)=>u+d,0);return Jr(c,100)?a:e}let z1=null,_a=null;function hS(t){switch(t){case"horizontal":return"ew-resize";case"horizontal-max":return"w-resize";case"horizontal-min":return"e-resize";case"vertical":return"ns-resize";case"vertical-max":return"n-resize";case"vertical-min":return"s-resize"}}function FK(){_a!==null&&(document.head.removeChild(_a),z1=null,_a=null)}function Dm(t){if(z1===t)return;z1=t;const e=hS(t);_a===null&&(_a=document.createElement("style"),document.head.appendChild(_a)),_a.innerHTML=`*{cursor: ${e}!important;}`}function $K({defaultSize:t,dragState:e,layout:r,paneData:n,paneIndex:i,precision:a=3}){const s=r[i];let o;return s==null?o=t??"1":n.length===1?o="1":o=s.toPrecision(a),{flexBasis:0,flexGrow:o,flexShrink:1,overflow:"hidden",pointerEvents:e!==null?"none":void 0}}function Y2(t){try{if(typeof localStorage>"u")throw new TypeError("localStorage is not supported in this environment");t.getItem=e=>localStorage.getItem(e),t.setItem=(e,r)=>localStorage.setItem(e,r)}catch(e){console.error(e),t.getItem=()=>null,t.setItem=()=>{}}}function gS(t){return`paneforge:${t}`}function pS(t){return t.map(r=>{const{constraints:n,id:i,idIsFromProps:a,order:s}=r;return a?i:s?`${s}:${JSON.stringify(n)}`:JSON.stringify(n)}).sort().join(",")}function mS(t,e){try{const r=gS(t),n=e.getItem(r),i=JSON.parse(n||"");if(typeof i=="object"&&i!==null)return i}catch{}return null}function LK(t,e,r){const n=mS(t,r)||{},i=pS(e);return n[i]||null}function BK(t,e,r,n,i){const a=gS(t),s=pS(e),o=mS(t,i)||{};o[s]={expandToSizes:Object.fromEntries(r.entries()),layout:n};try{i.setItem(a,JSON.stringify(o))}catch(l){console.error(l)}}const X2={};function VK(t,e=10){let r=null;return(...i)=>{r!==null&&clearTimeout(r),r=setTimeout(()=>{t(...i)},e)}}function jK({autoSaveId:t,layout:e,storage:r,paneDataArray:n,paneSizeBeforeCollapse:i}){if(e.length===0||e.length!==n.length)return;let a=X2[t];a==null&&(a=VK(BK,xK),X2[t]=a);const s=[...n],o=new Map(i);a(t,s,o,e,r)}const il={getItem:t=>(Y2(il),il.getItem(t)),setItem:(t,e)=>{Y2(il),il.setItem(t,e)}};var Zd,Ks,Jd,di,qs,eu,tu,ru,nu,iu,au,Gh,su;class zK{constructor(e){z(this,"id");L(this,Zd);L(this,Ks);z(this,"direction");L(this,Jd);L(this,di);L(this,qs);L(this,eu,Me(null));L(this,tu,Me([]));L(this,ru,Me([]));L(this,nu,Me(!1));L(this,iu,Me(vr({})));z(this,"paneSizeBeforeCollapseMap",new Map);L(this,au,Me(0));z(this,"setLayout",e=>{this.layout=e});z(this,"registerResizeHandle",e=>r=>{var v,b;r.preventDefault();const n=this.direction.current,i=this.dragState,a=this.id.current,s=_(this,Jd).current,o=this.layout,l=this.paneDataArray,{initialLayout:c}=i??{},d=W2(a,e);let u=kK(r,e,n,i,s);if(u===0)return;const g=n==="horizontal";document.dir==="rtl"&&g&&(u=-u);const f=l.map(x=>x.constraints),h=Xo({delta:u,layout:c??o,paneConstraints:f,pivotIndices:d,trigger:lS(r)?"keyboard":"mouse-or-touch"}),m=!qo(o,h);(cS(r)||dS(r))&&this.prevDelta!==u&&(this.prevDelta=u,Dm(m?g?"horizontal":"vertical":g?u<0?"horizontal-min":"horizontal-max":u<0?"vertical-min":"vertical-max")),m&&(this.setLayout(h),(b=(v=_(this,di)).current)==null||b.call(v,h),Yo(l,h,this.paneIdToLastNotifiedSizeMap))});z(this,"resizePane",(e,r)=>{var u,g;const n=this.layout,i=this.paneDataArray,a=i.map(f=>f.constraints),{paneSize:s,pivotIndices:o}=os(i,e,n);Rt(s!=null);const c=ds(i,e)===i.length-1?s-r:r-s,d=Xo({delta:c,layout:n,paneConstraints:a,pivotIndices:o,trigger:"imperative-api"});qo(n,d)||(this.setLayout(d),(g=(u=_(this,di)).current)==null||g.call(u,d),Yo(i,d,this.paneIdToLastNotifiedSizeMap))});z(this,"startDragging",(e,r)=>{const n=this.direction.current,i=this.layout,a=N0(e);Rt(a);const s=fS(n,r);this.dragState={dragHandleId:e,dragHandleRect:a.getBoundingClientRect(),initialCursorPosition:s,initialLayout:i}});z(this,"stopDragging",()=>{FK(),this.dragState=null});z(this,"unregisterPane",e=>{const r=[...this.paneDataArray],n=ds(r,e);n<0||(r.splice(n,1),delete this.paneIdToLastNotifiedSizeMap[e.id],this.paneDataArrayChanged=!0)});z(this,"isPaneCollapsed",e=>{const r=this.paneDataArray,n=this.layout,{collapsedSize:i=0,collapsible:a,paneSize:s}=os(r,e,n);return a===!0&&s===i});z(this,"expandPane",e=>{var h,m;const r=this.layout,n=this.paneDataArray;if(!e.constraints.collapsible)return;const i=n.map(v=>v.constraints),{collapsedSize:a=0,paneSize:s,minSize:o=0,pivotIndices:l}=os(n,e,r);if(s!==a)return;const c=this.paneSizeBeforeCollapseMap.get(e.id),d=c!=null&&c>=o?c:o,g=ds(n,e)===n.length-1?s-d:d-s,f=Xo({delta:g,layout:r,paneConstraints:i,pivotIndices:l,trigger:"imperative-api"});qo(r,f)||(this.setLayout(f),(m=(h=_(this,di)).current)==null||m.call(h,f),Yo(n,f,this.paneIdToLastNotifiedSizeMap))});z(this,"collapsePane",e=>{var u,g;const r=this.layout,n=this.paneDataArray;if(!e.constraints.collapsible)return;const i=n.map(f=>f.constraints),{collapsedSize:a=0,paneSize:s,pivotIndices:o}=os(n,e,r);if(Rt(s!=null),s===a)return;this.paneSizeBeforeCollapseMap.set(e.id,s);const c=ds(n,e)===n.length-1?s-a:a-s,d=Xo({delta:c,layout:r,paneConstraints:i,pivotIndices:o,trigger:"imperative-api"});qo(r,d)||(this.layout=d,(g=(u=_(this,di)).current)==null||g.call(u,d),Yo(n,d,this.paneIdToLastNotifiedSizeMap))});z(this,"getPaneSize",e=>{const{paneSize:r}=os(this.paneDataArray,e,this.layout);return r});z(this,"getPaneStyle",(e,r)=>{const n=this.paneDataArray,i=this.layout,a=this.dragState,s=ds(n,e);return $K({defaultSize:r,dragState:a,layout:i,paneData:n,paneIndex:s})});z(this,"isPaneExpanded",e=>{const{collapsedSize:r=0,collapsible:n,paneSize:i}=os(this.paneDataArray,e,this.layout);return!n||i>r});z(this,"registerPane",e=>{const r=[...this.paneDataArray,e];r.sort((n,i)=>{const a=n.order,s=i.order;return a==null&&s==null?0:a==null?-1:s==null?1:a-s}),this.paneDataArray=r,this.paneDataArrayChanged=!0});L(this,Gh,()=>{const e=this.id.current,r=of(e),n=this.paneDataArray,i=r.map(a=>{const s=a.getAttribute("data-pane-resizer-id");if(!s)return Ra;const[o,l]=RK(e,s,n);if(o==null||l==null)return Ra;const d=ma(a,"keydown",u=>{if(u.defaultPrevented||u.key!=="Enter")return;u.preventDefault();const g=this.paneDataArray,f=g.findIndex(I=>I.id===o);if(f<0)return;const h=g[f];Rt(h);const m=this.layout,v=m[f],{collapsedSize:b=0,collapsible:x,minSize:y=0}=h.constraints;if(!(v!=null&&x))return;const S=Xo({delta:Jr(v,b)?y-v:b-v,layout:m,paneConstraints:g.map(I=>I.constraints),pivotIndices:W2(e,s),trigger:"keyboard"});m!==S&&(this.layout=S)});return()=>{d()}});return()=>{for(const a of i)a()}});L(this,su,R(()=>({id:this.id.current,"data-pane-group":"","data-direction":this.direction.current,"data-pane-group-id":this.id.current,style:{display:"flex",flexDirection:this.direction.current==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"}})));z(this,"createResizer",e=>new GK(e,this));z(this,"createPane",e=>new HK(e,this));this.id=e.id,De(this,Zd,e.ref),De(this,Ks,e.autoSaveId),this.direction=e.direction,De(this,Jd,e.keyboardResizeBy),De(this,di,e.onLayout),De(this,qs,e.storage),dt({id:this.id,ref:_(this,Zd)}),qe(()=>{const r=this.id.current,n=this.layout,i=this.paneDataArray;$e(()=>PK({groupId:r,layout:n,paneDataArray:i}))}),qe(()=>{$e(()=>_(this,Gh).call(this))}),qe(()=>{const r=_(this,Ks).current,n=this.layout,i=_(this,qs).current;r&&$e(()=>{jK({autoSaveId:r,layout:n,storage:i,paneDataArray:this.paneDataArray,paneSizeBeforeCollapse:this.paneSizeBeforeCollapseMap})})}),qe(()=>{this.paneDataArrayChanged&&$e(()=>{var c,d;this.paneDataArrayChanged=!1;const n=_(this,Ks).current,i=_(this,qs).current,a=this.layout,s=this.paneDataArray;let o=null;if(n){const u=LK(n,s,i);u&&(this.paneSizeBeforeCollapseMap=new Map(Object.entries(u.expandToSizes)),o=u.layout)}o==null&&(o=EK({paneDataArray:s}));const l=AK({layout:o,paneConstraints:s.map(u=>u.constraints)});qo(a,l)||(this.layout=l,(d=(c=_(this,di)).current)==null||d.call(c,l),Yo(s,l,this.paneIdToLastNotifiedSizeMap))})})}get dragState(){return p(_(this,eu))}set dragState(e){U(_(this,eu),e)}get layout(){return p(_(this,tu))}set layout(e){U(_(this,tu),e)}get paneDataArray(){return p(_(this,ru))}set paneDataArray(e){U(_(this,ru),e)}get paneDataArrayChanged(){return p(_(this,nu))}set paneDataArrayChanged(e){U(_(this,nu),e,!0)}get paneIdToLastNotifiedSizeMap(){return p(_(this,iu))}set paneIdToLastNotifiedSizeMap(e){U(_(this,iu),e,!0)}get prevDelta(){return p(_(this,au))}set prevDelta(e){U(_(this,au),e,!0)}get props(){return p(_(this,su))}set props(e){U(_(this,su),e)}}Zd=new WeakMap,Ks=new WeakMap,Jd=new WeakMap,di=new WeakMap,qs=new WeakMap,eu=new WeakMap,tu=new WeakMap,ru=new WeakMap,nu=new WeakMap,iu=new WeakMap,au=new WeakMap,Gh=new WeakMap,su=new WeakMap;const UK=["ArrowDown","ArrowLeft","ArrowRight","ArrowUp","End","Home"];var un,Ta,$i,Li,ou,Or,lu,Ys,Xs,Hh,Wh,Kh,qh,Yh,Xh,Qh,Zh,cu;class GK{constructor(e,r){L(this,un);L(this,Ta);L(this,$i);L(this,Li);L(this,ou);L(this,Or);L(this,lu,R(()=>{var e;return((e=_(this,Or).dragState)==null?void 0:e.dragHandleId)===_(this,un).current}));L(this,Ys,Me(!1));z(this,"resizeHandler",null);L(this,Xs,()=>{const e=_(this,Ta).current;e&&(e.blur(),_(this,Or).stopDragging(),_(this,$i).current(!1))});L(this,Hh,e=>{if(_(this,Li).current||!this.resizeHandler||e.defaultPrevented)return;if(UK.includes(e.key)){e.preventDefault(),this.resizeHandler(e);return}if(e.key!=="F6")return;e.preventDefault();const r=of(_(this,Or).id.current),n=uS(_(this,Or).id.current,_(this,un).current);if(n===null)return;let i=0;e.shiftKey?n>0?i=n-1:i=r.length-1:n+1<r.length?i=n+1:i=0,r[i].focus()});L(this,Wh,()=>{U(_(this,Ys),!1)});L(this,Kh,()=>{U(_(this,Ys),!0)});L(this,qh,e=>{e.preventDefault(),_(this,Or).startDragging(_(this,un).current,e),_(this,$i).current(!0)});L(this,Yh,()=>{_(this,Xs).call(this)});L(this,Xh,()=>{_(this,Xs).call(this)});L(this,Qh,()=>{_(this,Xs).call(this)});L(this,Zh,e=>{e.preventDefault(),_(this,Or).startDragging(_(this,un).current,e),_(this,$i).current(!0)});L(this,cu,R(()=>({id:_(this,un).current,role:"separator","data-direction":_(this,Or).direction.current,"data-pane-group-id":_(this,Or).id.current,"data-active":p(_(this,lu))?"pointer":p(_(this,Ys))?"keyboard":void 0,"data-enabled":!_(this,Li).current,"data-pane-resizer-id":_(this,un).current,"data-pane-resizer":"",tabIndex:_(this,ou).current,style:{cursor:hS(_(this,Or).direction.current),touchAction:"none",userSelect:"none","-webkit-user-select":"none","-webkit-touch-callout":"none"},onkeydown:_(this,Hh),onblur:_(this,Wh),onfocus:_(this,Kh),onmousedown:_(this,qh),onmouseup:_(this,Yh),ontouchcancel:_(this,Xh),ontouchend:_(this,Qh),ontouchstart:_(this,Zh)})));De(this,un,e.id),De(this,Ta,e.ref),De(this,Or,r),De(this,$i,e.onDraggingChange),De(this,Li,e.disabled),De(this,ou,e.tabIndex),dt({id:_(this,un),ref:_(this,Ta)}),qe(()=>{_(this,Li).current?this.resizeHandler=null:this.resizeHandler=_(this,Or).registerResizeHandle(_(this,un).current)}),qe(()=>{const n=_(this,Ta).current;if(!n)return;const i=_(this,Li).current,a=this.resizeHandler,s=p(_(this,lu));if(i||a===null||!s)return;const o=u=>{a(u)},l=u=>{a(u)},c=()=>{n.blur(),_(this,Or).stopDragging(),_(this,$i).current(!1)};return $_(ma(document.body,"contextmenu",c),ma(document.body,"mousemove",o),ma(document.body,"touchmove",o,{passive:!1}),ma(document.body,"mouseleave",l),ma(window,"mouseup",c),ma(window,"touchend",c))})}get props(){return p(_(this,cu))}set props(e){U(_(this,cu),e)}}un=new WeakMap,Ta=new WeakMap,$i=new WeakMap,Li=new WeakMap,ou=new WeakMap,Or=new WeakMap,lu=new WeakMap,Ys=new WeakMap,Xs=new WeakMap,Hh=new WeakMap,Wh=new WeakMap,Kh=new WeakMap,qh=new WeakMap,Yh=new WeakMap,Xh=new WeakMap,Qh=new WeakMap,Zh=new WeakMap,cu=new WeakMap;var ui,du,uu,fu,Qs,hu,gu,pu,mu,vu,yu,kr,Zr,bu,_u;class HK{constructor(e,r){L(this,ui);L(this,du);L(this,uu);L(this,fu);L(this,Qs);L(this,hu);L(this,gu);L(this,pu);L(this,mu);L(this,vu);L(this,yu);L(this,kr);L(this,Zr,R(()=>({callbacks:{onCollapse:_(this,mu).current,onExpand:_(this,vu).current,onResize:_(this,yu).current},constraints:{collapsedSize:_(this,uu).current,collapsible:_(this,fu).current,defaultSize:_(this,Qs).current,maxSize:_(this,hu).current,minSize:_(this,gu).current},id:_(this,ui).current,idIsFromProps:!1,order:_(this,pu).current})));z(this,"pane",{collapse:()=>{_(this,kr).collapsePane(p(_(this,Zr)))},expand:()=>_(this,kr).expandPane(p(_(this,Zr))),getSize:()=>_(this,kr).getPaneSize(p(_(this,Zr))),isCollapsed:()=>_(this,kr).isPaneCollapsed(p(_(this,Zr))),isExpanded:()=>_(this,kr).isPaneExpanded(p(_(this,Zr))),resize:e=>_(this,kr).resizePane(p(_(this,Zr)),e),getId:()=>_(this,ui).current});L(this,bu,R(()=>_(this,kr).isPaneCollapsed(p(_(this,Zr)))));L(this,_u,R(()=>({id:_(this,ui).current,style:_(this,kr).getPaneStyle(p(_(this,Zr)),_(this,Qs).current),"data-pane":"","data-pane-id":_(this,ui).current,"data-pane-group-id":_(this,kr).id.current,"data-collapsed":p(_(this,bu))?"":void 0,"data-expanded":p(_(this,bu))?void 0:""})));De(this,ui,e.id),De(this,du,e.ref),De(this,uu,e.collapsedSize),De(this,fu,e.collapsible),De(this,Qs,e.defaultSize),De(this,hu,e.maxSize),De(this,gu,e.minSize),De(this,pu,e.order),De(this,mu,e.onCollapse),De(this,vu,e.onExpand),De(this,yu,e.onResize),De(this,kr,r),dt({id:_(this,ui),ref:_(this,du)}),Q_(()=>(_(this,kr).registerPane(p(_(this,Zr))),()=>{_(this,kr).unregisterPane(p(_(this,Zr)))}))}get props(){return p(_(this,_u))}set props(e){U(_(this,_u),e)}}ui=new WeakMap,du=new WeakMap,uu=new WeakMap,fu=new WeakMap,Qs=new WeakMap,hu=new WeakMap,gu=new WeakMap,pu=new WeakMap,mu=new WeakMap,vu=new WeakMap,yu=new WeakMap,kr=new WeakMap,Zr=new WeakMap,bu=new WeakMap,_u=new WeakMap;const[WK,vS]=NK("PaneGroup");function KK(t){return WK(new zK(t))}function qK(t){return vS().createResizer(t)}function YK(t){return vS().createPane(t)}var XK=H("<div><!></div>");function QK(t,e){le(e,!0);let r=T(e,"autoSaveId",3,null),n=T(e,"id",19,Eh),i=T(e,"keyboardResizeBy",3,null),a=T(e,"onLayoutChange",3,Ra),s=T(e,"storage",3,il),o=T(e,"ref",15,null),l=Ce(e,["$$slots","$$events","$$legacy","autoSaveId","direction","id","keyboardResizeBy","onLayoutChange","storage","ref","child","children"]);const c=KK({id:W.with(()=>n()??Eh()),ref:W.with(()=>o(),x=>o(x)),autoSaveId:W.with(()=>r()),direction:W.with(()=>e.direction),keyboardResizeBy:W.with(()=>i()),onLayout:W.with(()=>a()),storage:W.with(()=>s())}),d=()=>c.layout,u=c.setLayout,g=()=>c.id.current,f=R(()=>Ge(l,c.props));var h=F(),m=P(h);{var v=x=>{var y=F(),S=P(y);ge(S,()=>e.child,()=>({props:p(f)})),w(x,y)},b=x=>{var y=XK();let S;var I=re(y);ge(I,()=>e.children??Ve),ne(y),Ee(()=>S=Fe(y,S,{...p(f)})),w(x,y)};fe(m,x=>{e.child?x(v):x(b,!1)})}return w(t,h),ce({getLayout:d,setLayout:u,getId:g})}var ZK=H("<div><!></div>");function Nm(t,e){le(e,!0);let r=T(e,"id",19,Eh),n=T(e,"ref",15,null),i=T(e,"onCollapse",3,Ra),a=T(e,"onExpand",3,Ra),s=T(e,"onResize",3,Ra),o=Ce(e,["$$slots","$$events","$$legacy","id","ref","collapsedSize","collapsible","defaultSize","maxSize","minSize","onCollapse","onExpand","onResize","order","child","children"]);const l=YK({id:W.with(()=>r()),ref:W.with(()=>n(),I=>n(I)),collapsedSize:W.with(()=>e.collapsedSize),collapsible:W.with(()=>e.collapsible),defaultSize:W.with(()=>e.defaultSize),maxSize:W.with(()=>e.maxSize),minSize:W.with(()=>e.minSize),onCollapse:W.with(()=>i()),onExpand:W.with(()=>a()),onResize:W.with(()=>s()),order:W.with(()=>e.order)}),c=l.pane.collapse,d=l.pane.expand,u=l.pane.getSize,g=l.pane.isCollapsed,f=l.pane.isExpanded,h=l.pane.resize,m=l.pane.getId,v=R(()=>Ge(o,l.props));var b=F(),x=P(b);{var y=I=>{var C=F(),D=P(C);ge(D,()=>e.child,()=>({props:p(v)})),w(I,C)},S=I=>{var C=ZK();let D;var E=re(C);ge(E,()=>e.children??Ve),ne(C),Ee(()=>D=Fe(C,D,{...p(v)})),w(I,C)};fe(x,I=>{e.child?I(y):I(S,!1)})}return w(t,b),ce({collapse:c,expand:d,getSize:u,isCollapsed:g,isExpanded:f,resize:h,getId:m})}var JK=H("<div><!></div>");function eq(t,e){le(e,!0);let r=T(e,"id",19,Eh),n=T(e,"ref",15,null),i=T(e,"disabled",3,!1),a=T(e,"onDraggingChange",3,Ra),s=T(e,"tabIndex",3,0),o=Ce(e,["$$slots","$$events","$$legacy","id","ref","disabled","onDraggingChange","tabIndex","child","children"]);const l=qK({id:W.with(()=>r()),ref:W.with(()=>n(),h=>n(h)),disabled:W.with(()=>i()),onDraggingChange:W.with(()=>a()),tabIndex:W.with(()=>s())}),c=R(()=>Ge(o,l.props));var d=F(),u=P(d);{var g=h=>{var m=F(),v=P(m);ge(v,()=>e.child,()=>({props:p(c)})),w(h,m)},f=h=>{var m=JK();let v;var b=re(m);ge(b,()=>e.children??Ve),ne(m),Ee(()=>v=Fe(m,v,{...p(c)})),w(h,m)};fe(u,h=>{e.child?h(g):h(f,!1)})}w(t,d),ce()}function tq(t,e){const r=Wa(e,["children","$$slots","$$events","$$legacy"]);Ga(t,Be({name:"grip-vertical"},()=>r,{iconNode:[["circle",{cx:"9",cy:"12",r:"1"}],["circle",{cx:"9",cy:"5",r:"1"}],["circle",{cx:"9",cy:"19",r:"1"}],["circle",{cx:"15",cy:"12",r:"1"}],["circle",{cx:"15",cy:"5",r:"1"}],["circle",{cx:"15",cy:"19",r:"1"}]],children:(i,a)=>{var s=F(),o=P(s);Ha(o,e,"default",{}),w(i,s)},$$slots:{default:!0}}))}var rq=H('<div class="bg-neutral-6 z-10 flex h-4 w-3 items-center justify-center rounded-sm border"><!></div>');function Q2(t,e){le(e,!0);let r=T(e,"ref",15,null),n=T(e,"withHandle",3,!1),i=Ce(e,["$$slots","$$events","$$legacy","ref","class","withHandle"]);var a=F(),s=P(a);const o=R(()=>Ue("bg-neutral-6 focus-visible:ring-primary-6 relative flex w-px items-center justify-center after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-offset-1 data-[direction=vertical]:h-px data-[direction=vertical]:w-full data-[direction=vertical]:after:left-0 data-[direction=vertical]:after:h-1 data-[direction=vertical]:after:w-full data-[direction=vertical]:after:-translate-y-1/2 data-[direction=vertical]:after:translate-x-0 [&[data-direction=vertical]>div]:rotate-90",e.class));M(s,()=>eq,(l,c)=>{c(l,Be({get class(){return p(o)}},()=>i,{get ref(){return r()},set ref(d){r(d)},children:(d,u)=>{var g=F(),f=P(g);{var h=m=>{var v=rq(),b=re(v);tq(b,{class:"size-2.5"}),ne(v),w(m,v)};fe(f,m=>{n()&&m(h)})}w(d,g)},$$slots:{default:!0}}))}),w(t,a),ce()}function nq(t,e){le(e,!0),T(e,"ref",11,null);let r=T(e,"this",15),n=Ce(e,["$$slots","$$events","$$legacy","ref","this","class"]);var i=F(),a=P(i);const s=R(()=>Ue("flex h-full w-full data-[direction=vertical]:flex-col",e.class));M(a,()=>QK,(o,l)=>{vo(l(o,Be({get class(){return p(s)}},()=>n)),c=>r(c),()=>r())}),w(t,i),ce()}var iq=H("<!> <!>",1),aq=H("<!> <!> <!>",1),sq=H("<!> <!> <!>",1),oq=H("<!> <!>",1),lq=H("<!> <!>",1),cq=H("<!> <!>",1),dq=H('<div class="flex"><div class="flex"><!></div> <div class="ml-1 md:ml-2 lg:ml-4"><!></div></div>'),uq=H("<!> <!>",1),fq=H("<!> <!>",1),hq=H("<!> <!>",1),gq=H('<div class="flex"><div class="mr-1 md:mr-2 lg:mr-4"><!></div> <div class="flex"><!></div></div>'),pq=H("<!> <!>",1),mq=H('<div class="flex h-12 flex-row items-center justify-between px-2 py-2 md:px-4"><!> <div class="flex flex-row items-center justify-center"><!> <div class="md:md-2 mx-1 lg:mx-4"><!></div> <!></div> <!></div>');function vq(t,e){le(e,!0);const r=(S,I=Ve,C=Ve,D=Ve,E=Ve)=>{var O=F(),A=P(O);M(A,()=>Mr,(k,V)=>{V(k,{children:(G,K)=>{var j=iq(),Q=P(j);M(Q,()=>Rr,(q,Z)=>{Z(q,{children:(ee,de)=>{er(ee,{get variant(){return D()},size:"xsm",class:"mx-1 flex h-fit items-center rounded-2xl p-0 outline outline-1",get disabled(){return e.selection.disabled},get onclick(){return E()},children:(J,ie)=>{Je(J,{get icon(){return C()},width:"1rem",class:"m-1"})},$$slots:{default:!0}})},$$slots:{default:!0}})});var te=Y(Q,2);M(te,()=>Dr,(q,Z)=>{Z(q,{children:(ee,de)=>{He();var J=Ke();Ee(()=>pt(J,I())),w(ee,J)},$$slots:{default:!0}})}),w(G,j)},$$slots:{default:!0}})}),w(S,O)},n=S=>{var I=aq(),C=P(I);r(C,()=>"Rewind selection one month",()=>ot.verdagraphMonthReverseIcon,()=>"default",()=>()=>e.selection.translate({months:-1}));var D=Y(C,2);r(D,()=>"Rewind selection one week",()=>ot.verdagraphWeekReverseIcon,()=>"default",()=>()=>e.selection.translate({weeks:-1}));var E=Y(D,2);r(E,()=>"Rewind selection one day",()=>ot.verdagraphDayReverseIcon,()=>"default",()=>()=>e.selection.translate({days:-1})),w(S,I)},i=S=>{var I=sq(),C=P(I);r(C,()=>"Forward selection one day",()=>ot.verdagraphDayForwardIcon,()=>"default",()=>()=>e.selection.translate({days:1}));var D=Y(C,2);r(D,()=>"Forward selection one week",()=>ot.verdagraphWeekForwardIcon,()=>"default",()=>()=>e.selection.translate({weeks:1}));var E=Y(D,2);r(E,()=>"Forward selection one month",()=>ot.verdagraphMonthForwardIcon,()=>"default",()=>()=>e.selection.translate({months:1})),w(S,I)},a=S=>{r(S,()=>"Reset timeline range",()=>ot.timelineSelectorShrinkIcon,()=>"outline",()=>()=>e.selection.resetSliderRange())},s=S=>{r(S,()=>"Reset timeline selection",()=>ot.homeIcon,()=>"outline",()=>()=>e.selection.reset())},o=new YH;var l=mq(),c=re(l);M(c,()=>Mr,(S,I)=>{I(S,{children:(C,D)=>{var E=oq(),O=P(E);M(O,()=>Rr,(k,V)=>{V(k,{children:(G,K)=>{const j=R(()=>e.selection.focus.subtract(e.selection.maxSelectOffset)),Q=R(()=>e.selection.focus.subtract(e.selection.minSelectOffset));ul(G,{get value(){return e.selection.beginSelection},get compact(){return o.current},onValueChange:te=>{te&&e.selection.changeBeginSelection(te)},get minValue(){return p(j)},get maxValue(){return p(Q)},get disabled(){return e.selection.disabled}})},$$slots:{default:!0}})});var A=Y(O,2);M(A,()=>Dr,(k,V)=>{V(k,{children:(G,K)=>{He();var j=Ke("Beginning date of timeline selection");w(G,j)},$$slots:{default:!0}})}),w(C,E)},$$slots:{default:!0}})});var d=Y(c,2),u=re(d);{var g=S=>{var I=F(),C=P(I);M(C,()=>go,(D,E)=>{E(D,{children:(O,A)=>{var k=cq(),V=P(k);M(V,()=>po,(K,j)=>{j(K,{class:"mx-1 flex h-fit items-center rounded-2xl p-0 outline outline-1 sm:mx-2 md:mx-4",children:(Q,te)=>{Je(Q,{get icon(){return ot.timelineSelectorTranslateIcon},width:"1rem",class:"m-1"})},$$slots:{default:!0}})});var G=Y(V,2);M(G,()=>ho,(K,j)=>{j(K,{side:"top",class:"w-auto",children:(Q,te)=>{var q=lq(),Z=P(q);n(Z);var ee=Y(Z,2);i(ee),w(Q,q)},$$slots:{default:!0}})}),w(O,k)},$$slots:{default:!0}})}),w(S,I)},f=S=>{var I=dq(),C=re(I),D=re(C);n(D),ne(C);var E=Y(C,2),O=re(E);a(O),ne(E),ne(I),w(S,I)};fe(u,S=>{o.current?S(g):S(f,!1)})}var h=Y(u,2),m=re(h);M(m,()=>Mr,(S,I)=>{I(S,{children:(C,D)=>{var E=uq(),O=P(E);M(O,()=>Rr,(k,V)=>{V(k,{children:(G,K)=>{ul(G,{get value(){return e.selection.focus},get compact(){return o.current},onValueChange:j=>{j&&e.selection.refocus(j)},get disabled(){return e.selection.disabled}})},$$slots:{default:!0}})});var A=Y(O,2);M(A,()=>Dr,(k,V)=>{V(k,{children:(G,K)=>{He();var j=Ke("Focused date");w(G,j)},$$slots:{default:!0}})}),w(C,E)},$$slots:{default:!0}})}),ne(h);var v=Y(h,2);{var b=S=>{var I=F(),C=P(I);M(C,()=>go,(D,E)=>{E(D,{children:(O,A)=>{var k=hq(),V=P(k);M(V,()=>po,(K,j)=>{j(K,{class:"mx-1 flex h-fit items-center rounded-2xl p-0 outline outline-1 sm:mx-2 md:mx-4",children:(Q,te)=>{Je(Q,{get icon(){return ot.defaultRefreshIcon},width:"1rem",class:"m-1"})},$$slots:{default:!0}})});var G=Y(V,2);M(G,()=>ho,(K,j)=>{j(K,{side:"top",class:"w-auto",children:(Q,te)=>{var q=fq(),Z=P(q);a(Z);var ee=Y(Z,2);s(ee),w(Q,q)},$$slots:{default:!0}})}),w(O,k)},$$slots:{default:!0}})}),w(S,I)},x=S=>{var I=gq(),C=re(I),D=re(C);s(D),ne(C);var E=Y(C,2),O=re(E);i(O),ne(E),ne(I),w(S,I)};fe(v,S=>{o.current?S(b):S(x,!1)})}ne(d);var y=Y(d,2);M(y,()=>Mr,(S,I)=>{I(S,{children:(C,D)=>{var E=pq(),O=P(E);M(O,()=>Rr,(k,V)=>{V(k,{children:(G,K)=>{const j=R(()=>e.selection.focus.add(e.selection.minSelectOffset)),Q=R(()=>e.selection.focus.add(e.selection.maxSelectOffset));ul(G,{get value(){return e.selection.endSelection},get compact(){return o.current},onValueChange:te=>{te&&e.selection.changeEndSelection(te)},get minValue(){return p(j)},get maxValue(){return p(Q)},get disabled(){return e.selection.disabled}})},$$slots:{default:!0}})});var A=Y(O,2);M(A,()=>Dr,(k,V)=>{V(k,{children:(G,K)=>{He();var j=Ke("Ending date of timeline selection");w(G,j)},$$slots:{default:!0}})}),w(C,E)},$$slots:{default:!0}})}),ne(l),w(t,l),ce()}var yq=H('<div><span class="text-neutral-11 absolute -translate-y-[14px] text-sm"> </span> <span> </span> <span></span></div>'),bq=H('<div><span class="text-neutral-11 absolute -translate-y-[14px] text-xs"> </span> <span> </span> <span></span></div>'),_q=H("<div><span> </span> <span></span></div>"),wq=H("<div><span> </span> <span></span></div>"),Sq=H('<span class="h-3 w-full cursor-pointer self-start"><!></span> <!> <!>',1);function xq(t,e){le(e,!0);let r=R(()=>e.width/e.selection.maxSliderValue),n=R(()=>p(r)/2+wK-7);var i=F(),a=P(i),s=()=>e.selection.sliderValue,o=l=>{e.selection.updateSlider(l)};M(a,()=>nj,(l,c)=>{c(l,{get value(){return s()},set value(u){o(u)},get min(){return e.selection.minSliderValue},get max(){return e.selection.maxSliderValue},get disabled(){return e.selection.disabled},class:"relative flex h-12 w-full touch-none select-none",children:(u,g)=>{let f=()=>g==null?void 0:g().thumbs,h=()=>g==null?void 0:g().ticks;var m=Sq(),v=P(m),b=re(v);M(b,()=>aj,(S,I)=>{I(S,{class:"bg-primary-8 h-3"})}),ne(v);var x=Y(v,2);Kt(x,17,f,rr,(S,I)=>{var C=F(),D=P(C);M(D,()=>oj,(E,O)=>{O(E,{get index(){return p(I)},class:"focus-visible:ring-neutal-11 active:scale-98 bg-neutral-11 h-1/3 w-1 cursor-pointer self-start rounded-md focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2"})}),w(S,C)});var y=Y(x,2);Kt(y,17,h,rr,(S,I)=>{var C=F(),D=P(C);{var E=O=>{var A=F();const k=R(()=>e.selection.sliderValueToDateValue(p(I)));var V=P(A);{var G=j=>{var Q=F(),te=P(Q);M(te,()=>Ef,(q,Z)=>{Z(q,{get index(){return p(I)},child:(de,J)=>{let ie=()=>J==null?void 0:J().props;var xe=yq();let ke;var pe=re(xe),B=re(pe,!0);ne(pe);var X=Y(pe,2);let oe;var me=re(X,!0);ne(X);var he=Y(X,2);ne(xe),Ee((we,be,ye,ue,Le)=>{ke=Fe(xe,ke,{...ie(),class:we}),pt(B,p(k).year),oe=Wt(X,1,be,null,oe,ye),gs(X,`transform: translateX(${p(n)??""}px)`),pt(me,ue),Wt(he,1,Le)},[()=>Ue($f,""),()=>fn(Ue(Lf,"")),()=>({hidden:p(r)<Ff}),()=>p(k).day.toString().padStart(2,"0"),()=>fn(Ue(Bf,"h-[14px]"))]),w(de,xe)},$$slots:{child:!0}})}),w(j,Q)},K=(j,Q)=>{{var te=Z=>{var ee=F(),de=P(ee);M(de,()=>Ef,(J,ie)=>{ie(J,{get index(){return p(I)},child:(ke,pe)=>{let B=()=>pe==null?void 0:pe().props;var X=bq();let oe;var me=re(X),he=re(me,!0);ne(me);var we=Y(me,2);let be;var ye=re(we,!0);ne(we);var ue=Y(we,2);ne(X),Ee((Le,Se,Ie,Ne,Pe,Te)=>{oe=Fe(X,oe,{...B(),class:Le}),pt(he,Se),be=Wt(we,1,Ie,null,be,Ne),gs(we,`transform: translateX(${p(n)??""}px)`),pt(ye,Pe),Wt(ue,1,Te)},[()=>Ue($f,""),()=>_K(p(k).month),()=>fn(Ue(Lf,"")),()=>({hidden:p(r)<Ff}),()=>p(k).day.toString().padStart(2,"0"),()=>fn(Ue(Bf,"h-[14px]"))]),w(ke,X)},$$slots:{child:!0}})}),w(Z,ee)},q=(Z,ee)=>{{var de=ie=>{var xe=F(),ke=P(xe);M(ke,()=>Ef,(pe,B)=>{B(pe,{get index(){return p(I)},child:(oe,me)=>{let he=()=>me==null?void 0:me().props;var we=_q();let be;var ye=re(we);let ue;var Le=re(ye,!0);ne(ye);var Se=Y(ye,2);ne(we),Ee((Ie,Ne,Pe,Te,Oe)=>{be=Fe(we,be,{...he(),class:Ie}),ue=Wt(ye,1,Ne,null,ue,Pe),gs(ye,`transform: translateX(${p(n)??""}px)`),pt(Le,Te),Wt(Se,1,Oe)},[()=>Ue($f,""),()=>fn(Ue(Lf,"text-neutral-11")),()=>({hidden:p(r)<Ff}),()=>p(k).day.toString().padStart(2,"0"),()=>fn(Ue(Bf,""))]),w(oe,we)},$$slots:{child:!0}})}),w(ie,xe)},J=ie=>{var xe=F(),ke=P(xe);M(ke,()=>Ef,(pe,B)=>{B(pe,{get index(){return p(I)},child:(oe,me)=>{let he=()=>me==null?void 0:me().props;var we=wq();let be;var ye=re(we);let ue;var Le=re(ye,!0);ne(ye);var Se=Y(ye,2);ne(we),Ee((Ie,Ne,Pe,Te,Oe)=>{be=Fe(we,be,{...he(),class:Ie}),ue=Wt(ye,1,Ne,null,ue,Pe),gs(ye,`transform: translateX(${p(n)??""}px)`),pt(Le,Te),Wt(Se,1,Oe)},[()=>Ue($f,""),()=>fn(Ue(Lf,"")),()=>({hidden:p(r)<Ff}),()=>p(k).day.toString().padStart(2,"0"),()=>fn(Ue(Bf,""))]),w(oe,we)},$$slots:{child:!0}})}),w(ie,xe)};fe(Z,ie=>{n0(p(k),"en-US")===0?ie(de):ie(J,!1)},ee)}};fe(j,Z=>{p(k).day===1?Z(te):Z(q,!1)},Q)}};fe(V,j=>{p(k).month===1&&p(k).day===1?j(G):j(K,!1)})}w(O,A)};fe(D,O=>{p(I)>=0&&p(I)<e.selection.maxSliderValue&&O(E)})}w(S,C)}),w(u,m)},$$slots:{default:!0}})}),w(t,i),ce()}var Iq=H('<div class="border-neutral-6 flex h-24 w-full flex-col border-t"><!> <!></div>');function Cq(t,e){let r=Me(0);var n=Iq(),i=re(n);vq(i,{get selection(){return e.selection}});var a=Y(i,2);xq(a,{get selection(){return e.selection},get width(){return p(r)}}),ne(n),Km(n,"clientWidth",s=>U(r,s)),w(t,n)}const Z2={weeks:3},J2={weeks:1},Ai={weeks:2},Pq={days:1},Eq={years:4},e_=2,t_=50,Aq={days:3},Tq={days:-1};function Oq(){let t=Me(!1),e=Me(vr(I1(hn()))),r=Me(vr(p(e).subtract(J2))),n=Me(vr(p(e).add(Z2)));const i=R(()=>Mm(p(e))),a=R(()=>Mm(p(r))),s=R(()=>Mm(p(n)));let o=Me(vr(p(r).subtract(Ai))),l=Me(vr(p(n).add(Ai)));const c=0,d=R(()=>Ko(p(l),p(o))),u=R(()=>[Ko(p(r),p(o)),Ko(p(e),p(o)),Ko(p(n),p(o))]),g=R(()=>p(d)-p(u)[2]<e_),f=R(()=>p(u)[0]-c<e_);let h=null;qe(()=>{p(g)?h===null&&(h=setInterval(()=>{S(Aq)},t_)):h&&(clearInterval(h),h=null)}),qe(()=>{p(f)?h===null&&(h=setInterval(()=>{S(Tq)},t_)):h&&(clearInterval(h),h=null)});function m(){p(t)||(U(e,I1(hn()),!0),U(r,p(e).subtract(J2),!0),U(n,p(e).add(Z2),!0),U(o,p(r).subtract(Ai),!0),U(l,p(n).add(Ai),!0))}function v(){p(t)||(U(o,p(r).subtract(Ai),!0),U(l,p(n).add(Ai),!0))}function b(O){if(p(t))return;const A=Ko(O,p(e));U(r,p(r).add({days:A}),!0),U(n,p(n).add({days:A}),!0),U(o,p(o).add({days:A}),!0),U(l,p(l).add({days:A}),!0),U(e,O,!0)}function x(O){p(t)||(U(r,O,!0),p(o)>p(r)&&U(o,p(r).subtract(Ai),!0))}function y(O){p(t)||(U(n,O,!0),p(n)>p(l)&&U(l,p(n).add(Ai),!0))}function S(O){p(t)||(U(e,p(e).add(O),!0),U(r,p(r).add(O),!0),U(n,p(n).add(O),!0),U(o,p(o).add(O),!0),U(l,p(l).add(O),!0))}function I(O){return p(o).add({days:O})}function C(O){if(!p(t)){if(O[1]!=p(u)[1]){const A=O[1]-p(u)[1];O[0]=Math.max(O[0]+A,c),O[2]=Math.min(O[2]+A,p(d))}U(r,I(O[0]),!0),U(e,I(O[1]),!0),U(n,I(O[2]),!0)}}function D(){U(t,!0)}function E(){U(t,!1)}return{get focus(){return p(e)},get beginSelection(){return p(r)},get endSelection(){return p(n)},get focusUtc(){return p(i)},get beginSelectionUtc(){return p(a)},get endSelectionUtc(){return p(s)},get minSliderValue(){return c},get maxSliderValue(){return p(d)},get sliderValue(){return p(u)},get disabled(){return p(t)},minSelectOffset:Pq,maxSelectOffset:Eq,reset:m,resetSliderRange:v,refocus:b,changeBeginSelection:x,changeEndSelection:y,translate:S,sliderValueToDateValue:I,updateSlider:C,disable:D,enable:E}}function kq(){const t=vr(new e9),e=[];function r(o){return t.has(o)}function n(o){r(o)||(t.add(o),e.forEach(l=>l([o],[])))}function i(o){r(o)&&(t.delete(o),e.forEach(l=>l([],[o])))}function a(){const o=[...t];t.clear(),e.forEach(l=>l([],o))}function s(o){e.push(o)}return{get selection(){return t},has:r,select:n,deselect:i,reset:a,addSelectionChangeHandler:s}}function Rq(t){let e=Me("pointer");const r=Object.fromEntries(t.map(d=>[d,kq()]));function n(d){return r[d].selection}function i(d,u){return r[d].has(u)}function a(d,u){r[d].select(u)}function s(d,u){r[d].deselect(u)}function o(d){r[d].reset()}function l(){Object.entries(r).forEach(([,d])=>{d.reset()})}function c(d,u){r[d].addSelectionChangeHandler(u)}return{get tool(){return p(e)},set tool(d){U(e,d,!0)},get:n,has:i,select:a,deselect:s,reset:o,resetAll:l,addSelectionChangeHandler:c}}function Mq(t){let e=Me(vr([])),r=Me(void 0);const n=R(()=>t.filter(l=>p(e).includes(l.id))),i=R(()=>p(e).length>0);function a(l){p(e).includes(l)||p(e).push(l),U(r,l,!0)}function s(l){p(e).includes(l)&&U(e,p(e).filter(c=>c!==l),!0),p(i)||U(r,void 0)}function o(l){return!!p(e).includes(l)}return{get lastActivatedId(){return p(r)},get activeTools(){return p(n)},get isActive(){return p(i)},set lastActivatedId(l){U(r,l,!0)},activate:a,deactivate:s,isToolActive:o}}function yS(t,e){le(e,!0);let r=T(e,"ref",15,null),n=Ce(e,["$$slots","$$events","$$legacy","ref","class"]);var i=F(),a=P(i);const s=R(()=>Ue("ring-offset-neutral-1 focus-visible:ring-neutral-11 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2",e.class));M(a,()=>Ij,(o,l)=>{l(o,Be({get class(){return p(s)}},()=>n,{get ref(){return r()},set ref(c){r(c)}}))}),w(t,i),ce()}function bS(t,e){le(e,!0);let r=T(e,"ref",15,null),n=Ce(e,["$$slots","$$events","$$legacy","ref","class"]);var i=F(),a=P(i);const s=R(()=>Ue("bg-neutral-1 text-neutral-11 flex w-full items-center justify-center rounded-none",e.class));M(a,()=>Pj,(o,l)=>{l(o,Be({get class(){return p(s)}},()=>n,{get ref(){return r()},set ref(c){r(c)}}))}),w(t,i),ce()}function _S(t,e){le(e,!0);let r=T(e,"ref",15,null),n=Ce(e,["$$slots","$$events","$$legacy","ref","class"]);var i=F(),a=P(i);const s=R(()=>Ue("ring-offset-neutral-1 focus-visible:ring-neutral-11 data-[state=active]:bg-neutral-2 data-[state=active]:text-neutral-11 inline-flex items-center justify-center whitespace-nowrap rounded-none px-3 py-1.5 text-sm font-medium transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 ",e.class));M(a,()=>Aj,(o,l)=>{l(o,Be({get class(){return p(s)}},()=>n,{get ref(){return r()},set ref(c){r(c)}}))}),w(t,i),ce()}const wS=Sj;var Dq=H('<span class="truncate"> </span> <!>',1),Nq=H("<!> <!>",1),Fq=H("<!> <!>",1);function $q(t,e){le(e,!0);let r=T(e,"toolbox",7),n=Me(null),i=Me(null),a=R(()=>p(n)&&p(i)?p(n).offsetHeight-p(i).offsetHeight:0);var s=F(),o=P(s);M(o,()=>wS,(l,c)=>{c(l,{class:"bg-neutral-1 flex h-full flex-col",get ref(){return p(n)},set ref(d){U(n,d,!0)},get value(){return r().lastActivatedId},set value(d){r().lastActivatedId=d},children:(d,u)=>{var g=Fq(),f=P(g);M(f,()=>bS,(m,v)=>{v(m,{class:"h-8 shadow-none",get ref(){return p(i)},set ref(b){U(i,b,!0)},children:(b,x)=>{var y=F(),S=P(y);Kt(S,17,()=>r().activeTools,rr,(I,C)=>{var D=F(),E=P(D);const O=R(()=>r().lastActivatedId===p(C).id?"bg-neutral-2 hover:bg-neutral-3":"bg-neutral-1 hover:bg-neutral-2");M(E,()=>_S,(A,k)=>{k(A,{get value(){return p(C).id},get class(){return`border-neutral-5 text-neutral-11 flex w-full items-center justify-between border-b p-0 px-4 py-1 ${p(O)??""}`},children:(V,G)=>{var K=Dq(),j=P(K),Q=re(j,!0);ne(j);var te=Y(j,2);er(te,{variant:"ghost",class:"hover:bg-accent-5 h-auto rounded-md p-1",onclick:()=>r().deactivate(p(C).id),children:(q,Z)=>{Je(q,{get icon(){return ot.defaultClose},width:"1rem"})},$$slots:{default:!0}}),Ee(()=>pt(Q,p(C).label)),w(V,K)},$$slots:{default:!0}})}),w(I,D)}),w(b,y)},$$slots:{default:!0}})});var h=Y(f,2);Kt(h,17,()=>r().activeTools,rr,(m,v)=>{var b=F(),x=P(b);M(x,()=>yS,(y,S)=>{S(y,{get value(){return p(v).id},class:"mt-0 overflow-hidden",get style(){return`height: ${p(a)??""}px`},children:(I,C)=>{var D=F(),E=P(D);M(E,()=>t9,(O,A)=>{A(O,{class:"relative h-full",children:(k,V)=>{var G=Nq(),K=P(G);M(K,()=>r9,(Q,te)=>{te(Q,{class:"h-full max-h-full w-full",children:(q,Z)=>{var ee=F(),de=P(ee);M(de,()=>p(v).ToolComponent,(J,ie)=>{ie(J,{})}),w(q,ee)},$$slots:{default:!0}})});var j=Y(K,2);M(j,()=>n9,(Q,te)=>{te(Q,{orientation:"vertical",class:"bg-neutral-2 hover:bg-dark-10 data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out-0 data-[state=visible]:fade-in-0 flex w-2.5 touch-none select-none rounded-none border-l border-l-transparent p-px transition-all duration-200 hover:w-3",children:(q,Z)=>{var ee=F(),de=P(ee);M(de,()=>i9,(J,ie)=>{ie(J,{class:"bg-neutral-5 flex-1 rounded-full"})}),w(q,ee)},$$slots:{default:!0}})}),w(k,G)},$$slots:{default:!0}})}),w(I,D)},$$slots:{default:!0}})}),w(m,b)}),w(d,g)},$$slots:{default:!0}})}),w(t,s),ce()}function Lq(t,e){const r=Wa(e,["children","$$slots","$$events","$$legacy"]);Ga(t,Be({name:"chevron-right"},()=>r,{iconNode:[["path",{d:"m9 18 6-6-6-6"}]],children:(i,a)=>{var s=F(),o=P(s);Ha(o,e,"default",{}),w(i,s)},$$slots:{default:!0}}))}function Bq(t){return Array.isArray(t)?t:typeof t=="object"&&"_errors"in t&&t._errors!==void 0?t._errors:[]}function Fm(t,e){const r=t.split(/[[\].]/).filter(Boolean);let n=e;for(const i of r){if(typeof n!="object"||n===null)return;n=n[i]}return n}function Vq({fieldErrorsId:t=void 0,descriptionId:e=void 0,errors:r}){let n="";return e&&(n+=`${e} `),r.length&&t&&(n+=t),n?n.trim():void 0}function jq(t){if("required"in t)return t.required?"true":void 0}function zq(t){return t&&t.length?"true":void 0}function F0(t){return t&&t.length?"":void 0}var Jh,jn,wu,Zs,Js,Su,xu,Iu,Cu,Pu,Eu,Au,Tu;class Uq{constructor(e){L(this,Jh);L(this,jn);L(this,wu);L(this,Zs);L(this,Js);L(this,Su);L(this,xu,R(()=>_(this,jn).current));L(this,Iu,R(()=>Bq(Fm(_(this,jn).current,_(this,wu).current))));L(this,Cu,R(()=>Fm(_(this,jn).current,_(this,Zs).current)??{}));L(this,Pu,R(()=>_(this,Js).current?Fm(_(this,jn).current,_(this,Js).current)===!0:!1));L(this,Eu,Me(null));L(this,Au,Me(null));L(this,Tu,R(()=>({value:_(this,Su).current[_(this,jn).current],errors:this.errors,tainted:this.tainted,constraints:_(this,Zs).current[_(this,jn).current]??{}})));De(this,Jh,e.form),De(this,jn,e.name),De(this,wu,uf(e.form.current.errors)),De(this,Zs,uf(e.form.current.constraints)),De(this,Js,uf(e.form.current.tainted)),De(this,Su,uf(e.form.current.form))}get name(){return p(_(this,xu))}set name(e){U(_(this,xu),e)}get errors(){return p(_(this,Iu))}set errors(e){U(_(this,Iu),e)}get constraints(){return p(_(this,Cu))}set constraints(e){U(_(this,Cu),e)}get tainted(){return p(_(this,Pu))}set tainted(e){U(_(this,Pu),e)}get errorNode(){return p(_(this,Eu))}set errorNode(e){U(_(this,Eu),e,!0)}get descriptionNode(){return p(_(this,Au))}set descriptionNode(e){U(_(this,Au),e,!0)}get snippetProps(){return p(_(this,Tu))}set snippetProps(e){U(_(this,Tu),e)}}Jh=new WeakMap,jn=new WeakMap,wu=new WeakMap,Zs=new WeakMap,Js=new WeakMap,Su=new WeakMap,xu=new WeakMap,Iu=new WeakMap,Cu=new WeakMap,Pu=new WeakMap,Eu=new WeakMap,Au=new WeakMap,Tu=new WeakMap;var Ou,eo,ku,Ru,Mu,Du;class Gq{constructor(e,r){L(this,Ou);L(this,eo);z(this,"field");L(this,ku,R(()=>F0(this.field.errors)));L(this,Ru,R(()=>({errors:this.field.errors,errorProps:this.errorProps})));L(this,Mu,R(()=>({id:_(this,eo).current,"data-fs-error":p(_(this,ku)),"data-fs-field-errors":"","aria-live":"assertive"})));L(this,Du,R(()=>({"data-fs-field-error":"","data-fs-error":p(_(this,ku))})));De(this,Ou,e.ref),De(this,eo,e.id),this.field=r,dt({id:_(this,eo),ref:_(this,Ou),onRefChange:n=>{this.field.errorNode=n}})}get snippetProps(){return p(_(this,Ru))}set snippetProps(e){U(_(this,Ru),e)}get fieldErrorsProps(){return p(_(this,Mu))}set fieldErrorsProps(e){U(_(this,Mu),e)}get errorProps(){return p(_(this,Du))}set errorProps(e){U(_(this,Du),e)}}Ou=new WeakMap,eo=new WeakMap,ku=new WeakMap,Ru=new WeakMap,Mu=new WeakMap,Du=new WeakMap;var Nu;class Hq{constructor(e,r){z(this,"id");z(this,"field");L(this,Nu,R(()=>{var e,r;return{id:this.id.current,name:this.field.name,"data-fs-error":F0(this.field.errors),"aria-describedby":Vq({fieldErrorsId:(e=this.field.errorNode)==null?void 0:e.id,descriptionId:(r=this.field.descriptionNode)==null?void 0:r.id,errors:this.field.errors}),"aria-invalid":zq(this.field.errors),"aria-required":jq(this.field.constraints),"data-fs-control":""}}));this.id=e.id,this.field=r}get props(){return p(_(this,Nu))}set props(e){U(_(this,Nu),e)}}Nu=new WeakMap;var Fu,to,$u;class Wq{constructor(e,r){L(this,Fu);L(this,to);z(this,"control");L(this,$u,R(()=>({id:_(this,to).current,"data-fs-label":"","data-fs-error":F0(this.control.field.errors),for:this.control.id.current})));De(this,Fu,e.ref),De(this,to,e.id),this.control=r,dt({id:_(this,to),ref:_(this,Fu)})}get props(){return p(_(this,$u))}set props(e){U(_(this,$u),e)}}Fu=new WeakMap,to=new WeakMap,$u=new WeakMap;const SS=Symbol.for("formsnap.form-field"),xS=Symbol.for("formsnap.form-control");function Kq(t){return Ji(SS,new Uq(t))}function IS(){return yr(SS)}function qq(t){return new Gq(t,IS())}function Yq(t){return Ji(xS,new Hq(t,IS()))}function Xq(){return yr(xS)}function Qq(t){return new Wq(t,Xq())}let r_=0;function $0(t="formsnap"){return r_++,`${t}-${r_}`}function Zq(t,e){le(e,!0);const r=Kq({form:W.with(()=>e.form),name:W.with(()=>e.name)});var n=F(),i=P(n);ge(i,()=>e.children??Ve,()=>r.snippetProps),w(t,n),ce()}function Jq(t,e){le(e,!0);let r=T(e,"id",19,$0);const n=Yq({id:W.with(()=>r())});var i=F(),a=P(i);ge(a,()=>e.children??Ve,()=>({props:n.props})),w(t,i),ce()}var eY=H("<label><!></label>");function tY(t,e){le(e,!0);let r=T(e,"id",19,$0),n=T(e,"ref",15,null),i=Ce(e,["$$slots","$$events","$$legacy","id","ref","children","child"]);const a=Qq({id:W.with(()=>r()),ref:W.with(()=>n(),u=>n(u))}),s=R(()=>Ge(i,a.props));var o=F(),l=P(o);{var c=u=>{var g=F(),f=P(g);ge(f,()=>e.child,()=>({props:p(s)})),w(u,g)},d=u=>{var g=eY();let f;var h=re(g);ge(h,()=>e.children??Ve),ne(g),Ee(()=>f=Fe(g,f,{...p(s)})),w(u,g)};fe(l,u=>{e.child?u(c):u(d,!1)})}w(t,o),ce()}var rY=H("<div> </div>"),nY=H("<div><!></div>");function iY(t,e){le(e,!0);let r=T(e,"id",19,$0),n=T(e,"ref",15,null),i=Ce(e,["$$slots","$$events","$$legacy","id","ref","children","child"]);const a=qq({id:W.with(()=>r()),ref:W.with(()=>n(),u=>n(u))}),s=R(()=>Ge(i,a.fieldErrorsProps));var o=F(),l=P(o);{var c=u=>{var g=F(),f=P(g),h=fr(()=>({props:p(s),...a.snippetProps}));ge(f,()=>e.child,()=>p(h)),w(u,g)},d=u=>{var g=nY();let f;var h=re(g);{var m=b=>{var x=F(),y=P(x);ge(y,()=>e.children,()=>a.snippetProps),w(b,x)},v=b=>{var x=F(),y=P(x);Kt(y,17,()=>a.field.errors,rr,(S,I)=>{var C=rY();let D;var E=re(C,!0);ne(C),Ee(()=>{D=Fe(C,D,{...a.errorProps}),pt(E,p(I))}),w(S,C)}),w(b,x)};fe(h,b=>{e.children?b(m):b(v,!1)})}ne(g),Ee(()=>f=Fe(g,f,{...p(s)})),w(u,g)};fe(l,u=>{e.child?u(c):u(d,!1)})}w(t,o),ce()}function aY(t,e){le(e,!0);let r=T(e,"ref",15,null),n=T(e,"loading",3,!1),i=Ce(e,["$$slots","$$events","$$legacy","ref","loading"]);var a=F(),s=P(a);{var o=c=>{var d=F(),u=P(d);M(u,()=>er,(g,f)=>{f(g,Be({type:"submit"},()=>i,{children:(h,m)=>{Je(h,{get icon(){return ot.defaultSpinnerIcon},width:"1.5rem",class:"animate-spin"})},$$slots:{default:!0}}))}),w(c,d)},l=c=>{var d=F(),u=P(d);M(u,()=>er,(g,f)=>{f(g,Be({type:"submit"},()=>i,{get ref(){return r()},set ref(h){r(h)}}))}),w(c,d)};fe(s,c=>{n()?c(o):c(l,!1)})}w(t,a),ce()}var sY=H("<li> </li>"),oY=H("<li> </li>"),lY=H("<ul><!> <!></ul>");function on(t,e){le(e,!0);let r=T(e,"ref",15,null),n=Ce(e,["$$slots","$$events","$$legacy","ref","class","errorClasses","children","handlerErrors"]);var i=F(),a=P(i);const s=R(()=>Ue("text-destructive-11 text-sm font-medium",e.class));M(a,()=>iY,(o,l)=>{l(o,Be({get class(){return p(s)}},()=>n,{get ref(){return r()},set ref(d){r(d)},children:(d,u)=>{let g=()=>u==null?void 0:u().errors,f=()=>u==null?void 0:u().errorProps;var h=F(),m=P(h);{var v=x=>{var y=F(),S=P(y);ge(S,()=>e.children,()=>({errors:g(),errorProps:f()})),w(x,y)},b=x=>{var y=lY(),S=re(y);Kt(S,17,g,rr,(D,E)=>{var O=sY();let A;var k=re(O,!0);ne(O),Ee(V=>{A=Fe(O,A,{...f(),class:V}),pt(k,p(E))},[()=>Ue(e.errorClasses,"border-destructive-7 bg-destructive-3 border-x p-2 first:rounded-t-sm first:border-t last:mb-4 last:rounded-b-sm last:border-b")]),w(D,O)});var I=Y(S,2);{var C=D=>{var E=F(),O=P(E);Kt(O,17,()=>e.handlerErrors,rr,(A,k)=>{var V=oY();let G;var K=re(V,!0);ne(V),Ee(j=>{G=Fe(V,G,{...f(),class:j}),pt(K,p(k))},[()=>Ue(e.errorClasses,"border-destructive-7 bg-destructive-3 border-x p-2 first:rounded-t-sm first:border-t last:mb-4 last:rounded-b-sm last:border-b")]),w(A,V)}),w(D,E)};fe(I,D=>{e.handlerErrors&&D(C)})}ne(y),w(x,y)};fe(m,x=>{e.children?x(v):x(b,!1)})}w(d,h)},$$slots:{default:!0}}))}),w(t,i),ce()}var cY=H("<div><!></div>");function Kr(t,e){le(e,!0);let r=T(e,"ref",15,null),n=Ce(e,["$$slots","$$events","$$legacy","ref","class","form","name","children"]);var i=F(),a=P(i);M(a,()=>Zq,(s,o)=>{o(s,{get form(){return e.form},get name(){return e.name},children:(c,d)=>{let u=()=>d==null?void 0:d().constraints,g=()=>d==null?void 0:d().errors,f=()=>d==null?void 0:d().tainted,h=()=>d==null?void 0:d().value;var m=cY();let v;var b=re(m);ge(b,()=>e.children??Ve,()=>({constraints:u(),errors:g(),tainted:f(),value:h()})),ne(m),vo(m,x=>r(x),()=>r()),Ee(x=>v=Fe(m,v,{class:x,...n}),[()=>Ue("space-y-4",e.class)]),w(c,m)},$$slots:{default:!0}})}),w(t,i),ce()}var dY=H("<!> <!>",1);function uY(t,e){le(e,!0);var r=F(),n=P(r);M(n,()=>go,(i,a)=>{a(i,{children:(s,o)=>{var l=dY(),c=P(l);M(c,()=>po,(u,g)=>{g(u,{class:"w-8",children:(f,h)=>{Je(f,{get icon(){return ot.formFieldDescriptionIcon},width:"1rem",class:"text-neutral-11 hover:text-neutral-10 ml-2"})},$$slots:{default:!0}})});var d=Y(c,2);M(d,()=>ho,(u,g)=>{g(u,{class:"max-w-2xl",children:(f,h)=>{He();var m=Ke();Ee(()=>pt(m,e.description)),w(f,m)},$$slots:{default:!0}})}),w(s,l)},$$slots:{default:!0}})}),w(t,r),ce()}function fY(t,e){le(e,!0);let r=T(e,"ref",15,null),n=Ce(e,["$$slots","$$events","$$legacy","ref","class"]);var i=F(),a=P(i);const s=R(()=>Ue("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",e.class));M(a,()=>uV,(o,l)=>{l(o,Be({get class(){return p(s)}},()=>n,{get ref(){return r()},set ref(c){r(c)}}))}),w(t,i),ce()}var hY=H('<span class="translate-y-[2px]">*</span>'),gY=H('<div class=" decoration-destructive-8 underline-offset-4 data-[fs-error]:underline data-[fs-error]:decoration-wavy"><!></div> <div class="flex items-center"><!> <!></div>',1);function qr(t,e){le(e,!0);let r=T(e,"ref",15,null),n=T(e,"optional",3,!1),i=Ce(e,["$$slots","$$events","$$legacy","ref","children","class","description","optional"]);var a=F(),s=P(a);M(s,()=>tY,(o,l)=>{l(o,Be(()=>i,{get ref(){return r()},set ref(d){r(d)},child:(d,u)=>{let g=()=>u==null?void 0:u().props;const f=R(()=>Ue("flex items-center justify-between",e.class));fY(d,Be(g,{get class(){return p(f)},children:(h,m)=>{var v=gY(),b=P(v),x=re(b);ge(x,()=>e.children??Ve),ne(b);var y=Y(b,2),S=re(y);{var I=E=>{var O=hY();w(E,O)};fe(S,E=>{n()||E(I)})}var C=Y(S,2);{var D=E=>{uY(E,{get description(){return e.description}})};fe(C,E=>{e.description&&E(D)})}ne(y),w(h,v)},$$slots:{default:!0}}))},$$slots:{child:!0}}))}),w(t,a),ce()}const Yr=Jq;var pY=H('<span class="absolute left-2 flex size-3.5 items-center justify-center"><!></span> <!>',1);function n_(t,e){le(e,!0);let r=T(e,"ref",15,null),n=T(e,"checked",15,!1),i=T(e,"indeterminate",15,!1),a=Ce(e,["$$slots","$$events","$$legacy","ref","class","checked","indeterminate","children"]);var s=F(),o=P(s);const l=R(()=>Ue("data-[highlighted]:bg-accent-5 data-[highlighted]:text-accent-12 relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e.class));M(o,()=>qB,(c,d)=>{d(c,Be({get class(){return p(l)}},()=>a,{get ref(){return r()},set ref(g){r(g)},get checked(){return n()},set checked(g){n(g)},get indeterminate(){return i()},set indeterminate(g){i(g)},children:(g,f)=>{let h=()=>f==null?void 0:f().checked,m=()=>f==null?void 0:f().indeterminate;var v=pY(),b=P(v),x=re(b);{var y=C=>{yW(C,{class:"size-4"})},S=C=>{const D=R(()=>Ue("size-4",!h()&&"text-transparent"));J4(C,{get class(){return p(D)}})};fe(x,C=>{m()?C(y):C(S,!1)})}ne(b);var I=Y(b,2);ge(I,()=>e.children??Ve),w(g,v)},$$slots:{default:!0}}))}),w(t,s),ce()}function Qo(t,e){le(e,!0);let r=T(e,"ref",15,null),n=T(e,"sideOffset",3,8),i=T(e,"alignOffset",19,()=>-4),a=T(e,"align",3,"start"),s=T(e,"side",3,"bottom"),o=Ce(e,["$$slots","$$events","$$legacy","ref","class","sideOffset","alignOffset","align","side"]);var l=F(),c=P(l);const d=R(()=>Ue("bg-neutral-2 text-neutral-11 z-50 min-w-[12rem] rounded-md border p-1 shadow-md focus:outline-none",e.class));M(c,()=>RV,(u,g)=>{g(u,Be({get sideOffset(){return n()},get align(){return a()},get alignOffset(){return i()},get side(){return s()},get class(){return p(d)}},()=>o,{get ref(){return r()},set ref(f){r(f)}}))}),w(t,l),ce()}function i_(t,e){le(e,!0);let r=T(e,"ref",15,null),n=T(e,"inset",3,void 0),i=Ce(e,["$$slots","$$events","$$legacy","ref","class","inset"]);var a=F(),s=P(a);const o=R(()=>Ue("px-2 py-1.5 text-sm font-semibold",n()&&"pl-8",e.class));M(s,()=>a9,(l,c)=>{c(l,Be({get class(){return p(o)}},()=>i,{get ref(){return r()},set ref(d){r(d)}}))}),w(t,a),ce()}function Xr(t,e){le(e,!0);let r=T(e,"ref",15,null),n=T(e,"inset",3,void 0),i=Ce(e,["$$slots","$$events","$$legacy","ref","class","inset"]);var a=F(),s=P(a);const o=R(()=>Ue("data-[highlighted]:bg-accent-5 data-[highlighted]:text-accent-12 relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n()&&"pl-8",e.class));M(s,()=>NB,(l,c)=>{c(l,Be({get class(){return p(o)}},()=>i,{get ref(){return r()},set ref(d){r(d)}}))}),w(t,a),ce()}var mY=H('<span class="absolute left-2 flex size-3.5 items-center justify-center"><!></span> <!>',1);function a_(t,e){le(e,!0);let r=T(e,"ref",15,null),n=Ce(e,["$$slots","$$events","$$legacy","ref","class","children"]);var i=F(),a=P(i);const s=R(()=>Ue("data-[highlighted]:bg-accent-5 data-[highlighted]:text-accent-12 relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e.class));M(a,()=>s9,(o,l)=>{l(o,Be({get class(){return p(s)}},()=>n,{get ref(){return r()},set ref(d){r(d)},children:(d,u)=>{let g=()=>u==null?void 0:u().checked;var f=mY(),h=P(f),m=re(h);{var v=x=>{o9(x,{class:"size-2 fill-current"})};fe(m,x=>{g()&&x(v)})}ne(h);var b=Y(h,2);ge(b,()=>e.children??Ve,()=>({checked:g()})),w(d,f)},$$slots:{default:!0}}))}),w(t,i),ce()}function s_(t,e){le(e,!0);let r=T(e,"ref",15,null),n=Ce(e,["$$slots","$$events","$$legacy","ref","class"]);var i=F(),a=P(i);const s=R(()=>Ue("bg-neutral-3 -mx-1 my-1 h-px",e.class));M(a,()=>BB,(o,l)=>{l(o,Be({get class(){return p(s)}},()=>n,{get ref(){return r()},set ref(c){r(c)}}))}),w(t,i),ce()}function vY(t,e){le(e,!0);let r=T(e,"ref",15,null),n=Ce(e,["$$slots","$$events","$$legacy","ref","class"]);var i=F(),a=P(i);const s=R(()=>Ue("bg-neutral-2 text-neutral-11 z-50 min-w-max rounded-md border p-1 focus:outline-none",e.class));M(a,()=>GB,(o,l)=>{l(o,Be({get class(){return p(s)}},()=>n,{get ref(){return r()},set ref(c){r(c)}}))}),w(t,i),ce()}var yY=H("<!> <!>",1);function bY(t,e){le(e,!0);let r=T(e,"ref",15,null),n=T(e,"inset",3,void 0),i=Ce(e,["$$slots","$$events","$$legacy","ref","class","inset","children"]);var a=F(),s=P(a);const o=R(()=>Ue("data-[highlighted]:bg-accent-5 data-[state=open]:bg-accent-5 data-[highlighted]:text-accent-12 data-[state=open]:text-accent-12 flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n()&&"pl-8",e.class));M(s,()=>WB,(l,c)=>{c(l,Be({get class(){return p(o)}},()=>i,{get ref(){return r()},set ref(d){r(d)},children:(d,u)=>{var g=yY(),f=P(g);ge(f,()=>e.children??Ve);var h=Y(f,2);Lq(h,{class:"ml-auto size-4"}),w(d,g)},$$slots:{default:!0}}))}),w(t,a),ce()}function Zo(t,e){le(e,!0);let r=T(e,"ref",15,null),n=Ce(e,["$$slots","$$events","$$legacy","ref","class"]);var i=F(),a=P(i);const s=R(()=>Ue("data-[highlighted]:bg-accent-5 data-[state=open]:bg-accent-5 data-[highlighted]:text-accent-12 data-[state=open]:text-accent-12 flex cursor-default select-none items-center rounded-none border-b px-3 py-1.5 text-sm font-medium outline-none",e.class));M(a,()=>DV,(o,l)=>{l(o,Be({get class(){return p(s)}},()=>n,{get ref(){return r()},set ref(c){r(c)}}))}),w(t,i),ce()}function _Y(t,e){le(e,!0);let r=T(e,"ref",15,null),n=Ce(e,["$$slots","$$events","$$legacy","ref","class"]);var i=F(),a=P(i);const s=R(()=>Ue("bg-neutral-2 flex h-8 w-full items-center rounded-none border-b p-0",e.class));M(a,()=>CV,(o,l)=>{l(o,Be({get class(){return p(s)}},()=>n,{get ref(){return r()},set ref(c){r(c)}}))}),w(t,i),ce()}const Jo=PV,Vf=$B,wY=MB,SY=l9;function xY(t,e,r){const n=H_(t,{enabled:e,direction:r});function i(l){return n.value.enabled.includes(l)}function a(l){n.value.enabled.includes(l)||n.value.enabled.push(l)}function s(l){n.value.enabled.includes(l)&&n.value.enabled.length>1&&(n.value.enabled=n.value.enabled.filter(c=>c!==l))}function o(){n.value.enabled=[],e.forEach(l=>{n.value.enabled.push(l)})}return{get direction(){return n.value.direction},set direction(l){n.value.direction=l},isEnabled:i,enable:a,disable:s,reset:o}}function L0(){return yr(e0)}const CS="userSettingsContext";function IY(){const t=new G_("unitSettings",{distance:"metric",temperature:"metric",mass:"metric",volume:"metric"});return{get units(){return t.value},set units(e){t.value=e}}}function _te(){return Ji(CS,IY())}function CY(){return yr(CS)}function Ah(t,e,r){let n=Me(void 0),i=Me(!0),a=Me(!0),s=Me(!1),o=Me(void 0);return qe(()=>t.subscribeWithStatus(e,c=>{U(n,c.results,!0),U(i,c.fetching,!0),U(a,c.fetchingLocal,!0),U(s,c.fetchingRemote,!0),U(o,c.error,!0)},r)),{get fetching(){return p(i)},get fetchingLocal(){return p(a)},get fetchingRemote(){return p(s)},get results(){return p(n)},get error(){return p(o)}}}const PS="gardenContext";function PY(t){let e=Me("");const r=R(()=>Ah(t.triplit,t.triplit.query("accounts").Id("$session.accountId").Include("profile"))),n=R(()=>Ah(t.triplit,t.triplit.query("gardens").Id(p(e)))),i=R(()=>{if(!p(r).results||!p(r).results[0]||!p(r).results[0].profile||!p(n).results||!p(n).results[0])return null;const s=p(r).results[0].profile,o=p(n).results[0];return o.adminIds.has(s.id)?"ADMIN":o.editorIds.has(s.id)?"EDITOR":o.viewerIds.has(s.id)?"VIEWER":null});function a(s){if(t.disablePermissions)return!0;if(p(e)===null||p(i)===null)return!1;const o=U5(s);return o==="ADMIN"&&p(i)==="ADMIN"||o==="EDITOR"&&(p(i)==="ADMIN"||p(i)==="EDITOR")?!0:o==="VIEWER"&&(p(i)==="ADMIN"||p(i)==="EDITOR"||p(i)==="VIEWER")}return{get id(){return p(e)},get role(){return p(i)},set id(s){U(e,s,!0)},authorize:a}}function EY(t){return Ji(PS,PY(t))}function AY(){return yr(PS)}const ES=()=>{const t=m9;return{page:{subscribe:t.page.subscribe},navigating:{subscribe:t.navigating.subscribe},updated:t.updated}},el={subscribe(t){return ES().page.subscribe(t)}},o_={subscribe(t){return ES().navigating.subscribe(t)}};function U1(t,e,r){return t[e]=r,"skip"}function TY(t,e){return e.value!==void 0&&typeof e.value!="object"&&e.path.length<t.length}function Oi(t,e,r={}){r.modifier||(r.modifier=i=>TY(e,i)?void 0:i.value);const n=Zn(t,e,r.modifier);if(n)return r.value===void 0||r.value(n.value)?n:void 0}function Zn(t,e,r){if(!e.length)return;const n=[e[0]];let i=t;for(;i&&n.length<e.length;){const s=n[n.length-1],o=r?r({parent:i,key:String(s),value:i[s],path:n.map(l=>String(l)),isLeaf:!1,set:l=>U1(i,s,l)}):i[s];if(o===void 0)return;i=o,n.push(e[n.length])}if(!i)return;const a=e[e.length-1];return{parent:i,key:String(a),value:i[a],path:e.map(s=>String(s)),isLeaf:!0,set:s=>U1(i,a,s)}}function mi(t,e,r=[]){for(const n in t){const i=t[n],a=i===null||typeof i!="object",s={parent:t,key:n,value:i,path:r.concat([n]),isLeaf:a,set:l=>U1(t,n,l)},o=e(s);if(o==="abort")return o;if(o==="skip")continue;if(!a){const l=mi(i,e,s.path);if(l==="abort")return l}}}function OY(t,e){return t===e||t.size===e.size&&[...t].every(r=>e.has(r))}function l_(t,e){const r=new Map;function n(o,l){return o instanceof Date&&l instanceof Date&&o.getTime()!==l.getTime()||o instanceof Set&&l instanceof Set&&!OY(o,l)||o instanceof File&&l instanceof File&&o!==l}function i(o){return o instanceof Date||o instanceof Set||o instanceof File}function a(o,l){const c=l?Zn(l,o.path):void 0;function d(){return r.set(o.path.join(" "),o.path),"skip"}if(i(o.value)&&(!i(c==null?void 0:c.value)||n(o.value,c.value)))return d();o.isLeaf&&(!c||o.value!==c.value)&&d()}mi(t,o=>a(o,e)),mi(e,o=>a(o,t));const s=Array.from(r.values());return s.sort((o,l)=>o.length-l.length),s}function Ln(t,e,r){const n=typeof r=="function";for(const i of e){const a=Zn(t,i,({parent:s,key:o,value:l})=>((l===void 0||typeof l!="object")&&(s[o]={}),s[o]));a&&(a.parent[a.key]=n?r(i,a):r)}}function Is(t){return t.toString().split(/[[\].]+/).filter(e=>e)}function al(t){return t.reduce((e,r)=>{const n=String(r);return typeof r=="number"||/^\d+$/.test(n)?e+=`[${n}]`:e?e+=`.${n}`:e+=n,e},"")}function sl(t){const e={}.toString.call(t).slice(8,-1);if(e=="Set")return new Set([...t].map(r=>sl(r)));if(e=="Map")return new Map([...t].map(r=>[sl(r[0]),sl(r[1])]));if(e=="Date")return new Date(t.getTime());if(e=="RegExp")return RegExp(t.source,t.flags);if(e=="Array"||e=="Object"){const r=e=="Object"?Object.create(Object.getPrototypeOf(t)):[];for(const n in t)r[n]=sl(t[n]);return r}return t}function $r(t){return t&&typeof t=="object"?sl(t):t}function up(t,e){if(typeof t=="boolean")throw new Wn("Schema property cannot be defined as boolean.",e)}const jf=t=>{if(typeof t=="object"&&t!==null){if(typeof Object.getPrototypeOf=="function"){const e=Object.getPrototypeOf(t);return e===Object.prototype||e===null}return Object.prototype.toString.call(t)==="[object Object]"}return!1},tn=(...t)=>t.reduce((e,r)=>{if(r===void 0)return e;if(Array.isArray(r))throw new TypeError("Arguments provided to ts-deepmerge must be objects, not arrays.");return Object.keys(r).forEach(n=>{["__proto__","constructor","prototype"].includes(n)||(Array.isArray(e[n])&&Array.isArray(r[n])?e[n]=tn.options.mergeArrays?tn.options.uniqueArrayItems?Array.from(new Set(e[n].concat(r[n]))):[...e[n],...r[n]]:r[n]:jf(e[n])&&jf(r[n])?e[n]=tn(e[n],r[n]):!jf(e[n])&&jf(r[n])?e[n]=tn(r[n],void 0):e[n]=r[n]===void 0?tn.options.allowUndefinedOverrides?r[n]:e[n]:r[n])}),e},{}),G1={allowUndefinedOverrides:!0,mergeArrays:!0,uniqueArrayItems:!0};tn.options=G1;tn.withOptions=(t,...e)=>{tn.options=Object.assign(Object.assign({},G1),t);const r=tn(...e);return tn.options=G1,r};const kY=["unix-time","bigint","any","symbol","set","int64"];function Xn(t,e,r){var c;up(t,r);const n=AS(t,r),i=t.items&&n.includes("array")?(Array.isArray(t.items)?t.items:[t.items]).filter(d=>typeof d!="boolean"):void 0,a=t.additionalProperties&&typeof t.additionalProperties=="object"&&n.includes("object")?Object.fromEntries(Object.entries(t.additionalProperties).filter(([,d])=>typeof d!="boolean")):void 0,s=t.properties&&n.includes("object")?Object.fromEntries(Object.entries(t.properties).filter(([,d])=>typeof d!="boolean")):void 0,o=(c=RY(t))==null?void 0:c.filter(d=>d.type!=="null"&&d.const!==null),l={types:n.filter(d=>d!=="null"),isOptional:e,isNullable:n.includes("null"),schema:t,union:o!=null&&o.length?o:void 0,array:i,properties:s,additionalProperties:a,required:t.required};return!t.allOf||!t.allOf.length?l:{...tn.withOptions({allowUndefinedOverrides:!1},l,...t.allOf.map(d=>Xn(d,!1,[]))),schema:t}}function AS(t,e){up(t,e);let r=t.const===null?["null"]:[];if(t.type&&(r=Array.isArray(t.type)?t.type:[t.type]),t.anyOf&&(r=t.anyOf.flatMap(n=>AS(n,e))),r.includes("array")&&t.uniqueItems){const n=r.findIndex(i=>i!="array");r[n]="set"}else if(t.format&&kY.includes(t.format)&&(r.unshift(t.format),t.format=="unix-time"||t.format=="int64")){const n=r.findIndex(i=>i=="integer");r.splice(n,1)}return t.const&&t.const!==null&&typeof t.const!="function"&&r.push(typeof t.const),Array.from(new Set(r))}function RY(t){if(!(!t.anyOf||!t.anyOf.length))return t.anyOf.filter(e=>typeof e!="boolean")}function MY(t,e=!1,r=[]){return ol(t,e,r)}function ol(t,e,r){var c;if(!t)throw new Wn("Schema was undefined",r);const n=Xn(t,e,r);if(!n)return;let i;if("default"in t)if(n.types.includes("object")&&t.default&&typeof t.default=="object"&&!Array.isArray(t.default))i=t.default;else{if(n.types.length>1&&n.types.includes("unix-time")&&(n.types.includes("integer")||n.types.includes("number")))throw new Wn("Cannot resolve a default value with a union that includes a date and a number/integer.",r);const[d]=n.types;return DY(d,t.default)}let a;const s=()=>!n.union||n.union.length<2?!1:n.union.some(d=>d.enum)?!0:(a||(a=new Set(n.types.map(d=>["integer","unix-time"].includes(d)?"number":d))),a.size>1);let o;if(!i&&n.union){const d=n.union.filter(u=>typeof u!="boolean"&&u.default!==void 0);if(d.length==1)return ol(d[0],e,r);if(d.length>1)throw new Wn("Only one default value can exist in a union, or set a default value for the whole union.",r);if(n.isNullable)return null;if(n.isOptional)return;if(s())throw new Wn("Multi-type unions must have a default value, or exactly one of the union types must have.",r);n.union.length&&n.types[0]=="object"&&(o===void 0&&(o={}),o=n.union.length>1?tn.withOptions({allowUndefinedOverrides:!0},...n.union.map(u=>ol(u,e,r))):ol(n.union[0],e,r))}if(!i){if(n.isNullable)return null;if(n.isOptional)return}if(n.properties)for(const[d,u]of Object.entries(n.properties)){up(u,[...r,d]);const g=i&&i[d]!==void 0?i[d]:ol(u,!((c=n.required)!=null&&c.includes(d)),[...r,d]);o===void 0&&(o={}),o[d]=g}else if(i)return i;if(t.enum)return t.enum[0];if(s())throw new Wn("Default values cannot have more than one type.",r);if(n.types.length==0)return;const[l]=n.types;return o??NY(l,t.enum)}function DY(t,e){switch(t){case"set":return Array.isArray(e)?new Set(e):e;case"Date":case"date":case"unix-time":if(typeof e=="string"||typeof e=="number")return new Date(e);break;case"bigint":if(typeof e=="string"||typeof e=="number")return BigInt(e);break;case"symbol":if(typeof e=="string"||typeof e=="number")return Symbol(e);break}return e}function NY(t,e){switch(t){case"string":return e&&e.length>0?e[0]:"";case"number":case"integer":return e&&e.length>0?e[0]:0;case"boolean":return!1;case"array":return[];case"object":return{};case"null":return null;case"Date":case"date":case"unix-time":return;case"int64":case"bigint":return BigInt(0);case"set":return new Set;case"symbol":return Symbol();case"undefined":case"any":return;default:throw new Wn("Schema type or format not supported, requires explicit default value: "+t)}}class Jt extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Jt.prototype)}}class Wn extends Jt{constructor(r,n){super((n&&n.length?`[${Array.isArray(n)?n.join("."):n}] `:"")+r);z(this,"path");this.path=Array.isArray(n)?n.join("."):n,Object.setPrototypeOf(this,Wn.prototype)}}function FY(t,e){var i;const r={};function n(a){if("_errors"in r||(r._errors=[]),!Array.isArray(r._errors))if(typeof r._errors=="string")r._errors=[r._errors];else throw new Jt("Form-level error was not an array.");r._errors.push(a.message)}for(const a of t){if(!a.path||a.path.length==1&&!a.path[0]){n(a);continue}const o=!/^\d$/.test(String(a.path[a.path.length-1]))&&((i=Oi(e,a.path.filter(u=>/\D/.test(String(u)))))==null?void 0:i.value),l=Zn(r,a.path,({value:u,parent:g,key:f})=>(u===void 0&&(g[f]={}),g[f]));if(!l){n(a);continue}const{parent:c,key:d}=l;o?(d in c||(c[d]={}),"_errors"in c[d]?c[d]._errors.push(a.message):c[d]._errors=[a.message]):d in c?c[d].push(a.message):c[d]=[a.message]}return r}function c_(t,e,r){return r?t:(mi(e,n=>{Array.isArray(n.value)&&n.set(void 0)}),mi(t,n=>{!Array.isArray(n.value)&&n.value!==void 0||Ln(e,[n.path],n.value)}),e)}function $Y(t){return TS(t,[])}function TS(t,e){return Object.entries(t).filter(([,n])=>n!==void 0).flatMap(([n,i])=>{if(Array.isArray(i)&&i.length>0){const a=e.concat([n]);return{path:al(a),messages:i}}else return TS(t[n],e.concat([n]))})}function d_(t){t.flashMessage&&H1(t)&&(document.cookie=`flash=; Max-Age=0; Path=${t.flashMessage.cookiePath??"/"};`)}function H1(t){return t.flashMessage?t.syncFlashMessage:!1}function W1(t){const e=JSON.parse(t);return e.data&&(e.data=v9(e.data,y9.decoders)),e}function $m(t){return HTMLElement.prototype.cloneNode.call(t)}function LY(t,e=()=>{}){const r=async({action:i,result:a,reset:s=!0,invalidateAll:o=!0})=>{a.type==="success"&&(s&&HTMLFormElement.prototype.reset.call(t),o&&await Y_()),(location.origin+location.pathname===i.origin+i.pathname||a.type==="redirect"||a.type==="error")&&await Hf(a)};async function n(i){var m,v,b,x,y;if(((m=i.submitter)!=null&&m.hasAttribute("formmethod")?i.submitter.formMethod:$m(t).method)!=="post")return;i.preventDefault();const s=new URL((v=i.submitter)!=null&&v.hasAttribute("formaction")?i.submitter.formAction:$m(t).action),o=(b=i.submitter)!=null&&b.hasAttribute("formenctype")?i.submitter.formEnctype:$m(t).enctype,l=new FormData(t),c=(x=i.submitter)==null?void 0:x.getAttribute("name");c&&l.append(c,((y=i.submitter)==null?void 0:y.getAttribute("value"))??"");const d=new AbortController;let u=!1;const f=await e({action:s,cancel:()=>u=!0,controller:d,formData:l,formElement:t,submitter:i.submitter})??r;if(u)return;let h;try{const S=new Headers({accept:"application/json","x-sveltekit-action":"true"});o!=="multipart/form-data"&&S.set("Content-Type",/^(:?application\/x-www-form-urlencoded|text\/plain)$/.test(o)?o:"application/x-www-form-urlencoded");const I=o==="multipart/form-data"?l:new URLSearchParams(l),C=await fetch(s,{method:"POST",headers:S,cache:"no-store",body:I,signal:d.signal});h=W1(await C.text()),h.type==="error"&&(h.status=C.status)}catch(S){if((S==null?void 0:S.name)==="AbortError")return;h={type:"error",error:S}}await f({action:s,formData:l,formElement:t,update:S=>r({action:s,result:h,reset:S==null?void 0:S.reset,invalidateAll:S==null?void 0:S.invalidateAll}),result:h})}return HTMLFormElement.prototype.addEventListener.call(t,"submit",n),{destroy(){HTMLFormElement.prototype.removeEventListener.call(t,"submit",n)}}}const OS="noCustomValidity";async function u_(t,e){"setCustomValidity"in t&&t.setCustomValidity(""),!(OS in t.dataset)&&kS(t,e)}function BY(t,e){for(const r of t.querySelectorAll("input,select,textarea,button")){if("dataset"in r&&OS in r.dataset||!r.name)continue;const n=Zn(e,Is(r.name)),i=n&&typeof n.value=="object"&&"_errors"in n.value?n.value._errors:n==null?void 0:n.value;if(kS(r,i),i)return}}function kS(t,e){if(!("setCustomValidity"in t))return;const r=e&&e.length?e.join(`
`):"";t.setCustomValidity(r),r&&t.reportValidity()}const VY=(t,e=0)=>{const r=t.getBoundingClientRect();return r.top>=e&&r.left>=0&&r.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&r.right<=(window.innerWidth||document.documentElement.clientWidth)},jY=(t,e=1.125,r="smooth")=>{const a=t.getBoundingClientRect().top+window.pageYOffset-window.innerHeight/(2*e);window.scrollTo({left:0,top:a,behavior:r})},zY=["checkbox","radio","range","file"];function f_(t){const e=!!t&&(t instanceof HTMLSelectElement||t instanceof HTMLInputElement&&zY.includes(t.type)),r=!!t&&t instanceof HTMLSelectElement&&t.multiple,n=!!t&&t instanceof HTMLInputElement&&t.type=="file";return{immediate:e,multiple:r,file:n}}var Sr;(function(t){t[t.Idle=0]="Idle",t[t.Submitting=1]="Submitting",t[t.Delayed=2]="Delayed",t[t.Timeout=3]="Timeout"})(Sr||(Sr={}));const UY=new Set;function GY(t,e,r){let n=Sr.Idle,i,a;const s=UY;function o(){l(),d(n!=Sr.Delayed?Sr.Submitting:Sr.Delayed),i=window.setTimeout(()=>{i&&n==Sr.Submitting&&d(Sr.Delayed)},r.delayMs),a=window.setTimeout(()=>{a&&n==Sr.Delayed&&d(Sr.Timeout)},r.timeoutMs),s.add(l)}function l(){clearTimeout(i),clearTimeout(a),i=a=0,s.delete(l),d(Sr.Idle)}function c(){s.forEach(v=>v()),s.clear()}function d(v){n=v,e.submitting.set(n>=Sr.Submitting),e.delayed.set(n>=Sr.Delayed),e.timeout.set(n>=Sr.Timeout)}const u=t;function g(v){const b=v.target;r.selectErrorText&&b.select()}function f(){r.selectErrorText&&u.querySelectorAll("input").forEach(v=>{v.addEventListener("invalid",g)})}function h(){r.selectErrorText&&u.querySelectorAll("input").forEach(v=>v.removeEventListener("invalid",g))}const m=t;{f();const v=b=>{b.clearAll?c():l(),b.cancelled||setTimeout(()=>K1(m,r),1)};return ws(()=>{h(),v({cancelled:!0})}),{submitting(){o()},completed:v,scrollToFirstError(){setTimeout(()=>K1(m,r),1)},isSubmitting:()=>n===Sr.Submitting||n===Sr.Delayed}}}const K1=async(t,e)=>{if(e.scrollToError=="off")return;const r=e.errorSelector;if(!r)return;await Hm();let n;if(n=t.querySelector(r),!n)return;n=n.querySelector(r)??n;const i=e.stickyNavbar?document.querySelector(e.stickyNavbar):null;typeof e.scrollToError!="string"?n.scrollIntoView(e.scrollToError):VY(n,(i==null?void 0:i.offsetHeight)??0)||jY(n,void 0,e.scrollToError);function a(o){return typeof e.autoFocusOnError=="boolean"?e.autoFocusOnError:!/iPhone|iPad|iPod|Android/i.test(o)}if(!a(navigator.userAgent))return;let s;if(s=n,["INPUT","SELECT","BUTTON","TEXTAREA"].includes(s.tagName)||(s=s.querySelector('input:not([type="hidden"]):not(.flatpickr-input), select, textarea')),s)try{s.focus({preventScroll:!0}),e.selectErrorText&&s.tagName=="INPUT"&&s.select()}catch{}};function Th(t,e,r){const n=Zn(t,e,({parent:i,key:a,value:s})=>(s===void 0&&(i[a]=/\D/.test(a)?{}:[]),i[a]));if(n){const i=r(n.value);n.parent[n.key]=i}return t}function HY(t,e,r){const n=t.form,i=Is(e),a=ov(n,s=>{const o=Zn(s,i);return o==null?void 0:o.value});return{subscribe(...s){const o=a.subscribe(...s);return()=>o()},update(s,o){n.update(l=>Th(l,i,s),o??r)},set(s,o){n.update(l=>Th(l,i,()=>s),o??r)}}}function WY(t,e){const r="form"in t;if(!r&&(e==null?void 0:e.taint)!==void 0)throw new Jt("If options.taint is set, the whole superForm object must be used as a proxy.");return r}function zf(t,e,r){const n=Is(e);if(WY(t,r))return HY(t,e,r);const i=ov(t,a=>{const s=Zn(a,n);return s==null?void 0:s.value});return{subscribe(...a){const s=i.subscribe(...a);return()=>s()},update(a){t.update(s=>Th(s,n,a))},set(a){t.update(s=>Th(s,n,()=>a))}}}function KY(t,e=[]){const r=q1(t,e);if(!r)throw new Wn("No shape could be created for schema.",e);return r}function q1(t,e){up(t,e);const r=Xn(t,!1,e);if(r.array||r.union){const n=r.array||[],i=r.union||[];return n.concat(i).reduce((a,s)=>{const o=q1(s,e);return o&&(a={...a??{},...o}),a},n.length?{}:void 0)}if(r.properties){const n={};for(const[i,a]of Object.entries(r.properties)){const s=q1(a,[...e,i]);s&&(n[i]=s)}return n}return r.types.includes("array")||r.types.includes("object")?{}:void 0}function Y1(t){let e={};const r=Array.isArray(t);for(const[n,i]of Object.entries(t))!i||typeof i!="object"||(r?e={...e,...Y1(i)}:e[n]=Y1(i));return e}const Uf=new WeakMap,ls=new WeakMap,RS=t=>{throw t.result.error},qY={applyAction:!0,invalidateAll:!0,resetForm:!0,autoFocusOnError:"detect",scrollToError:"smooth",errorSelector:'[aria-invalid="true"],[data-invalid]',selectErrorText:!1,stickyNavbar:void 0,taintedMessage:!1,onSubmit:void 0,onResult:void 0,onUpdate:void 0,onUpdated:void 0,onError:RS,dataType:"form",validators:void 0,customValidity:!1,clearOnSubmit:"message",delayMs:500,timeoutMs:8e3,multipleSubmits:"prevent",SPA:void 0,validationMethod:"auto"};function YY(t){return`Duplicate form id's found: "${t}". Multiple forms will receive the same data. Use the id option to differentiate between them, or if this is intended, set the warnings.duplicateId option to false in superForm to disable this warning. More information: https://superforms.rocks/concepts/multiple-forms`}let MS=!1;try{SUPERFORMS_LEGACY&&(MS=!0)}catch{}let us=!1;try{globalThis.STORIES&&(us=!0)}catch{}function XY(t,e){var or;let r,n=e??{},i;{if((n.legacy??MS)&&(n.resetForm===void 0&&(n.resetForm=!1),n.taintedMessage===void 0&&(n.taintedMessage=!0)),us&&n.applyAction===void 0&&(n.applyAction=!1),typeof n.SPA=="string"&&(n.invalidateAll===void 0&&(n.invalidateAll=!1),n.applyAction===void 0&&(n.applyAction=!1)),i=n.validators,n={...qY,...n},(n.SPA===!0||typeof n.SPA=="object")&&n.validators===void 0&&console.warn("No validators set for superForm in SPA mode. Add a validation adapter to the validators option, or set it to false to disable this warning."),!t)throw new Jt("No form data sent to superForm. Make sure the output from superValidate is used (usually data.form) and that it's not null or undefined. Alternatively, an object with default values for the form can also be used, but then constraints won't be available.");c(t)===!1&&(t={id:n.id??Math.random().toString(36).slice(2,10),valid:!1,posted:!1,errors:{},data:t,shape:Y1(t)}),t=t;const $=t.id=n.id??t.id,ae=ki(el)??(us?{}:void 0);if(((or=n.warnings)==null?void 0:or.duplicateId)!==!1)if(!Uf.has(ae))Uf.set(ae,new Set([$]));else{const ve=Uf.get(ae);ve!=null&&ve.has($)?console.warn(YY($)):ve==null||ve.add($)}if(ls.has(t)||ls.set(t,t),r=ls.get(t),t=$r(r),ws(()=>{var ve;Le(),Z(),Te();for(const Ae of Object.values(Re))Ae.length=0;(ve=Uf.get(ae))==null||ve.delete($)}),n.dataType!=="json"){const ve=(Ae,je)=>{if(!(!je||typeof je!="object")){if(Array.isArray(je))je.length>0&&ve(Ae,je[0]);else if(!(je instanceof Date)&&!(je instanceof File)&&!(je instanceof FileList))throw new Jt(`Object found in form field "${Ae}". Set the dataType option to "json" and add use:enhance to use nested data structures. More information: https://superforms.rocks/concepts/nested-data`)}};for(const[Ae,je]of Object.entries(t.data))ve(Ae,je)}}const a={formId:t.id,form:$r(t.data),constraints:t.constraints??{},posted:t.posted,errors:$r(t.errors),message:$r(t.message),tainted:void 0,valid:t.valid,submitting:!1,shape:t.shape},s=a,o=cn(n.id??t.id);function l($){return Object.values($).filter(ve=>c(ve)!==!1)}function c($){return!$||typeof $!="object"||!("valid"in $&&"errors"in $&&typeof $.valid=="boolean")?!1:"id"in $&&typeof $.id=="string"?$.id:!1}const d=cn(t.data),u={subscribe:d.subscribe,set:($,ae={})=>{const ve=$r($);return oe(ve,ae.taint??!0),d.set(ve)},update:($,ae={})=>d.update(ve=>{const Ae=$(ve);return oe(Ae,ae.taint??!0),Ae})};function g(){return n.SPA===!0||typeof n.SPA=="object"}function f($){var ae;return $>400?$:(typeof n.SPA=="boolean"||typeof n.SPA=="string"||(ae=n.SPA)==null?void 0:ae.failStatus)||$}async function h($={}){const ae=$.formData??s.form;let ve={},Ae;const je=$.adapter??n.validators;if(typeof je=="object"){if(je!=i&&!("jsonSchema"in je))throw new Jt('Client validation adapter found in options.validators. A full adapter must be used when changing validators dynamically, for example "zod" instead of "zodClient".');if(Ae=await je.validate(ae),!Ae.success)ve=FY(Ae.issues,je.shape??s.shape??{});else if($.recheckValidData!==!1)return h({...$,recheckValidData:!1})}else Ae={success:!0,data:{}};const rt={...s.form,...ae,...Ae.success?Ae.data:{}};return{valid:Ae.success,posted:!1,errors:ve,data:rt,constraints:s.constraints,message:void 0,id:s.formId,shape:s.shape}}function m($){if(!n.onChange||!$.paths.length||$.type=="blur")return;let ae;const ve=$.paths.map(al);$.type&&$.paths.length==1&&$.formElement&&$.target instanceof Element?ae={path:ve[0],paths:ve,formElement:$.formElement,target:$.target,set(Ae,je,rt){zf({form:u},Ae,rt).set(je)},get(Ae){return ki(zf(u,Ae))}}:ae={paths:ve,target:void 0,set(Ae,je,rt){zf({form:u},Ae,rt).set(je)},get(Ae){return ki(zf(u,Ae))}},n.onChange(ae)}async function v($,ae=!1,ve){$&&(n.validators=="clear"&&K.update(rt=>(Ln(rt,$.paths,void 0),rt)),setTimeout(()=>m($)));let Ae=!1;if(ae||(n.validationMethod=="onsubmit"||n.validationMethod=="submit-only"||n.validationMethod=="onblur"&&($==null?void 0:$.type)=="input"||n.validationMethod=="oninput"&&($==null?void 0:$.type)=="blur")&&(Ae=!0),Ae||!$||!n.validators||n.validators=="clear"){if($!=null&&$.paths){const rt=($==null?void 0:$.formElement)??Ie();rt&&b(rt)}return}const je=await h({adapter:ve});return je.valid&&($.immediate||$.type!="input")&&u.set(je.data,{taint:"ignore"}),await Hm(),x(je.errors,$,ae),je}function b($){const ae=new Map;if(n.customValidity&&$)for(const ve of $.querySelectorAll("[name]")){if(typeof ve.name!="string"||!ve.name.length)continue;const Ae="validationMessage"in ve?String(ve.validationMessage):"";ae.set(ve.name,{el:ve,message:Ae}),u_(ve,void 0)}return ae}async function x($,ae,ve){const{type:Ae,immediate:je,multiple:rt,paths:Gt}=ae,Hr=s.errors,ai={};let Yt=new Map;const Lt=ae.formElement??Ie();Lt&&(Yt=b(Lt)),mi($,Bt=>{if(!Array.isArray(Bt.value))return;const zt=[...Bt.path];zt[zt.length-1]=="_errors"&&zt.pop();const si=zt.join(".");function _r(){if(Ln(ai,[Bt.path],Bt.value),n.customValidity&&mn&&Yt.has(si)){const{el:Xt,message:ua}=Yt.get(si);ua!=Bt.value&&(setTimeout(()=>u_(Xt,Bt.value)),Yt.clear())}}if(ve)return _r();const Ci=Bt.path[Bt.path.length-1]=="_errors",mn=Bt.value&&Gt.some(Xt=>Ci?zt&&Xt&&zt.length>0&&zt[0]==Xt[0]:si==Xt.join("."));if(mn&&n.validationMethod=="oninput"||je&&!rt&&mn)return _r();if(rt){const Xt=Oi(ki(K),Bt.path.slice(0,-1));if(Xt!=null&&Xt.value&&typeof(Xt==null?void 0:Xt.value)=="object"){for(const ua of Object.values(Xt.value))if(Array.isArray(ua))return _r()}}const vn=Oi(Hr,Bt.path);if(vn&&vn.key in vn.parent)return _r();if(Ci){if(n.validationMethod=="oninput"||Ae=="blur"&&pe(al(Bt.path.slice(0,-1))))return _r()}else if(Ae=="blur"&&mn)return _r()}),K.set(ai)}function y($,ae={}){return ae.keepFiles&&mi(s.form,ve=>{if(!(ve.parent instanceof FileList)&&(ve.value instanceof File||ve.value instanceof FileList)){const Ae=Oi($,ve.path);(!Ae||!(Ae.key in Ae.parent))&&Ln($,[ve.path],ve.value)}}),u.set($,ae)}function S($,ae){return $&&ae&&n.resetForm&&(n.resetForm===!0||n.resetForm())}function I($=!0){let ae=s.form,ve=s.tainted;if($){const Ae=Dt(s.form);ae=Ae.data;const je=Ae.paths;je.length&&(ve=$r(ve)??{},Ln(ve,je,!1))}return{valid:s.valid,posted:s.posted,errors:s.errors,data:ae,constraints:s.constraints,message:s.message,id:s.formId,tainted:ve,shape:s.shape}}async function C($,ae){$.valid&&ae&&S($.valid,ae)?D({message:$.message,posted:!0}):ze({form:$,untaint:ae,keepFiles:!0,pessimisticUpdate:n.invalidateAll=="force"||n.invalidateAll=="pessimistic"}),Re.onUpdated.length&&await Hm();for(const ve of Re.onUpdated)ve({form:$})}function D($={}){$.newState&&(r.data={...r.data,...$.newState});const ae=$r(r);ae.data={...ae.data,...$.data},$.id!==void 0&&(ae.id=$.id),ze({form:ae,untaint:!0,message:$.message,keepFiles:!1,posted:$.posted,resetted:!0})}async function E($){if($.type=="error")throw new Jt(`ActionResult of type "${$.type}" cannot be passed to update function.`);if($.type=="redirect"){S(!0,!0)&&D({posted:!0});return}if(typeof $.data!="object")throw new Jt("Non-object validation data returned from ActionResult.");const ae=l($.data);if(!ae.length)throw new Jt("No form data returned from ActionResult. Make sure you return { form } in the form actions.");for(const ve of ae)ve.id===s.formId&&await C(ve,$.status>=200&&$.status<300)}const O=cn(a.message),A=cn(a.constraints),k=cn(a.posted),V=cn(a.shape),G=cn(t.errors),K={subscribe:G.subscribe,set($,ae){return G.set(c_($,s.errors,ae==null?void 0:ae.force))},update($,ae){return G.update(ve=>c_($(ve),s.errors,ae==null?void 0:ae.force))},clear:()=>K.set({})};let j=null;function Q($){var ae;j&&$&&Object.keys($).length==1&&((ae=$.paths)!=null&&ae.length)&&j.target&&j.target instanceof HTMLInputElement&&j.target.type.toLowerCase()=="file"?j.paths=$.paths:j=$,setTimeout(()=>{v(j)},0)}function te($,ae,ve,Ae,je){j===null&&(j={paths:[]}),j.type=$,j.immediate=ae,j.multiple=ve,j.formElement=Ae,j.target=je}function q(){return(j==null?void 0:j.paths)??[]}function Z(){j=null}const ee={defaultMessage:"Leave page? Changes that you made may not be saved.",state:cn(),message:n.taintedMessage,clean:$r(t.data),forceRedirection:!1};function de(){return n.taintedMessage&&!s.submitting&&!ee.forceRedirection&&B()}function J($){if(!de())return;$.preventDefault(),$.returnValue="";const{taintedMessage:ae}=n,Ae=typeof ae=="function"||ae===!0?ee.defaultMessage:ae;return($||window.event).returnValue=Ae||ee.defaultMessage,Ae}async function ie($){if(!de())return;const{taintedMessage:ae}=n,ve=typeof ae=="function";if(ve&&$.cancel(),$.type==="leave")return;const Ae=ve||ae===!0?ee.defaultMessage:ae;let je;try{je=ve?await ae():window.confirm(Ae||ee.defaultMessage)}catch{je=!1}if(je&&$.to)try{ee.forceRedirection=!0,await X_($.to.url,{...$.to.params});return}finally{ee.forceRedirection=!1}else!je&&!ve&&$.cancel()}function xe(){n.taintedMessage=ee.message}function ke(){return ee.state}function pe($){if(!s.tainted)return!1;if(!$)return!!s.tainted;const ae=Oi(s.tainted,Is($));return!!ae&&ae.key in ae.parent}function B($){if(!arguments.length)return X(s.tainted);if(typeof $=="boolean")return $;if(typeof $=="object")return X($);if(!s.tainted||$===void 0)return!1;const ae=Oi(s.tainted,Is($));return X(ae==null?void 0:ae.value)}function X($){if(!$)return!1;if(typeof $=="object"){for(const ae of Object.values($))if(X(ae))return!0}return $===!0}function oe($,ae){if(ae=="ignore")return;const ve=l_($,s.form),Ae=l_($,ee.clean).map(je=>je.join());ve.length&&(ae=="untaint-all"||ae=="untaint-form"?ee.state.set(void 0):ee.state.update(je=>(je||(je={}),Ln(je,ve,(rt,Gt)=>{if(!Ae.includes(rt.join()))return;const Hr=Zn($,rt),ai=Zn(ee.clean,rt);return Hr&&ai&&Hr.value===ai.value?void 0:ae===!0?!0:ae==="untaint"?void 0:Gt.value}),je)),Q({paths:ve}))}function me($,ae){ee.state.set($),ae&&(ee.clean=ae)}const he=cn(!1),we=cn(!1),be=cn(!1),ye=[ee.state.subscribe($=>a.tainted=$r($)),u.subscribe($=>a.form=$r($)),K.subscribe($=>a.errors=$r($)),o.subscribe($=>a.formId=$),A.subscribe($=>a.constraints=$),k.subscribe($=>a.posted=$),O.subscribe($=>a.message=$),he.subscribe($=>a.submitting=$),V.subscribe($=>a.shape=$)];function ue($){ye.push($)}function Le(){ye.forEach($=>$())}let Se;function Ie(){return Se}function Ne($){Se=document.createElement("form"),Se.method="POST",Se.action=$,tt(Se),document.body.appendChild(Se)}function Pe($){Se&&(Se.action=$)}function Te(){Se!=null&&Se.parentElement&&Se.remove(),Se=void 0}const Oe=ov(K,$=>$?$Y($):[]);n.taintedMessage=void 0;function ze($){const ae=$.form,ve=$.message??ae.message;if(($.untaint||$.resetted)&&me(typeof $.untaint=="boolean"?void 0:$.untaint,ae.data),$.pessimisticUpdate||y(ae.data,{taint:"ignore",keepFiles:$.keepFiles}),O.set(ve),$.resetted?K.update(()=>({}),{force:!0}):K.set(ae.errors),o.set(ae.id),k.set($.posted??ae.posted),ae.constraints&&A.set(ae.constraints),ae.shape&&V.set(ae.shape),a.valid=ae.valid,n.flashMessage&&H1(n)){const Ae=n.flashMessage.module.getFlash(el);ve&&ki(Ae)===void 0&&Ae.set(ve)}}const Re={onSubmit:n.onSubmit?[n.onSubmit]:[],onResult:n.onResult?[n.onResult]:[],onUpdate:n.onUpdate?[n.onUpdate]:[],onUpdated:n.onUpdated?[n.onUpdated]:[],onError:n.onError?[n.onError]:[]};window.addEventListener("beforeunload",J),ws(()=>{window.removeEventListener("beforeunload",J)}),b9(ie),ue(el.subscribe(async $=>{us&&$===void 0&&($={status:200});const ae=$.status>=200&&$.status<300;if(n.applyAction&&$.form&&typeof $.form=="object"){const ve=$.form;if(ve.type==="error")return;for(const Ae of l(ve)){const je=ls.has(Ae);Ae.id!==s.formId||je||(ls.set(Ae,Ae),await C(Ae,ae))}}else if(n.applyAction!=="never"&&$.data&&typeof $.data=="object")for(const ve of l($.data)){const Ae=ls.has(ve);if(ve.id!==s.formId||Ae)continue;(n.invalidateAll==="force"||n.invalidateAll==="pessimistic")&&(r.data=ve.data);const je=S(ve.valid,!0);ze({form:ve,untaint:ae,keepFiles:!je,resetted:je})}})),typeof n.SPA=="string"&&Ne(n.SPA);function tt($,ae){if(n.SPA!==void 0&&$.method=="get"&&($.method="post"),typeof n.SPA=="string"?n.SPA.length&&$.action==document.location.href&&($.action=n.SPA):Se=$,ae){if(ae.onError){if(n.onError==="apply")throw new Jt('options.onError is set to "apply", cannot add any onError events.');if(ae.onError==="apply")throw new Jt('Cannot add "apply" as onError event in use:enhance.');Re.onError.push(ae.onError)}ae.onResult&&Re.onResult.push(ae.onResult),ae.onSubmit&&Re.onSubmit.push(ae.onSubmit),ae.onUpdate&&Re.onUpdate.push(ae.onUpdate),ae.onUpdated&&Re.onUpdated.push(ae.onUpdated)}xe();let ve;async function Ae(Yt){const Lt=f_(Yt.target);Lt.immediate&&!Lt.file&&await new Promise(Bt=>setTimeout(Bt,0)),ve=q(),te("input",Lt.immediate,Lt.multiple,$,Yt.target??void 0)}async function je(Yt){if(s.submitting||!ve||q()!=ve)return;const Lt=f_(Yt.target);Lt.immediate&&!Lt.file&&await new Promise(Bt=>setTimeout(Bt,0)),v({paths:ve,immediate:Lt.multiple,multiple:Lt.multiple,type:"blur",formElement:$,target:Yt.target??void 0}),ve=void 0}$.addEventListener("focusout",je),$.addEventListener("input",Ae),ws(()=>{$.removeEventListener("focusout",je),$.removeEventListener("input",Ae)});const rt=GY($,{submitting:he,delayed:we,timeout:be},n);let Gt,Hr;const ai=LY($,async Yt=>{let Lt,Bt=n.validators;const zt={...Yt,jsonData(ct){if(n.dataType!=="json")throw new Jt("options.dataType must be set to 'json' to use jsonData.");Lt=ct},validators(ct){Bt=ct},customRequest(ct){Hr=ct}},si=zt.cancel;let _r=!1;function da(ct){const st={...ct,posted:!0},wt=st.valid?200:f(400),lr={form:st},Ht=st.valid?{type:"success",status:wt,data:lr}:{type:"failure",status:wt,data:lr};setTimeout(()=>ua({result:Ht}),0)}function Ci(){switch(n.clearOnSubmit){case"errors-and-message":K.clear(),O.set(void 0);break;case"errors":K.clear();break;case"message":O.set(void 0);break}}async function mn(ct,st){var wt;if(ct.status=st,n.onError!=="apply"){const lr={result:ct,message:O,form:t};for(const Ht of Re.onError)Ht!=="apply"&&(Ht!=RS||!((wt=n.flashMessage)!=null&&wt.onError))&&await Ht(lr)}n.flashMessage&&n.flashMessage.onError&&await n.flashMessage.onError({result:ct,flashMessage:n.flashMessage.module.getFlash(el)}),n.applyAction&&(n.onError=="apply"?await Hf(ct):await Hf({type:"failure",status:f(ct.status),data:ct}))}function vn(ct={resetTimers:!0}){return _r=!0,ct.resetTimers&&rt.isSubmitting()&&rt.completed({cancelled:_r}),si()}if(zt.cancel=vn,rt.isSubmitting()&&n.multipleSubmits=="prevent")vn({resetTimers:!1});else{rt.isSubmitting()&&n.multipleSubmits=="abort"&&Gt&&Gt.abort(),rt.submitting(),Gt=zt.controller;for(const ct of Re.onSubmit)try{await ct(zt)}catch(st){vn(),mn({type:"error",error:st},500)}}if(_r&&n.flashMessage&&d_(n),!_r){const ct=!g()&&($.noValidate||(zt.submitter instanceof HTMLButtonElement||zt.submitter instanceof HTMLInputElement)&&zt.submitter.formNoValidate);let st;const wt=async()=>await h({adapter:Bt});if(Ci(),ct||(st=await wt(),st.valid||(vn({resetTimers:!1}),da(st))),!_r){n.flashMessage&&(n.clearOnSubmit=="errors-and-message"||n.clearOnSubmit=="message")&&H1(n)&&n.flashMessage.module.getFlash(el).set(void 0);const lr="formData"in zt?zt.formData:zt.data;if(ve=void 0,g())st||(st=await wt()),vn({resetTimers:!1}),da(st);else if(n.dataType==="json"){st||(st=await wt());const Ht=$r(Lt??st.data);mi(Ht,St=>{if(St.value instanceof File){const Qt="__superform_file_"+al(St.path);return lr.append(Qt,St.value),St.set(void 0)}else if(Array.isArray(St.value)&&St.value.length&&St.value.every(Qt=>Qt instanceof File)){const Qt="__superform_files_"+al(St.path);for(const Wr of St.value)lr.append(Qt,Wr);return St.set(void 0)}}),Object.keys(Ht).forEach(St=>{typeof lr.get(St)=="string"&&lr.delete(St)});const fa=n.transport?Object.fromEntries(Object.entries(n.transport).map(([St,Qt])=>[St,Qt.encode])):void 0,df=Xt(D9(Ht,fa),n.jsonChunkSize??5e5);for(const St of df)lr.append("__superform_json",St)}if(!lr.has("__superform_id")){const Ht=s.formId;Ht!==void 0&&lr.set("__superform_id",Ht)}typeof n.SPA=="string"&&Pe(n.SPA)}}function Xt(ct,st){const wt=Math.ceil(ct.length/st),lr=new Array(wt);for(let Ht=0,fa=0;Ht<wt;++Ht,fa+=st)lr[Ht]=ct.substring(fa,fa+st);return lr}async function ua(ct){let st=!1;Gt=null;let wt="type"in ct.result&&"status"in ct.result?ct.result:{type:"error",status:f(parseInt(String(ct.result.status))||500),error:ct.result.error instanceof Error?ct.result.error:ct.result};const lr=()=>st=!0,Ht={result:wt,formEl:$,formElement:$,cancel:lr},fa=us||!g()?()=>{}:o_.subscribe(St=>{var Qt,Wr;!St||((Qt=St.from)==null?void 0:Qt.route.id)===((Wr=St.to)==null?void 0:Wr.route.id)||lr()});function df(St,Qt,Wr){Qt.result={type:"error",error:St,status:f(Wr)}}for(const St of Re.onResult)try{await St(Ht)}catch(Qt){df(Qt,Ht,Math.max(wt.status??500,400))}if(wt=Ht.result,!st){if((wt.type==="success"||wt.type==="failure")&&wt.data){const St=l(wt.data);if(!St.length)throw new Jt("No form data returned from ActionResult. Make sure you return { form } in the form actions.");for(const Qt of St){if(Qt.id!==s.formId)continue;const Wr={form:Qt,formEl:$,formElement:$,cancel:()=>st=!0,result:wt};for(const _p of Re.onUpdate)try{await _p(Wr)}catch(u6){df(u6,Wr,Math.max(wt.status??500,400))}wt=Wr.result,st||(n.customValidity&&BY($,Wr.form.errors),S(Wr.form.valid,wt.type=="success")&&Wr.formElement.querySelectorAll('input[type="file"]').forEach(_p=>_p.value=""))}}st||(wt.type!=="error"?(wt.type==="success"&&n.invalidateAll&&await Y_(),n.applyAction?await Hf(wt):await E(wt)):await mn(wt,Math.max(wt.status??500,400)))}if(st&&n.flashMessage&&d_(n),st||wt.type!="redirect")rt.completed({cancelled:st});else if(us)rt.completed({cancelled:st,clearAll:!0});else{const St=o_.subscribe(Qt=>{Qt||(setTimeout(()=>{try{St&&St()}catch{}}),rt.isSubmitting()&&rt.completed({cancelled:st,clearAll:!0}))})}fa()}if(!_r&&Hr){si();const ct=await Hr(Yt);let st;ct instanceof Response?st=W1(await ct.text()):ct instanceof XMLHttpRequest?st=W1(ct.responseText):st=ct,st.type==="error"&&(st.status=ct.status),ua({result:st})}return ua});return{destroy:()=>{for(const[Yt,Lt]of Object.entries(Re))Re[Yt]=Lt.filter(Bt=>Bt===n[Yt]);ai.destroy()}}}function Dt($){const ae=[];if(mi($,Ae=>{if(Ae.value instanceof File)return ae.push(Ae.path),"skip";if(Array.isArray(Ae.value)&&Ae.value.length&&Ae.value.every(je=>je instanceof File))return ae.push(Ae.path),"skip"}),!ae.length)return{data:$,paths:ae};const ve=$r($);return Ln(ve,ae,Ae=>{var je;return(je=Oi(r.data,Ae))==null?void 0:je.value}),{data:ve,paths:ae}}return{form:u,formId:o,errors:K,message:O,constraints:A,tainted:ke(),submitting:Sp(he),delayed:Sp(we),timeout:Sp(be),options:n,capture:I,restore:$=>{ze({form:$,untaint:$.tainted??!0})},async validate($,ae={}){if(!n.validators)throw new Jt("options.validators must be set to use the validate method.");ae.update===void 0&&(ae.update=!0),ae.taint===void 0&&(ae.taint=!1),typeof ae.errors=="string"&&(ae.errors=[ae.errors]);let ve;const Ae=Is($);"value"in ae?ae.update===!0||ae.update==="value"?(u.update(Gt=>(Ln(Gt,[Ae],ae.value),Gt),{taint:ae.taint}),ve=s.form):(ve=$r(s.form),Ln(ve,[Ae],ae.value)):ve=s.form;const je=await h({formData:ve}),rt=Oi(je.errors,Ae);return rt&&rt.value&&ae.errors&&(rt.value=ae.errors),(ae.update===!0||ae.update=="errors")&&K.update(Gt=>(Ln(Gt,[Ae],rt==null?void 0:rt.value),Gt)),rt==null?void 0:rt.value},async validateForm($={}){if(!n.validators&&!$.schema)throw new Jt("options.validators or the schema option must be set to use the validateForm method.");const ae=$.update?await v({paths:[]},!0,$.schema):h({adapter:$.schema}),ve=Ie();return $.update&&ve&&setTimeout(()=>{ve&&K1(ve,{...n,scrollToError:$.focusOnError===!1?"off":n.scrollToError})},1),ae||h({adapter:$.schema})},allErrors:Oe,posted:k,reset($){return D({message:$!=null&&$.keepMessage?s.message:void 0,data:$==null?void 0:$.data,id:$==null?void 0:$.id,newState:$==null?void 0:$.newState})},submit($){const ae=Ie()?Ie():$&&$ instanceof HTMLElement?$.closest("form"):void 0;if(!ae)throw new Jt("use:enhance must be added to the form to use submit, or pass a HTMLElement inside the form (or the form itself) as an argument.");if(!ae.requestSubmit)return ae.submit();const ve=$&&($ instanceof HTMLButtonElement&&$.type=="submit"||$ instanceof HTMLInputElement&&["submit","image"].includes($.type));ae.requestSubmit(ve?$:void 0)},isTainted:B,enhance:tt}}function QY(t,e,r){t&&"superFormValidationLibrary"in t&&(r=e,e=t,t=null);const n=e,i=(r==null?void 0:r.defaults)??n.defaults;return{id:(r==null?void 0:r.id)??n.id??"",valid:!1,posted:!1,errors:{},data:{...i,...t},constraints:n.constraints,shape:n.shape}}function ZY(t){return ih(Xn(t,!1,[]),[])}function Lm(...t){const e=t.filter(r=>!!r);if(e.length)return e.length==1?e[0]:tn(...e)}function ih(t,e){var n;if(!t)return;let r;if(t.union&&t.union.length){const i=t.union.map(s=>Xn(s,t.isOptional,e)),a=i.map(s=>ih(s,e));r=Lm(r,...a),r&&(t.isNullable||t.isOptional||i.some(s=>(s==null?void 0:s.isNullable)||(s==null?void 0:s.isOptional)))&&delete r.required}if(t.array&&(r=Lm(r,...t.array.map(i=>ih(Xn(i,t.isOptional,e),e)))),t.properties){const i={};for(const[a,s]of Object.entries(t.properties)){const o=Xn(s,!((n=t.required)!=null&&n.includes(a))||s.default!==void 0,[a]),l=ih(o,[...e,a]);typeof l=="object"&&Object.values(l).length>0&&(i[a]=l)}r=Lm(r,i)}return r??JY(t)}function JY(t){const e={},r=t.schema,n=r.type,i=r.format;if(n=="integer"&&i=="unix-time"){const a=r;a.minimum!==void 0&&(e.min=new Date(a.minimum).toISOString()),a.maximum!==void 0&&(e.max=new Date(a.maximum).toISOString())}else if(n=="string"){const a=r,s=[a.pattern,...a.allOf?a.allOf.map(o=>typeof o=="boolean"?void 0:o.pattern):[]].filter(o=>o!==void 0);s.length>0&&(e.pattern=s[0]),a.minLength!==void 0&&(e.minlength=a.minLength),a.maxLength!==void 0&&(e.maxlength=a.maxLength)}else if(n=="number"||n=="integer"){const a=r;a.minimum!==void 0?e.min=a.minimum:a.exclusiveMinimum!==void 0&&(e.min=a.exclusiveMinimum+(n=="integer"?1:Number.MIN_VALUE)),a.maximum!==void 0?e.max=a.maximum:a.exclusiveMaximum!==void 0&&(e.max=a.exclusiveMaximum-(n=="integer"?1:Number.MIN_VALUE)),a.multipleOf!==void 0&&(e.step=a.multipleOf)}else if(n=="array"){const a=r;a.minItems!==void 0&&(e.min=a.minItems),a.maxItems!==void 0&&(e.max=a.maxItems)}return!t.isNullable&&!t.isOptional&&(e.required=!0),Object.keys(e).length>0?e:void 0}function eX(t){return tX(X1(Xn(t,!1,[]),0,[]))}function X1(t,e,r){var s;if(!t)return"";function n(){return"  ".repeat(e)}function i(o){return o.map(l=>X1(Xn(l,(t==null?void 0:t.isOptional)??!1,r),e+1,r)).filter(l=>l).join("|")}function a(){const o=[];return t!=null&&t.isNullable&&o.push("null"),t!=null&&t.isOptional&&o.push("undefined"),o.length?"|"+o.join("|"):""}if(t.union)return`Union {
  `+n()+i(t.union)+`
`+n()+"}"+a();if(t.properties){const o=[];for(const[l,c]of Object.entries(t.properties)){const d=Xn(c,!((s=t.required)!=null&&s.includes(l))||c.default!==void 0,[l]);o.push(l+": "+X1(d,e+1,r))}return`Object {
  `+n()+o.join(`,
  `)+`
`+n()+"}"+a()}return t.array?"Array["+i(t.array)+"]"+a():t.types.join("|")+a()}function tX(t){let e=0;for(let r=0,n=t.length;r<n;r++){const i=t.charCodeAt(r);e=(e<<5)-e+i,e|=0}return e<0&&(e=e>>>0),e.toString(36)}function rX(t,e){if(!t||!("superFormValidationLibrary"in t))throw new Jt('Superforms v2 requires a validation adapter for the schema. Import one of your choice from "sveltekit-superforms/adapters" and wrap the schema with it.');return e||(e=t.jsonSchema),{...t,constraints:t.constraints??ZY(e),defaults:t.defaults??MY(e),shape:KY(e),id:eX(e)}}let nX=!1;try{SUPERFORMS_LEGACY&&(nX=!0)}catch{}function fp(t){return typeof t!="object"&&typeof t!="function"||t===null}function Zi(){this.childBranches=new WeakMap,this.primitiveKeys=new Map,this.hasValue=!1,this.value=void 0}Zi.prototype.has=function(e){var r=fp(e)?this.primitiveKeys.get(e):e;return r?this.childBranches.has(r):!1};Zi.prototype.get=function(e){var r=fp(e)?this.primitiveKeys.get(e):e;return r?this.childBranches.get(r):void 0};Zi.prototype.resolveBranch=function(e){if(this.has(e))return this.get(e);var r=new Zi,n=this.createKey(e);return this.childBranches.set(n,r),r};Zi.prototype.setValue=function(e){return this.hasValue=!0,this.value=e};Zi.prototype.createKey=function(e){if(fp(e)){var r={};return this.primitiveKeys.set(e,r),r}return e};Zi.prototype.clear=function(){if(arguments.length===0)this.childBranches=new WeakMap,this.primitiveKeys.clear(),this.hasValue=!1,this.value=void 0;else if(arguments.length===1){var e=arguments[0];if(fp(e)){var r=this.primitiveKeys.get(e);r&&(this.childBranches.delete(r),this.primitiveKeys.delete(e))}else this.childBranches.delete(e)}else{var n=arguments[0];if(this.has(n)){var i=this.get(n);i.clear.apply(i,Array.prototype.slice.call(arguments,1))}}};var iX=function(e){var r=new Zi;function n(){var i=Array.prototype.slice.call(arguments),a=i.reduce(function(l,c){return l.resolveBranch(c)},r);if(a.hasValue)return a.value;var s=e.apply(null,i);return a.setValue(s)}return n.clear=r.clear.bind(r),n},aX=iX;const sX=L_(aX),oX=sX,lX=Symbol("Let zodToJsonSchema decide on which parser to use"),h_={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},cX=t=>typeof t=="string"?{...h_,name:t}:{...h_,...t},dX=t=>{const e=cX(t),r=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([n,i])=>[i._def,{def:i._def,path:[...e.basePath,e.definitionPath,n],jsonSchema:void 0}]))}};function DS(t,e,r,n){n!=null&&n.errorMessages&&r&&(t.errorMessage={...t.errorMessage,[e]:r})}function Pt(t,e,r,n,i){t[e]=r,DS(t,e,n,i)}function uX(){return{}}function fX(t,e){var n,i,a;const r={type:"array"};return(n=t.type)!=null&&n._def&&((a=(i=t.type)==null?void 0:i._def)==null?void 0:a.typeName)!==nt.ZodAny&&(r.items=It(t.type._def,{...e,currentPath:[...e.currentPath,"items"]})),t.minLength&&Pt(r,"minItems",t.minLength.value,t.minLength.message,e),t.maxLength&&Pt(r,"maxItems",t.maxLength.value,t.maxLength.message,e),t.exactLength&&(Pt(r,"minItems",t.exactLength.value,t.exactLength.message,e),Pt(r,"maxItems",t.exactLength.value,t.exactLength.message,e)),r}function hX(t,e){const r={type:"integer",format:"int64"};if(!t.checks)return r;for(const n of t.checks)switch(n.kind){case"min":e.target==="jsonSchema7"?n.inclusive?Pt(r,"minimum",n.value,n.message,e):Pt(r,"exclusiveMinimum",n.value,n.message,e):(n.inclusive||(r.exclusiveMinimum=!0),Pt(r,"minimum",n.value,n.message,e));break;case"max":e.target==="jsonSchema7"?n.inclusive?Pt(r,"maximum",n.value,n.message,e):Pt(r,"exclusiveMaximum",n.value,n.message,e):(n.inclusive||(r.exclusiveMaximum=!0),Pt(r,"maximum",n.value,n.message,e));break;case"multipleOf":Pt(r,"multipleOf",n.value,n.message,e);break}return r}function gX(){return{type:"boolean"}}function NS(t,e){return It(t.type._def,e)}const pX=(t,e)=>It(t.innerType._def,e);function FS(t,e,r){const n=r??e.dateStrategy;if(Array.isArray(n))return{anyOf:n.map((i,a)=>FS(t,e,i))};switch(n){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return mX(t,e)}}const mX=(t,e)=>{const r={type:"integer",format:"unix-time"};if(e.target==="openApi3")return r;for(const n of t.checks)switch(n.kind){case"min":Pt(r,"minimum",n.value,n.message,e);break;case"max":Pt(r,"maximum",n.value,n.message,e);break}return r};function vX(t,e){return{...It(t.innerType._def,e),default:t.defaultValue()}}function yX(t,e){return e.effectStrategy==="input"?It(t.schema._def,e):{}}function bX(t){return{type:"string",enum:Array.from(t.values)}}const _X=t=>"type"in t&&t.type==="string"?!1:"allOf"in t;function wX(t,e){const r=[It(t.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),It(t.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(a=>!!a);let n=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const i=[];return r.forEach(a=>{if(_X(a))i.push(...a.allOf),a.unevaluatedProperties===void 0&&(n=void 0);else{let s=a;if("additionalProperties"in a&&a.additionalProperties===!1){const{additionalProperties:o,...l}=a;s=l}else n=void 0;i.push(s)}}),i.length?{allOf:i,...n}:void 0}function SX(t,e){const r=typeof t.value;return r!=="bigint"&&r!=="number"&&r!=="boolean"&&r!=="string"?{type:Array.isArray(t.value)?"array":"object"}:e.target==="openApi3"?{type:r==="bigint"?"integer":r,enum:[t.value]}:{type:r==="bigint"?"integer":r,const:t.value}}let Bm;const yn={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(Bm===void 0&&(Bm=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),Bm),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function $S(t,e){const r={type:"string"};if(t.checks)for(const n of t.checks)switch(n.kind){case"min":Pt(r,"minLength",typeof r.minLength=="number"?Math.max(r.minLength,n.value):n.value,n.message,e);break;case"max":Pt(r,"maxLength",typeof r.maxLength=="number"?Math.min(r.maxLength,n.value):n.value,n.message,e);break;case"email":switch(e.emailStrategy){case"format:email":bn(r,"email",n.message,e);break;case"format:idn-email":bn(r,"idn-email",n.message,e);break;case"pattern:zod":Er(r,yn.email,n.message,e);break}break;case"url":bn(r,"uri",n.message,e);break;case"uuid":bn(r,"uuid",n.message,e);break;case"regex":Er(r,n.regex,n.message,e);break;case"cuid":Er(r,yn.cuid,n.message,e);break;case"cuid2":Er(r,yn.cuid2,n.message,e);break;case"startsWith":Er(r,RegExp(`^${Vm(n.value,e)}`),n.message,e);break;case"endsWith":Er(r,RegExp(`${Vm(n.value,e)}$`),n.message,e);break;case"datetime":bn(r,"date-time",n.message,e);break;case"date":bn(r,"date",n.message,e);break;case"time":bn(r,"time",n.message,e);break;case"duration":bn(r,"duration",n.message,e);break;case"length":Pt(r,"minLength",typeof r.minLength=="number"?Math.max(r.minLength,n.value):n.value,n.message,e),Pt(r,"maxLength",typeof r.maxLength=="number"?Math.min(r.maxLength,n.value):n.value,n.message,e);break;case"includes":{Er(r,RegExp(Vm(n.value,e)),n.message,e);break}case"ip":{n.version!=="v6"&&bn(r,"ipv4",n.message,e),n.version!=="v4"&&bn(r,"ipv6",n.message,e);break}case"base64url":Er(r,yn.base64url,n.message,e);break;case"jwt":Er(r,yn.jwt,n.message,e);break;case"cidr":{n.version!=="v6"&&Er(r,yn.ipv4Cidr,n.message,e),n.version!=="v4"&&Er(r,yn.ipv6Cidr,n.message,e);break}case"emoji":Er(r,yn.emoji(),n.message,e);break;case"ulid":{Er(r,yn.ulid,n.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{bn(r,"binary",n.message,e);break}case"contentEncoding:base64":{Pt(r,"contentEncoding","base64",n.message,e);break}case"pattern:zod":{Er(r,yn.base64,n.message,e);break}}break}case"nanoid":Er(r,yn.nanoid,n.message,e)}return r}function Vm(t,e){return e.patternStrategy==="escape"?IX(t):t}const xX=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function IX(t){let e="";for(let r=0;r<t.length;r++)xX.has(t[r])||(e+="\\"),e+=t[r];return e}function bn(t,e,r,n){var i;t.format||(i=t.anyOf)!=null&&i.some(a=>a.format)?(t.anyOf||(t.anyOf=[]),t.format&&(t.anyOf.push({format:t.format,...t.errorMessage&&n.errorMessages&&{errorMessage:{format:t.errorMessage.format}}}),delete t.format,t.errorMessage&&(delete t.errorMessage.format,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.anyOf.push({format:e,...r&&n.errorMessages&&{errorMessage:{format:r}}})):Pt(t,"format",e,r,n)}function Er(t,e,r,n){var i;t.pattern||(i=t.allOf)!=null&&i.some(a=>a.pattern)?(t.allOf||(t.allOf=[]),t.pattern&&(t.allOf.push({pattern:t.pattern,...t.errorMessage&&n.errorMessages&&{errorMessage:{pattern:t.errorMessage.pattern}}}),delete t.pattern,t.errorMessage&&(delete t.errorMessage.pattern,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.allOf.push({pattern:g_(e,n),...r&&n.errorMessages&&{errorMessage:{pattern:r}}})):Pt(t,"pattern",g_(e,n),r,n)}function g_(t,e){var l;if(!e.applyRegexFlags||!t.flags)return t.source;const r={i:t.flags.includes("i"),m:t.flags.includes("m"),s:t.flags.includes("s")},n=r.i?t.source.toLowerCase():t.source;let i="",a=!1,s=!1,o=!1;for(let c=0;c<n.length;c++){if(a){i+=n[c],a=!1;continue}if(r.i){if(s){if(n[c].match(/[a-z]/)){o?(i+=n[c],i+=`${n[c-2]}-${n[c]}`.toUpperCase(),o=!1):n[c+1]==="-"&&((l=n[c+2])!=null&&l.match(/[a-z]/))?(i+=n[c],o=!0):i+=`${n[c]}${n[c].toUpperCase()}`;continue}}else if(n[c].match(/[a-z]/)){i+=`[${n[c]}${n[c].toUpperCase()}]`;continue}}if(r.m){if(n[c]==="^"){i+=`(^|(?<=[\r
]))`;continue}else if(n[c]==="$"){i+=`($|(?=[\r
]))`;continue}}if(r.s&&n[c]==="."){i+=s?`${n[c]}\r
`:`[${n[c]}\r
]`;continue}i+=n[c],n[c]==="\\"?a=!0:s&&n[c]==="]"?s=!1:!s&&n[c]==="["&&(s=!0)}try{new RegExp(i)}catch{return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),t.source}return i}function LS(t,e){var n,i,a,s,o,l;if(e.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),e.target==="openApi3"&&((n=t.keyType)==null?void 0:n._def.typeName)===nt.ZodEnum)return{type:"object",required:t.keyType._def.values,properties:t.keyType._def.values.reduce((c,d)=>({...c,[d]:It(t.valueType._def,{...e,currentPath:[...e.currentPath,"properties",d]})??{}}),{}),additionalProperties:e.rejectedAdditionalProperties};const r={type:"object",additionalProperties:It(t.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]})??e.allowedAdditionalProperties};if(e.target==="openApi3")return r;if(((i=t.keyType)==null?void 0:i._def.typeName)===nt.ZodString&&((a=t.keyType._def.checks)!=null&&a.length)){const{type:c,...d}=$S(t.keyType._def,e);return{...r,propertyNames:d}}else{if(((s=t.keyType)==null?void 0:s._def.typeName)===nt.ZodEnum)return{...r,propertyNames:{enum:t.keyType._def.values}};if(((o=t.keyType)==null?void 0:o._def.typeName)===nt.ZodBranded&&t.keyType._def.type._def.typeName===nt.ZodString&&((l=t.keyType._def.type._def.checks)!=null&&l.length)){const{type:c,...d}=NS(t.keyType._def,e);return{...r,propertyNames:d}}}return r}function CX(t,e){if(e.mapStrategy==="record")return LS(t,e);const r=It(t.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||{},n=It(t.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[r,n],minItems:2,maxItems:2}}}function PX(t){const e=t.values,n=Object.keys(t.values).filter(a=>typeof e[e[a]]!="number").map(a=>e[a]),i=Array.from(new Set(n.map(a=>typeof a)));return{type:i.length===1?i[0]==="string"?"string":"number":["string","number"],enum:n}}function EX(){return{not:{}}}function AX(t){return t.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const Oh={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function TX(t,e){if(e.target==="openApi3")return p_(t,e);const r=t.options instanceof Map?Array.from(t.options.values()):t.options;if(r.every(n=>n._def.typeName in Oh&&(!n._def.checks||!n._def.checks.length))){const n=r.reduce((i,a)=>{const s=Oh[a._def.typeName];return s&&!i.includes(s)?[...i,s]:i},[]);return{type:n.length>1?n:n[0]}}else if(r.every(n=>n._def.typeName==="ZodLiteral"&&!n.description)){const n=r.reduce((i,a)=>{const s=typeof a._def.value;switch(s){case"string":case"number":case"boolean":return[...i,s];case"bigint":return[...i,"integer"];case"object":if(a._def.value===null)return[...i,"null"];case"symbol":case"undefined":case"function":default:return i}},[]);if(n.length===r.length){const i=n.filter((a,s,o)=>o.indexOf(a)===s);return{type:i.length>1?i:i[0],enum:r.reduce((a,s)=>a.includes(s._def.value)?a:[...a,s._def.value],[])}}}else if(r.every(n=>n._def.typeName==="ZodEnum"))return{type:"string",enum:r.reduce((n,i)=>[...n,...i._def.values.filter(a=>!n.includes(a))],[])};return p_(t,e)}const p_=(t,e)=>{const r=(t.options instanceof Map?Array.from(t.options.values()):t.options).map((n,i)=>It(n._def,{...e,currentPath:[...e.currentPath,"anyOf",`${i}`]})).filter(n=>!!n&&(!e.strictUnions||typeof n=="object"&&Object.keys(n).length>0));return r.length?{anyOf:r}:void 0};function OX(t,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(t.innerType._def.typeName)&&(!t.innerType._def.checks||!t.innerType._def.checks.length))return e.target==="openApi3"?{type:Oh[t.innerType._def.typeName],nullable:!0}:{type:[Oh[t.innerType._def.typeName],"null"]};if(e.target==="openApi3"){const n=It(t.innerType._def,{...e,currentPath:[...e.currentPath]});return n&&"$ref"in n?{allOf:[n],nullable:!0}:n&&{...n,nullable:!0}}const r=It(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}function kX(t,e){const r={type:"number"};if(!t.checks)return r;for(const n of t.checks)switch(n.kind){case"int":r.type="integer",DS(r,"type",n.message,e);break;case"min":e.target==="jsonSchema7"?n.inclusive?Pt(r,"minimum",n.value,n.message,e):Pt(r,"exclusiveMinimum",n.value,n.message,e):(n.inclusive||(r.exclusiveMinimum=!0),Pt(r,"minimum",n.value,n.message,e));break;case"max":e.target==="jsonSchema7"?n.inclusive?Pt(r,"maximum",n.value,n.message,e):Pt(r,"exclusiveMaximum",n.value,n.message,e):(n.inclusive||(r.exclusiveMaximum=!0),Pt(r,"maximum",n.value,n.message,e));break;case"multipleOf":Pt(r,"multipleOf",n.value,n.message,e);break}return r}function RX(t,e){const r=e.target==="openAi",n={type:"object",properties:{}},i=[],a=t.shape();for(const o in a){let l=a[o];if(l===void 0||l._def===void 0)continue;let c=DX(l);c&&r&&(l instanceof c9&&(l=l._def.innerType),l.isNullable()||(l=l.nullable()),c=!1);const d=It(l._def,{...e,currentPath:[...e.currentPath,"properties",o],propertyPath:[...e.currentPath,"properties",o]});d!==void 0&&(n.properties[o]=d,c||i.push(o))}i.length&&(n.required=i);const s=MX(t,e);return s!==void 0&&(n.additionalProperties=s),n}function MX(t,e){if(t.catchall._def.typeName!=="ZodNever")return It(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]});switch(t.unknownKeys){case"passthrough":return e.allowedAdditionalProperties;case"strict":return e.rejectedAdditionalProperties;case"strip":return e.removeAdditionalStrategy==="strict"?e.allowedAdditionalProperties:e.rejectedAdditionalProperties}}function DX(t){try{return t.isOptional()}catch{return!0}}const NX=(t,e)=>{var n;if(e.currentPath.toString()===((n=e.propertyPath)==null?void 0:n.toString()))return It(t.innerType._def,e);const r=It(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return r?{anyOf:[{not:{}},r]}:{}},FX=(t,e)=>{if(e.pipeStrategy==="input")return It(t.in._def,e);if(e.pipeStrategy==="output")return It(t.out._def,e);const r=It(t.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),n=It(t.out._def,{...e,currentPath:[...e.currentPath,"allOf",r?"1":"0"]});return{allOf:[r,n].filter(i=>i!==void 0)}};function $X(t,e){return It(t.type._def,e)}function LX(t,e){const n={type:"array",uniqueItems:!0,items:It(t.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return t.minSize&&Pt(n,"minItems",t.minSize.value,t.minSize.message,e),t.maxSize&&Pt(n,"maxItems",t.maxSize.value,t.maxSize.message,e),n}function BX(t,e){return t.rest?{type:"array",minItems:t.items.length,items:t.items.map((r,n)=>It(r._def,{...e,currentPath:[...e.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[]),additionalItems:It(t.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:t.items.length,maxItems:t.items.length,items:t.items.map((r,n)=>It(r._def,{...e,currentPath:[...e.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[])}}function VX(){return{not:{}}}function jX(){return{}}const zX=(t,e)=>It(t.innerType._def,e),UX=(t,e,r)=>{switch(e){case nt.ZodString:return $S(t,r);case nt.ZodNumber:return kX(t,r);case nt.ZodObject:return RX(t,r);case nt.ZodBigInt:return hX(t,r);case nt.ZodBoolean:return gX();case nt.ZodDate:return FS(t,r);case nt.ZodUndefined:return VX();case nt.ZodNull:return AX(r);case nt.ZodArray:return fX(t,r);case nt.ZodUnion:case nt.ZodDiscriminatedUnion:return TX(t,r);case nt.ZodIntersection:return wX(t,r);case nt.ZodTuple:return BX(t,r);case nt.ZodRecord:return LS(t,r);case nt.ZodLiteral:return SX(t,r);case nt.ZodEnum:return bX(t);case nt.ZodNativeEnum:return PX(t);case nt.ZodNullable:return OX(t,r);case nt.ZodOptional:return NX(t,r);case nt.ZodMap:return CX(t,r);case nt.ZodSet:return LX(t,r);case nt.ZodLazy:return()=>t.getter()._def;case nt.ZodPromise:return $X(t,r);case nt.ZodNaN:case nt.ZodNever:return EX();case nt.ZodEffects:return yX(t,r);case nt.ZodAny:return uX();case nt.ZodUnknown:return jX();case nt.ZodDefault:return vX(t,r);case nt.ZodBranded:return NS(t,r);case nt.ZodReadonly:return zX(t,r);case nt.ZodCatch:return pX(t,r);case nt.ZodPipeline:return FX(t,r);case nt.ZodFunction:case nt.ZodVoid:case nt.ZodSymbol:return;default:return(n=>{})()}};function It(t,e,r=!1){var o;const n=e.seen.get(t);if(e.override){const l=(o=e.override)==null?void 0:o.call(e,t,e,n,r);if(l!==lX)return l}if(n&&!r){const l=GX(n,e);if(l!==void 0)return l}const i={def:t,path:e.currentPath,jsonSchema:void 0};e.seen.set(t,i);const a=UX(t,t.typeName,e),s=typeof a=="function"?It(a(),e):a;if(s&&WX(t,e,s),e.postProcess){const l=e.postProcess(s,t,e);return i.jsonSchema=s,l}return i.jsonSchema=s,s}const GX=(t,e)=>{switch(e.$refStrategy){case"root":return{$ref:t.path.join("/")};case"relative":return{$ref:HX(e.currentPath,t.path)};case"none":case"seen":return t.path.length<e.currentPath.length&&t.path.every((r,n)=>e.currentPath[n]===r)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),{}):e.$refStrategy==="seen"?{}:void 0}},HX=(t,e)=>{let r=0;for(;r<t.length&&r<e.length&&t[r]===e[r];r++);return[(t.length-r).toString(),...e.slice(r)].join("/")},WX=(t,e,r)=>(t.description&&(r.description=t.description,e.markdownDescription&&(r.markdownDescription=t.description)),r),KX=(t,e)=>{const r=dX(e),n=typeof e=="object"&&e.definitions?Object.entries(e.definitions).reduce((l,[c,d])=>({...l,[c]:It(d._def,{...r,currentPath:[...r.basePath,r.definitionPath,c]},!0)??{}}),{}):void 0,i=typeof e=="string"?e:(e==null?void 0:e.nameStrategy)==="title"||e==null?void 0:e.name,a=It(t._def,i===void 0?r:{...r,currentPath:[...r.basePath,r.definitionPath,i]},!1)??{},s=typeof e=="object"&&e.name!==void 0&&e.nameStrategy==="title"?e.name:void 0;s!==void 0&&(a.title=s);const o=i===void 0?n?{...a,[r.definitionPath]:n}:a:{$ref:[...r.$refStrategy==="relative"?[]:r.basePath,r.definitionPath,i].join("/"),[r.definitionPath]:{...n,[i]:a}};return r.target==="jsonSchema7"?o.$schema="http://json-schema.org/draft-07/schema#":(r.target==="jsonSchema2019-09"||r.target==="openAi")&&(o.$schema="https://json-schema.org/draft/2019-09/schema#"),r.target==="openAi"&&("anyOf"in o||"oneOf"in o||"allOf"in o||"type"in o&&Array.isArray(o.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),o},m_={dateStrategy:"integer",pipeStrategy:"output",$refStrategy:"none"},qX=(...t)=>(t[1]=typeof t[1]=="object"?{...m_,...t[1]}:m_,KX(...t));async function YX(t,e,r){const n=await t.safeParseAsync(e,{errorMap:r});return n.success?{data:n.data,success:!0}:{issues:n.error.issues.map(({message:i,path:a})=>({message:i,path:a})),success:!1}}function XX(t,e){return rX({superFormValidationLibrary:"zod",validate:async r=>YX(t,r,e==null?void 0:e.errorMap),jsonSchema:(e==null?void 0:e.jsonSchema)??qX(t,e==null?void 0:e.config),defaults:e==null?void 0:e.defaults})}const v_=oX(XX);function BS(t,e){return function(){return t.apply(e,arguments)}}const{toString:QX}=Object.prototype,{getPrototypeOf:B0}=Object,{iterator:hp,toStringTag:VS}=Symbol,gp=(t=>e=>{const r=QX.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Rn=t=>(t=t.toLowerCase(),e=>gp(e)===t),pp=t=>e=>typeof e===t,{isArray:No}=Array,xl=pp("undefined");function ZX(t){return t!==null&&!xl(t)&&t.constructor!==null&&!xl(t.constructor)&&Vr(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const jS=Rn("ArrayBuffer");function JX(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&jS(t.buffer),e}const eQ=pp("string"),Vr=pp("function"),zS=pp("number"),mp=t=>t!==null&&typeof t=="object",tQ=t=>t===!0||t===!1,ah=t=>{if(gp(t)!=="object")return!1;const e=B0(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(VS in t)&&!(hp in t)},rQ=Rn("Date"),nQ=Rn("File"),iQ=Rn("Blob"),aQ=Rn("FileList"),sQ=t=>mp(t)&&Vr(t.pipe),oQ=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Vr(t.append)&&((e=gp(t))==="formdata"||e==="object"&&Vr(t.toString)&&t.toString()==="[object FormData]"))},lQ=Rn("URLSearchParams"),[cQ,dQ,uQ,fQ]=["ReadableStream","Request","Response","Headers"].map(Rn),hQ=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function lf(t,e,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let n,i;if(typeof t!="object"&&(t=[t]),No(t))for(n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else{const a=r?Object.getOwnPropertyNames(t):Object.keys(t),s=a.length;let o;for(n=0;n<s;n++)o=a[n],e.call(null,t[o],o,t)}}function US(t,e){e=e.toLowerCase();const r=Object.keys(t);let n=r.length,i;for(;n-- >0;)if(i=r[n],e===i.toLowerCase())return i;return null}const wa=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,GS=t=>!xl(t)&&t!==wa;function Q1(){const{caseless:t}=GS(this)&&this||{},e={},r=(n,i)=>{const a=t&&US(e,i)||i;ah(e[a])&&ah(n)?e[a]=Q1(e[a],n):ah(n)?e[a]=Q1({},n):No(n)?e[a]=n.slice():e[a]=n};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&lf(arguments[n],r);return e}const gQ=(t,e,r,{allOwnKeys:n}={})=>(lf(e,(i,a)=>{r&&Vr(i)?t[a]=BS(i,r):t[a]=i},{allOwnKeys:n}),t),pQ=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),mQ=(t,e,r,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},vQ=(t,e,r,n)=>{let i,a,s;const o={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),a=i.length;a-- >0;)s=i[a],(!n||n(s,t,e))&&!o[s]&&(e[s]=t[s],o[s]=!0);t=r!==!1&&B0(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},yQ=(t,e,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;const n=t.indexOf(e,r);return n!==-1&&n===r},bQ=t=>{if(!t)return null;if(No(t))return t;let e=t.length;if(!zS(e))return null;const r=new Array(e);for(;e-- >0;)r[e]=t[e];return r},_Q=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&B0(Uint8Array)),wQ=(t,e)=>{const n=(t&&t[hp]).call(t);let i;for(;(i=n.next())&&!i.done;){const a=i.value;e.call(t,a[0],a[1])}},SQ=(t,e)=>{let r;const n=[];for(;(r=t.exec(e))!==null;)n.push(r);return n},xQ=Rn("HTMLFormElement"),IQ=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,i){return n.toUpperCase()+i}),y_=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),CQ=Rn("RegExp"),HS=(t,e)=>{const r=Object.getOwnPropertyDescriptors(t),n={};lf(r,(i,a)=>{let s;(s=e(i,a,t))!==!1&&(n[a]=s||i)}),Object.defineProperties(t,n)},PQ=t=>{HS(t,(e,r)=>{if(Vr(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=t[r];if(Vr(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},EQ=(t,e)=>{const r={},n=i=>{i.forEach(a=>{r[a]=!0})};return No(t)?n(t):n(String(t).split(e)),r},AQ=()=>{},TQ=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function OQ(t){return!!(t&&Vr(t.append)&&t[VS]==="FormData"&&t[hp])}const kQ=t=>{const e=new Array(10),r=(n,i)=>{if(mp(n)){if(e.indexOf(n)>=0)return;if(!("toJSON"in n)){e[i]=n;const a=No(n)?[]:{};return lf(n,(s,o)=>{const l=r(s,i+1);!xl(l)&&(a[o]=l)}),e[i]=void 0,a}}return n};return r(t,0)},RQ=Rn("AsyncFunction"),MQ=t=>t&&(mp(t)||Vr(t))&&Vr(t.then)&&Vr(t.catch),WS=((t,e)=>t?setImmediate:e?((r,n)=>(wa.addEventListener("message",({source:i,data:a})=>{i===wa&&a===r&&n.length&&n.shift()()},!1),i=>{n.push(i),wa.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Vr(wa.postMessage)),DQ=typeof queueMicrotask<"u"?queueMicrotask.bind(wa):typeof process<"u"&&process.nextTick||WS,NQ=t=>t!=null&&Vr(t[hp]),se={isArray:No,isArrayBuffer:jS,isBuffer:ZX,isFormData:oQ,isArrayBufferView:JX,isString:eQ,isNumber:zS,isBoolean:tQ,isObject:mp,isPlainObject:ah,isReadableStream:cQ,isRequest:dQ,isResponse:uQ,isHeaders:fQ,isUndefined:xl,isDate:rQ,isFile:nQ,isBlob:iQ,isRegExp:CQ,isFunction:Vr,isStream:sQ,isURLSearchParams:lQ,isTypedArray:_Q,isFileList:aQ,forEach:lf,merge:Q1,extend:gQ,trim:hQ,stripBOM:pQ,inherits:mQ,toFlatObject:vQ,kindOf:gp,kindOfTest:Rn,endsWith:yQ,toArray:bQ,forEachEntry:wQ,matchAll:SQ,isHTMLForm:xQ,hasOwnProperty:y_,hasOwnProp:y_,reduceDescriptors:HS,freezeMethods:PQ,toObjectSet:EQ,toCamelCase:IQ,noop:AQ,toFiniteNumber:TQ,findKey:US,global:wa,isContextDefined:GS,isSpecCompliantForm:OQ,toJSONObject:kQ,isAsyncFn:RQ,isThenable:MQ,setImmediate:WS,asap:DQ,isIterable:NQ};function it(t,e,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}se.inherits(it,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:se.toJSONObject(this.config),code:this.code,status:this.status}}});const KS=it.prototype,qS={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{qS[t]={value:t}});Object.defineProperties(it,qS);Object.defineProperty(KS,"isAxiosError",{value:!0});it.from=(t,e,r,n,i,a)=>{const s=Object.create(KS);return se.toFlatObject(t,s,function(l){return l!==Error.prototype},o=>o!=="isAxiosError"),it.call(s,t.message,e,r,n,i),s.cause=t,s.name=t.name,a&&Object.assign(s,a),s};const FQ=null;function Z1(t){return se.isPlainObject(t)||se.isArray(t)}function YS(t){return se.endsWith(t,"[]")?t.slice(0,-2):t}function b_(t,e,r){return t?t.concat(e).map(function(i,a){return i=YS(i),!r&&a?"["+i+"]":i}).join(r?".":""):e}function $Q(t){return se.isArray(t)&&!t.some(Z1)}const LQ=se.toFlatObject(se,{},null,function(e){return/^is[A-Z]/.test(e)});function vp(t,e,r){if(!se.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,r=se.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,v){return!se.isUndefined(v[m])});const n=r.metaTokens,i=r.visitor||d,a=r.dots,s=r.indexes,l=(r.Blob||typeof Blob<"u"&&Blob)&&se.isSpecCompliantForm(e);if(!se.isFunction(i))throw new TypeError("visitor must be a function");function c(h){if(h===null)return"";if(se.isDate(h))return h.toISOString();if(!l&&se.isBlob(h))throw new it("Blob is not supported. Use a Buffer instead.");return se.isArrayBuffer(h)||se.isTypedArray(h)?l&&typeof Blob=="function"?new Blob([h]):Buffer.from(h):h}function d(h,m,v){let b=h;if(h&&!v&&typeof h=="object"){if(se.endsWith(m,"{}"))m=n?m:m.slice(0,-2),h=JSON.stringify(h);else if(se.isArray(h)&&$Q(h)||(se.isFileList(h)||se.endsWith(m,"[]"))&&(b=se.toArray(h)))return m=YS(m),b.forEach(function(y,S){!(se.isUndefined(y)||y===null)&&e.append(s===!0?b_([m],S,a):s===null?m:m+"[]",c(y))}),!1}return Z1(h)?!0:(e.append(b_(v,m,a),c(h)),!1)}const u=[],g=Object.assign(LQ,{defaultVisitor:d,convertValue:c,isVisitable:Z1});function f(h,m){if(!se.isUndefined(h)){if(u.indexOf(h)!==-1)throw Error("Circular reference detected in "+m.join("."));u.push(h),se.forEach(h,function(b,x){(!(se.isUndefined(b)||b===null)&&i.call(e,b,se.isString(x)?x.trim():x,m,g))===!0&&f(b,m?m.concat(x):[x])}),u.pop()}}if(!se.isObject(t))throw new TypeError("data must be an object");return f(t),e}function __(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function V0(t,e){this._pairs=[],t&&vp(t,this,e)}const XS=V0.prototype;XS.append=function(e,r){this._pairs.push([e,r])};XS.toString=function(e){const r=e?function(n){return e.call(this,n,__)}:__;return this._pairs.map(function(i){return r(i[0])+"="+r(i[1])},"").join("&")};function BQ(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function QS(t,e,r){if(!e)return t;const n=r&&r.encode||BQ;se.isFunction(r)&&(r={serialize:r});const i=r&&r.serialize;let a;if(i?a=i(e,r):a=se.isURLSearchParams(e)?e.toString():new V0(e,r).toString(n),a){const s=t.indexOf("#");s!==-1&&(t=t.slice(0,s)),t+=(t.indexOf("?")===-1?"?":"&")+a}return t}class w_{constructor(){this.handlers=[]}use(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){se.forEach(this.handlers,function(n){n!==null&&e(n)})}}const ZS={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},VQ=typeof URLSearchParams<"u"?URLSearchParams:V0,jQ=typeof FormData<"u"?FormData:null,zQ=typeof Blob<"u"?Blob:null,UQ={isBrowser:!0,classes:{URLSearchParams:VQ,FormData:jQ,Blob:zQ},protocols:["http","https","file","blob","url","data"]},j0=typeof window<"u"&&typeof document<"u",J1=typeof navigator=="object"&&navigator||void 0,GQ=j0&&(!J1||["ReactNative","NativeScript","NS"].indexOf(J1.product)<0),HQ=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",WQ=j0&&window.location.href||"http://localhost",KQ=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:j0,hasStandardBrowserEnv:GQ,hasStandardBrowserWebWorkerEnv:HQ,navigator:J1,origin:WQ},Symbol.toStringTag,{value:"Module"})),xr={...KQ,...UQ};function qQ(t,e){return vp(t,new xr.classes.URLSearchParams,Object.assign({visitor:function(r,n,i,a){return xr.isNode&&se.isBuffer(r)?(this.append(n,r.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},e))}function YQ(t){return se.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function XQ(t){const e={},r=Object.keys(t);let n;const i=r.length;let a;for(n=0;n<i;n++)a=r[n],e[a]=t[a];return e}function JS(t){function e(r,n,i,a){let s=r[a++];if(s==="__proto__")return!0;const o=Number.isFinite(+s),l=a>=r.length;return s=!s&&se.isArray(i)?i.length:s,l?(se.hasOwnProp(i,s)?i[s]=[i[s],n]:i[s]=n,!o):((!i[s]||!se.isObject(i[s]))&&(i[s]=[]),e(r,n,i[s],a)&&se.isArray(i[s])&&(i[s]=XQ(i[s])),!o)}if(se.isFormData(t)&&se.isFunction(t.entries)){const r={};return se.forEachEntry(t,(n,i)=>{e(YQ(n),i,r,0)}),r}return null}function QQ(t,e,r){if(se.isString(t))try{return(e||JSON.parse)(t),se.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}const cf={transitional:ZS,adapter:["xhr","http","fetch"],transformRequest:[function(e,r){const n=r.getContentType()||"",i=n.indexOf("application/json")>-1,a=se.isObject(e);if(a&&se.isHTMLForm(e)&&(e=new FormData(e)),se.isFormData(e))return i?JSON.stringify(JS(e)):e;if(se.isArrayBuffer(e)||se.isBuffer(e)||se.isStream(e)||se.isFile(e)||se.isBlob(e)||se.isReadableStream(e))return e;if(se.isArrayBufferView(e))return e.buffer;if(se.isURLSearchParams(e))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(a){if(n.indexOf("application/x-www-form-urlencoded")>-1)return qQ(e,this.formSerializer).toString();if((o=se.isFileList(e))||n.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return vp(o?{"files[]":e}:e,l&&new l,this.formSerializer)}}return a||i?(r.setContentType("application/json",!1),QQ(e)):e}],transformResponse:[function(e){const r=this.transitional||cf.transitional,n=r&&r.forcedJSONParsing,i=this.responseType==="json";if(se.isResponse(e)||se.isReadableStream(e))return e;if(e&&se.isString(e)&&(n&&!this.responseType||i)){const s=!(r&&r.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(o){if(s)throw o.name==="SyntaxError"?it.from(o,it.ERR_BAD_RESPONSE,this,null,this.response):o}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:xr.classes.FormData,Blob:xr.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};se.forEach(["delete","get","head","post","put","patch"],t=>{cf.headers[t]={}});const ZQ=se.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),JQ=t=>{const e={};let r,n,i;return t&&t.split(`
`).forEach(function(s){i=s.indexOf(":"),r=s.substring(0,i).trim().toLowerCase(),n=s.substring(i+1).trim(),!(!r||e[r]&&ZQ[r])&&(r==="set-cookie"?e[r]?e[r].push(n):e[r]=[n]:e[r]=e[r]?e[r]+", "+n:n)}),e},S_=Symbol("internals");function tl(t){return t&&String(t).trim().toLowerCase()}function sh(t){return t===!1||t==null?t:se.isArray(t)?t.map(sh):String(t)}function eZ(t){const e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(t);)e[n[1]]=n[2];return e}const tZ=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function jm(t,e,r,n,i){if(se.isFunction(n))return n.call(this,e,r);if(i&&(e=r),!!se.isString(e)){if(se.isString(n))return e.indexOf(n)!==-1;if(se.isRegExp(n))return n.test(e)}}function rZ(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,r,n)=>r.toUpperCase()+n)}function nZ(t,e){const r=se.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+r,{value:function(i,a,s){return this[n].call(this,e,i,a,s)},configurable:!0})})}let jr=class{constructor(e){e&&this.set(e)}set(e,r,n){const i=this;function a(o,l,c){const d=tl(l);if(!d)throw new Error("header name must be a non-empty string");const u=se.findKey(i,d);(!u||i[u]===void 0||c===!0||c===void 0&&i[u]!==!1)&&(i[u||l]=sh(o))}const s=(o,l)=>se.forEach(o,(c,d)=>a(c,d,l));if(se.isPlainObject(e)||e instanceof this.constructor)s(e,r);else if(se.isString(e)&&(e=e.trim())&&!tZ(e))s(JQ(e),r);else if(se.isObject(e)&&se.isIterable(e)){let o={},l,c;for(const d of e){if(!se.isArray(d))throw TypeError("Object iterator must return a key-value pair");o[c=d[0]]=(l=o[c])?se.isArray(l)?[...l,d[1]]:[l,d[1]]:d[1]}s(o,r)}else e!=null&&a(r,e,n);return this}get(e,r){if(e=tl(e),e){const n=se.findKey(this,e);if(n){const i=this[n];if(!r)return i;if(r===!0)return eZ(i);if(se.isFunction(r))return r.call(this,i,n);if(se.isRegExp(r))return r.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,r){if(e=tl(e),e){const n=se.findKey(this,e);return!!(n&&this[n]!==void 0&&(!r||jm(this,this[n],n,r)))}return!1}delete(e,r){const n=this;let i=!1;function a(s){if(s=tl(s),s){const o=se.findKey(n,s);o&&(!r||jm(n,n[o],o,r))&&(delete n[o],i=!0)}}return se.isArray(e)?e.forEach(a):a(e),i}clear(e){const r=Object.keys(this);let n=r.length,i=!1;for(;n--;){const a=r[n];(!e||jm(this,this[a],a,e,!0))&&(delete this[a],i=!0)}return i}normalize(e){const r=this,n={};return se.forEach(this,(i,a)=>{const s=se.findKey(n,a);if(s){r[s]=sh(i),delete r[a];return}const o=e?rZ(a):String(a).trim();o!==a&&delete r[a],r[o]=sh(i),n[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const r=Object.create(null);return se.forEach(this,(n,i)=>{n!=null&&n!==!1&&(r[i]=e&&se.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,r])=>e+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...r){const n=new this(e);return r.forEach(i=>n.set(i)),n}static accessor(e){const n=(this[S_]=this[S_]={accessors:{}}).accessors,i=this.prototype;function a(s){const o=tl(s);n[o]||(nZ(i,s),n[o]=!0)}return se.isArray(e)?e.forEach(a):a(e),this}};jr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);se.reduceDescriptors(jr.prototype,({value:t},e)=>{let r=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(n){this[r]=n}}});se.freezeMethods(jr);function zm(t,e){const r=this||cf,n=e||r,i=jr.from(n.headers);let a=n.data;return se.forEach(t,function(o){a=o.call(r,a,i.normalize(),e?e.status:void 0)}),i.normalize(),a}function e6(t){return!!(t&&t.__CANCEL__)}function Fo(t,e,r){it.call(this,t??"canceled",it.ERR_CANCELED,e,r),this.name="CanceledError"}se.inherits(Fo,it,{__CANCEL__:!0});function t6(t,e,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?t(r):e(new it("Request failed with status code "+r.status,[it.ERR_BAD_REQUEST,it.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function iZ(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function aZ(t,e){t=t||10;const r=new Array(t),n=new Array(t);let i=0,a=0,s;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),d=n[a];s||(s=c),r[i]=l,n[i]=c;let u=a,g=0;for(;u!==i;)g+=r[u++],u=u%t;if(i=(i+1)%t,i===a&&(a=(a+1)%t),c-s<e)return;const f=d&&c-d;return f?Math.round(g*1e3/f):void 0}}function sZ(t,e){let r=0,n=1e3/e,i,a;const s=(c,d=Date.now())=>{r=d,i=null,a&&(clearTimeout(a),a=null),t.apply(null,c)};return[(...c)=>{const d=Date.now(),u=d-r;u>=n?s(c,d):(i=c,a||(a=setTimeout(()=>{a=null,s(i)},n-u)))},()=>i&&s(i)]}const kh=(t,e,r=3)=>{let n=0;const i=aZ(50,250);return sZ(a=>{const s=a.loaded,o=a.lengthComputable?a.total:void 0,l=s-n,c=i(l),d=s<=o;n=s;const u={loaded:s,total:o,progress:o?s/o:void 0,bytes:l,rate:c||void 0,estimated:c&&o&&d?(o-s)/c:void 0,event:a,lengthComputable:o!=null,[e?"download":"upload"]:!0};t(u)},r)},x_=(t,e)=>{const r=t!=null;return[n=>e[0]({lengthComputable:r,total:t,loaded:n}),e[1]]},I_=t=>(...e)=>se.asap(()=>t(...e)),oZ=xr.hasStandardBrowserEnv?((t,e)=>r=>(r=new URL(r,xr.origin),t.protocol===r.protocol&&t.host===r.host&&(e||t.port===r.port)))(new URL(xr.origin),xr.navigator&&/(msie|trident)/i.test(xr.navigator.userAgent)):()=>!0,lZ=xr.hasStandardBrowserEnv?{write(t,e,r,n,i,a){const s=[t+"="+encodeURIComponent(e)];se.isNumber(r)&&s.push("expires="+new Date(r).toGMTString()),se.isString(n)&&s.push("path="+n),se.isString(i)&&s.push("domain="+i),a===!0&&s.push("secure"),document.cookie=s.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function cZ(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function dZ(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function r6(t,e,r){let n=!cZ(e);return t&&(n||r==!1)?dZ(t,e):e}const C_=t=>t instanceof jr?{...t}:t;function za(t,e){e=e||{};const r={};function n(c,d,u,g){return se.isPlainObject(c)&&se.isPlainObject(d)?se.merge.call({caseless:g},c,d):se.isPlainObject(d)?se.merge({},d):se.isArray(d)?d.slice():d}function i(c,d,u,g){if(se.isUndefined(d)){if(!se.isUndefined(c))return n(void 0,c,u,g)}else return n(c,d,u,g)}function a(c,d){if(!se.isUndefined(d))return n(void 0,d)}function s(c,d){if(se.isUndefined(d)){if(!se.isUndefined(c))return n(void 0,c)}else return n(void 0,d)}function o(c,d,u){if(u in e)return n(c,d);if(u in t)return n(void 0,c)}const l={url:a,method:a,data:a,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:o,headers:(c,d,u)=>i(C_(c),C_(d),u,!0)};return se.forEach(Object.keys(Object.assign({},t,e)),function(d){const u=l[d]||i,g=u(t[d],e[d],d);se.isUndefined(g)&&u!==o||(r[d]=g)}),r}const n6=t=>{const e=za({},t);let{data:r,withXSRFToken:n,xsrfHeaderName:i,xsrfCookieName:a,headers:s,auth:o}=e;e.headers=s=jr.from(s),e.url=QS(r6(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),o&&s.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):"")));let l;if(se.isFormData(r)){if(xr.hasStandardBrowserEnv||xr.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if((l=s.getContentType())!==!1){const[c,...d]=l?l.split(";").map(u=>u.trim()).filter(Boolean):[];s.setContentType([c||"multipart/form-data",...d].join("; "))}}if(xr.hasStandardBrowserEnv&&(n&&se.isFunction(n)&&(n=n(e)),n||n!==!1&&oZ(e.url))){const c=i&&a&&lZ.read(a);c&&s.set(i,c)}return e},uZ=typeof XMLHttpRequest<"u",fZ=uZ&&function(t){return new Promise(function(r,n){const i=n6(t);let a=i.data;const s=jr.from(i.headers).normalize();let{responseType:o,onUploadProgress:l,onDownloadProgress:c}=i,d,u,g,f,h;function m(){f&&f(),h&&h(),i.cancelToken&&i.cancelToken.unsubscribe(d),i.signal&&i.signal.removeEventListener("abort",d)}let v=new XMLHttpRequest;v.open(i.method.toUpperCase(),i.url,!0),v.timeout=i.timeout;function b(){if(!v)return;const y=jr.from("getAllResponseHeaders"in v&&v.getAllResponseHeaders()),I={data:!o||o==="text"||o==="json"?v.responseText:v.response,status:v.status,statusText:v.statusText,headers:y,config:t,request:v};t6(function(D){r(D),m()},function(D){n(D),m()},I),v=null}"onloadend"in v?v.onloadend=b:v.onreadystatechange=function(){!v||v.readyState!==4||v.status===0&&!(v.responseURL&&v.responseURL.indexOf("file:")===0)||setTimeout(b)},v.onabort=function(){v&&(n(new it("Request aborted",it.ECONNABORTED,t,v)),v=null)},v.onerror=function(){n(new it("Network Error",it.ERR_NETWORK,t,v)),v=null},v.ontimeout=function(){let S=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const I=i.transitional||ZS;i.timeoutErrorMessage&&(S=i.timeoutErrorMessage),n(new it(S,I.clarifyTimeoutError?it.ETIMEDOUT:it.ECONNABORTED,t,v)),v=null},a===void 0&&s.setContentType(null),"setRequestHeader"in v&&se.forEach(s.toJSON(),function(S,I){v.setRequestHeader(I,S)}),se.isUndefined(i.withCredentials)||(v.withCredentials=!!i.withCredentials),o&&o!=="json"&&(v.responseType=i.responseType),c&&([g,h]=kh(c,!0),v.addEventListener("progress",g)),l&&v.upload&&([u,f]=kh(l),v.upload.addEventListener("progress",u),v.upload.addEventListener("loadend",f)),(i.cancelToken||i.signal)&&(d=y=>{v&&(n(!y||y.type?new Fo(null,t,v):y),v.abort(),v=null)},i.cancelToken&&i.cancelToken.subscribe(d),i.signal&&(i.signal.aborted?d():i.signal.addEventListener("abort",d)));const x=iZ(i.url);if(x&&xr.protocols.indexOf(x)===-1){n(new it("Unsupported protocol "+x+":",it.ERR_BAD_REQUEST,t));return}v.send(a||null)})},hZ=(t,e)=>{const{length:r}=t=t?t.filter(Boolean):[];if(e||r){let n=new AbortController,i;const a=function(c){if(!i){i=!0,o();const d=c instanceof Error?c:this.reason;n.abort(d instanceof it?d:new Fo(d instanceof Error?d.message:d))}};let s=e&&setTimeout(()=>{s=null,a(new it(`timeout ${e} of ms exceeded`,it.ETIMEDOUT))},e);const o=()=>{t&&(s&&clearTimeout(s),s=null,t.forEach(c=>{c.unsubscribe?c.unsubscribe(a):c.removeEventListener("abort",a)}),t=null)};t.forEach(c=>c.addEventListener("abort",a));const{signal:l}=n;return l.unsubscribe=()=>se.asap(o),l}},gZ=function*(t,e){let r=t.byteLength;if(r<e){yield t;return}let n=0,i;for(;n<r;)i=n+e,yield t.slice(n,i),n=i},pZ=async function*(t,e){for await(const r of mZ(t))yield*gZ(r,e)},mZ=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:r,value:n}=await e.read();if(r)break;yield n}}finally{await e.cancel()}},P_=(t,e,r,n)=>{const i=pZ(t,e);let a=0,s,o=l=>{s||(s=!0,n&&n(l))};return new ReadableStream({async pull(l){try{const{done:c,value:d}=await i.next();if(c){o(),l.close();return}let u=d.byteLength;if(r){let g=a+=u;r(g)}l.enqueue(new Uint8Array(d))}catch(c){throw o(c),c}},cancel(l){return o(l),i.return()}},{highWaterMark:2})},yp=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",i6=yp&&typeof ReadableStream=="function",vZ=yp&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),a6=(t,...e)=>{try{return!!t(...e)}catch{return!1}},yZ=i6&&a6(()=>{let t=!1;const e=new Request(xr.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),E_=64*1024,ev=i6&&a6(()=>se.isReadableStream(new Response("").body)),Rh={stream:ev&&(t=>t.body)};yp&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Rh[e]&&(Rh[e]=se.isFunction(t[e])?r=>r[e]():(r,n)=>{throw new it(`Response type '${e}' is not supported`,it.ERR_NOT_SUPPORT,n)})})})(new Response);const bZ=async t=>{if(t==null)return 0;if(se.isBlob(t))return t.size;if(se.isSpecCompliantForm(t))return(await new Request(xr.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(se.isArrayBufferView(t)||se.isArrayBuffer(t))return t.byteLength;if(se.isURLSearchParams(t)&&(t=t+""),se.isString(t))return(await vZ(t)).byteLength},_Z=async(t,e)=>{const r=se.toFiniteNumber(t.getContentLength());return r??bZ(e)},wZ=yp&&(async t=>{let{url:e,method:r,data:n,signal:i,cancelToken:a,timeout:s,onDownloadProgress:o,onUploadProgress:l,responseType:c,headers:d,withCredentials:u="same-origin",fetchOptions:g}=n6(t);c=c?(c+"").toLowerCase():"text";let f=hZ([i,a&&a.toAbortSignal()],s),h;const m=f&&f.unsubscribe&&(()=>{f.unsubscribe()});let v;try{if(l&&yZ&&r!=="get"&&r!=="head"&&(v=await _Z(d,n))!==0){let I=new Request(e,{method:"POST",body:n,duplex:"half"}),C;if(se.isFormData(n)&&(C=I.headers.get("content-type"))&&d.setContentType(C),I.body){const[D,E]=x_(v,kh(I_(l)));n=P_(I.body,E_,D,E)}}se.isString(u)||(u=u?"include":"omit");const b="credentials"in Request.prototype;h=new Request(e,{...g,signal:f,method:r.toUpperCase(),headers:d.normalize().toJSON(),body:n,duplex:"half",credentials:b?u:void 0});let x=await fetch(h);const y=ev&&(c==="stream"||c==="response");if(ev&&(o||y&&m)){const I={};["status","statusText","headers"].forEach(O=>{I[O]=x[O]});const C=se.toFiniteNumber(x.headers.get("content-length")),[D,E]=o&&x_(C,kh(I_(o),!0))||[];x=new Response(P_(x.body,E_,D,()=>{E&&E(),m&&m()}),I)}c=c||"text";let S=await Rh[se.findKey(Rh,c)||"text"](x,t);return!y&&m&&m(),await new Promise((I,C)=>{t6(I,C,{data:S,headers:jr.from(x.headers),status:x.status,statusText:x.statusText,config:t,request:h})})}catch(b){throw m&&m(),b&&b.name==="TypeError"&&/Load failed|fetch/i.test(b.message)?Object.assign(new it("Network Error",it.ERR_NETWORK,t,h),{cause:b.cause||b}):it.from(b,b&&b.code,t,h)}}),tv={http:FQ,xhr:fZ,fetch:wZ};se.forEach(tv,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const A_=t=>`- ${t}`,SZ=t=>se.isFunction(t)||t===null||t===!1,s6={getAdapter:t=>{t=se.isArray(t)?t:[t];const{length:e}=t;let r,n;const i={};for(let a=0;a<e;a++){r=t[a];let s;if(n=r,!SZ(r)&&(n=tv[(s=String(r)).toLowerCase()],n===void 0))throw new it(`Unknown adapter '${s}'`);if(n)break;i[s||"#"+a]=n}if(!n){const a=Object.entries(i).map(([o,l])=>`adapter ${o} `+(l===!1?"is not supported by the environment":"is not available in the build"));let s=e?a.length>1?`since :
`+a.map(A_).join(`
`):" "+A_(a[0]):"as no adapter specified";throw new it("There is no suitable adapter to dispatch the request "+s,"ERR_NOT_SUPPORT")}return n},adapters:tv};function Um(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Fo(null,t)}function T_(t){return Um(t),t.headers=jr.from(t.headers),t.data=zm.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),s6.getAdapter(t.adapter||cf.adapter)(t).then(function(n){return Um(t),n.data=zm.call(t,t.transformResponse,n),n.headers=jr.from(n.headers),n},function(n){return e6(n)||(Um(t),n&&n.response&&(n.response.data=zm.call(t,t.transformResponse,n.response),n.response.headers=jr.from(n.response.headers))),Promise.reject(n)})}const o6="1.9.0",bp={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{bp[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const O_={};bp.transitional=function(e,r,n){function i(a,s){return"[Axios v"+o6+"] Transitional option '"+a+"'"+s+(n?". "+n:"")}return(a,s,o)=>{if(e===!1)throw new it(i(s," has been removed"+(r?" in "+r:"")),it.ERR_DEPRECATED);return r&&!O_[s]&&(O_[s]=!0,console.warn(i(s," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(a,s,o):!0}};bp.spelling=function(e){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};function xZ(t,e,r){if(typeof t!="object")throw new it("options must be an object",it.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let i=n.length;for(;i-- >0;){const a=n[i],s=e[a];if(s){const o=t[a],l=o===void 0||s(o,a,t);if(l!==!0)throw new it("option "+a+" must be "+l,it.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new it("Unknown option "+a,it.ERR_BAD_OPTION)}}const oh={assertOptions:xZ,validators:bp},Fn=oh.validators;let Ma=class{constructor(e){this.defaults=e||{},this.interceptors={request:new w_,response:new w_}}async request(e,r){try{return await this._request(e,r)}catch(n){if(n instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const a=i.stack?i.stack.replace(/^.+\n/,""):"";try{n.stack?a&&!String(n.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+a):n.stack=a}catch{}}throw n}}_request(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=za(this.defaults,r);const{transitional:n,paramsSerializer:i,headers:a}=r;n!==void 0&&oh.assertOptions(n,{silentJSONParsing:Fn.transitional(Fn.boolean),forcedJSONParsing:Fn.transitional(Fn.boolean),clarifyTimeoutError:Fn.transitional(Fn.boolean)},!1),i!=null&&(se.isFunction(i)?r.paramsSerializer={serialize:i}:oh.assertOptions(i,{encode:Fn.function,serialize:Fn.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),oh.assertOptions(r,{baseUrl:Fn.spelling("baseURL"),withXsrfToken:Fn.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let s=a&&se.merge(a.common,a[r.method]);a&&se.forEach(["delete","get","head","post","put","patch","common"],h=>{delete a[h]}),r.headers=jr.concat(s,a);const o=[];let l=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(r)===!1||(l=l&&m.synchronous,o.unshift(m.fulfilled,m.rejected))});const c=[];this.interceptors.response.forEach(function(m){c.push(m.fulfilled,m.rejected)});let d,u=0,g;if(!l){const h=[T_.bind(this),void 0];for(h.unshift.apply(h,o),h.push.apply(h,c),g=h.length,d=Promise.resolve(r);u<g;)d=d.then(h[u++],h[u++]);return d}g=o.length;let f=r;for(u=0;u<g;){const h=o[u++],m=o[u++];try{f=h(f)}catch(v){m.call(this,v);break}}try{d=T_.call(this,f)}catch(h){return Promise.reject(h)}for(u=0,g=c.length;u<g;)d=d.then(c[u++],c[u++]);return d}getUri(e){e=za(this.defaults,e);const r=r6(e.baseURL,e.url,e.allowAbsoluteUrls);return QS(r,e.params,e.paramsSerializer)}};se.forEach(["delete","get","head","options"],function(e){Ma.prototype[e]=function(r,n){return this.request(za(n||{},{method:e,url:r,data:(n||{}).data}))}});se.forEach(["post","put","patch"],function(e){function r(n){return function(a,s,o){return this.request(za(o||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:a,data:s}))}}Ma.prototype[e]=r(),Ma.prototype[e+"Form"]=r(!0)});let IZ=class l6{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(a){r=a});const n=this;this.promise.then(i=>{if(!n._listeners)return;let a=n._listeners.length;for(;a-- >0;)n._listeners[a](i);n._listeners=null}),this.promise.then=i=>{let a;const s=new Promise(o=>{n.subscribe(o),a=o}).then(i);return s.cancel=function(){n.unsubscribe(a)},s},e(function(a,s,o){n.reason||(n.reason=new Fo(a,s,o),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const e=new AbortController,r=n=>{e.abort(n)};return this.subscribe(r),e.signal.unsubscribe=()=>this.unsubscribe(r),e.signal}static source(){let e;return{token:new l6(function(i){e=i}),cancel:e}}};function CZ(t){return function(r){return t.apply(null,r)}}function PZ(t){return se.isObject(t)&&t.isAxiosError===!0}const rv={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(rv).forEach(([t,e])=>{rv[e]=t});function c6(t){const e=new Ma(t),r=BS(Ma.prototype.request,e);return se.extend(r,Ma.prototype,e,{allOwnKeys:!0}),se.extend(r,e,null,{allOwnKeys:!0}),r.create=function(i){return c6(za(t,i))},r}const qt=c6(cf);qt.Axios=Ma;qt.CanceledError=Fo;qt.CancelToken=IZ;qt.isCancel=e6;qt.VERSION=o6;qt.toFormData=vp;qt.AxiosError=it;qt.Cancel=qt.CanceledError;qt.all=function(e){return Promise.all(e)};qt.spread=CZ;qt.isAxiosError=PZ;qt.mergeConfig=za;qt.AxiosHeaders=jr;qt.formToJSON=t=>JS(se.isHTMLForm(t)?new FormData(t):t);qt.getAdapter=s6.getAdapter;qt.HttpStatusCode=rv;qt.default=qt;const{Axios:xte,AxiosError:Ite,CanceledError:Cte,isCancel:Pte,CancelToken:Ete,VERSION:Ate,all:Tte,Cancel:Ote,isAxiosError:EZ,spread:kte,toFormData:Rte,AxiosHeaders:Mte,HttpStatusCode:Dte,formToJSON:Nte,getAdapter:Fte,mergeConfig:$te}=qt;function Sa(t,e){let r=Me(!1),n=Me(!1),i=Me(!1),a=Me(null),s=Me(null);function o(...c){l(),U(r,!0),t(...c).then(d=>{U(i,!0),U(a,d,!0),e!=null&&e.onSuccess&&e.onSuccess(p(a))}).catch(d=>{U(n,!0),U(s,AZ(d),!0),kF(p(s)),e!=null&&e.onError&&e.onError(p(s))}).finally(()=>{U(r,!1)})}function l(){U(r,!1),U(n,!1),U(i,!1),U(a,null),U(s,null)}return{get isLoading(){return p(r)},get isSuccess(){return p(i)},get isError(){return p(n)},get result(){return p(a)},get errors(){return p(s)},get fieldErrors(){var c;return(c=p(s))==null?void 0:c.fieldErrors},get nonFieldErrors(){var c;return(c=p(s))==null?void 0:c.nonFieldErrors},get nonFormErrors(){var c;return(c=p(s))==null?void 0:c.nonFormErrors},execute:o,reset:l}}const AZ=t=>{var e;if(EZ(t)){const r=(e=t==null?void 0:t.response)==null?void 0:e.data;if(r&&"details"in r&&r.details)return r.details}return t instanceof ur?t.details:{nonFormErrors:[t.message]}};function TZ(t){He();var e=Ke("Delete selections");w(t,e)}function OZ(t){He();var e=Ke("Add new environment");w(t,e)}function kZ(t){}var RZ=H("<!> <!>",1),MZ=H('<div class="mx-4 mt-6 flex flex-col gap-4"><div class="flex flex-col gap-2"><div class="flex items-center justify-between"><span class="text-neutral-11">Controls Position</span> <!></div> <!></div></div>');function DZ(t,e){le(e,!0);const n=ca().layoutCanvasContext,i=[{value:"tl",label:"Top Left"},{value:"tr",label:"Top Right"},{value:"bl",label:"Bottom Left"},{value:"br",label:"Bottom Right"}],a=R(()=>{var u;return((u=i.find(g=>g.value===n.transform.config.buttonsPosition))==null?void 0:u.label)??"Select a corner"});var s=MZ(),o=re(s),l=re(o),c=Y(re(l),2);Q4(c,{description:"Controls the corner of the layout that the control buttons are positioned."}),ne(l);var d=Y(l,2);M(d,()=>M0,(u,g)=>{g(u,{type:"single",get value(){return n.transform.config.buttonsPosition},set value(f){n.transform.config.buttonsPosition=f},children:(f,h)=>{var m=RZ(),v=P(m);M(v,()=>R0,(x,y)=>{y(x,{children:(S,I)=>{He();var C=Ke();Ee(()=>pt(C,p(a))),w(S,C)},$$slots:{default:!0}})});var b=Y(v,2);M(b,()=>O0,(x,y)=>{y(x,{children:(S,I)=>{var C=F(),D=P(C);Kt(D,17,()=>i,rr,(E,O)=>{var A=F(),k=P(A);M(k,()=>k0,(V,G)=>{G(V,{get value(){return p(O).value},children:(K,j)=>{He();var Q=Ke();Ee(()=>pt(Q,p(O).label)),w(K,Q)},$$slots:{default:!0}})}),w(E,A)}),w(S,C)},$$slots:{default:!0}})}),w(f,m)},$$slots:{default:!0}})}),ne(o),ne(s),w(t,s),ce()}var NZ=H("<!> <!>",1),FZ=H("<!> <!>",1),$Z=H("<!> <!>",1),LZ=H("<!> <!>",1),BZ=H("<!> <!>",1),VZ=H("<!> <!>",1),jZ=H("<!> <!>",1),zZ=H("<!> <!>",1),UZ=H("<!> <!>",1),GZ=H("<!> <!>",1),HZ=H("<!> <!>",1),WZ=H("<!> <!>",1),KZ=H("<!> <!>",1),qZ=H("<!> <!>",1),YZ=H("<!> <!>",1),XZ=H("<!> <!>",1),QZ=H("<!> <!>",1),ZZ=H("<!> <!>",1),JZ=H("<!> <!>",1),eJ=H("<!> <!>",1),tJ=H("<!> <!>",1),rJ=H("<!> <!>",1),nJ=H("<!> <!>",1),iJ=H("<!> <!>",1),aJ=H("<!> <!>",1),sJ=H("<!> <!>",1),oJ=H("<span>Add Point</span> <!>",1),lJ=H("<!> <!>",1),cJ=H("<!> <!>",1),dJ=H("<!> <!>",1),uJ=H('<form method="POST" autocomplete="off" class="mx-4 mb-8 mt-4"><!> <!> <!> <fieldset><div class="my-2 flex items-center"><span class="text-neutral-11 mr-2">Geometry</span> <span class="w-full"><!></span></div> <!> <!> <!></fieldset> <fieldset><div class="my-2 flex items-center"><span class="text-neutral-11 mr-2">Other</span> <span class="w-full"><!></span></div> <!></fieldset> <!></form>');function fJ(t,e){le(e,!0);const[r,n]=J_(),i=()=>Z_(c,"$formData",r),a=CY(),s=ca(),o=s.plantingAreaCreateForm.form,l=s.plantingAreaCreateForm.handler,{form:c,enhance:d}=o;qe(()=>{if(!s.id)throw tw.error("Error retrieving workspace context."),new ur("Error retrieving workspace context.");Et(c,$e(i).gardenId=Wf.params.gardenId,$e(i)),Et(c,$e(i).workspaceId=s.id,$e(i)),Et(c,$e(i).geometry.date=s.timelineSelection.focusUtc,$e(i)),Et(c,$e(i).location.date=s.timelineSelection.focusUtc,$e(i))});var u=uJ(),g=re(u);M(g,()=>Kr,(K,j)=>{j(K,{form:o,name:"name",children:(Q,te)=>{var q=FZ(),Z=P(q);M(Z,()=>Yr,(J,ie)=>{ie(J,{children:(ke,pe)=>{let B=()=>pe==null?void 0:pe().props;var X=NZ(),oe=P(X);M(oe,()=>qr,(he,we)=>{we(he,{get description(){return Ze.plantingAreaNameSchema.description},optional:!1,children:(be,ye)=>{He();var ue=Ke("Name");w(be,ue)},$$slots:{default:!0}})});var me=Y(oe,2);M(me,()=>zi,(he,we)=>{we(he,Be(B,{type:"text",placeholder:"Big Bed",get value(){return i().name},set value(be){Et(c,$e(i).name=be,$e(i))}}))}),w(ke,X)},$$slots:{default:!0}})});var ee=Y(Z,2);const de=R(()=>{var J;return(J=l.fieldErrors)==null?void 0:J.name});M(ee,()=>on,(J,ie)=>{ie(J,{get handlerErrors(){return p(de)}})}),w(Q,q)},$$slots:{default:!0}})});var f=Y(g,2);M(f,()=>Kr,(K,j)=>{j(K,{form:o,name:"description",children:(Q,te)=>{var q=LZ(),Z=P(q);M(Z,()=>Yr,(J,ie)=>{ie(J,{children:(ke,pe)=>{let B=()=>pe==null?void 0:pe().props;var X=$Z(),oe=P(X);M(oe,()=>qr,(he,we)=>{we(he,{get description(){return Ze.plantingAreaDescriptionSchema.description},optional:!0,children:(be,ye)=>{He();var ue=Ke("Description");w(be,ue)},$$slots:{default:!0}})});var me=Y(oe,2);M(me,()=>oS,(he,we)=>{we(he,Be(B,{get value(){return i().description},set value(be){Et(c,$e(i).description=be,$e(i))}}))}),w(ke,X)},$$slots:{default:!0}})});var ee=Y(Z,2);const de=R(()=>{var J;return(J=l.fieldErrors)==null?void 0:J.description});M(ee,()=>on,(J,ie)=>{ie(J,{get handlerErrors(){return p(de)}})}),w(Q,q)},$$slots:{default:!0}})});var h=Y(f,2);M(h,()=>Kr,(K,j)=>{j(K,{form:o,name:"location",children:(Q,te)=>{var q=F(),Z=P(q);M(Z,()=>Yr,(ee,de)=>{de(ee,{children:(ie,xe)=>{let ke=()=>xe==null?void 0:xe().props;var pe=BZ(),B=P(pe);M(B,()=>qr,(oe,me)=>{me(oe,{get description(){return Ze.coordinateSchema.description},optional:!1,children:(he,we)=>{He();var be=Ke("Position");w(he,be)},$$slots:{default:!0}})});var X=Y(B,2);j1(X,Be(ke,{get initialUnitSystem(){return a.units.distance},get x(){return i().location.coordinate.x},set x(oe){Et(c,$e(i).location.coordinate.x=oe,$e(i))},get y(){return i().location.coordinate.y},set y(oe){Et(c,$e(i).location.coordinate.y=oe,$e(i))}})),w(ie,pe)},$$slots:{default:!0}})}),w(Q,q)},$$slots:{default:!0}})});var m=Y(h,2),v=re(m),b=Y(re(v),2),x=re(b);M(x,()=>G2,(K,j)=>{j(K,{class:"w-full"})}),ne(b),ne(v);var y=Y(v,2);M(y,()=>Kr,(K,j)=>{j(K,{form:o,name:"geometry.type",children:(Q,te)=>{var q=jZ(),Z=P(q);M(Z,()=>Yr,(J,ie)=>{ie(J,{children:(ke,pe)=>{let B=()=>pe==null?void 0:pe().props;var X=VZ(),oe=P(X);M(oe,()=>qr,(he,we)=>{we(he,{get description(){return Ze.geometryTypeSchema.description},optional:!1,children:(be,ye)=>{He();var ue=Ke("Type");w(be,ue)},$$slots:{default:!0}})});var me=Y(oe,2);aS(me,Be(B,{get value(){return i().geometry.type},set value(he){Et(c,$e(i).geometry.type=he,$e(i))}})),w(ke,X)},$$slots:{default:!0}})});var ee=Y(Z,2);const de=R(()=>{var J;return(J=l.fieldErrors)==null?void 0:J["geometry.type"]});M(ee,()=>on,(J,ie)=>{ie(J,{get handlerErrors(){return p(de)}})}),w(Q,q)},$$slots:{default:!0}})});var S=Y(y,2);M(S,()=>Kr,(K,j)=>{j(K,{form:o,name:"geometry.rotation",children:(Q,te)=>{var q=UZ(),Z=P(q);M(Z,()=>Yr,(J,ie)=>{ie(J,{children:(ke,pe)=>{let B=()=>pe==null?void 0:pe().props;var X=zZ(),oe=P(X);M(oe,()=>qr,(he,we)=>{we(he,{get description(){return Ze.geometryRotationSchema.description},optional:!0,children:(be,ye)=>{He();var ue=Ke("Rotation");w(be,ue)},$$slots:{default:!0}})});var me=Y(oe,2);M(me,()=>zi,(he,we)=>{we(he,Be(B,{type:"number",get value(){return i().geometry.rotation},set value(be){Et(c,$e(i).geometry.rotation=be,$e(i))}}))}),w(ke,X)},$$slots:{default:!0}})});var ee=Y(Z,2);const de=R(()=>{var J;return(J=l.fieldErrors)==null?void 0:J["geometry.rotation"]});M(ee,()=>on,(J,ie)=>{ie(J,{get handlerErrors(){return p(de)}})}),w(Q,q)},$$slots:{default:!0}})});var I=Y(S,2);{var C=K=>{var j=qZ(),Q=P(j);M(Q,()=>Kr,(q,Z)=>{Z(q,{form:o,name:"geometry.rectangleLength",children:(ee,de)=>{var J=HZ(),ie=P(J);M(ie,()=>Yr,(pe,B)=>{B(pe,{children:(oe,me)=>{let he=()=>me==null?void 0:me().props;var we=GZ(),be=P(we);M(be,()=>qr,(ue,Le)=>{Le(ue,{get description(){return Ze.geometryRectangleLengthSchema.description},optional:!1,children:(Se,Ie)=>{He();var Ne=Ke("Length");w(Se,Ne)},$$slots:{default:!0}})});var ye=Y(be,2);ya(ye,Be(he,{min:0,quantityType:"distance",get initialUnitSystem(){return a.units.distance},get value(){return i().geometry.rectangleLength},set value(ue){Et(c,$e(i).geometry.rectangleLength=ue,$e(i))}})),w(oe,we)},$$slots:{default:!0}})});var xe=Y(ie,2);const ke=R(()=>{var pe;return(pe=l.fieldErrors)==null?void 0:pe["geometry.rectangleLength"]});M(xe,()=>on,(pe,B)=>{B(pe,{get handlerErrors(){return p(ke)}})}),w(ee,J)},$$slots:{default:!0}})});var te=Y(Q,2);M(te,()=>Kr,(q,Z)=>{Z(q,{form:o,name:"geometry.rectangleWidth",children:(ee,de)=>{var J=KZ(),ie=P(J);M(ie,()=>Yr,(pe,B)=>{B(pe,{children:(oe,me)=>{let he=()=>me==null?void 0:me().props;var we=WZ(),be=P(we);M(be,()=>qr,(ue,Le)=>{Le(ue,{get description(){return Ze.geometryRectangleWidthSchema.description},optional:!1,children:(Se,Ie)=>{He();var Ne=Ke("Width");w(Se,Ne)},$$slots:{default:!0}})});var ye=Y(be,2);ya(ye,Be(he,{min:0,quantityType:"distance",get initialUnitSystem(){return a.units.distance},get value(){return i().geometry.rectangleWidth},set value(ue){Et(c,$e(i).geometry.rectangleWidth=ue,$e(i))}})),w(oe,we)},$$slots:{default:!0}})});var xe=Y(ie,2);const ke=R(()=>{var pe;return(pe=l.fieldErrors)==null?void 0:pe["geometry.rectangleWidth"]});M(xe,()=>on,(pe,B)=>{B(pe,{get handlerErrors(){return p(ke)}})}),w(ee,J)},$$slots:{default:!0}})}),w(K,j)},D=(K,j)=>{{var Q=q=>{var Z=JZ(),ee=P(Z);M(ee,()=>Kr,(J,ie)=>{ie(J,{form:o,name:"geometry.polygonNumSides",children:(xe,ke)=>{var pe=XZ(),B=P(pe);M(B,()=>Yr,(me,he)=>{he(me,{children:(be,ye)=>{let ue=()=>ye==null?void 0:ye().props;var Le=YZ(),Se=P(Le);M(Se,()=>qr,(Ne,Pe)=>{Pe(Ne,{get description(){return Ze.geometryPolygonNumSidesSchema.description},optional:!1,children:(Te,Oe)=>{He();var ze=Ke("Side Count");w(Te,ze)},$$slots:{default:!0}})});var Ie=Y(Se,2);M(Ie,()=>zi,(Ne,Pe)=>{Pe(Ne,Be(ue,{type:"number",min:3,get value(){return i().geometry.polygonNumSides},set value(Te){Et(c,$e(i).geometry.polygonNumSides=Te,$e(i))}}))}),w(be,Le)},$$slots:{default:!0}})});var X=Y(B,2);const oe=R(()=>{var me;return(me=l.fieldErrors)==null?void 0:me["geometry.polygonNumSides"]});M(X,()=>on,(me,he)=>{he(me,{get handlerErrors(){return p(oe)}})}),w(xe,pe)},$$slots:{default:!0}})});var de=Y(ee,2);M(de,()=>Kr,(J,ie)=>{ie(J,{form:o,name:"geometry.polygonRadius",children:(xe,ke)=>{var pe=ZZ(),B=P(pe);M(B,()=>Yr,(me,he)=>{he(me,{children:(be,ye)=>{let ue=()=>ye==null?void 0:ye().props;var Le=QZ(),Se=P(Le);M(Se,()=>qr,(Ne,Pe)=>{Pe(Ne,{get description(){return Ze.geometryPolygonRadiusSchema.description},optional:!1,children:(Te,Oe)=>{He();var ze=Ke("Radius");w(Te,ze)},$$slots:{default:!0}})});var Ie=Y(Se,2);ya(Ie,Be(ue,{min:0,quantityType:"distance",get initialUnitSystem(){return a.units.distance},get value(){return i().geometry.polygonRadius},set value(Ne){Et(c,$e(i).geometry.polygonRadius=Ne,$e(i))}})),w(be,Le)},$$slots:{default:!0}})});var X=Y(B,2);const oe=R(()=>{var me;return(me=l.fieldErrors)==null?void 0:me["geometry.polygonRadius"]});M(X,()=>on,(me,he)=>{he(me,{get handlerErrors(){return p(oe)}})}),w(xe,pe)},$$slots:{default:!0}})}),w(q,Z)},te=(q,Z)=>{{var ee=J=>{var ie=iJ(),xe=P(ie);M(xe,()=>Kr,(pe,B)=>{B(pe,{form:o,name:"geometry.ellipseLength",children:(X,oe)=>{var me=tJ(),he=P(me);M(he,()=>Yr,(ye,ue)=>{ue(ye,{children:(Se,Ie)=>{let Ne=()=>Ie==null?void 0:Ie().props;var Pe=eJ(),Te=P(Pe);M(Te,()=>qr,(ze,Re)=>{Re(ze,{get description(){return Ze.geometryEllipseLengthSchema.description},optional:!1,children:(tt,Dt)=>{He();var or=Ke("Length Diameter");w(tt,or)},$$slots:{default:!0}})});var Oe=Y(Te,2);ya(Oe,Be(Ne,{min:0,quantityType:"distance",get initialUnitSystem(){return a.units.distance},get value(){return i().geometry.ellipseLength},set value(ze){Et(c,$e(i).geometry.ellipseLength=ze,$e(i))}})),w(Se,Pe)},$$slots:{default:!0}})});var we=Y(he,2);const be=R(()=>{var ye;return(ye=l.fieldErrors)==null?void 0:ye["geometry.ellipseLength"]});M(we,()=>on,(ye,ue)=>{ue(ye,{get handlerErrors(){return p(be)}})}),w(X,me)},$$slots:{default:!0}})});var ke=Y(xe,2);M(ke,()=>Kr,(pe,B)=>{B(pe,{form:o,name:"geometry.ellipseWidth",children:(X,oe)=>{var me=nJ(),he=P(me);M(he,()=>Yr,(ye,ue)=>{ue(ye,{children:(Se,Ie)=>{let Ne=()=>Ie==null?void 0:Ie().props;var Pe=rJ(),Te=P(Pe);M(Te,()=>qr,(ze,Re)=>{Re(ze,{get description(){return Ze.geometryEllipseWidthSchema.description},optional:!1,children:(tt,Dt)=>{He();var or=Ke("Width Diameter");w(tt,or)},$$slots:{default:!0}})});var Oe=Y(Te,2);ya(Oe,Be(Ne,{min:0,quantityType:"distance",get initialUnitSystem(){return a.units.distance},get value(){return i().geometry.ellipseWidth},set value(ze){Et(c,$e(i).geometry.ellipseWidth=ze,$e(i))}})),w(Se,Pe)},$$slots:{default:!0}})});var we=Y(he,2);const be=R(()=>{var ye;return(ye=l.fieldErrors)==null?void 0:ye["geometry.ellipseWidth"]});M(we,()=>on,(ye,ue)=>{ue(ye,{get handlerErrors(){return p(be)}})}),w(X,me)},$$slots:{default:!0}})}),w(J,ie)},de=(J,ie)=>{{var xe=ke=>{var pe=lJ(),B=P(pe);Kt(B,1,()=>i().geometry.linesCoordinates,rr,(oe,me,he)=>{var we=F(),be=P(we);M(be,()=>Kr,(ye,ue)=>{ue(ye,{form:o,name:`geometry.linesCoordinates[${he}]`,children:(Le,Se)=>{var Ie=sJ(),Ne=P(Ie);M(Ne,()=>Yr,(Oe,ze)=>{ze(Oe,{children:(tt,Dt)=>{let or=()=>Dt==null?void 0:Dt().props;var $=aJ(),ae=P($);M(ae,()=>qr,(Ae,je)=>{je(Ae,{get description(){return Ze.coordinateSchema.description},optional:!1,children:(rt,Gt)=>{He();var Hr=Ke();Hr.nodeValue=`Coordinate ${he}`,w(rt,Hr)},$$slots:{default:!0}})});var ve=Y(ae,2);j1(ve,Be(or,{get initialUnitSystem(){return a.units.distance},get x(){return i().geometry.linesCoordinates[he].x},set x(Ae){Et(c,$e(i).geometry.linesCoordinates[he].x=Ae,$e(i))},get y(){return i().geometry.linesCoordinates[he].y},set y(Ae){Et(c,$e(i).geometry.linesCoordinates[he].y=Ae,$e(i))}})),w(tt,$)},$$slots:{default:!0}})});var Pe=Y(Ne,2);const Te=R(()=>{var Oe;return(Oe=l.fieldErrors)==null?void 0:Oe[`geometry.linesCoordinates[${he}]`]});M(Pe,()=>on,(Oe,ze)=>{ze(Oe,{get handlerErrors(){return p(Te)}})}),w(Le,Ie)},$$slots:{default:!0}})}),w(oe,we)});var X=Y(B,2);M(X,()=>er,(oe,me)=>{me(oe,{onclick:()=>{Et(c,$e(i).geometry.linesCoordinates=[...i().geometry.linesCoordinates,{x:0,y:0}],$e(i))},variant:"outline",class:"mb-4 flex w-full items-center justify-between",children:(he,we)=>{var be=oJ(),ye=Y(P(be),2);Je(ye,{get icon(){return ot.addIcon},width:"1.5rem"}),w(he,be)},$$slots:{default:!0}})}),w(ke,pe)};fe(J,ke=>{i().geometry.type==="LINES"&&ke(xe)},ie)}};fe(q,J=>{i().geometry.type==="ELLIPSE"?J(ee):J(de,!1)},Z)}};fe(K,q=>{i().geometry.type==="POLYGON"?q(Q):q(te,!1)},j)}};fe(I,K=>{i().geometry.type==="RECTANGLE"?K(C):K(D,!1)})}ne(m);var E=Y(m,2),O=re(E),A=Y(re(O),2),k=re(A);M(k,()=>G2,(K,j)=>{j(K,{class:"w-full"})}),ne(A),ne(O);var V=Y(O,2);M(V,()=>Kr,(K,j)=>{j(K,{form:o,name:"depth",children:(Q,te)=>{var q=dJ(),Z=P(q);M(Z,()=>Yr,(J,ie)=>{ie(J,{children:(ke,pe)=>{let B=()=>pe==null?void 0:pe().props;var X=cJ(),oe=P(X);M(oe,()=>qr,(he,we)=>{we(he,{get description(){return Ze.plantingAreaDepthSchema.description},optional:!0,children:(be,ye)=>{He();var ue=Ke("Depth");w(be,ue)},$$slots:{default:!0}})});var me=Y(oe,2);ya(me,Be(B,{min:0,quantityType:"distance",get initialUnitSystem(){return a.units.distance},get value(){return i().depth},set value(he){Et(c,$e(i).depth=he,$e(i))}})),w(ke,X)},$$slots:{default:!0}})});var ee=Y(Z,2);const de=R(()=>{var J;return(J=l.fieldErrors)==null?void 0:J.depth});M(ee,()=>on,(J,ie)=>{ie(J,{get handlerErrors(){return p(de)}})}),w(Q,q)},$$slots:{default:!0}})}),ne(E);var G=Y(E,2);M(G,()=>aY,(K,j)=>{j(K,{disabled:!1,get loading(){return l.isLoading},variant:"default",class:"mt-4 w-full",children:(Q,te)=>{He();var q=Ke("Create");w(Q,q)},$$slots:{default:!0}})}),ne(u),_9(u,K=>d==null?void 0:d(K)),w(t,u),ce(),n()}function hJ(t){He();var e=Ke("Translate");w(t,e)}const gJ=[{id:"plantingAreaCreate",label:"Add Planting Area",ToolComponent:fJ},{id:"environmentCreate",label:"Add Environment",ToolComponent:OZ},{id:"translate",label:"Translate",ToolComponent:hJ},{id:"expire",label:"Expire",ToolComponent:kZ},{id:"delete",label:"Delete",ToolComponent:TZ},{id:"layoutConfig",label:"Layout Config",ToolComponent:DZ}];function pJ(){return Mq(gJ)}const d6="workspaceContext",mJ=(cp(),!0),vJ=cp()?"vertical":"horizontal";function yJ(t){const e=yr(e0);let r=Me(!1),n=eW("workspaceLayoutCanvas",t,hs);const i=pJ(),a=xY("workspacePaneSettings",mJ?["tree","layout"]:["layout"],vJ),s=Rq(["plantingArea","environment"]),o=Oq(),l=Sa(gF,{onSuccess:()=>{i.deactivate("plantingAreaCreate")}}),c=XY(QY(v_(Xb)),{SPA:!0,dataType:"json",validators:v_(Xb),onUpdate({form:u}){u.valid&&l.execute(u.data,e)},onChange(){l.reset()}});function d(){U(r,!1),s.resetAll(),c.reset(),n=rW("workspaceLayoutCanvas",t,hs)}return{get id(){return t},get editing(){return p(r)},get layoutCanvasContext(){return tW("workspaceLayoutCanvas")},canvas:n,toolbox:i,paneSettings:a,set editing(u){U(r,u,!0)},timelineSelection:o,selections:s,plantingAreaCreateForm:{handler:l,form:c},reset:d}}function bJ(t){return Ji(d6,yJ(t))}function ca(){return yr(d6)}function _J(t,e){le(e,!0);const[r,n]=J_(),i=()=>Z_(o,"$formData",r),a=ca(),s=a.layoutCanvasContext,{form:o}=a.plantingAreaCreateForm.form;function l(d){Et(o,$e(i).location.coordinate={x:s.transform.modelXPos(d.x),y:s.transform.modelYPos(d.y)},$e(i))}function c(d){d.rectangleLength&&Et(o,$e(i).geometry.rectangleLength=d.rectangleLength,$e(i)),d.rectangleWidth&&Et(o,$e(i).geometry.rectangleWidth=d.rectangleWidth,$e(i)),d.polygonNumSides&&Et(o,$e(i).geometry.polygonNumSides=d.polygonNumSides,$e(i)),d.polygonRadius&&Et(o,$e(i).geometry.polygonRadius=d.polygonRadius,$e(i)),d.ellipseLength&&Et(o,$e(i).geometry.ellipseLength=d.ellipseLength,$e(i)),d.ellipseWidth&&Et(o,$e(i).geometry.ellipseWidth=d.ellipseWidth,$e(i)),d.linesCoordinates&&d.linesCoordinates&&Et(o,$e(i).geometry.linesCoordinates=d.linesCoordinates,$e(i))}q4(t,{get canvasId(){return s.canvasId},get plantingAreaLayerId(){return e.plantingAreaLayerId},get name(){return i().name},showName:!0,get position(){return i().location.coordinate},get geometry(){return i().geometry},editable:!0,selected:!0,onTranslate:l,onTransform:c}),ce(),n()}function wJ(t,e){le(e,!0);const r=L0(),n=ca(),i=n.layoutCanvasContext,a=i.canvasId,s=Sa(fF),o=Sa(j5);let l=R(()=>{if(!e.plantingArea||!e.plantingArea.locationHistory)return null;const v=lF(e.plantingArea.locationHistory.locations,n.timelineSelection.focusUtc);return v&&v.workspaceId===n.id?{x:v.x,y:v.y}:null}),c=R(()=>n.editing&&!n.toolbox.isToolActive("plantingAreaCreate")),d=R(()=>n.selections.has("plantingArea",e.plantingArea.id));function u(v){!e.plantingArea||!n.id||s.execute({id:e.plantingArea.locationHistoryId,workspaceId:n.id,coordinate:{x:i.transform.modelXPos(v.x),y:i.transform.modelYPos(v.y)},date:n.timelineSelection.focusUtc},r)}function g(v){e.plantingArea&&o.execute(e.plantingArea.geometryId,v,r)}var f=F(),h=P(f);{var m=v=>{q4(v,{canvasId:a,get plantingAreaLayerId(){return e.plantingAreaLayerId},get name(){return e.plantingArea.name},showName:!0,get position(){return p(l)},get geometry(){return e.plantingArea.geometry},get editable(){return p(c)},get selected(){return p(d)},onTranslate:u,onTransform:g,onClick:()=>{n.toolbox.isToolActive("plantingAreaCreate")||n.selections.select("plantingArea",e.plantingArea.id)}})};fe(h,v=>{e.plantingArea&&e.plantingArea.geometry&&v(m)})}w(t,f),ce()}var SJ=H("<!> <!>",1),xJ=H("<!> <!>",1);function IJ(t,e){le(e,!0);const r=o=>{Wj(o,{canvasId:a})},n=ca(),a=n.layoutCanvasContext.canvasId,s="plantingAreas";F9(t,{canvasId:a,overlay:r,children:(o,l)=>{var c=xJ(),d=P(c);$9(d,{canvasId:a});var u=Y(d,2);KH(u,{canvasId:a,plantingAreaLayerId:s,children:(g,f)=>{var h=SJ(),m=P(h);{var v=x=>{_J(x,{plantingAreaLayerId:s})};fe(m,x=>{n.toolbox.isToolActive("plantingAreaCreate")&&x(v)})}var b=Y(m,2);Kt(b,17,()=>e.plantingAreas,rr,(x,y)=>{wJ(x,{get plantingArea(){return p(y)},plantingAreaLayerId:s})}),w(g,h)},$$slots:{default:!0}}),w(o,c)},$$slots:{default:!0}}),ce()}var CJ=H("<span>See All</span> <!>",1),PJ=H("<!> <!>",1),EJ=H("<span>Create Workspace</span> <!>",1),AJ=H("<!> <!>",1),TJ=H("<!> <!>",1),OJ=H("<!> <!>",1),kJ=H("<span>Pointer</span> <!>",1),RJ=H("<span>Group</span> <!>",1),MJ=H("<!> <!> <!>",1),DJ=H('<span class="text-sm"> </span> <!>',1),NJ=H('<span class="italic">None</span>'),FJ=H("<!> <!>",1),$J=H("<!> <!>",1),LJ=H("<!> <!>",1),BJ=H("<!> <span>End Editing</span>",1),VJ=H("<!> <span>Translate</span>",1),jJ=H("<!> <span>Delete</span>",1),zJ=H("<!> <!> <!>",1),UJ=H("<!> <span>Start Editing</span>",1),GJ=H("<!> <!>",1),HJ=H("<!> <span>Add Planting Area</span>",1),WJ=H("<!> <!>",1),KJ=H('<div class="flex w-full items-center justify-between"><span>Tree</span> <!></div>'),qJ=H('<div class="flex w-full items-center justify-between"><span>Layout</span> <!></div>'),YJ=H("<!> <!>",1),XJ=H("<!> <!>",1),QJ=H("<!> <!> <!>",1),ZJ=H("<!> <!> <!>",1),JJ=H("<!> <!>",1),eee=H("<!> <!> <!> <!>",1),tee=H("<!> <!>",1);function ree(t,e){le(e,!0);let r=T(e,"workspaces",19,()=>[]),n=T(e,"plantingAreas",19,()=>[]),i=T(e,"includeWorkspacesMenu",3,!0);const a=10,s=R(()=>n().filter(u=>l.selections.has("plantingArea",u.id))),o=AY(),l=ca();var c=F(),d=P(c);M(d,()=>_Y,(u,g)=>{g(u,{class:"border-neutral-8 justify-center border-0 border-b md:justify-start",children:(f,h)=>{var m=tee(),v=P(m);{var b=S=>{var I=F(),C=P(I);M(C,()=>Jo,(D,E)=>{E(D,{children:(O,A)=>{var k=OJ(),V=P(k);M(V,()=>Zo,(K,j)=>{j(K,{children:(Q,te)=>{He();var q=Ke("Workspaces");w(Q,q)},$$slots:{default:!0}})});var G=Y(V,2);M(G,()=>Qo,(K,j)=>{j(K,{children:(Q,te)=>{var q=TJ(),Z=P(q);M(Z,()=>Vf,(J,ie)=>{ie(J,{children:(xe,ke)=>{var pe=PJ(),B=P(pe);{var X=me=>{var he=F(),we=P(he);Kt(we,17,()=>Array.from({length:Math.min(r().length,a)},(be,ye)=>ye),rr,(be,ye)=>{var ue=F();const Le=R(()=>r()[p(ye)]);var Se=P(ue);M(Se,()=>Xr,(Ie,Ne)=>{Ne(Ie,{children:(Pe,Te)=>{var Oe=F(),ze=P(Oe);M(ze,()=>Qr,(Re,tt)=>{tt(Re,{onclick:()=>{X_(`/gardens/${Wf.params.gardenId}/workspaces/${p(Le).slug}`)},class:"text-light h-full w-full italic",children:(Dt,or)=>{He();var $=Ke();Ee(()=>pt($,p(Le).name)),w(Dt,$)},$$slots:{default:!0}})}),w(Pe,Oe)},$$slots:{default:!0}})}),w(be,ue)}),w(me,he)};fe(B,me=>{r().length>0&&me(X)})}var oe=Y(B,2);M(oe,()=>Xr,(me,he)=>{he(me,{children:(we,be)=>{var ye=F(),ue=P(ye);M(ue,()=>Qr,(Le,Se)=>{Se(Le,{get href(){return`/gardens/${Wf.params.gardenId??""}/workspaces`},class:"flex h-full w-full justify-between",children:(Ie,Ne)=>{var Pe=CJ(),Te=Y(P(Pe),2);Je(Te,{get icon(){return ot.listIcon},width:"1.25rem",class:"text-neutral-10"}),w(Ie,Pe)},$$slots:{default:!0}})}),w(we,ye)},$$slots:{default:!0}})}),w(xe,pe)},$$slots:{default:!0}})});var ee=Y(Z,2);{var de=J=>{var ie=AJ(),xe=P(ie);M(xe,()=>s_,(pe,B)=>{B(pe,{})});var ke=Y(xe,2);M(ke,()=>Xr,(pe,B)=>{B(pe,{children:(X,oe)=>{var me=F(),he=P(me);M(he,()=>Qr,(we,be)=>{be(we,{get href(){return`//gardens/${Wf.params.gardenId??""}/workspaces/create`},class:"flex h-full w-full items-center justify-between",children:(ye,ue)=>{var Le=EJ(),Se=Y(P(Le),2);Je(Se,{get icon(){return ot.addIcon},width:"1.25rem",class:"text-neutral-10"}),w(ye,Le)},$$slots:{default:!0}})}),w(X,me)},$$slots:{default:!0}})}),w(J,ie)};fe(ee,J=>{o.authorize("WorkspaceCreate")&&J(de)})}w(Q,q)},$$slots:{default:!0}})}),w(O,k)},$$slots:{default:!0}})}),w(S,I)};fe(v,S=>{i()&&S(b)})}var x=Y(v,2);{var y=S=>{var I=eee(),C=P(I);M(C,()=>Jo,(V,G)=>{G(V,{children:(K,j)=>{var Q=LJ(),te=P(Q);M(te,()=>Zo,(Z,ee)=>{ee(Z,{children:(de,J)=>{He();var ie=Ke("Select");w(de,ie)},$$slots:{default:!0}})});var q=Y(te,2);M(q,()=>Qo,(Z,ee)=>{ee(Z,{children:(de,J)=>{var ie=$J(),xe=P(ie);M(xe,()=>Vf,(pe,B)=>{B(pe,{children:(X,oe)=>{var me=MJ(),he=P(me);M(he,()=>i_,(ye,ue)=>{ue(ye,{children:(Le,Se)=>{He();var Ie=Ke("Tools");w(Le,Ie)},$$slots:{default:!0}})});var we=Y(he,2);M(we,()=>Xr,(ye,ue)=>{ue(ye,{children:(Le,Se)=>{var Ie=F(),Ne=P(Ie);M(Ne,()=>Qr,(Pe,Te)=>{Te(Pe,{class:"flex h-full w-full items-center justify-between",children:(Oe,ze)=>{var Re=kJ(),tt=Y(P(Re),2);Je(tt,{get icon(){return ot.pointerSelectIcon},width:"1.25rem",class:"text-neutral-10"}),w(Oe,Re)},$$slots:{default:!0}})}),w(Le,Ie)},$$slots:{default:!0}})});var be=Y(we,2);M(be,()=>Xr,(ye,ue)=>{ue(ye,{children:(Le,Se)=>{var Ie=F(),Ne=P(Ie);M(Ne,()=>Qr,(Pe,Te)=>{Te(Pe,{class:"flex h-full w-full items-center justify-between",children:(Oe,ze)=>{var Re=RJ(),tt=Y(P(Re),2);Je(tt,{get icon(){return ot.groupSelectIcon},width:"1.25rem",class:"text-neutral-10"}),w(Oe,Re)},$$slots:{default:!0}})}),w(Le,Ie)},$$slots:{default:!0}})}),w(X,me)},$$slots:{default:!0}})});var ke=Y(xe,2);M(ke,()=>Vf,(pe,B)=>{B(pe,{children:(X,oe)=>{var me=FJ(),he=P(me);M(he,()=>i_,(ue,Le)=>{Le(ue,{children:(Se,Ie)=>{He();var Ne=Ke("Planting Areas");w(Se,Ne)},$$slots:{default:!0}})});var we=Y(he,2);{var be=ue=>{var Le=F(),Se=P(Le);Kt(Se,17,()=>p(s),rr,(Ie,Ne)=>{var Pe=F(),Te=P(Pe);M(Te,()=>Xr,(Oe,ze)=>{ze(Oe,{class:"flex justify-between px-2",children:(Re,tt)=>{var Dt=DJ(),or=P(Dt),$=re(or,!0);ne(or);var ae=Y(or,2);M(ae,()=>Qr,(ve,Ae)=>{Ae(ve,{onclick:()=>{l.selections.deselect("plantingArea",p(Ne).id)},children:(je,rt)=>{Je(je,{get icon(){return ot.defaultClose},width:"1.25rem"})},$$slots:{default:!0}})}),Ee(()=>pt($,p(Ne).name)),w(Re,Dt)},$$slots:{default:!0}})}),w(Ie,Pe)}),w(ue,Le)},ye=ue=>{var Le=F(),Se=P(Le);M(Se,()=>Xr,(Ie,Ne)=>{Ne(Ie,{children:(Pe,Te)=>{var Oe=NJ();w(Pe,Oe)},$$slots:{default:!0}})}),w(ue,Le)};fe(we,ue=>{p(s).length>0?ue(be):ue(ye,!1)})}w(X,me)},$$slots:{default:!0}})}),w(de,ie)},$$slots:{default:!0}})}),w(K,Q)},$$slots:{default:!0}})});var D=Y(C,2);{var E=V=>{var G=F(),K=P(G);M(K,()=>Jo,(j,Q)=>{Q(j,{children:(te,q)=>{var Z=GJ(),ee=P(Z);M(ee,()=>Zo,(J,ie)=>{ie(J,{children:(xe,ke)=>{He();var pe=Ke("Edit");w(xe,pe)},$$slots:{default:!0}})});var de=Y(ee,2);M(de,()=>Qo,(J,ie)=>{ie(J,{children:(xe,ke)=>{var pe=F(),B=P(pe);{var X=me=>{var he=zJ(),we=P(he);M(we,()=>Xr,(ue,Le)=>{Le(ue,{children:(Se,Ie)=>{var Ne=F(),Pe=P(Ne);M(Pe,()=>Qr,(Te,Oe)=>{Oe(Te,{class:"flex h-full w-full items-center justify-start",onclick:()=>{l.editing=!1},children:(ze,Re)=>{var tt=BJ(),Dt=P(tt);Je(Dt,{get icon(){return ot.endEditingIcon},width:"1.25rem",class:"text-neutral-11 mr-2"}),He(2),w(ze,tt)},$$slots:{default:!0}})}),w(Se,Ne)},$$slots:{default:!0}})});var be=Y(we,2);M(be,()=>Xr,(ue,Le)=>{Le(ue,{children:(Se,Ie)=>{var Ne=F(),Pe=P(Ne);M(Pe,()=>Qr,(Te,Oe)=>{Oe(Te,{class:"flex h-full w-full items-center justify-start",onclick:()=>{l.toolbox.activate("translate")},children:(ze,Re)=>{var tt=VJ(),Dt=P(tt);Je(Dt,{get icon(){return ot.verdagraphTranslateIcon},width:"1.25rem",class:"text-neutral-11 mr-2"}),He(2),w(ze,tt)},$$slots:{default:!0}})}),w(Se,Ne)},$$slots:{default:!0}})});var ye=Y(be,2);M(ye,()=>Xr,(ue,Le)=>{Le(ue,{class:"flex items-center justify-start",children:(Se,Ie)=>{var Ne=jJ(),Pe=P(Ne);Je(Pe,{get icon(){return ot.deleteIcon},width:"1.25rem",class:"text-neutral-11 mr-2"}),He(2),w(Se,Ne)},$$slots:{default:!0}})}),w(me,he)},oe=me=>{var he=F(),we=P(he);M(we,()=>Xr,(be,ye)=>{ye(be,{children:(ue,Le)=>{var Se=F(),Ie=P(Se);M(Ie,()=>Qr,(Ne,Pe)=>{Pe(Ne,{class:"flex h-full w-full items-center justify-start",onclick:()=>{l.editing=!0},children:(Te,Oe)=>{var ze=UJ(),Re=P(ze);Je(Re,{get icon(){return ot.startEditingIcon},width:"1.25rem",class:"text-neutral-11 mr-2"}),He(2),w(Te,ze)},$$slots:{default:!0}})}),w(ue,Se)},$$slots:{default:!0}})}),w(me,he)};fe(B,me=>{l.editing?me(X):me(oe,!1)})}w(xe,pe)},$$slots:{default:!0}})}),w(te,Z)},$$slots:{default:!0}})}),w(V,G)};fe(D,V=>{o.authorize("WorkspaceEdit")&&V(E)})}var O=Y(D,2);{var A=V=>{var G=F(),K=P(G);M(K,()=>Jo,(j,Q)=>{Q(j,{children:(te,q)=>{var Z=WJ(),ee=P(Z);M(ee,()=>Zo,(J,ie)=>{ie(J,{children:(xe,ke)=>{He();var pe=Ke("Add");w(xe,pe)},$$slots:{default:!0}})});var de=Y(ee,2);M(de,()=>Qo,(J,ie)=>{ie(J,{children:(xe,ke)=>{var pe=F(),B=P(pe);M(B,()=>Xr,(X,oe)=>{oe(X,{children:(me,he)=>{var we=F(),be=P(we);M(be,()=>Qr,(ye,ue)=>{ue(ye,{class:"flex h-full w-full items-center justify-between",onclick:()=>{l.toolbox.activate("plantingAreaCreate")},children:(Le,Se)=>{var Ie=HJ(),Ne=P(Ie);Je(Ne,{get icon(){return ot.plantingAreaIcon},width:"1.25rem",class:"text-neutral-11"}),He(2),w(Le,Ie)},$$slots:{default:!0}})}),w(me,we)},$$slots:{default:!0}})}),w(xe,pe)},$$slots:{default:!0}})}),w(te,Z)},$$slots:{default:!0}})}),w(V,G)};fe(O,V=>{l.editing&&V(A)})}var k=Y(O,2);M(k,()=>Jo,(V,G)=>{G(V,{children:(K,j)=>{var Q=JJ(),te=P(Q);M(te,()=>Zo,(Z,ee)=>{ee(Z,{children:(de,J)=>{He();var ie=Ke("View");w(de,ie)},$$slots:{default:!0}})});var q=Y(te,2);M(q,()=>Qo,(Z,ee)=>{ee(Z,{children:(de,J)=>{var ie=ZJ(),xe=P(ie);M(xe,()=>Vf,(B,X)=>{X(B,{children:(oe,me)=>{var he=QJ(),we=P(he);const be=R(()=>l.paneSettings.isEnabled("tree")),ye=R(()=>!l.paneSettings.isEnabled("layout"));M(we,()=>n_,(Pe,Te)=>{Te(Pe,{get checked(){return p(be)},onCheckedChange:Oe=>{Oe?l.paneSettings.enable("tree"):l.paneSettings.disable("tree")},get disabled(){return p(ye)},children:(Oe,ze)=>{var Re=KJ(),tt=Y(re(Re),2);Je(tt,{get icon(){return ot.verdagraphTreeIcon},width:"1rem"}),ne(Re),w(Oe,Re)},$$slots:{default:!0}})});var ue=Y(we,2);const Le=R(()=>l.paneSettings.isEnabled("layout")),Se=R(()=>!l.paneSettings.isEnabled("tree"));M(ue,()=>n_,(Pe,Te)=>{Te(Pe,{get checked(){return p(Le)},onCheckedChange:Oe=>{Oe?l.paneSettings.enable("layout"):l.paneSettings.disable("layout")},get disabled(){return p(Se)},children:(Oe,ze)=>{var Re=qJ(),tt=Y(re(Re),2);Je(tt,{get icon(){return ot.verdagraphLayoutIcon},width:"1rem"}),ne(Re),w(Oe,Re)},$$slots:{default:!0}})});var Ie=Y(ue,2);{var Ne=Pe=>{var Te=F(),Oe=P(Te);M(Oe,()=>wY,(ze,Re)=>{Re(ze,{children:(tt,Dt)=>{var or=XJ(),$=P(or);M($,()=>bY,(ve,Ae)=>{Ae(ve,{children:(je,rt)=>{He();var Gt=Ke("Direction");w(je,Gt)},$$slots:{default:!0}})});var ae=Y($,2);M(ae,()=>vY,(ve,Ae)=>{Ae(ve,{children:(je,rt)=>{var Gt=F(),Hr=P(Gt);M(Hr,()=>SY,(ai,Yt)=>{Yt(ai,{get value(){return l.paneSettings.direction},set value(Lt){l.paneSettings.direction=Lt},children:(Lt,Bt)=>{var zt=YJ(),si=P(zt);M(si,()=>a_,(da,Ci)=>{Ci(da,{value:"horizontal",children:(mn,vn)=>{He();var Xt=Ke("Horizontal");w(mn,Xt)},$$slots:{default:!0}})});var _r=Y(si,2);M(_r,()=>a_,(da,Ci)=>{Ci(da,{value:"vertical",children:(mn,vn)=>{He();var Xt=Ke("Vertical");w(mn,Xt)},$$slots:{default:!0}})}),w(Lt,zt)},$$slots:{default:!0}})}),w(je,Gt)},$$slots:{default:!0}})}),w(tt,or)},$$slots:{default:!0}})}),w(Pe,Te)};fe(Ie,Pe=>{l.paneSettings.isEnabled("layout")&&l.paneSettings.isEnabled("tree")&&Pe(Ne)})}w(oe,he)},$$slots:{default:!0}})});var ke=Y(xe,2);M(ke,()=>s_,(B,X)=>{X(B,{})});var pe=Y(ke,2);M(pe,()=>Xr,(B,X)=>{X(B,{onclick:()=>{l.toolbox.activate("layoutConfig")},children:(oe,me)=>{He();var he=Ke("Layout Config");w(oe,he)},$$slots:{default:!0}})}),w(de,ie)},$$slots:{default:!0}})}),w(K,Q)},$$slots:{default:!0}})}),w(S,I)};fe(x,S=>{l.id&&S(y)})}w(f,m)},$$slots:{default:!0}})}),w(t,c),ce()}var nee=H('<span class="p-2 italic">No planting areas.</span>');function iee(t,e){le(e,!0);let r=T(e,"plantingAreas",19,()=>[]),n=T(e,"workspacesInGarden",19,()=>[]);const i=L0(),a=ca(),s=vr({}),o=Sa(pF),l=Sa(j5),c=Sa(uF),d=Sa(hF);let u=R(()=>r().map(b=>vK({plantingArea:b,workspaces:n()},{fieldErrors:s,plantingAreaUpdateHandler:(x,y)=>{o.execute(x,y,i)},geometryUpdateHandler:(x,y)=>{l.execute(x,y,i)},locationUpdateHandler:(x,y)=>{c.execute(x,y,i)},locationHistoryExtendHandler:x=>{d.execute(x,{date:a.timelineSelection.focusUtc},i)}})));const g=hK(()=>p(u),{plantingArea:{add:b=>{a.selections.select("plantingArea",b)},remove:b=>{a.selections.deselect("plantingArea",b)}}});a.selections.addSelectionChangeHandler("plantingArea",(b,x)=>{b.forEach(y=>{g.tree.select(fi("plantingArea",y))}),x.forEach(y=>{g.tree.deselect(fi("plantingArea",y))})});var f=F(),h=P(f);{var m=b=>{var x=nee();w(b,x)},v=b=>{var x=F(),y=P(x);M(y,()=>d9,(S,I)=>{I(S,{class:"w-full px-2",children:(C,D)=>{vW(C,{editableTree:g,get fieldErrors(){return s},get editing(){return a.editing}})},$$slots:{default:!0}})}),w(b,x)};fe(h,b=>{r().length===0?b(m):b(v,!1)})}w(t,f),ce()}var aee=H("<!> <!>",1);function see(t,e){var r=F(),n=P(r);M(n,()=>wS,(i,a)=>{a(i,{value:"plantingAreas",class:"bg-neutral-1 flex h-full flex-col",children:(s,o)=>{var l=aee(),c=P(l);M(c,()=>bS,(u,g)=>{g(u,{class:"h-8 shadow-none",children:(f,h)=>{var m=F(),v=P(m);M(v,()=>_S,(b,x)=>{x(b,{value:"plantingAreas",class:"border-neutral-5 text-neutral-11 flex w-full items-center justify-between border-b p-0 px-4 py-1",children:(y,S)=>{He();var I=Ke("Planting Areas");w(y,I)},$$slots:{default:!0}})}),w(f,m)},$$slots:{default:!0}})});var d=Y(c,2);M(d,()=>yS,(u,g)=>{g(u,{value:"plantingAreas",class:"mt-0 h-full overflow-clip",children:(f,h)=>{iee(f,{get plantingAreas(){return e.plantingAreas},get workspacesInGarden(){return e.workspacesInGarden}})},$$slots:{default:!0}})}),w(s,l)},$$slots:{default:!0}})}),w(t,r)}var oee=H("<!> <!>",1),lee=H("<!> <!>",1),cee=H("<!> <!> <!>",1),dee=H('<div class="flex h-full w-full flex-col"><!> <div class="h-full grow overflow-hidden"><!></div> <div class="bottom-0 h-24"><!></div></div>');function uee(t,e){le(e,!0);let r=T(e,"includeWorkspacesMenu",3,!0);const n=L0(),i=ca(),a=R(()=>Ah(n.triplit,n.triplit.query("plantingAreas").Where("locationHistory.workspaceIds","has",i.id).Include("geometry",b=>b("geometry").Include("linesCoordinates")).Include("locationHistory",b=>b("locationHistory").Include("locations")))),s=R(()=>p(a).results||[]);let o=R(()=>Ah(n.triplit,n.triplit.query("workspaces").Where(["gardenId","=",e.gardenId])));const l=R(()=>p(o).results||[]);let c=Me(!0);qe(()=>{i.paneSettings.direction&&(U(c,!1),U(c,!0))});var d=dee(),u=re(d);ree(u,{get workspaces(){return p(l)},get plantingAreas(){return p(s)},get includeWorkspacesMenu(){return r()}});var g=Y(u,2),f=re(g);{var h=b=>{var x=F(),y=P(x);M(y,()=>nq,(S,I)=>{I(S,{get direction(){return i.paneSettings.direction},children:(C,D)=>{var E=cee(),O=P(E);{var A=j=>{var Q=oee(),te=P(Q);M(te,()=>Nm,(Z,ee)=>{ee(Z,{defaultSize:70,order:1,minSize:10,children:(de,J)=>{var ie=F(),xe=P(ie);u9(xe,()=>i.id,ke=>{IJ(ke,{get plantingAreas(){return p(s)}})}),w(de,ie)},$$slots:{default:!0}})});var q=Y(te,2);M(q,()=>Q2,(Z,ee)=>{ee(Z,{withHandle:!1})}),w(j,Q)};fe(O,j=>{i.paneSettings.isEnabled("layout")&&j(A)})}var k=Y(O,2);{var V=j=>{var Q=lee(),te=P(Q);M(te,()=>Nm,(Z,ee)=>{ee(Z,{defaultSize:20,order:2,minSize:10,children:(de,J)=>{$q(de,{get toolbox(){return i.toolbox}})},$$slots:{default:!0}})});var q=Y(te,2);M(q,()=>Q2,(Z,ee)=>{ee(Z,{withHandle:!1})}),w(j,Q)};fe(k,j=>{i.toolbox.isActive&&j(V)})}var G=Y(k,2);{var K=j=>{var Q=F(),te=P(Q);M(te,()=>Nm,(q,Z)=>{Z(q,{defaultSize:30,order:3,minSize:10,children:(ee,de)=>{see(ee,{get plantingAreas(){return p(s)},get workspacesInGarden(){return p(l)}})},$$slots:{default:!0}})}),w(j,Q)};fe(G,j=>{i.paneSettings.isEnabled("tree")&&j(K)})}w(C,E)},$$slots:{default:!0}})}),w(b,x)};fe(f,b=>{p(c)&&b(h)})}ne(g);var m=Y(g,2),v=re(m);Cq(v,{get selection(){return i.timelineSelection}}),ne(m),ne(d),w(t,d),ce()}function k_(t,e=0,r=0,n=0){const i=new Date(t);return i.setDate(i.getDate()+e),i.setMonth(i.getMonth()+r),i.setFullYear(i.getFullYear()+n),i}const Gm={account:{id:"defaultUserAccount",profileId:"defaultUser",passwordHash:"password",unverifiedEmail:{},isActive:!0},profile:{id:"defaultUser",username:"Demo User",createdAt:new Date}},ln=new Date(2025,1,1),R_=new Date,ht="garden",wr="workspace";function fee(){return{profiles:[Gm.profile],accounts:[Gm.account],gardens:[{id:ht,name:"Garden",visibility:"PUBLIC",adminIds:[Gm.profile.id]}],workspaces:[{id:wr,gardenId:ht,name:"Workspace",slug:"workspace"}],plantingAreas:[{gardenId:ht,name:"Cedar 1",geometryId:"rectangle1",locationHistoryId:"rectangle1",description:""},{gardenId:ht,name:"Cedar 2",geometryId:"rectangle2",locationHistoryId:"rectangle2",description:""},{gardenId:ht,name:"Metal 1",geometryId:"ellipse1",locationHistoryId:"ellipse1",description:""},{gardenId:ht,name:"Metal 2",geometryId:"ellipse2",locationHistoryId:"ellipse2",description:""},{gardenId:ht,name:"Hexagonal Pot",geometryId:"polygon1",locationHistoryId:"polygon1",description:""},{gardenId:ht,name:"Corner",geometryId:"lines1",locationHistoryId:"lines1",description:""}],geometries:[{gardenId:ht,id:"rectangle1",type:"RECTANGLE",date:ln,rectangleLength:1,rectangleWidth:1+1/2},{gardenId:ht,id:"rectangle2",type:"RECTANGLE",date:ln,rectangleLength:1,rectangleWidth:1+1/2},{gardenId:ht,id:"ellipse1",type:"ELLIPSE",date:ln,ellipseLength:1,ellipseWidth:1+1/2,rotation:90},{gardenId:ht,id:"ellipse2",type:"ELLIPSE",date:ln,ellipseLength:1,ellipseWidth:1+1/2},{gardenId:ht,id:"polygon1",type:"POLYGON",date:ln,polygonNumSides:6,polygonRadius:1/4},{gardenId:ht,id:"lines1",type:"LINES",date:ln,linesClosed:!0,linesCoordinateIds:["lines1coord1","lines1coord2","lines1coord3","lines1coord4","lines1coord5","lines1coord6"]}],coordinates:[{gardenId:ht,id:"lines1coord1",x:0,y:0},{gardenId:ht,id:"lines1coord2",x:0,y:1},{gardenId:ht,id:"lines1coord3",x:1/2,y:1},{gardenId:ht,id:"lines1coord4",x:1/2,y:1/2},{gardenId:ht,id:"lines1coord5",x:1,y:1/2},{gardenId:ht,id:"lines1coord6",x:1,y:0}],locationHistories:[{gardenId:ht,workspaceIds:[wr],id:"rectangle1",locationIds:["rectangle1pos1"]},{gardenId:ht,workspaceIds:[wr],id:"rectangle2",locationIds:["rectangle2pos1"]},{gardenId:ht,workspaceIds:[wr],id:"ellipse1",locationIds:["ellipse1pos1"]},{gardenId:ht,workspaceIds:[wr],id:"ellipse2",locationIds:["ellipse2pos1"]},{gardenId:ht,workspaceIds:[wr],id:"polygon1",locationIds:["polygon1pos1","polygon1pos2","polygon1pos3"]},{gardenId:ht,workspaceIds:[wr],id:"lines1",locationIds:["lines1pos1"]}],locations:[{gardenId:ht,workspaceId:wr,id:"rectangle1pos1",date:ln,x:1+1/2,y:3+1/2},{gardenId:ht,workspaceId:wr,id:"rectangle2pos1",date:ln,x:3,y:3+1/2},{gardenId:ht,workspaceId:wr,id:"ellipse1pos1",date:ln,x:5,y:4+1/2},{gardenId:ht,workspaceId:wr,id:"ellipse2pos1",date:ln,x:6+1/2,y:3},{gardenId:ht,workspaceId:wr,id:"polygon1pos1",date:ln,x:4+1/2,y:2},{gardenId:ht,workspaceId:wr,id:"polygon1pos2",date:k_(R_,-3),x:4,y:2},{gardenId:ht,workspaceId:wr,id:"polygon1pos3",date:k_(R_,3),x:6+1/2,y:5},{gardenId:ht,workspaceId:wr,id:"lines1pos1",date:ln,x:1,y:1}]}}function hee(t,e){le(e,!1);const r=yr(e0),n=bJ(wr);n.editing=!0;const i=EY(r);i.id=ht,g6(),uee(t,{gardenId:ht,includeWorkspacesMenu:!1}),ce()}const gee={id:"workspace-editor",title:"Workspace Editor",description:"The workspace editor allows editing workspaces, planting areas, and environments.",component:hee,seed:fee},Lte=[gee];export{y1 as $,Nee as A,kv as B,ete as C,gg as D,kM as E,nte as F,CM as G,zee as H,Bee as I,N as J,Vee as K,OM as L,Uee as M,tte as N,VM as O,ho as P,Qee as Q,go as R,fh as S,po as T,Xee as U,bi as V,Zee as W,at as X,kb as Y,Dee as Z,ph as _,hh as a,ate as a0,hl as a1,AD as a2,Pi as a3,$b as a4,Gee as a5,CD as a6,hte as a7,vt as a8,r5 as a9,rte as aa,ite as ab,ED as ac,ote as ad,xn as ae,U3 as af,Nv as ag,Dv as ah,lte as ai,Tv as aj,ste as ak,dte as al,ute as am,fte as an,cte as ao,pte as ap,gte as aq,mte as ar,_te as as,e0 as at,Gm as au,an as b,Cr as c,Lte as d,Ye as e,$ee as f,Wee as g,rD as h,ga as i,Lee as j,Mb as k,Jee as l,qee as m,Yee as n,We as o,Fee as p,Hee as q,Kee as r,jee as s,br as t,Tn as u,Wi as v,Po as w,NM as x,e5 as y,FM as z};
